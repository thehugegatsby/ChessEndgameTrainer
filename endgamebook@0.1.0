
> endgamebook@0.1.0 test
> jest test

FAIL shared/services/mistakeAnalysis/__tests__/mistakeAnalyzer.test.ts
  ‚óè MistakeAnalyzer - Pure Logic Functions ‚Ä∫ generateMistakeExplanation ‚Ä∫ should adapt explanation complexity to skill level

    expect(received).toBeLessThan(expected)

    Expected: < 117
    Received:   167

      198 |
      199 |       // Beginner explanations should be simpler/shorter
    > 200 |       expect(beginnerExp.length).toBeLessThan(expertExp.length);
          |                                  ^
      201 |       expect(beginnerExp).not.toContain('centipawn'); // Avoid technical terms
      202 |     });
      203 |

      at Object.<anonymous> (shared/services/mistakeAnalysis/__tests__/mistakeAnalyzer.test.ts:200:34)

  ‚óè MistakeAnalyzer - Pure Logic Functions ‚Ä∫ generateMistakeExplanation ‚Ä∫ should handle multiple themes

    expect(received).toMatch(expected)

    Expected pattern: /king|safety/
    Received string:  "major blunder costing 300 centipawns - this significantly worsens your position. consider tactical motifs like pins, forks, and discovered attacks."

      211 |
      212 |       expect(explanation).toContain('tactical');
    > 213 |       expect(explanation.toLowerCase()).toMatch(/king|safety/);
          |                                         ^
      214 |     });
      215 |
      216 |     it('should provide encouraging tone for beginners', () => {

      at Object.<anonymous> (shared/services/mistakeAnalysis/__tests__/mistakeAnalyzer.test.ts:213:41)

PASS shared/__tests__/performance/reactContextPerformance.test.tsx
  ‚óè Console

    console.log
      üîç BASELINE: React Context with Move Objects

      at shared/__tests__/performance/reactContextPerformance.test.tsx:52:13

    console.log
      üìä BASELINE CONTEXT METRICS:

      at shared/__tests__/performance/reactContextPerformance.test.tsx:79:13

    console.log
        Initial Render: 22.01ms

      at shared/__tests__/performance/reactContextPerformance.test.tsx:80:13

    console.log
        Re-render Time: 2.01ms

      at shared/__tests__/performance/reactContextPerformance.test.tsx:81:13

    console.log
        Move Objects: 10

      at shared/__tests__/performance/reactContextPerformance.test.tsx:82:13

    console.log
        Context Size: ~690 chars

      at shared/__tests__/performance/reactContextPerformance.test.tsx:83:13

    console.log
      üìä Baseline Metrics: {
        "initialRenderTime": 22.005673000000115,
        "rerenderTime": 2.0069989999997233,
        "moveCount": 10,
        "contextComplexity": "high"
      }

      at shared/__tests__/performance/reactContextPerformance.test.tsx:98:13

    console.log
      üß† BASELINE: Memory Usage with Complex Objects

      at Object.<anonymous> (shared/__tests__/performance/reactContextPerformance.test.tsx:105:13)

    console.log
      üìä COMPLEX STATE METRICS:

      at Object.<anonymous> (shared/__tests__/performance/reactContextPerformance.test.tsx:127:13)

    console.log
        State Size: 9344 characters

      at Object.<anonymous> (shared/__tests__/performance/reactContextPerformance.test.tsx:128:13)

    console.log
        Move Objects: 100

      at Object.<anonymous> (shared/__tests__/performance/reactContextPerformance.test.tsx:129:13)

    console.log
        Evaluation Objects: 100

      at Object.<anonymous> (shared/__tests__/performance/reactContextPerformance.test.tsx:130:13)

    console.log
        Estimated Memory: ~9.13KB

      at Object.<anonymous> (shared/__tests__/performance/reactContextPerformance.test.tsx:131:13)

PASS shared/hooks/__tests__/useChessGame.comprehensive.test.ts
PASS shared/components/training/__tests__/DualEvaluationPanel.caching.test.tsx
  ‚óè Console

    console.info
      2025-07-03T18:08:53.146Z INFO [EngineService] Created engine 'dual-evaluation' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"dual-evaluation","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      32 |         
      33 |         if (isMounted) {
    > 34 |           setEngine(engineInstance);
         |           ^
      35 |           setIsLoading(false);
      36 |         }
      37 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/hooks/useEngine.ts:34:11
      at fulfilled (shared/hooks/useEngine.ts:9:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      33 |         if (isMounted) {
      34 |           setEngine(engineInstance);
    > 35 |           setIsLoading(false);
         |           ^
      36 |         }
      37 |       } catch (err) {
      38 |         if (isMounted) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/hooks/useEngine.ts:35:11
      at fulfilled (shared/hooks/useEngine.ts:9:58)

    console.debug
      2025-07-03T18:08:53.179Z DEBUG [EngineService] Engine 'dual-evaluation' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"dual-evaluation"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.180Z DEBUG [EngineService] Engine 'dual-evaluation' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"dual-evaluation"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      32 |         
      33 |         if (isMounted) {
    > 34 |           setEngine(engineInstance);
         |           ^
      35 |           setIsLoading(false);
      36 |         }
      37 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/hooks/useEngine.ts:34:11
      at fulfilled (shared/hooks/useEngine.ts:9:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      33 |         if (isMounted) {
      34 |           setEngine(engineInstance);
    > 35 |           setIsLoading(false);
         |           ^
      36 |         }
      37 |       } catch (err) {
      38 |         if (isMounted) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/hooks/useEngine.ts:35:11
      at fulfilled (shared/hooks/useEngine.ts:9:58)

    console.debug
      2025-07-03T18:08:53.187Z DEBUG [EngineService] Engine 'dual-evaluation' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"dual-evaluation"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.188Z DEBUG [EngineService] Engine 'dual-evaluation' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"dual-evaluation"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

PASS shared/components/training/TrainingBoard/components/__tests__/ChessboardContainer.test.tsx
PASS shared/contexts/__tests__/TrainingContext.comprehensive.test.tsx
PASS shared/hooks/__tests__/useChessGame.performance.test.ts
  ‚óè Console

    console.log
      Baseline: makeMove triggered 1 re-renders

      at shared/hooks/__tests__/useChessGame.performance.test.ts:32:15

    console.log
      Baseline: Average makeMove execution time: 1.23ms

      at shared/hooks/__tests__/useChessGame.performance.test.ts:62:15

    console.log
      Baseline: Memory increase after 6 moves: 1.65MB

      at shared/hooks/__tests__/useChessGame.performance.test.ts:99:15

    console.log
      Baseline: Single move triggered 1 state update effects

      at shared/hooks/__tests__/useChessGame.performance.test.ts:128:15

    console.log
      \n=== BASELINE PERFORMANCE METRICS ===

      at shared/hooks/__tests__/useChessGame.performance.test.ts:164:15

    console.log
      Re-renders per move: 2

      at shared/hooks/__tests__/useChessGame.performance.test.ts:165:15

    console.log
      Execution time: 0.79ms

      at shared/hooks/__tests__/useChessGame.performance.test.ts:166:15

    console.log
      Target after optimization:

      at shared/hooks/__tests__/useChessGame.performance.test.ts:167:15

    console.log
        - Re-renders: 1 (single atomic update)

      at shared/hooks/__tests__/useChessGame.performance.test.ts:168:15

    console.log
        - Execution time: <0.39ms (50% improvement)

      at shared/hooks/__tests__/useChessGame.performance.test.ts:169:15

    console.log
      ===================================\n

      at shared/hooks/__tests__/useChessGame.performance.test.ts:170:15

PASS shared/components/training/__tests__/MovePanel.comprehensive.test.tsx
  ‚óè Console

    console.log
      üîç Using engine evaluation: { evaluation: 0.3, mate: undefined, side: 'white' }

      at getSmartMoveEvaluation (shared/components/training/MovePanel.tsx:82:13)
          at Array.map (<anonymous>)

    console.log
      üîç Using engine evaluation: { evaluation: -0.2, mate: undefined, side: 'black' }

      at getSmartMoveEvaluation (shared/components/training/MovePanel.tsx:82:13)
          at Array.map (<anonymous>)

    console.log
      üîç Using engine evaluation: { evaluation: 2.5, mate: undefined, side: 'white' }

      at getSmartMoveEvaluation (shared/components/training/MovePanel.tsx:82:13)
          at Array.map (<anonymous>)

    console.log
      üîç Using engine evaluation: { evaluation: -2.5, mate: undefined, side: 'black' }

      at getSmartMoveEvaluation (shared/components/training/MovePanel.tsx:82:13)
          at Array.map (<anonymous>)

    console.log
      üîç Using engine evaluation: { evaluation: 2.5, mate: undefined, side: 'white' }

      at getSmartMoveEvaluation (shared/components/training/MovePanel.tsx:82:13)
          at Array.map (<anonymous>)

    console.log
      üîç Using engine evaluation: { evaluation: 0, mate: undefined, side: 'white' }

      at getSmartMoveEvaluation (shared/components/training/MovePanel.tsx:82:13)
          at Array.map (<anonymous>)

    console.log
      üîç Using engine evaluation: { evaluation: 0, mate: 3, side: 'white' }

      at getSmartMoveEvaluation (shared/components/training/MovePanel.tsx:82:13)
          at Array.map (<anonymous>)

    console.log
      üîç Using tablebase comparison: { wdlBefore: 1, wdlAfter: 1, side: 'white' }

      at getSmartMoveEvaluation (shared/components/training/MovePanel.tsx:68:15)
          at Array.map (<anonymous>)

    console.log
      üîç Using tablebase comparison: { wdlBefore: 1, wdlAfter: 1, side: 'white' }

      at getSmartMoveEvaluation (shared/components/training/MovePanel.tsx:68:15)
          at Array.map (<anonymous>)

PASS shared/store/__tests__/store.test.ts
PASS shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts
  ‚óè Console

    console.debug
      2025-07-03T18:08:52.881Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.error
      2025-07-03T18:08:52.994Z ERROR [ScenarioEngine] Invalid FEN provided {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"fen":""} Error: FEN must be a non-empty string
      Stack: Error: FEN must be a non-empty string
          at ScenarioEngine.validateFen (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:78:21)
          at new ScenarioEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:56:12)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:46:9
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/home/thehu/coolProjects/EndgameTrainer/node_modules/expect/build/index.js:320:21)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:47:10)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      71 |       case LogLevel.ERROR:
      72 |       case LogLevel.FATAL:
    > 73 |         console.error(formatted);
         |                 ^
      74 |         break;
      75 |     }
      76 |   }

      at ConsoleTransport.log (shared/services/logging/Logger.ts:73:17)
      at shared/services/logging/Logger.ts:191:52
          at Array.forEach (<anonymous>)
      at Logger.log (shared/services/logging/Logger.ts:191:21)
      at Logger.error (shared/services/logging/Logger.ts:207:10)
      at ScenarioEngine.validateFen (shared/lib/chess/ScenarioEngine/index.ts:79:14)
      at new ScenarioEngine (shared/lib/chess/ScenarioEngine/index.ts:56:12)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:46:9
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:47:10)

    console.error
      2025-07-03T18:08:52.997Z ERROR [ScenarioEngine] Invalid FEN provided {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"fen":null} Error: FEN must be a non-empty string
      Stack: Error: FEN must be a non-empty string
          at ScenarioEngine.validateFen (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:78:21)
          at new ScenarioEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:56:12)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:52:9
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/home/thehu/coolProjects/EndgameTrainer/node_modules/expect/build/index.js:320:21)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:53:10)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      71 |       case LogLevel.ERROR:
      72 |       case LogLevel.FATAL:
    > 73 |         console.error(formatted);
         |                 ^
      74 |         break;
      75 |     }
      76 |   }

      at ConsoleTransport.log (shared/services/logging/Logger.ts:73:17)
      at shared/services/logging/Logger.ts:191:52
          at Array.forEach (<anonymous>)
      at Logger.log (shared/services/logging/Logger.ts:191:21)
      at Logger.error (shared/services/logging/Logger.ts:207:10)
      at ScenarioEngine.validateFen (shared/lib/chess/ScenarioEngine/index.ts:79:14)
      at new ScenarioEngine (shared/lib/chess/ScenarioEngine/index.ts:56:12)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:52:9
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:53:10)

    console.debug
      2025-07-03T18:08:52.998Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.001Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.003Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [ScenarioEngine] Move failed: Error: Invalid move: {"from":"z9","to":"z8"}
          at Chess.move (/home/thehu/coolProjects/EndgameTrainer/node_modules/chess.js/dist/cjs/chess.js:2532:23)
          at ScenarioEngine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:129:37)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:16:12)
          at ScenarioEngine.makeMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:106:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:74:43
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:73:57)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      151 |       return moveWithColor;
      152 |     } catch (error) {
    > 153 |       console.warn('[ScenarioEngine] Move failed:', error);
          |               ^
      154 |       return null;
      155 |     }
      156 |   }

      at ScenarioEngine.<anonymous> (shared/lib/chess/ScenarioEngine/index.ts:153:15)
      at shared/lib/chess/ScenarioEngine/index.ts:20:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/ScenarioEngine/index.ts:16:12)
      at ScenarioEngine.makeMove (shared/lib/chess/ScenarioEngine/index.ts:106:16)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:74:43
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:73:57)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.013Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.017Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [ScenarioEngine] Move failed: Error: Invalid move: undefined
          at Chess.move (/home/thehu/coolProjects/EndgameTrainer/node_modules/chess.js/dist/cjs/chess.js:2532:23)
          at ScenarioEngine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:129:37)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:16:12)
          at ScenarioEngine.makeMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:106:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:85:43
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:84:58)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      151 |       return moveWithColor;
      152 |     } catch (error) {
    > 153 |       console.warn('[ScenarioEngine] Move failed:', error);
          |               ^
      154 |       return null;
      155 |     }
      156 |   }

      at ScenarioEngine.<anonymous> (shared/lib/chess/ScenarioEngine/index.ts:153:15)
      at shared/lib/chess/ScenarioEngine/index.ts:20:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/ScenarioEngine/index.ts:16:12)
      at ScenarioEngine.makeMove (shared/lib/chess/ScenarioEngine/index.ts:106:16)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:85:43
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:84:58)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.019Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [ScenarioEngine] Move failed: Error: Invalid move: {"from":"e6"}
          at Chess.move (/home/thehu/coolProjects/EndgameTrainer/node_modules/chess.js/dist/cjs/chess.js:2532:23)
          at ScenarioEngine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:129:37)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:16:12)
          at ScenarioEngine.makeMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:106:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:90:44
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:89:66)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      151 |       return moveWithColor;
      152 |     } catch (error) {
    > 153 |       console.warn('[ScenarioEngine] Move failed:', error);
          |               ^
      154 |       return null;
      155 |     }
      156 |   }

      at ScenarioEngine.<anonymous> (shared/lib/chess/ScenarioEngine/index.ts:153:15)
      at shared/lib/chess/ScenarioEngine/index.ts:20:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/ScenarioEngine/index.ts:16:12)
      at ScenarioEngine.makeMove (shared/lib/chess/ScenarioEngine/index.ts:106:16)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:90:44
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:89:66)

    console.warn
      [ScenarioEngine] Move failed: Error: Invalid move: {"to":"f6"}
          at Chess.move (/home/thehu/coolProjects/EndgameTrainer/node_modules/chess.js/dist/cjs/chess.js:2532:23)
          at ScenarioEngine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:129:37)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:16:12)
          at ScenarioEngine.makeMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:106:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:93:44
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:5:58)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      151 |       return moveWithColor;
      152 |     } catch (error) {
    > 153 |       console.warn('[ScenarioEngine] Move failed:', error);
          |               ^
      154 |       return null;
      155 |     }
      156 |   }

      at ScenarioEngine.<anonymous> (shared/lib/chess/ScenarioEngine/index.ts:153:15)
      at shared/lib/chess/ScenarioEngine/index.ts:20:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/ScenarioEngine/index.ts:16:12)
      at ScenarioEngine.makeMove (shared/lib/chess/ScenarioEngine/index.ts:106:16)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:93:44
      at fulfilled (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:5:58)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.024Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.027Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.030Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [ScenarioEngine] Engine move failed: Error: Invalid move: {"from":"z9","to":"z8"}
          at Chess.move (/home/thehu/coolProjects/EndgameTrainer/node_modules/chess.js/dist/cjs/chess.js:2532:23)
          at ScenarioEngine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:141:22)
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:17:58)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)

      145 |           });
      146 |         } catch (error) {
    > 147 |           console.warn('[ScenarioEngine] Engine move failed:', error);
          |                   ^
      148 |         }
      149 |       }
      150 |       

      at ScenarioEngine.<anonymous> (shared/lib/chess/ScenarioEngine/index.ts:147:19)
      at fulfilled (shared/lib/chess/ScenarioEngine/index.ts:17:58)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.033Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [ScenarioEngine] getBestMove failed: Error: Engine error
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:140:56
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:139:63)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      172 |       return null;
      173 |     } catch (error) {
    > 174 |       console.warn('[ScenarioEngine] getBestMove failed:', error);
          |               ^
      175 |       return null;
      176 |     }
      177 |   }

      at ScenarioEngine.<anonymous> (shared/lib/chess/ScenarioEngine/index.ts:174:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/ScenarioEngine/index.ts:18:65)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.035Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [ScenarioEngine] getBestMove failed: Error: Invalid FEN
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:147:56
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:146:63)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      172 |       return null;
      173 |     } catch (error) {
    > 174 |       console.warn('[ScenarioEngine] getBestMove failed:', error);
          |               ^
      175 |       return null;
      176 |     }
      177 |   }

      at ScenarioEngine.<anonymous> (shared/lib/chess/ScenarioEngine/index.ts:174:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/ScenarioEngine/index.ts:18:65)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.047Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.049Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [ScenarioEngine] getBestMove failed: Error: Timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:169:60
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      172 |       return null;
      173 |     } catch (error) {
    > 174 |       console.warn('[ScenarioEngine] getBestMove failed:', error);
          |               ^
      175 |       return null;
      176 |     }
      177 |   }

      at ScenarioEngine.<anonymous> (shared/lib/chess/ScenarioEngine/index.ts:174:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/ScenarioEngine/index.ts:18:65)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.153Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [EvaluationService] Mistake analysis failed: Error: Evaluation failed
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:184:32
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:182:62)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      64 |
      65 |     } catch (error) {
    > 66 |       console.warn('[EvaluationService] Mistake analysis failed:', error);
         |               ^
      67 |       return false;
      68 |     }
      69 |   }

      at EvaluationService.<anonymous> (shared/lib/chess/ScenarioEngine/evaluationService.ts:66:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/ScenarioEngine/evaluationService.ts:12:65)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.156Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [EvaluationService] Mistake analysis failed: Error: Evaluation failed
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:197:28
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:195:67)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      64 |
      65 |     } catch (error) {
    > 66 |       console.warn('[EvaluationService] Mistake analysis failed:', error);
         |               ^
      67 |       return false;
      68 |     }
      69 |   }

      at EvaluationService.<anonymous> (shared/lib/chess/ScenarioEngine/evaluationService.ts:66:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/ScenarioEngine/evaluationService.ts:12:65)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.158Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [EvaluationService] Mistake analysis failed: Error: Invalid FEN
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:208:61
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:207:56)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      64 |
      65 |     } catch (error) {
    > 66 |       console.warn('[EvaluationService] Mistake analysis failed:', error);
         |               ^
      67 |       return false;
      68 |     }
      69 |   }

      at EvaluationService.<anonymous> (shared/lib/chess/ScenarioEngine/evaluationService.ts:66:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/ScenarioEngine/evaluationService.ts:12:65)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.160Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.162Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.163Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.error
      [ScenarioEngine] Engine initialization failed

      102 |   private validateEngineInitialization(): void {
      103 |     if (!this.engine) {
    > 104 |       console.error('[ScenarioEngine] Engine initialization failed');
          |               ^
      105 |       throw new Error('[ScenarioEngine] Engine failed to initialize');
      106 |     }
      107 |   }

      at ScenarioEngine.validateEngineInitialization (shared/lib/chess/ScenarioEngine/index.ts:104:15)
      at new ScenarioEngine (shared/lib/chess/ScenarioEngine/index.ts:70:10)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:250:9
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:251:10)

    console.warn
      [ScenarioEngine] Cleanup failed: TypeError: Cannot read properties of null (reading 'clearCache')
          at ScenarioEngine.quit (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:257:29)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusHook (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:281:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:254:5)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      264 |       console.log(`[ScenarioEngine] Instance cleaned up. Remaining: ${ScenarioEngine.instanceCount}`);
      265 |     } catch (error) {
    > 266 |       console.warn('[ScenarioEngine] Cleanup failed:', error);
          |               ^
      267 |     }
      268 |   }
      269 |

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:266:15)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)

    console.debug
      2025-07-03T18:08:53.170Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [ScenarioEngine] getBestMove failed: TypeError: this.engine.getBestMove is not a function
          at ScenarioEngine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:165:42)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:16:12)
          at ScenarioEngine.getBestMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:142:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:265:45
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:254:77)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      172 |       return null;
      173 |     } catch (error) {
    > 174 |       console.warn('[ScenarioEngine] getBestMove failed:', error);
          |               ^
      175 |       return null;
      176 |     }
      177 |   }

      at ScenarioEngine.<anonymous> (shared/lib/chess/ScenarioEngine/index.ts:174:15)
      at shared/lib/chess/ScenarioEngine/index.ts:20:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/ScenarioEngine/index.ts:16:12)
      at ScenarioEngine.getBestMove (shared/lib/chess/ScenarioEngine/index.ts:142:16)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:265:45
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:254:77)

    console.warn
      [EvaluationService] Mistake analysis failed: TypeError: this.engine.evaluatePosition is not a function
          at EvaluationService.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/evaluationService.ts:37:21)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/evaluationService.ts:14:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/evaluationService.ts:10:12)
          at EvaluationService.isCriticalMistake (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/evaluationService.ts:34:16)
          at ScenarioEngine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:184:35)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:16:12)
          at ScenarioEngine.isCriticalMistake (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:162:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:268:46
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:5:58)

      64 |
      65 |     } catch (error) {
    > 66 |       console.warn('[EvaluationService] Mistake analysis failed:', error);
         |               ^
      67 |       return false;
      68 |     }
      69 |   }

      at EvaluationService.<anonymous> (shared/lib/chess/ScenarioEngine/evaluationService.ts:66:15)
      at shared/lib/chess/ScenarioEngine/evaluationService.ts:14:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/ScenarioEngine/evaluationService.ts:10:12)
      at EvaluationService.isCriticalMistake (shared/lib/chess/ScenarioEngine/evaluationService.ts:34:16)
      at ScenarioEngine.<anonymous> (shared/lib/chess/ScenarioEngine/index.ts:184:35)
      at shared/lib/chess/ScenarioEngine/index.ts:20:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/ScenarioEngine/index.ts:16:12)
      at ScenarioEngine.isCriticalMistake (shared/lib/chess/ScenarioEngine/index.ts:162:16)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:268:46
      at fulfilled (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:5:58)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.176Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.warn
      [ScenarioEngine] Cleanup failed: TypeError: Cannot read properties of null (reading 'clearCache')
          at ScenarioEngine.quit (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:257:29)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusHook (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:281:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:254:5)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      264 |       console.log(`[ScenarioEngine] Instance cleaned up. Remaining: ${ScenarioEngine.instanceCount}`);
      265 |     } catch (error) {
    > 266 |       console.warn('[ScenarioEngine] Cleanup failed:', error);
          |               ^
      267 |     }
      268 |   }
      269 |

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:266:15)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)

    console.debug
      2025-07-03T18:08:53.178Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 2

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.warn
      [ScenarioEngine] Cleanup failed: TypeError: Cannot read properties of null (reading 'clearCache')
          at ScenarioEngine.quit (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:257:29)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusHook (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:281:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:254:5)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      264 |       console.log(`[ScenarioEngine] Instance cleaned up. Remaining: ${ScenarioEngine.instanceCount}`);
      265 |     } catch (error) {
    > 266 |       console.warn('[ScenarioEngine] Cleanup failed:', error);
          |               ^
      267 |     }
      268 |   }
      269 |

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:266:15)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)

    console.debug
      2025-07-03T18:08:53.180Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 1

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.warn
      [ScenarioEngine] Cleanup failed: TypeError: Cannot read properties of null (reading 'clearCache')
          at ScenarioEngine.quit (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:257:29)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusHook (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:281:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:254:5)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      264 |       console.log(`[ScenarioEngine] Instance cleaned up. Remaining: ${ScenarioEngine.instanceCount}`);
      265 |     } catch (error) {
    > 266 |       console.warn('[ScenarioEngine] Cleanup failed:', error);
          |               ^
      267 |     }
      268 |   }
      269 |

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:266:15)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)

    console.debug
      2025-07-03T18:08:53.182Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.warn
      [ScenarioEngine] Cleanup failed: TypeError: Cannot read properties of null (reading 'clearCache')
          at ScenarioEngine.quit (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:257:29)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:334:24
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/home/thehu/coolProjects/EndgameTrainer/node_modules/expect/build/index.js:320:21)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:336:14)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      264 |       console.log(`[ScenarioEngine] Instance cleaned up. Remaining: ${ScenarioEngine.instanceCount}`);
      265 |     } catch (error) {
    > 266 |       console.warn('[ScenarioEngine] Cleanup failed:', error);
          |               ^
      267 |     }
      268 |   }
      269 |

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:266:15)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:334:24
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:336:14)

    console.warn
      [ScenarioEngine] Cleanup failed: TypeError: Cannot read properties of null (reading 'clearCache')
          at ScenarioEngine.quit (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:257:29)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:335:24
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/home/thehu/coolProjects/EndgameTrainer/node_modules/expect/build/index.js:320:21)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:336:14)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      264 |       console.log(`[ScenarioEngine] Instance cleaned up. Remaining: ${ScenarioEngine.instanceCount}`);
      265 |     } catch (error) {
    > 266 |       console.warn('[ScenarioEngine] Cleanup failed:', error);
          |               ^
      267 |     }
      268 |   }
      269 |

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:266:15)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:335:24
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:336:14)

    console.warn
      [ScenarioEngine] Cleanup failed: TypeError: Cannot read properties of null (reading 'clearCache')
          at ScenarioEngine.quit (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:257:29)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusHook (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:281:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:254:5)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      264 |       console.log(`[ScenarioEngine] Instance cleaned up. Remaining: ${ScenarioEngine.instanceCount}`);
      265 |     } catch (error) {
    > 266 |       console.warn('[ScenarioEngine] Cleanup failed:', error);
          |               ^
      267 |     }
      268 |   }
      269 |

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:266:15)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)

    console.debug
      2025-07-03T18:08:53.186Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":-2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: -3

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.error
      [ScenarioEngine] Reset failed: TypeError: Cannot read properties of null (reading 'load')
          at ScenarioEngine.reset (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:236:18)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:349:24
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/node_modules/expect/build/toThrowMatchers.js:74:11)
          at Object.throwingMatcher [as toThrow] (/home/thehu/coolProjects/EndgameTrainer/node_modules/expect/build/index.js:320:21)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:350:10
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:339:58)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      236 |       this.chess.load(this.initialFen);
      237 |     } catch (error) {
    > 238 |       console.error('[ScenarioEngine] Reset failed:', error);
          |               ^
      239 |       throw new Error('[ScenarioEngine] Failed to reset to initial position');
      240 |     }
      241 |   }

      at ScenarioEngine.reset (shared/lib/chess/ScenarioEngine/index.ts:238:15)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:349:24
      at Object.<anonymous> (node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:320:21)
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:350:10
      at shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:8:71
      at Object.<anonymous>.__awaiter (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:4:12)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:339:58)

    console.warn
      [ScenarioEngine] Cleanup failed: TypeError: Cannot read properties of null (reading 'clearCache')
          at ScenarioEngine.quit (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/ScenarioEngine/index.ts:257:29)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusHook (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:281:40)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:254:5)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      264 |       console.log(`[ScenarioEngine] Instance cleaned up. Remaining: ${ScenarioEngine.instanceCount}`);
      265 |     } catch (error) {
    > 266 |       console.warn('[ScenarioEngine] Cleanup failed:', error);
          |               ^
      267 |     }
      268 |   }
      269 |

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:266:15)
      at Object.<anonymous> (shared/lib/chess/__tests__/ScenarioEngine.errorHandling.test.ts:33:22)

    console.debug
      2025-07-03T18:08:53.204Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":-3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: -4

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.207Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":-3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: -4

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.208Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":-3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: -4

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.209Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":-3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: -4

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.210Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":-3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: -4

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

PASS shared/components/ui/button.test.tsx
PASS shared/components/training/DualEvaluationPanel/__tests__/EvaluationComparison.test.tsx
PASS shared/components/training/DualEvaluationPanel/__tests__/index.test.tsx
  ‚óè Console

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      51 |         
      52 |         if (isMounted) {
    > 53 |           setEvaluation(result);
         |           ^
      54 |           onEvaluationUpdate?.(result);
      55 |         }
      56 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:53:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      60 |       } finally {
      61 |         if (isMounted) {
    > 62 |           setIsEvaluating(false);
         |           ^
      63 |         }
      64 |       }
      65 |     };

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:62:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      51 |         
      52 |         if (isMounted) {
    > 53 |           setEvaluation(result);
         |           ^
      54 |           onEvaluationUpdate?.(result);
      55 |         }
      56 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:53:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      60 |       } finally {
      61 |         if (isMounted) {
    > 62 |           setIsEvaluating(false);
         |           ^
      63 |         }
      64 |       }
      65 |     };

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:62:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      51 |         
      52 |         if (isMounted) {
    > 53 |           setEvaluation(result);
         |           ^
      54 |           onEvaluationUpdate?.(result);
      55 |         }
      56 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:53:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      60 |       } finally {
      61 |         if (isMounted) {
    > 62 |           setIsEvaluating(false);
         |           ^
      63 |         }
      64 |       }
      65 |     };

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:62:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      51 |         
      52 |         if (isMounted) {
    > 53 |           setEvaluation(result);
         |           ^
      54 |           onEvaluationUpdate?.(result);
      55 |         }
      56 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:53:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      60 |       } finally {
      61 |         if (isMounted) {
    > 62 |           setIsEvaluating(false);
         |           ^
      63 |         }
      64 |       }
      65 |     };

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:62:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      51 |         
      52 |         if (isMounted) {
    > 53 |           setEvaluation(result);
         |           ^
      54 |           onEvaluationUpdate?.(result);
      55 |         }
      56 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:53:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      60 |       } finally {
      61 |         if (isMounted) {
    > 62 |           setIsEvaluating(false);
         |           ^
      63 |         }
      64 |       }
      65 |     };

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:62:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      51 |         
      52 |         if (isMounted) {
    > 53 |           setEvaluation(result);
         |           ^
      54 |           onEvaluationUpdate?.(result);
      55 |         }
      56 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:53:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      60 |       } finally {
      61 |         if (isMounted) {
    > 62 |           setIsEvaluating(false);
         |           ^
      63 |         }
      64 |       }
      65 |     };

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:62:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      51 |         
      52 |         if (isMounted) {
    > 53 |           setEvaluation(result);
         |           ^
      54 |           onEvaluationUpdate?.(result);
      55 |         }
      56 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:53:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

    console.error
      Warning: An update to DualEvaluationPanel inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at DualEvaluationPanel (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/DualEvaluationPanel/index.tsx:24:3)

      60 |       } finally {
      61 |         if (isMounted) {
    > 62 |           setIsEvaluating(false);
         |           ^
      63 |         }
      64 |       }
      65 |     };

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/DualEvaluationPanel/index.tsx:62:11
      at fulfilled (shared/components/training/DualEvaluationPanel/index.tsx:44:58)

PASS shared/components/ui/ProgressCard.comprehensive.test.tsx
PASS shared/components/training/__tests__/AnalysisPanel.comprehensive.test.tsx
PASS shared/components/layout/Header.test.tsx
PASS shared/hooks/__tests__/useChessGame.optimized.test.ts
  ‚óè Console

    console.log
      \n=== UNDO OPERATION COMPARISON ===

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:89:15

    console.log
      Original: -1 new Chess instances for 4 undos

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:90:15

    console.log
      Original duration: 5.20ms

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:91:15

    console.log
      Optimized: 0 new Chess instances (should be 0)

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:92:15

    console.log
      Optimized duration: 4.56ms

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:93:15

    console.log
      Speed improvement: 12%

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:94:15

    console.log
      \n=== STATE UPDATE BATCHING ===

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:132:15

    console.log
      Original: 1 re-renders per move

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:133:15

    console.log
      Optimized: 1 re-render per move

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:134:15

    console.log
      Improvement: 0 fewer re-renders

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:135:15

    console.log
      \n=== JUMP TO MOVE PERFORMANCE ===

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:186:15

    console.log
      Original: 16.56ms for 10 jumps

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:187:15

    console.log
      Optimized: 11.67ms for 10 jumps

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:188:15

    console.log
      Speed improvement: 30%

      at shared/hooks/__tests__/useChessGame.optimized.test.ts:189:15

    console.log
      \n=== CHESS.JS OPTIMIZATION SUMMARY ===

      at Object.<anonymous> (shared/hooks/__tests__/useChessGame.optimized.test.ts:197:15)

    console.log
      ‚úÖ Undo: Uses built-in undo() method (no new instances)

      at Object.<anonymous> (shared/hooks/__tests__/useChessGame.optimized.test.ts:198:15)

    console.log
      ‚úÖ Jump: Reuses single Chess instance with reset()

      at Object.<anonymous> (shared/hooks/__tests__/useChessGame.optimized.test.ts:199:15)

    console.log
      ‚úÖ State: Single setState call per operation

      at Object.<anonymous> (shared/hooks/__tests__/useChessGame.optimized.test.ts:200:15)

    console.log
      ‚úÖ Memory: 1 Chess instance per game (vs N instances)

      at Object.<anonymous> (shared/hooks/__tests__/useChessGame.optimized.test.ts:201:15)

    console.log
      ‚úÖ GC Pressure: Significantly reduced

      at Object.<anonymous> (shared/hooks/__tests__/useChessGame.optimized.test.ts:202:15)

    console.log
      =====================================\n

      at Object.<anonymous> (shared/hooks/__tests__/useChessGame.optimized.test.ts:203:15)

PASS shared/components/training/__tests__/TrainingBoard.navigation.test.tsx
  ‚óè Console

    console.info
      2025-07-03T18:08:53.139Z INFO [EngineService] Created engine 'evaluation-hook' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"evaluation-hook","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.log
      üîß useScenarioEngine: Initializing engine with FEN: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1

      at shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:34:17

    console.error
      Warning: An update to TrainingBoard inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TrainingBoard (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/TrainingBoard/index.tsx:49:3)

      32 |         
      33 |         if (isMounted) {
    > 34 |           setEngine(engineInstance);
         |           ^
      35 |           setIsLoading(false);
      36 |         }
      37 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/hooks/useEngine.ts:34:11
      at fulfilled (shared/hooks/useEngine.ts:9:58)

    console.error
      Warning: An update to TrainingBoard inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TrainingBoard (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/TrainingBoard/index.tsx:49:3)

      33 |         if (isMounted) {
      34 |           setEngine(engineInstance);
    > 35 |           setIsLoading(false);
         |           ^
      36 |         }
      37 |       } catch (err) {
      38 |         if (isMounted) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/hooks/useEngine.ts:35:11
      at fulfilled (shared/hooks/useEngine.ts:9:58)

    console.error
      Warning: An update to TrainingBoard inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TrainingBoard (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/TrainingBoard/index.tsx:49:3)

      40 |         const engine = new ScenarioEngine(initialFen);
      41 |         
    > 42 |         setScenarioEngine(engine);
         |         ^
      43 |         setIsEngineReady(true);
      44 |         
      45 |         console.log('‚úÖ useScenarioEngine: Engine initialized successfully');

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:42:9
      at fulfilled (shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:38:58)

    console.error
      Warning: An update to TrainingBoard inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TrainingBoard (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/TrainingBoard/index.tsx:49:3)

      41 |         
      42 |         setScenarioEngine(engine);
    > 43 |         setIsEngineReady(true);
         |         ^
      44 |         
      45 |         console.log('‚úÖ useScenarioEngine: Engine initialized successfully');
      46 |       } catch (error) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:43:9
      at fulfilled (shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:38:58)

    console.log
      ‚úÖ useScenarioEngine: Engine initialized successfully

      at shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:45:17

    console.debug
      2025-07-03T18:08:53.346Z DEBUG [EngineService] Engine 'evaluation-hook' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"evaluation-hook"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.347Z DEBUG [EngineService] Engine 'evaluation-hook' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"evaluation-hook"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

    console.log
      üîß useScenarioEngine: Initializing engine with FEN: rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1

      at shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:34:17

    console.error
      Warning: An update to TrainingBoard inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TrainingBoard (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/TrainingBoard/index.tsx:49:3)

      32 |         
      33 |         if (isMounted) {
    > 34 |           setEngine(engineInstance);
         |           ^
      35 |           setIsLoading(false);
      36 |         }
      37 |       } catch (err) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/hooks/useEngine.ts:34:11
      at fulfilled (shared/hooks/useEngine.ts:9:58)

    console.error
      Warning: An update to TrainingBoard inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TrainingBoard (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/TrainingBoard/index.tsx:49:3)

      33 |         if (isMounted) {
      34 |           setEngine(engineInstance);
    > 35 |           setIsLoading(false);
         |           ^
      36 |         }
      37 |       } catch (err) {
      38 |         if (isMounted) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/hooks/useEngine.ts:35:11
      at fulfilled (shared/hooks/useEngine.ts:9:58)

    console.error
      Warning: An update to TrainingBoard inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TrainingBoard (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/TrainingBoard/index.tsx:49:3)

      40 |         const engine = new ScenarioEngine(initialFen);
      41 |         
    > 42 |         setScenarioEngine(engine);
         |         ^
      43 |         setIsEngineReady(true);
      44 |         
      45 |         console.log('‚úÖ useScenarioEngine: Engine initialized successfully');

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:42:9
      at fulfilled (shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:38:58)

    console.error
      Warning: An update to TrainingBoard inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TrainingBoard (/home/thehu/coolProjects/EndgameTrainer/shared/components/training/TrainingBoard/index.tsx:49:3)

      41 |         
      42 |         setScenarioEngine(engine);
    > 43 |         setIsEngineReady(true);
         |         ^
      44 |         
      45 |         console.log('‚úÖ useScenarioEngine: Engine initialized successfully');
      46 |       } catch (error) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27589:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25508:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:17527:7)
      at shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:43:9
      at fulfilled (shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:38:58)

    console.log
      ‚úÖ useScenarioEngine: Engine initialized successfully

      at shared/components/training/TrainingBoard/hooks/useScenarioEngine.ts:45:17

    console.debug
      2025-07-03T18:08:53.458Z DEBUG [EngineService] Engine 'evaluation-hook' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"evaluation-hook"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.459Z DEBUG [EngineService] Engine 'evaluation-hook' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"evaluation-hook"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)
          at Array.forEach (<anonymous>)

PASS shared/hooks/__tests__/useEvaluation.performance.test.ts
  ‚óè Console

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      Baseline: getDualEvaluation called 4 times for 4 FEN changes

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:54:15

    console.log
      üîç useEvaluation - Got dual evaluation: {
        engine: { score: 0.5, mate: null },
        tablebase: { isAvailable: true, result: { wdl: 2, category: 'win', dtz: 10 } }
      }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Previous position tablebase: { isAvailable: true, result: { wdl: 2, category: 'win', dtz: 10 } }

      at shared/hooks/useEvaluation.ts:73:21

    console.log
      üèÜ useEvaluation - TABLEBASE COMPARISON AVAILABLE: {
        previousFen: 'rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1',
        currentFen: 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1',
        wdlBefore: 2,
        wdlAfter: 2,
        categoryBefore: 'win',
        categoryAfter: 'win'
      }

      at shared/hooks/useEvaluation.ts:84:23

    console.log
      Baseline: Evaluation with tablebase comparison took 153.63ms

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:85:15

    console.log
      Baseline: getDualEvaluation called 2 times (sequential)

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:86:15

    console.log
      üîç useEvaluation - Got dual evaluation: {
        engine: { score: 0.5, mate: null },
        tablebase: { isAvailable: true, result: { wdl: 2, category: 'win', dtz: 10 } }
      }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üìä useEvaluation - Tablebase position but no comparison available

      at shared/hooks/useEvaluation.ts:104:19

    console.log
      üîç useEvaluation - Got dual evaluation: {
        engine: { score: 0.5, mate: null },
        tablebase: { isAvailable: true, result: { wdl: 2, category: 'win', dtz: 10 } }
      }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üìä useEvaluation - Tablebase position but no comparison available

      at shared/hooks/useEvaluation.ts:104:19

    console.log
      Baseline: Returning to previous position triggered 1 new evaluation(s) (no cache)

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:124:15

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      \n=== BASELINE EVALUATION PERFORMANCE ===

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:162:15

    console.log
      Evaluation calls for 5 moves: 6

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:163:15

    console.log
      Cache hits: 0 (no cache implemented)

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:164:15

    console.log
      Target after optimization:

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:165:15

    console.log
        - Evaluation calls: 1 (with debouncing)

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:166:15

    console.log
        - Cache hit rate: >80% for repeated positions

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:167:15

    console.log
        - Parallel API calls for tablebase comparison

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:168:15

    console.log
      =====================================\n

      at shared/hooks/__tests__/useEvaluation.performance.test.ts:169:15

PASS shared/components/training/TrainingBoard/__tests__/GameControls.comprehensive.test.tsx
PASS shared/components/training/TrainingBoard/__tests__/EvaluationDisplay.comprehensive.test.tsx
PASS shared/components/training/__tests__/TrainingControls.comprehensive.test.tsx
PASS shared/components/training/DualEvaluationPanel/__tests__/EngineEvaluationCard.test.tsx
PASS shared/__tests__/performance/engineStateMachine.test.ts
  ‚óè Console

    console.log
      üîç STATE MACHINE: Testing state transitions

      at shared/__tests__/performance/engineStateMachine.test.ts:33:13

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      ‚úÖ Initial state: IDLE

      at shared/__tests__/performance/engineStateMachine.test.ts:39:13

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.log
      ‚úÖ After getReadyEngine call: INITIALIZING

      at shared/__tests__/performance/engineStateMachine.test.ts:45:13

    console.log
      [Engine] ‚úÖ UCI ready - worker is now operational!

      at Engine.handleMessage (shared/lib/chess/engine.ts:165:17)

    console.log
      ‚úÖ After UCI response: READY

      at shared/__tests__/performance/engineStateMachine.test.ts:61:15

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      üîç STATE MACHINE: Testing concurrent initialization

      at shared/__tests__/performance/engineStateMachine.test.ts:71:13

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.log
      ‚úÖ Single worker created for concurrent calls

      at shared/__tests__/performance/engineStateMachine.test.ts:84:13

    console.log
      ‚úÖ Same promise returned for concurrent calls

      at shared/__tests__/performance/engineStateMachine.test.ts:89:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      üîç STATE MACHINE: Testing timeout handling

      at shared/__tests__/performance/engineStateMachine.test.ts:95:13

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.log
      ‚úÖ Timeout handled correctly, state: ERROR

      at shared/__tests__/performance/engineStateMachine.test.ts:113:15
          at Generator.throw (<anonymous>)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)
          at Generator.throw (<anonymous>)

    console.log
      üîç STATE MACHINE: Testing ERROR state handling

      at shared/__tests__/performance/engineStateMachine.test.ts:123:13

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      ‚úÖ ERROR state correctly rejected subsequent calls

      at shared/__tests__/performance/engineStateMachine.test.ts:135:15
          at Generator.throw (<anonymous>)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)
          at Generator.throw (<anonymous>)

    console.log
      üîç PERFORMANCE: Measuring state machine overhead

      at shared/__tests__/performance/engineStateMachine.test.ts:142:13

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.log
      [Engine] ‚úÖ UCI ready - worker is now operational!

      at Engine.handleMessage (shared/lib/chess/engine.ts:165:17)

    console.log
      [Engine] ‚úÖ Engine ready (via readyok)

      at Engine.handleMessage (shared/lib/chess/engine.ts:171:17)

    console.log
      üìä STATE MACHINE METRICS:

      at shared/__tests__/performance/engineStateMachine.test.ts:168:13

    console.log
        getReadyEngine() call time when ready: 0.01ms

      at shared/__tests__/performance/engineStateMachine.test.ts:169:13

    console.log
        State transitions: IDLE ‚Üí INITIALIZING ‚Üí READY

      at shared/__tests__/performance/engineStateMachine.test.ts:170:13

    console.log
        Worker creation calls: 1

      at shared/__tests__/performance/engineStateMachine.test.ts:171:13

    console.log
        UCI commands sent: 1

      at shared/__tests__/performance/engineStateMachine.test.ts:172:13

    console.log
      ‚úÖ State machine overhead minimal

      at shared/__tests__/performance/engineStateMachine.test.ts:176:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      üîç STATE MACHINE: Testing state reset on quit

      at Object.<anonymous> (shared/__tests__/performance/engineStateMachine.test.ts:182:13)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      ‚úÖ State properly reset to IDLE on quit

      at Object.<anonymous> (shared/__tests__/performance/engineStateMachine.test.ts:199:13)

PASS shared/components/training/DualEvaluationPanel/__tests__/TablebaseEvaluationCard.test.tsx
PASS shared/components/training/__tests__/MoveHistory.comprehensive.test.tsx
PASS shared/components/ui/DarkModeToggle.test.tsx
FAIL shared/tests/unit/chess/engine.test.ts
  ‚óè Console

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.log
      [Engine] ‚úÖ UCI ready - worker is now operational!

      at Engine.handleMessage (shared/lib/chess/engine.ts:165:17)

    console.log
      [Engine] ‚úÖ Engine ready (via readyok)

      at Engine.handleMessage (shared/lib/chess/engine.ts:171:17)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.log
      [Engine] ‚úÖ UCI ready - worker is now operational!

      at Engine.handleMessage (shared/lib/chess/engine.ts:165:17)

    console.log
      [Engine] ‚úÖ Engine ready (via readyok)

      at Engine.handleMessage (shared/lib/chess/engine.ts:171:17)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.log
      [Engine] ‚úÖ UCI ready - worker is now operational!

      at Engine.handleMessage (shared/lib/chess/engine.ts:165:17)

    console.log
      [Engine] ‚úÖ Engine ready (via readyok)

      at Engine.handleMessage (shared/lib/chess/engine.ts:171:17)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.log
      [Engine] ‚úÖ UCI ready - worker is now operational!

      at Engine.handleMessage (shared/lib/chess/engine.ts:165:17)

    console.log
      [Engine] ‚úÖ Engine ready (via readyok)

      at Engine.handleMessage (shared/lib/chess/engine.ts:171:17)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

  ‚óè Engine ‚Ä∫ should evaluate position and resolve with score

    expect(received).toBe(expected) // Object.is equality

    Expected: 0.42
    Received: 42

      127 |     
      128 |     const evaluation = await evalPromise;
    > 129 |     expect(evaluation.score).toBe(0.42);
          |                              ^
      130 |   }, 10000);
      131 |
      132 |   it('should reset the chess instance', () => {

      at shared/tests/unit/chess/engine.test.ts:129:30
      at fulfilled (shared/tests/unit/chess/engine.test.ts:5:58)

PASS shared/components/training/TrainingBoard/__tests__/MoveHandler.comprehensive.test.tsx
PASS shared/hooks/__tests__/useEvaluation.optimized.test.ts
  ‚óè Console

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üìä useEvaluation - Cache miss, evaluating position

      at shared/hooks/useEvaluationOptimized.ts:92:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluationOptimized.ts:125:17

    console.log
      \n=== DEBOUNCING COMPARISON ===

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:79:15

    console.log
      Original: 4 evaluation calls for 4 rapid FEN changes

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:80:15

    console.log
      Optimized: 1 evaluation call(s) (debounced)

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:81:15

    console.log
      Improvement: 75% fewer API calls

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:82:15

    console.log
      üîç useEvaluation - Got dual evaluation: {
        engine: { score: 0.5, mate: null },
        tablebase: { isAvailable: true, result: { wdl: 2, category: 'win', dtz: 10 } }
      }

      at shared/hooks/useEvaluation.ts:62:17

    console.log
      üîç useEvaluation - Previous position tablebase: { isAvailable: true, result: { wdl: 2, category: 'win', dtz: 10 } }

      at shared/hooks/useEvaluation.ts:73:21

    console.log
      üèÜ useEvaluation - TABLEBASE COMPARISON AVAILABLE: {
        previousFen: 'rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1',
        currentFen: 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1',
        wdlBefore: 2,
        wdlAfter: 2,
        categoryBefore: 'win',
        categoryAfter: 'win'
      }

      at shared/hooks/useEvaluation.ts:84:23

    console.log
      üìä useEvaluation - Cache miss, evaluating position

      at shared/hooks/useEvaluationOptimized.ts:92:17

    console.log
      üîç useEvaluation - Got dual evaluation: {
        engine: { score: 0.5, mate: null },
        tablebase: { isAvailable: true, result: { wdl: 2, category: 'win', dtz: 10 } }
      }

      at shared/hooks/useEvaluationOptimized.ts:125:17

    console.log
      üèÜ useEvaluation - TABLEBASE COMPARISON AVAILABLE (parallel fetch)

      at shared/hooks/useEvaluationOptimized.ts:142:19

    console.log
      \n=== PARALLEL API CALLS COMPARISON ===

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:141:15

    console.log
      Original: 158ms for 2 sequential calls

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:142:15

    console.log
      Optimized: 107ms for 2 parallel calls

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:143:15

    console.log
      Note: Optimized includes 300ms debounce delay

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:144:15

    console.log
      üìä useEvaluation - Cache miss, evaluating position

      at shared/hooks/useEvaluationOptimized.ts:92:17

    console.log
      üîç useEvaluation - Got dual evaluation: { engine: { score: 0.5, mate: null }, tablebase: null }

      at shared/hooks/useEvaluationOptimized.ts:125:17

    console.log
      \n=== CACHING COMPARISON ===

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:192:15

    console.log
      Original: Always re-evaluates on position return

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:193:15

    console.log
      Optimized: 0 API calls on cache hit (should be 0)

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:194:15

    console.log
      Cache stats: { hits: 0, misses: 3, size: 3, maxSize: 200, hitRate: 0 }

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:195:15

    console.log
      \n=== OPTIMIZATION SUMMARY ===

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:207:15

    console.log
      ‚úÖ Debouncing: 75%+ reduction in API calls

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:208:15

    console.log
      ‚úÖ Parallel calls: ~50% faster tablebase comparisons

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:209:15

    console.log
      ‚úÖ LRU Cache: 0 API calls for repeated positions

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:210:15

    console.log
      ‚úÖ Memory safe: 200-item cache limit (~70KB)

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:211:15

    console.log
      ‚úÖ Abort support: Cancels outdated evaluations

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:212:15

    console.log
      =====================================\n

      at shared/hooks/__tests__/useEvaluation.optimized.test.ts:213:15

PASS shared/components/training/TrainingBoard/hooks/__tests__/useTrainingState.test.ts
  ‚óè Console

    console.log
      üîÑ useTrainingState: State reset, new key: 1

      at Object.handleReset (shared/components/training/TrainingBoard/hooks/useTrainingState.ts:53:13)

    console.log
      üîÑ useTrainingState: State reset, new key: 1

      at Object.handleReset (shared/components/training/TrainingBoard/hooks/useTrainingState.ts:53:13)

    console.log
      üîÑ useTrainingState: State reset, new key: 2

      at Object.handleReset (shared/components/training/TrainingBoard/hooks/useTrainingState.ts:53:13)

    console.log
      üîÑ useTrainingState: State reset, new key: 1

      at Object.handleReset (shared/components/training/TrainingBoard/hooks/useTrainingState.ts:53:13)

    console.log
      üîÑ useTrainingState: State reset, new key: 1

      at Object.handleReset (shared/components/training/TrainingBoard/hooks/useTrainingState.ts:53:13)

PASS shared/components/training/TrainingBoard/hooks/__tests__/useTrainingState.comprehensive.test.ts
  ‚óè Console

    console.log
      üîÑ useTrainingState: State reset, new key: 1

      at Object.handleReset (shared/components/training/TrainingBoard/hooks/useTrainingState.ts:53:13)

PASS shared/lib/chess/__tests__/validation.test.ts
PASS shared/services/chess/__tests__/EngineService.test.ts
  ‚óè Console

    console.info
      2025-07-03T18:08:53.582Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.591Z INFO [EngineService] Created engine 'test1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"test1","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.594Z INFO [EngineService] Cleaned up engine 'test1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"test1","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.595Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.596Z INFO [EngineService] Created engine 'test-engine' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"test-engine","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.603Z INFO [EngineService] Cleaned up engine 'test-engine' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"test-engine","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.604Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.605Z INFO [EngineService] Created engine 'same-id' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"same-id","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.606Z INFO [EngineService] Cleaned up engine 'same-id' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"same-id","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.606Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.607Z INFO [EngineService] Created engine 'ref-test' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"ref-test","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.608Z INFO [EngineService] Cleaned up engine 'ref-test' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"ref-test","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.608Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.609Z INFO [EngineService] Created engine 'engine-0' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-0","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.610Z INFO [EngineService] Created engine 'engine-1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-1","totalEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.610Z INFO [EngineService] Created engine 'engine-2' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-2","totalEngines":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.611Z INFO [EngineService] Created engine 'engine-3' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-3","totalEngines":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.611Z INFO [EngineService] Created engine 'engine-4' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-4","totalEngines":5}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.611Z INFO [EngineService] Cleaned up engine 'engine-0' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-0","remainingEngines":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.612Z INFO [EngineService] Created engine 'engine-5' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-5","totalEngines":5}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.612Z INFO [EngineService] Cleaned up engine 'engine-1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-1","remainingEngines":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.612Z INFO [EngineService] Created engine 'engine-6' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-6","totalEngines":5}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.613Z INFO [EngineService] Cleaned up engine 'engine-2' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-2","remainingEngines":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.613Z INFO [EngineService] Cleaned up engine 'engine-3' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-3","remainingEngines":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.613Z INFO [EngineService] Cleaned up engine 'engine-4' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-4","remainingEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.613Z INFO [EngineService] Cleaned up engine 'engine-5' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-5","remainingEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.614Z INFO [EngineService] Cleaned up engine 'engine-6' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-6","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.614Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.615Z INFO [EngineService] Created engine 'engine-0' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-0","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.615Z DEBUG [EngineService] Engine 'engine-0' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-0"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.616Z INFO [EngineService] Created engine 'engine-1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-1","totalEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.617Z DEBUG [EngineService] Engine 'engine-1' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-1"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.617Z INFO [EngineService] Created engine 'engine-2' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-2","totalEngines":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.618Z DEBUG [EngineService] Engine 'engine-2' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-2"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.618Z INFO [EngineService] Created engine 'engine-3' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-3","totalEngines":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.619Z DEBUG [EngineService] Engine 'engine-3' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-3"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.619Z INFO [EngineService] Created engine 'engine-4' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-4","totalEngines":5}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.619Z DEBUG [EngineService] Engine 'engine-4' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-4"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.620Z INFO [EngineService] Cleaned up engine 'engine-0' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-0","remainingEngines":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.620Z INFO [EngineService] Created engine 'engine-5' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-5","totalEngines":5}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.620Z DEBUG [EngineService] Engine 'engine-5' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-5"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.621Z INFO [EngineService] Cleaned up engine 'engine-1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-1","remainingEngines":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.621Z INFO [EngineService] Cleaned up engine 'engine-2' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-2","remainingEngines":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.621Z INFO [EngineService] Cleaned up engine 'engine-3' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-3","remainingEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.622Z INFO [EngineService] Cleaned up engine 'engine-4' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-4","remainingEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.622Z INFO [EngineService] Cleaned up engine 'engine-5' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine-5","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.622Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.623Z INFO [EngineService] Created engine 'old-engine' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"old-engine","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.634Z INFO [EngineService] Created engine 'new-engine' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"new-engine","totalEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.635Z INFO [EngineService] Cleaned up engine 'old-engine' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"old-engine","remainingEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.635Z INFO [EngineService] Cleaned up engine 'new-engine' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"new-engine","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.635Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.653Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.654Z INFO [EngineService] Created engine 'cleanup-test' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"cleanup-test","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.warn
      2025-07-03T18:08:53.656Z WARN [EngineService] Error cleaning up engine 'cleanup-test' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      67 |         break;
      68 |       case LogLevel.WARN:
    > 69 |         console.warn(formatted);
         |                 ^
      70 |         break;
      71 |       case LogLevel.ERROR:
      72 |       case LogLevel.FATAL:

      at ConsoleTransport.log (shared/services/logging/Logger.ts:69:17)
      at shared/services/logging/Logger.ts:191:52
          at Array.forEach (<anonymous>)
      at Logger.log (shared/services/logging/Logger.ts:191:21)
      at Logger.warn (shared/services/logging/Logger.ts:203:10)
      at EngineService.<anonymous> (shared/services/chess/EngineService.ts:95:16)
          at Generator.throw (<anonymous>)
      at rejected (shared/services/chess/EngineService.ts:10:65)

    console.warn
      2025-07-03T18:08:53.657Z WARN [EngineService] Error cleaning up engine 'cleanup-test' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      67 |         break;
      68 |       case LogLevel.WARN:
    > 69 |         console.warn(formatted);
         |                 ^
      70 |         break;
      71 |       case LogLevel.ERROR:
      72 |       case LogLevel.FATAL:

      at ConsoleTransport.log (shared/services/logging/Logger.ts:69:17)
      at shared/services/logging/Logger.ts:191:52
          at Array.forEach (<anonymous>)
      at Logger.log (shared/services/logging/Logger.ts:191:21)
      at Logger.warn (shared/services/logging/Logger.ts:203:10)
      at EngineService.<anonymous> (shared/services/chess/EngineService.ts:95:16)
          at Generator.throw (<anonymous>)
      at rejected (shared/services/chess/EngineService.ts:10:65)

    console.info
      2025-07-03T18:08:53.657Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.658Z INFO [EngineService] Created engine 'active1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"active1","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.659Z INFO [EngineService] Created engine 'active2' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"active2","totalEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.659Z INFO [EngineService] Created engine 'inactive' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"inactive","totalEngines":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.659Z DEBUG [EngineService] Engine 'inactive' released, available for cleanup {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"inactive"}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.661Z INFO [EngineService] Cleaned up engine 'active1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"active1","remainingEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.661Z INFO [EngineService] Cleaned up engine 'active2' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"active2","remainingEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.662Z INFO [EngineService] Cleaned up engine 'inactive' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"inactive","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.662Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.688Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.688Z INFO [EngineService] Created engine 'cleanup-target' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"cleanup-target","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.689Z INFO [EngineService] Created engine 'keep-alive' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"keep-alive","totalEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.689Z INFO [EngineService] Cleaned up engine 'cleanup-target' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"cleanup-target","remainingEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.690Z INFO [EngineService] Cleaned up engine 'keep-alive' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"keep-alive","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.690Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.691Z INFO [EngineService] Created engine 'engine1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine1","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.691Z INFO [EngineService] Created engine 'engine2' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine2","totalEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.692Z INFO [EngineService] Created engine 'engine3' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine3","totalEngines":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.692Z INFO [EngineService] Cleaned up engine 'engine1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine1","remainingEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.692Z INFO [EngineService] Cleaned up engine 'engine2' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine2","remainingEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.693Z INFO [EngineService] Cleaned up engine 'engine3' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"engine3","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.693Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.693Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.694Z INFO [EngineService] Created engine 'multi-cleanup' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"multi-cleanup","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.694Z INFO [EngineService] Cleaned up engine 'multi-cleanup' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"multi-cleanup","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.695Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.695Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.695Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.696Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.696Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.697Z INFO [EngineService] Created engine 'concurrent-0' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"concurrent-0","totalEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)
          at Function.from (<anonymous>)

    console.info
      2025-07-03T18:08:53.698Z INFO [EngineService] Created engine 'concurrent-1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"concurrent-1","totalEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)
          at Function.from (<anonymous>)

    console.info
      2025-07-03T18:08:53.699Z INFO [EngineService] Created engine 'concurrent-2' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"concurrent-2","totalEngines":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)
          at Function.from (<anonymous>)

    console.info
      2025-07-03T18:08:53.699Z INFO [EngineService] Created engine 'concurrent-3' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"concurrent-3","totalEngines":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)
          at Function.from (<anonymous>)

    console.info
      2025-07-03T18:08:53.700Z INFO [EngineService] Created engine 'concurrent-4' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"concurrent-4","totalEngines":5}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)
          at Function.from (<anonymous>)

    console.info
      2025-07-03T18:08:53.701Z INFO [EngineService] Cleaned up engine 'concurrent-0' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"concurrent-0","remainingEngines":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.701Z INFO [EngineService] Cleaned up engine 'concurrent-1' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"concurrent-1","remainingEngines":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.701Z INFO [EngineService] Cleaned up engine 'concurrent-2' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"concurrent-2","remainingEngines":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.701Z INFO [EngineService] Cleaned up engine 'concurrent-3' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"concurrent-3","remainingEngines":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.703Z INFO [EngineService] Cleaned up engine 'concurrent-4' {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"engineId":"concurrent-4","remainingEngines":0}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

    console.info
      2025-07-03T18:08:53.703Z INFO [EngineService] All engines cleaned up {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:66:17)
          at Array.forEach (<anonymous>)

PASS shared/data/endgames/__tests__/index.comprehensive.test.ts
PASS shared/hooks/__tests__/useAnalysisData.comprehensive.test.ts
PASS shared/hooks/__tests__/useDebounce.comprehensive.test.ts
PASS shared/tests/chess.test.ts
PASS shared/services/logging/__tests__/Logger.test.ts
PASS shared/lib/chess/__tests__/ScenarioEngine.test.ts
  ‚óè Console

    console.debug
      2025-07-03T18:08:53.729Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.748Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.750Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.770Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.772Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.774Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.776Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.777Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.779Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

PASS shared/tests/unit/components/Chessboard.test.tsx
PASS shared/lib/chess/__tests__/ScenarioEngine.deepAnalysis.test.ts
  ‚óè Console

    console.debug
      2025-07-03T18:08:53.768Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.774Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.777Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.780Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.782Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

    console.debug
      2025-07-03T18:08:53.784Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.warn
      [EvaluationService] Mistake analysis failed: Error: Engine error
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.deepAnalysis.test.ts:134:61
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.deepAnalysis.test.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.deepAnalysis.test.ts:4:12)
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/__tests__/ScenarioEngine.deepAnalysis.test.ts:127:65)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      64 |
      65 |     } catch (error) {
    > 66 |       console.warn('[EvaluationService] Mistake analysis failed:', error);
         |               ^
      67 |       return false;
      68 |     }
      69 |   }

      at EvaluationService.<anonymous> (shared/lib/chess/ScenarioEngine/evaluationService.ts:66:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/ScenarioEngine/evaluationService.ts:12:65)

    console.log
      [ScenarioEngine] Instance cleaned up. Remaining: 0

      at ScenarioEngine.quit (shared/lib/chess/ScenarioEngine/index.ts:264:15)

PASS shared/data/endgames/__tests__/categories.test.ts
PASS shared/services/__tests__/errorService.comprehensive.test.ts
PASS shared/tests/unit/paths.test.ts
PASS shared/tests/unit/chess/worker.test.ts
  ‚óè Console

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

PASS shared/utils/chess/__tests__/evaluationHelpers.tablebase.test.ts
  ‚óè Console

    console.log
      ‚úÖ Perfect Win ‚Üí Draw: üö®

      at shared/utils/chess/__tests__/evaluationHelpers.tablebase.test.ts:117:17
          at Array.forEach (<anonymous>)

    console.log
      ‚úÖ Cursed Win ‚Üí Draw: üö®

      at shared/utils/chess/__tests__/evaluationHelpers.tablebase.test.ts:117:17
          at Array.forEach (<anonymous>)

    console.log
      ‚úÖ Win ‚Üí Blessed Loss: üí•

      at shared/utils/chess/__tests__/evaluationHelpers.tablebase.test.ts:117:17
          at Array.forEach (<anonymous>)

    console.log
      ‚úÖ Cursed Win ‚Üí Loss: üí•

      at shared/utils/chess/__tests__/evaluationHelpers.tablebase.test.ts:117:17
          at Array.forEach (<anonymous>)

PASS shared/tests/unit/chess/chess.test.ts
PASS shared/tests/unit/chess/ScenarioEngine.test.ts
  ‚óè Console

    console.debug
      2025-07-03T18:08:53.810Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":1}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.828Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":2}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.842Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":3}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

    console.debug
      2025-07-03T18:08:53.844Z DEBUG [ScenarioEngine] ScenarioEngine instance created {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"instanceCount":4}

      at ConsoleTransport.log (shared/services/logging/Logger.ts:63:17)
          at Array.forEach (<anonymous>)

PASS shared/tests/unit/chess/successCriteria.test.ts
PASS shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts
  ‚óè Console

    console.error
      2025-07-03T18:08:53.787Z ERROR [useLocalStorage] Failed to save to platform storage {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"key":"write-error-key","valueToStore":"new-value"} Error: Failed to save data
      Stack: Error: Failed to save data
          at WebStorage.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:35:13)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:8:12)
          at WebStorage.save (/home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:23:16)
          at Array.setValue (/home/thehu/coolProjects/EndgameTrainer/shared/hooks/useLocalStorage.ts:44:33)
          at /home/thehu/coolProjects/EndgameTrainer/shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:195:26
          at /home/thehu/coolProjects/EndgameTrainer/node_modules/@testing-library/react/dist/act-compat.js:48:24
          at act (/home/thehu/coolProjects/EndgameTrainer/node_modules/react/cjs/react.development.js:2512:16)
          at /home/thehu/coolProjects/EndgameTrainer/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:194:10)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      71 |       case LogLevel.ERROR:
      72 |       case LogLevel.FATAL:
    > 73 |         console.error(formatted);
         |                 ^
      74 |         break;
      75 |     }
      76 |   }

      at ConsoleTransport.log (shared/services/logging/Logger.ts:73:17)
      at shared/services/logging/Logger.ts:191:52
          at Array.forEach (<anonymous>)
      at Logger.log (shared/services/logging/Logger.ts:191:21)
      at Logger.error (shared/services/logging/Logger.ts:207:10)
      at shared/hooks/useLocalStorage.ts:45:18

    console.warn
      2025-07-03T18:08:53.816Z WARN [useLocalStorage] Error reading storage key "ssr-key" {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      67 |         break;
      68 |       case LogLevel.WARN:
    > 69 |         console.warn(formatted);
         |                 ^
      70 |         break;
      71 |       case LogLevel.ERROR:
      72 |       case LogLevel.FATAL:

      at ConsoleTransport.log (shared/services/logging/Logger.ts:69:17)
      at shared/services/logging/Logger.ts:191:52
          at Array.forEach (<anonymous>)
      at Logger.log (shared/services/logging/Logger.ts:191:21)
      at Logger.warn (shared/services/logging/Logger.ts:203:10)
      at shared/hooks/useLocalStorage.ts:27:14
      at mountState (node_modules/react-dom/cjs/react-dom.development.js:16986:20)
      at Object.useState (node_modules/react-dom/cjs/react-dom.development.js:17699:16)
      at useState (node_modules/react/cjs/react.development.js:1622:21)
      at useLocalStorage (shared/hooks/useLocalStorage.ts:16:49)
      at shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:234:24
      at TestComponent (node_modules/@testing-library/react/dist/pure.js:309:27)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom.development.js:16305:18)
      at mountIndeterminateComponent (node_modules/react-dom/cjs/react-dom.development.js:20074:13)
      at beginWork (node_modules/react-dom/cjs/react-dom.development.js:21587:16)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27426:14)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26560:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26466:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26434:7)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25738:74)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:180:26)
      at render (node_modules/@testing-library/react/dist/pure.js:271:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:318:7)
      at Object.<anonymous> (shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:233:36)

    console.warn
      2025-07-03T18:08:53.835Z WARN [useLocalStorage] Error reading storage key "ssr-key" {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false}}

      67 |         break;
      68 |       case LogLevel.WARN:
    > 69 |         console.warn(formatted);
         |                 ^
      70 |         break;
      71 |       case LogLevel.ERROR:
      72 |       case LogLevel.FATAL:

      at ConsoleTransport.log (shared/services/logging/Logger.ts:69:17)
      at shared/services/logging/Logger.ts:191:52
          at Array.forEach (<anonymous>)
      at Logger.log (shared/services/logging/Logger.ts:191:21)
      at Logger.warn (shared/services/logging/Logger.ts:203:10)
      at shared/hooks/useLocalStorage.ts:27:14
      at mountState (node_modules/react-dom/cjs/react-dom.development.js:16986:20)
      at Object.useState (node_modules/react-dom/cjs/react-dom.development.js:17699:16)
      at useState (node_modules/react/cjs/react.development.js:1622:21)
      at useLocalStorage (shared/hooks/useLocalStorage.ts:16:49)
      at shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:253:24
      at TestComponent (node_modules/@testing-library/react/dist/pure.js:309:27)
      at renderWithHooks (node_modules/react-dom/cjs/react-dom.development.js:16305:18)
      at mountIndeterminateComponent (node_modules/react-dom/cjs/react-dom.development.js:20074:13)
      at beginWork (node_modules/react-dom/cjs/react-dom.development.js:21587:16)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27426:14)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26560:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26466:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26434:7)
      at performConcurrentWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:25738:74)
      at flushActQueue (node_modules/react/cjs/react.development.js:2667:24)
      at act (node_modules/react/cjs/react.development.js:2582:11)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:180:26)
      at render (node_modules/@testing-library/react/dist/pure.js:271:10)
      at renderHook (node_modules/@testing-library/react/dist/pure.js:318:7)
      at Object.<anonymous> (shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:252:36)

    console.error
      WebStorage save error: TypeError: Cannot read properties of undefined (reading 'setItem')
          at WebStorage.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:32:20)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:8:12)
          at WebStorage.save (/home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:23:16)
          at Array.setValue (/home/thehu/coolProjects/EndgameTrainer/shared/hooks/useLocalStorage.ts:44:33)
          at /home/thehu/coolProjects/EndgameTrainer/shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:258:26
          at /home/thehu/coolProjects/EndgameTrainer/node_modules/@testing-library/react/dist/act-compat.js:48:24
          at act (/home/thehu/coolProjects/EndgameTrainer/node_modules/react/cjs/react.development.js:2512:16)
          at /home/thehu/coolProjects/EndgameTrainer/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:257:10)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      32 |       localStorage.setItem(this.prefix + key, serialized);
      33 |     } catch (error) {
    > 34 |       console.error('WebStorage save error:', error);
         |               ^
      35 |       throw new Error('Failed to save data');
      36 |     }
      37 |   }

      at WebStorage.<anonymous> (shared/services/platform/web/WebPlatformService.ts:34:15)
      at shared/services/platform/web/WebPlatformService.ts:12:71
      at Object.<anonymous>.__awaiter (shared/services/platform/web/WebPlatformService.ts:8:12)
      at WebStorage.save (shared/services/platform/web/WebPlatformService.ts:23:16)
      at Array.setValue (shared/hooks/useLocalStorage.ts:44:33)
      at shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:258:26
      at node_modules/@testing-library/react/dist/act-compat.js:48:24
      at act (node_modules/react/cjs/react.development.js:2512:16)
      at node_modules/@testing-library/react/dist/act-compat.js:47:25
      at Object.<anonymous> (shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:257:10)

    console.error
      2025-07-03T18:08:53.839Z ERROR [useLocalStorage] Failed to save to platform storage {"platform":{"isWeb":true,"isMobile":false,"isAndroid":false,"isIOS":false},"key":"ssr-key","valueToStore":"new-value"} Error: Failed to save data
      Stack: Error: Failed to save data
          at WebStorage.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:35:13)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:8:12)
          at WebStorage.save (/home/thehu/coolProjects/EndgameTrainer/shared/services/platform/web/WebPlatformService.ts:23:16)
          at Array.setValue (/home/thehu/coolProjects/EndgameTrainer/shared/hooks/useLocalStorage.ts:44:33)
          at /home/thehu/coolProjects/EndgameTrainer/shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:258:26
          at /home/thehu/coolProjects/EndgameTrainer/node_modules/@testing-library/react/dist/act-compat.js:48:24
          at act (/home/thehu/coolProjects/EndgameTrainer/node_modules/react/cjs/react.development.js:2512:16)
          at /home/thehu/coolProjects/EndgameTrainer/node_modules/@testing-library/react/dist/act-compat.js:47:25
          at Object.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/hooks/__tests__/useLocalStorage.comprehensive.test.ts:257:10)
          at Promise.then.completed (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/thehu/coolProjects/EndgameTrainer/node_modules/jest-runner/build/testWorker.js:106:12)

      71 |       case LogLevel.ERROR:
      72 |       case LogLevel.FATAL:
    > 73 |         console.error(formatted);
         |                 ^
      74 |         break;
      75 |     }
      76 |   }

      at ConsoleTransport.log (shared/services/logging/Logger.ts:73:17)
      at shared/services/logging/Logger.ts:191:52
          at Array.forEach (<anonymous>)
      at Logger.log (shared/services/logging/Logger.ts:191:21)
      at Logger.error (shared/services/logging/Logger.ts:207:10)
      at shared/hooks/useLocalStorage.ts:45:18

PASS shared/lib/__tests__/stockfish.comprehensive.test.ts
  ‚óè Console

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

    console.log
      [StockfishEngine] ‚úÖ Worker cleanup completed

      at StockfishEngine.quit (shared/lib/stockfish.ts:92:15)

PASS shared/tests/unit/training/progressService.test.ts
PASS shared/lib/chess/__tests__/tablebase.test.ts
PASS shared/tests/unit/chess/stockfish.test.ts
PASS shared/__tests__/performance/contextComparison.test.ts
  ‚óè Console

    console.log
      üìä MEMORY USAGE COMPARISON

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:31:13)

    console.log
      üìà STATE SIZE COMPARISON:

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:65:13)

    console.log
        Original State: 4627 chars (~4.52KB)

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:66:13)

    console.log
        Optimized State: 989 chars (~0.97KB)

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:67:13)

    console.log
        Size Reduction: 3638 chars (78.6%)

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:68:13)

    console.log
        Memory Savings: ~3.55KB

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:69:13)

    console.log
      ‚ö° STATE UPDATE PERFORMANCE

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:88:13)

    console.log
      ‚ö° UPDATE PERFORMANCE COMPARISON:

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:158:13)

    console.log
        Original Average: 0.02ms

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:159:13)

    console.log
        Optimized Average: 0.01ms

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:160:13)

    console.log
        Speed Improvement: 40.9%

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:161:13)

    console.log
        Iterations: 10

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:162:13)

    console.log
      üîÑ RE-RENDER PERFORMANCE

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:168:13)

    console.log
      üîÑ SHALLOW COMPARISON:

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:203:13)

    console.log
        Original States Equal: false (Re-render triggered)

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:204:13)

    console.log
        Optimized States Equal: false (Re-render triggered)

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:205:13)

    console.log
        Original State Complexity: Deep objects with many properties

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:206:13)

    console.log
        Optimized State Complexity: Simple strings and numbers

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:207:13)

    console.log
      ‚úÖ Both trigger re-renders as expected, but optimized has less overhead

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:213:13)

    console.log
      üìã COPY PERFORMANCE

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:217:13)

    console.log
      üìã COPY PERFORMANCE:

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:250:13)

    console.log
        Object Array Copy: 0.004ms

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:251:13)

    console.log
        String Array Copy: 0.002ms

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:252:13)

    console.log
        Copy Speed Improvement: 41.6%

      at Object.<anonymous> (shared/__tests__/performance/contextComparison.test.ts:253:13)

PASS shared/services/platform/__tests__/PlatformService.test.ts
PASS shared/tests/unit/chess/mistakeCheck.test.ts
PASS shared/__tests__/performance/engineOptimized.test.ts (11.342 s)
  ‚óè Console

    console.log
      üöÄ OPTIMIZED: Engine Initialization Timing

      at shared/__tests__/performance/engineOptimized.test.ts:15:13

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/engineOptimized.test.ts:27:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/engineOptimized.test.ts:9:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
      üìä OPTIMIZED INITIALIZATION:

      at shared/__tests__/performance/engineOptimized.test.ts:32:13

    console.log
        Total Time: 5027.06ms

      at shared/__tests__/performance/engineOptimized.test.ts:33:13

    console.log
        First Eval Time: 5013.74ms

      at shared/__tests__/performance/engineOptimized.test.ts:34:13

    console.log
        First Result Score: 0

      at shared/__tests__/performance/engineOptimized.test.ts:35:13

    console.log
        Second Eval Time: 1.64ms

      at shared/__tests__/performance/engineOptimized.test.ts:36:13

    console.log
        Second Result Score: 0

      at shared/__tests__/performance/engineOptimized.test.ts:37:13

    console.log
        Engine State: ERROR

      at shared/__tests__/performance/engineOptimized.test.ts:38:13

    console.log
      üîÑ PERFORMANCE COMPARISON:

      at shared/__tests__/performance/engineOptimized.test.ts:61:15

    console.log
        Baseline First Score: 0 ‚Üí Optimized: 0

      at shared/__tests__/performance/engineOptimized.test.ts:62:15

    console.log
        Baseline Second Score: 0 ‚Üí Optimized: 0

      at shared/__tests__/performance/engineOptimized.test.ts:63:15

    console.log
        Baseline Worker Ready: undefined ‚Üí Optimized: false

      at shared/__tests__/performance/engineOptimized.test.ts:64:15

    console.log
      üéØ IMPROVEMENTS:

      at shared/__tests__/performance/engineOptimized.test.ts:70:15

    console.log
        Score Results Fixed: ‚ùå NO

      at shared/__tests__/performance/engineOptimized.test.ts:71:15

    console.log
        Worker Readiness Fixed: ‚ùå NO

      at shared/__tests__/performance/engineOptimized.test.ts:72:15

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      ‚ö° OPTIMIZED: Concurrent Request Handling

      at shared/__tests__/performance/engineOptimized.test.ts:86:13

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
      üìä OPTIMIZED CONCURRENT:

      at shared/__tests__/performance/engineOptimized.test.ts:104:13

    console.log
        Total Time: 5001.95ms

      at shared/__tests__/performance/engineOptimized.test.ts:105:13

    console.log
        Requests: 5

      at shared/__tests__/performance/engineOptimized.test.ts:106:13

    console.log
        Successful Results: 0

      at shared/__tests__/performance/engineOptimized.test.ts:107:13

    console.log
        Results: 0:0, 1:0, 2:0, 3:0, 4:0

      at shared/__tests__/performance/engineOptimized.test.ts:108:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

PASS shared/__tests__/performance/engineInitialization.test.ts (11.891 s)
  ‚óè Console

    console.log
      üîç BASELINE: Engine Initialization Timing

      at shared/__tests__/performance/engineInitialization.test.ts:15:13

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/engineInitialization.test.ts:30:40
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/engineInitialization.test.ts:9:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
      üìä BASELINE INITIALIZATION:

      at shared/__tests__/performance/engineInitialization.test.ts:35:13

    console.log
        Total Time: 5535.70ms

      at shared/__tests__/performance/engineInitialization.test.ts:36:13

    console.log
        Immediate Eval Time: 5014.39ms

      at shared/__tests__/performance/engineInitialization.test.ts:37:13

    console.log
        Immediate Result Score: 0

      at shared/__tests__/performance/engineInitialization.test.ts:38:13

    console.log
        Delayed Eval Time: 1.71ms

      at shared/__tests__/performance/engineInitialization.test.ts:39:13

    console.log
        Delayed Result Score: 0

      at shared/__tests__/performance/engineInitialization.test.ts:40:13

    console.log
        Worker Ready: undefined

      at shared/__tests__/performance/engineInitialization.test.ts:41:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      ‚ö° BASELINE: Concurrent Request Handling

      at shared/__tests__/performance/engineInitialization.test.ts:65:13

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
      üìä CONCURRENT BASELINE:

      at shared/__tests__/performance/engineInitialization.test.ts:83:13

    console.log
        Total Time: 5003.76ms

      at shared/__tests__/performance/engineInitialization.test.ts:84:13

    console.log
        Requests: 5

      at shared/__tests__/performance/engineInitialization.test.ts:85:13

    console.log
        Successful Results: 0

      at shared/__tests__/performance/engineInitialization.test.ts:86:13

    console.log
        Results: 0:0, 1:0, 2:0, 3:0, 4:0

      at shared/__tests__/performance/engineInitialization.test.ts:87:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

PASS shared/__tests__/performance/workerPerformance.test.ts (16.317 s)
  ‚óè Console

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      üîç BASELINE: Sequential Worker Performance

      at shared/__tests__/performance/workerPerformance.test.ts:28:13

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
      Evaluation for rnbqkbnr/pppppppp/8/...: 0

      at shared/__tests__/performance/workerPerformance.test.ts:39:19
          at async Promise.all (index 0)

    console.log
      Best move for rnbqkbnr/pppppppp/8/...: none

      at shared/__tests__/performance/workerPerformance.test.ts:47:19
          at async Promise.all (index 1)

    console.log
      Evaluation for rnbqkbnr/pppp1ppp/8/...: 0

      at shared/__tests__/performance/workerPerformance.test.ts:39:19
          at async Promise.all (index 2)

    console.log
      Best move for rnbqkbnr/pppp1ppp/8/...: none

      at shared/__tests__/performance/workerPerformance.test.ts:47:19
          at async Promise.all (index 3)

    console.log
      Evaluation for rnbqkbnr/pppp1ppp/8/...: 0

      at shared/__tests__/performance/workerPerformance.test.ts:39:19
          at async Promise.all (index 4)

    console.log
      Best move for rnbqkbnr/pppp1ppp/8/...: none

      at shared/__tests__/performance/workerPerformance.test.ts:47:19
          at async Promise.all (index 5)

    console.log
      üìä BASELINE METRICS:

      at shared/__tests__/performance/workerPerformance.test.ts:59:13

    console.log
        Total Time: 5015.81ms

      at shared/__tests__/performance/workerPerformance.test.ts:60:13

    console.log
        Avg Time/Request: 835.97ms

      at shared/__tests__/performance/workerPerformance.test.ts:61:13

    console.log
        Total Requests: 6

      at shared/__tests__/performance/workerPerformance.test.ts:62:13

    console.log
        Results: 3/6 successful

      at shared/__tests__/performance/workerPerformance.test.ts:63:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      ‚ö° BASELINE: Move Validation Response Time

      at shared/__tests__/performance/workerPerformance.test.ts:86:13

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
      üìä MOVE VALIDATION BASELINE:

      at shared/__tests__/performance/workerPerformance.test.ts:98:13

    console.log
        Validation Time: 5001.90ms

      at shared/__tests__/performance/workerPerformance.test.ts:99:13

    console.log
        Move Result: none

      at shared/__tests__/performance/workerPerformance.test.ts:100:13

    console.log
      ‚ö†Ô∏è  Note: Current blocking architecture may cause slow validation

      at shared/__tests__/performance/workerPerformance.test.ts:107:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      üß† BASELINE: Memory Usage Pattern

      at shared/__tests__/performance/workerPerformance.test.ts:116:13

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:283:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.getBestMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:247:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:124:20
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:9:58)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:283:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.getBestMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:247:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:124:20
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:9:58)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:283:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.getBestMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:247:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:124:20
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:9:58)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:283:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.getBestMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:247:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:124:20
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:9:58)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:283:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.getBestMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:247:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:124:20
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:9:58)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:283:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.getBestMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:247:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:124:20
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:9:58)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:283:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.getBestMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:247:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:124:20
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:9:58)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:283:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.getBestMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:247:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:124:20
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:9:58)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:283:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.getBestMove (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:247:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:124:20
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/workerPerformance.test.ts:9:58)

      283 |       await this.getReadyEngine();
      284 |     } catch (error) {
    > 285 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for getBestMove:', error);
          |               ^
      286 |       return null;
      287 |     }
      288 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:285:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
      üìä MEMORY BASELINE:

      at shared/__tests__/performance/workerPerformance.test.ts:139:13

    console.log
        Initial Memory: 0.00MB

      at shared/__tests__/performance/workerPerformance.test.ts:140:13

    console.log
        Final Memory: 0.00MB

      at shared/__tests__/performance/workerPerformance.test.ts:141:13

    console.log
        Memory Increase: 0.00MB

      at shared/__tests__/performance/workerPerformance.test.ts:142:13

    console.log
        Avg Time/Iteration: 500.78ms

      at shared/__tests__/performance/workerPerformance.test.ts:143:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

PASS shared/__tests__/performance/cachePerformance.test.ts (21.409 s)
  ‚óè Console

    console.log
      üöÄ PHASE 3: Cache Performance Testing

      at shared/__tests__/performance/cachePerformance.test.ts:29:13

    console.log
      =====================================

      at shared/__tests__/performance/cachePerformance.test.ts:30:13

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      üìä BASELINE: Engine Performance (No Cache)

      at shared/__tests__/performance/cachePerformance.test.ts:47:13

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 1, Position 1: 5014.18ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 1, Position 2: 2.86ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 1, Position 3: 0.31ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 1, Position 4: 0.21ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 1, Position 5: 0.24ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 2, Position 1: 0.21ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 2, Position 2: 0.26ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 2, Position 3: 0.19ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 2, Position 4: 0.42ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 2, Position 5: 0.24ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 3, Position 1: 0.31ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 3, Position 2: 0.19ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 3, Position 3: 0.18ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 3, Position 4: 0.17ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:65:39
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 3, Position 5: 0.18ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:76:19

    console.log
      üìà BASELINE METRICS:

      at shared/__tests__/performance/cachePerformance.test.ts:86:13

    console.log
        Total Time: 5021.16ms

      at shared/__tests__/performance/cachePerformance.test.ts:87:13

    console.log
        Total Evaluations: 15

      at shared/__tests__/performance/cachePerformance.test.ts:88:13

    console.log
        Successful Evaluations: 0

      at shared/__tests__/performance/cachePerformance.test.ts:89:13

    console.log
        Average Evaluation Time: 334.68ms

      at shared/__tests__/performance/cachePerformance.test.ts:90:13

    console.log
        Success Rate: 0.0%

      at shared/__tests__/performance/cachePerformance.test.ts:91:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      üöÄ OPTIMIZED: Engine Performance (With Cache)

      at shared/__tests__/performance/cachePerformance.test.ts:104:13

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 1, Position 1: 5003.45ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at EvaluationCache.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:200:25)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:16:12)
          at EvaluationCache.executeEvaluation (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:148:16)
          at EvaluationCache.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:99:28)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:16:12)
          at EvaluationCache.evaluatePositionCached (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:53:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:124:38
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 1, Position 2: 1.44ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at EvaluationCache.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:200:25)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:16:12)
          at EvaluationCache.executeEvaluation (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:148:16)
          at EvaluationCache.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:99:28)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:16:12)
          at EvaluationCache.evaluatePositionCached (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:53:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:124:38
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 1, Position 3: 0.36ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at EvaluationCache.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:200:25)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:16:12)
          at EvaluationCache.executeEvaluation (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:148:16)
          at EvaluationCache.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:99:28)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:16:12)
          at EvaluationCache.evaluatePositionCached (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:53:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:124:38
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 1, Position 4: 0.28ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Engine is in error state
          at Engine.getReadyEngine (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:67:29)
          at Engine.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:315:18)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:8:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:4:12)
          at Engine.evaluatePosition (/home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:278:16)
          at EvaluationCache.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:200:25)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:16:12)
          at EvaluationCache.executeEvaluation (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:148:16)
          at EvaluationCache.<anonymous> (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:99:28)
          at Generator.next (<anonymous>)
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:20:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:16:12)
          at EvaluationCache.evaluatePositionCached (/home/thehu/coolProjects/EndgameTrainer/shared/lib/cache/EvaluationCache.ts:53:16)
          at /home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:124:38
          at Generator.next (<anonymous>)
          at fulfilled (/home/thehu/coolProjects/EndgameTrainer/shared/__tests__/performance/cachePerformance.test.ts:15:58)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
        Round 1, Position 5: 0.32ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
        Round 2, Position 1: 0.05ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
        Round 2, Position 2: 0.02ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
        Round 2, Position 3: 0.01ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
        Round 2, Position 4: 0.01ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
        Round 2, Position 5: 0.02ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
        Round 3, Position 1: 0.01ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
        Round 3, Position 2: 0.01ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
        Round 3, Position 3: 0.01ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
        Round 3, Position 4: 0.01ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
        Round 3, Position 5: 0.08ms, Score: 0

      at shared/__tests__/performance/cachePerformance.test.ts:135:19

    console.log
      üéØ OPTIMIZED METRICS:

      at shared/__tests__/performance/cachePerformance.test.ts:146:13

    console.log
        Total Time: 5007.01ms

      at shared/__tests__/performance/cachePerformance.test.ts:147:13

    console.log
        Total Evaluations: 15

      at shared/__tests__/performance/cachePerformance.test.ts:148:13

    console.log
        Successful Evaluations: 0

      at shared/__tests__/performance/cachePerformance.test.ts:149:13

    console.log
        Average Evaluation Time: 333.74ms

      at shared/__tests__/performance/cachePerformance.test.ts:150:13

    console.log
        Success Rate: 0.0%

      at shared/__tests__/performance/cachePerformance.test.ts:151:13

    console.log
      üìä CACHE STATISTICS:

      at shared/__tests__/performance/cachePerformance.test.ts:152:13

    console.log
        Cache Hit Rate: 66.7%

      at shared/__tests__/performance/cachePerformance.test.ts:153:13

    console.log
        Cache Hits: 10

      at shared/__tests__/performance/cachePerformance.test.ts:154:13

    console.log
        Cache Misses: 5

      at shared/__tests__/performance/cachePerformance.test.ts:155:13

    console.log
        Deduplication Hits: 0

      at shared/__tests__/performance/cachePerformance.test.ts:156:13

    console.log
        Memory Usage: 1.7KB

      at shared/__tests__/performance/cachePerformance.test.ts:157:13

    console.log
      üîÑ PERFORMANCE COMPARISON:

      at shared/__tests__/performance/cachePerformance.test.ts:173:15

    console.log
        Baseline Avg Time: 334.68ms ‚Üí Optimized: 333.74ms

      at shared/__tests__/performance/cachePerformance.test.ts:174:15

    console.log
        Average Time Improvement: 0.3%

      at shared/__tests__/performance/cachePerformance.test.ts:175:15

    console.log
        Total Time Improvement: 0.3%

      at shared/__tests__/performance/cachePerformance.test.ts:176:15

    console.log
      ‚úÖ PERFORMANCE IMPROVED!

      at shared/__tests__/performance/cachePerformance.test.ts:179:17

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      üîç CACHE BEHAVIOR: Testing hit patterns

      at shared/__tests__/performance/cachePerformance.test.ts:193:13

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
      üìä CACHE HIT PATTERN:

      at shared/__tests__/performance/cachePerformance.test.ts:214:13

    console.log
        First call (miss): 5005.57ms

      at shared/__tests__/performance/cachePerformance.test.ts:215:13

    console.log
        Second call (hit): 0.02ms

      at shared/__tests__/performance/cachePerformance.test.ts:216:13

    console.log
        Third call (hit): 0.01ms

      at shared/__tests__/performance/cachePerformance.test.ts:217:13

    console.log
        Speed improvement: 100.0%

      at shared/__tests__/performance/cachePerformance.test.ts:218:13

    console.log
        Results identical: true

      at shared/__tests__/performance/cachePerformance.test.ts:219:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)

    console.log
      [Engine] üöÄ Engine starting in browser environment

      at new Engine (shared/lib/chess/engine.ts:50:15)

    console.log
      ‚ö° DEDUPLICATION: Testing concurrent requests

      at shared/__tests__/performance/cachePerformance.test.ts:228:13

    console.log
      [Engine] üîß Creating worker (attempt 1)

      at Engine.initializeWorker (shared/lib/chess/engine.ts:105:15)

    console.log
      [Engine] üéØ Sending UCI command to worker...

      at Engine.initializeWorker (shared/lib/chess/engine.ts:126:15)

    console.error
      [Engine] ‚è∞ Initialization timeout

      130 |       setTimeout(() => {
      131 |         if (this.state === EngineState.INITIALIZING) {
    > 132 |           console.error('[Engine] ‚è∞ Initialization timeout');
          |                   ^
      133 |           this.state = EngineState.ERROR;
      134 |           this.readyReject?.(new Error('Initialization timeout'));
      135 |         }

      at shared/lib/chess/engine.ts:132:19
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)

    console.warn
      [Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition: Error: Initialization timeout
          at /home/thehu/coolProjects/EndgameTrainer/shared/lib/chess/engine.ts:134:30
          at Timeout.task [as _onTimeout] (/home/thehu/coolProjects/EndgameTrainer/node_modules/jsdom/lib/jsdom/browser/Window.js:520:19)
          at listOnTimeout (node:internal/timers:588:17)
          at processTimers (node:internal/timers:523:7)

      315 |       await this.getReadyEngine();
      316 |     } catch (error) {
    > 317 |       console.warn('[Engine] ‚ö†Ô∏è Engine initialization failed for evaluatePosition:', error);
          |               ^
      318 |       return { score: 0, mate: null };
      319 |     }
      320 |     

      at Engine.<anonymous> (shared/lib/chess/engine.ts:317:15)
          at Generator.throw (<anonymous>)
      at rejected (shared/lib/chess/engine.ts:6:65)

    console.log
      üìä DEDUPLICATION RESULTS:

      at shared/__tests__/performance/cachePerformance.test.ts:246:13

    console.log
        Total Time: 5004.66ms

      at shared/__tests__/performance/cachePerformance.test.ts:247:13

    console.log
        Concurrent Requests: 5

      at shared/__tests__/performance/cachePerformance.test.ts:248:13

    console.log
        Deduplication Hits: 4

      at shared/__tests__/performance/cachePerformance.test.ts:249:13

    console.log
        All Results Identical: true

      at shared/__tests__/performance/cachePerformance.test.ts:250:13

    console.log
      [Engine] ‚úÖ Worker cleanup completed

      at Engine.quit (shared/lib/chess/engine.ts:372:15)


Summary of all failing tests
FAIL shared/services/mistakeAnalysis/__tests__/mistakeAnalyzer.test.ts
  ‚óè MistakeAnalyzer - Pure Logic Functions ‚Ä∫ generateMistakeExplanation ‚Ä∫ should adapt explanation complexity to skill level

    expect(received).toBeLessThan(expected)

    Expected: < 117
    Received:   167

      198 |
      199 |       // Beginner explanations should be simpler/shorter
    > 200 |       expect(beginnerExp.length).toBeLessThan(expertExp.length);
          |                                  ^
      201 |       expect(beginnerExp).not.toContain('centipawn'); // Avoid technical terms
      202 |     });
      203 |

      at Object.<anonymous> (shared/services/mistakeAnalysis/__tests__/mistakeAnalyzer.test.ts:200:34)

  ‚óè MistakeAnalyzer - Pure Logic Functions ‚Ä∫ generateMistakeExplanation ‚Ä∫ should handle multiple themes

    expect(received).toMatch(expected)

    Expected pattern: /king|safety/
    Received string:  "major blunder costing 300 centipawns - this significantly worsens your position. consider tactical motifs like pins, forks, and discovered attacks."

      211 |
      212 |       expect(explanation).toContain('tactical');
    > 213 |       expect(explanation.toLowerCase()).toMatch(/king|safety/);
          |                                         ^
      214 |     });
      215 |
      216 |     it('should provide encouraging tone for beginners', () => {

      at Object.<anonymous> (shared/services/mistakeAnalysis/__tests__/mistakeAnalyzer.test.ts:213:41)

FAIL shared/tests/unit/chess/engine.test.ts
  ‚óè Engine ‚Ä∫ should evaluate position and resolve with score

    expect(received).toBe(expected) // Object.is equality

    Expected: 0.42
    Received: 42

      127 |     
      128 |     const evaluation = await evalPromise;
    > 129 |     expect(evaluation.score).toBe(0.42);
          |                              ^
      130 |   }, 10000);
      131 |
      132 |   it('should reset the chess instance', () => {

      at shared/tests/unit/chess/engine.test.ts:129:30
      at fulfilled (shared/tests/unit/chess/engine.test.ts:5:58)


Test Suites: 2 failed, 60 passed, 62 total
Tests:       3 failed, 1 skipped, 926 passed, 930 total
Snapshots:   0 total
Time:        23.147 s
Ran all test suites matching /test/i.
