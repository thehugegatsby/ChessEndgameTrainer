551b5e4fc2c678fc4f3e90202ebe6655
/**
 * Firebase Test Helpers
 * Utilities for setting up and managing test data in Firebase Emulator
 * 
 * Enhanced with Authentication support and User Progress testing infrastructure
 * for Issue #83 - Firebase service integration test infrastructure
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get RealtimeTestHelper () {
        return RealtimeTestHelper;
    },
    get TEST_CARD_PROGRESS () {
        return TEST_CARD_PROGRESS;
    },
    get TEST_CATEGORIES () {
        return TEST_CATEGORIES;
    },
    get TEST_CHAPTERS () {
        return TEST_CHAPTERS;
    },
    get TEST_POSITIONS () {
        return TEST_POSITIONS;
    },
    get TEST_USER_STATS () {
        return TEST_USER_STATS;
    },
    get cleanupAllTestFirebase () {
        return cleanupAllTestFirebase;
    },
    get clearFirestoreData () {
        return clearFirestoreData;
    },
    get clearUserProgressData () {
        return clearUserProgressData;
    },
    get createAnonymousUser () {
        return createAnonymousUser;
    },
    get createTestUser () {
        return createTestUser;
    },
    get createTestUserWithProgress () {
        return createTestUserWithProgress;
    },
    get initializeTestFirebase () {
        return initializeTestFirebase;
    },
    get seedTestCategories () {
        return seedTestCategories;
    },
    get seedTestChapters () {
        return seedTestChapters;
    },
    get seedTestPositions () {
        return seedTestPositions;
    },
    get seedUserProgress () {
        return seedUserProgress;
    },
    get waitForFirestore () {
        return waitForFirestore;
    }
});
const _app = require("firebase/app");
const _firestore = require("firebase/firestore");
const _auth = require("firebase/auth");
const _firebaseemulatorapi = require("./firebase-emulator-api");
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
// Test Firebase configuration for emulator
const TEST_CONFIG = {
    projectId: process.env.TEST_PROJECT_ID || "endgame-trainer-test",
    apiKey: "test-api-key",
    authDomain: "localhost"
};
// Track all test instances for cleanup
const testInstances = [];
async function initializeTestFirebase(instanceName) {
    // Create unique instance name to prevent conflicts
    const appName = instanceName || `test-app-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
    // Initialize test app with unique name
    const app = (0, _app.initializeApp)(TEST_CONFIG, appName);
    const db = (0, _firestore.getFirestore)(app);
    const auth = (0, _auth.getAuth)(app);
    // Connect to Firestore emulator
    try {
        (0, _firestore.connectFirestoreEmulator)(db, "localhost", 8080);
    } catch (error) {
        var _error_message;
        // Only ignore "already connected" errors, throw real connection failures
        if (!((_error_message = error.message) === null || _error_message === void 0 ? void 0 : _error_message.includes("already connected"))) {
            console.error("Failed to connect to Firestore emulator:", error);
            throw error;
        }
    }
    // Connect to Auth emulator  
    try {
        (0, _auth.connectAuthEmulator)(auth, "http://localhost:9099", {
            disableWarnings: true
        });
    } catch (error) {
        var _error_message1;
        // Only ignore "already connected" errors
        if (!((_error_message1 = error.message) === null || _error_message1 === void 0 ? void 0 : _error_message1.includes("already initialized"))) {
            console.error("Failed to connect to Auth emulator:", error);
            throw error;
        }
    }
    const instance = {
        app,
        db,
        auth
    };
    testInstances.push(instance);
    return instance;
}
async function createTestUser(auth, email, password) {
    const testEmail = email || `test-${Date.now()}@example.com`;
    const testPassword = password || "testpass123";
    try {
        // Try to create new user
        return await (0, _auth.createUserWithEmailAndPassword)(auth, testEmail, testPassword);
    } catch (error) {
        // If user exists, sign in instead
        if (error.code === "auth/email-already-in-use") {
            return await (0, _auth.signInWithEmailAndPassword)(auth, testEmail, testPassword);
        }
        throw error;
    }
}
async function createAnonymousUser(auth) {
    return await (0, _auth.signInAnonymously)(auth);
}
async function clearFirestoreData() {
    // Use the atomic cleanup method for both emulators
    await (0, _firebaseemulatorapi.clearAllEmulatorData)();
}
async function clearUserProgressData(db, userId) {
    const userProgressRef = (0, _firestore.collection)(db, `users/${userId}/userProgress`);
    const snapshot = await (0, _firestore.getDocs)(userProgressRef);
    if (snapshot.empty) return;
    const batch = (0, _firestore.writeBatch)(db);
    snapshot.docs.forEach((doc)=>{
        batch.delete(doc.ref);
    });
    await batch.commit();
}
const TEST_USER_STATS = {
    userId: "test-user-123",
    totalPositionsCompleted: 25,
    overallSuccessRate: 0.85,
    totalTimeSpent: 3600000,
    totalHintsUsed: 5,
    lastActive: Date.now()
};
const TEST_CARD_PROGRESS = [
    {
        id: "pos-1",
        nextReviewAt: Date.now() + 86400000,
        lastReviewedAt: Date.now(),
        interval: 1,
        repetition: 1,
        efactor: 2.5,
        lapses: 0
    },
    {
        id: "pos-2",
        nextReviewAt: Date.now() - 3600000,
        lastReviewedAt: Date.now() - 90000000,
        interval: 3,
        repetition: 3,
        efactor: 2.3,
        lapses: 1
    },
    {
        id: "pos-3",
        nextReviewAt: Date.now() + 604800000,
        lastReviewedAt: Date.now() - 86400000,
        interval: 7,
        repetition: 5,
        efactor: 2.6,
        lapses: 0
    }
];
async function seedUserProgress(db, userId, stats, cards) {
    // Seed UserStats document
    const userStats = {
        ...TEST_USER_STATS,
        ...stats,
        userId,
        lastActive: (0, _firestore.serverTimestamp)()
    };
    await (0, _firestore.setDoc)((0, _firestore.doc)(db, `users/${userId}/userProgress/stats`), userStats);
    // Seed CardProgress documents
    if (cards && cards.length > 0) {
        const batch = (0, _firestore.writeBatch)(db);
        cards.forEach((card)=>{
            const docRef = (0, _firestore.doc)(db, `users/${userId}/userProgress/${card.id}`);
            batch.set(docRef, {
                ...card,
                lastUpdated: (0, _firestore.serverTimestamp)()
            });
        });
        await batch.commit();
    }
}
async function createTestUserWithProgress(instance, email, stats, cards) {
    const userCredential = await createTestUser(instance.auth, email);
    const userId = userCredential.user.uid;
    await seedUserProgress(instance.db, userId, stats, cards || TEST_CARD_PROGRESS);
    return {
        user: userCredential.user,
        userId
    };
}
class RealtimeTestHelper {
    /**
   * Register a listener for cleanup
   */ registerListener(unsubscribe) {
        this.listeners.push(unsubscribe);
    }
    /**
   * Cleanup all registered listeners
   */ cleanup() {
        this.listeners.forEach((unsubscribe)=>unsubscribe());
        this.listeners = [];
    }
    /**
   * Wait for a specific number of snapshot updates
   * @param expectedUpdates - Number of updates to wait for
   * @param timeoutMs - Maximum time to wait (default 5000ms)
   */ async waitForUpdates(expectedUpdates, timeoutMs = 5000) {
        return new Promise((resolve, reject)=>{
            const timeout = setTimeout(()=>{
                reject(new Error(`Timeout waiting for ${expectedUpdates} updates`));
            }, timeoutMs);
            let updateCount = 0;
            const checkUpdates = ()=>{
                updateCount++;
                if (updateCount >= expectedUpdates) {
                    clearTimeout(timeout);
                    resolve();
                }
            };
            // This would be called from within the onSnapshot callback
            global.__rtTestUpdate = checkUpdates;
        });
    }
    constructor(){
        _define_property(this, "listeners", []);
    }
}
async function seedTestPositions(db, positions) {
    const batch = (0, _firestore.writeBatch)(db);
    positions.forEach((position)=>{
        const docRef = (0, _firestore.doc)(db, "positions", position.id.toString());
        batch.set(docRef, {
            ...position,
            createdAt: _firestore.Timestamp.now(),
            updatedAt: _firestore.Timestamp.now()
        });
    });
    await batch.commit();
}
async function seedTestCategories(db, categories) {
    const batch = (0, _firestore.writeBatch)(db);
    categories.forEach((category)=>{
        const docRef = (0, _firestore.doc)(db, "categories", category.id);
        batch.set(docRef, {
            ...category,
            createdAt: _firestore.Timestamp.now(),
            updatedAt: _firestore.Timestamp.now()
        });
    });
    await batch.commit();
}
async function seedTestChapters(db, chapters) {
    const batch = (0, _firestore.writeBatch)(db);
    chapters.forEach((chapter)=>{
        const docRef = (0, _firestore.doc)(db, "chapters", chapter.id);
        batch.set(docRef, {
            ...chapter,
            createdAt: _firestore.Timestamp.now(),
            updatedAt: _firestore.Timestamp.now()
        });
    });
    await batch.commit();
}
const TEST_POSITIONS = [
    {
        id: 1,
        title: "Opposition Basics",
        description: "Learn the fundamental concept of opposition",
        fen: "4k3/8/4K3/8/8/8/8/8 w - - 0 1",
        category: "king-pawn",
        difficulty: "beginner",
        targetMoves: 1,
        hints: [
            "Opposition is key"
        ],
        solution: [
            "Ke6-e7"
        ],
        sideToMove: "white",
        goal: "win"
    },
    {
        id: 2,
        title: "Advanced Opposition",
        description: "Master more complex opposition patterns",
        fen: "8/8/4k3/8/8/4K3/8/8 w - - 0 1",
        category: "king-pawn",
        difficulty: "intermediate",
        targetMoves: 3,
        hints: [
            "Use opposition to control key squares"
        ],
        solution: [
            "Ke3-e4",
            "Ke4-e5",
            "Ke5-d6"
        ],
        sideToMove: "white",
        goal: "win"
    },
    {
        id: 12,
        title: "Brückenbau",
        description: "Build a bridge for your rook",
        fen: "1K6/1P6/8/8/8/8/r7/1k6 b - - 0 1",
        category: "rook-pawn",
        difficulty: "advanced",
        targetMoves: 5,
        hints: [
            "Create a bridge with your rook"
        ],
        solution: [
            "Ra2-a8+",
            "Kb8-c7",
            "Ra8-a7",
            "Kb1-b2",
            "Ra7-b7"
        ],
        sideToMove: "black",
        goal: "draw"
    }
];
const TEST_CATEGORIES = [
    {
        id: "king-pawn",
        name: "King and Pawn",
        description: "Fundamental king and pawn endgames",
        icon: "♔",
        positions: [],
        subcategories: []
    },
    {
        id: "rook-pawn",
        name: "Rook and Pawn",
        description: "Rook endgames with pawns",
        icon: "♜",
        positions: [],
        subcategories: []
    }
];
const TEST_CHAPTERS = [
    {
        id: "opposition-basics",
        name: "Opposition Fundamentals",
        description: "Learn the basics of opposition",
        category: "king-pawn",
        lessons: [],
        totalLessons: 5
    },
    {
        id: "bridge-building",
        name: "Bridge Building Technique",
        description: "Master the bridge building technique",
        category: "rook-pawn",
        lessons: [],
        totalLessons: 3
    }
];
async function cleanupAllTestFirebase() {
    const cleanupPromises = testInstances.map(async (instance)=>{
        try {
            await (0, _app.deleteApp)(instance.app);
        } catch (error) {
        // App might already be deleted
        }
    });
    await Promise.all(cleanupPromises);
    testInstances.length = 0; // Clear the array
}
async function waitForFirestore(db, maxAttempts = 10) {
    for(let i = 0; i < maxAttempts; i++){
        try {
            // Try to read from a collection
            await (0, _firestore.getDocs)((0, _firestore.collection)(db, "positions"));
            return; // Success
        } catch (error) {
            if (i === maxAttempts - 1) throw error;
            // Wait and retry
            await new Promise((resolve)=>setTimeout(resolve, 1000));
        }
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RoZWh1L2Nvb2xQcm9qZWN0cy9FbmRnYW1lVHJhaW5lci10cmFpbmluZy1ib2FyZC1jb21wbGV0ZS9zcmMvdGVzdHMvdXRpbHMvZmlyZWJhc2UtdGVzdC1oZWxwZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRmlyZWJhc2UgVGVzdCBIZWxwZXJzXG4gKiBVdGlsaXRpZXMgZm9yIHNldHRpbmcgdXAgYW5kIG1hbmFnaW5nIHRlc3QgZGF0YSBpbiBGaXJlYmFzZSBFbXVsYXRvclxuICogXG4gKiBFbmhhbmNlZCB3aXRoIEF1dGhlbnRpY2F0aW9uIHN1cHBvcnQgYW5kIFVzZXIgUHJvZ3Jlc3MgdGVzdGluZyBpbmZyYXN0cnVjdHVyZVxuICogZm9yIElzc3VlICM4MyAtIEZpcmViYXNlIHNlcnZpY2UgaW50ZWdyYXRpb24gdGVzdCBpbmZyYXN0cnVjdHVyZVxuICovXG5cbmltcG9ydCB7IGluaXRpYWxpemVBcHAsIGRlbGV0ZUFwcCwgRmlyZWJhc2VBcHAgfSBmcm9tIFwiZmlyZWJhc2UvYXBwXCI7XG5pbXBvcnQge1xuICBnZXRGaXJlc3RvcmUsXG4gIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvcixcbiAgRmlyZXN0b3JlLFxuICBjb2xsZWN0aW9uLFxuICBkb2MsXG4gIGdldERvY3MsXG4gIHNldERvYyxcbiAgd3JpdGVCYXRjaCxcbiAgVGltZXN0YW1wLFxuICBzZXJ2ZXJUaW1lc3RhbXAsXG59IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IFxuICBnZXRBdXRoLCBcbiAgY29ubmVjdEF1dGhFbXVsYXRvciwgXG4gIHNpZ25JbkFub255bW91c2x5LFxuICBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsXG4gIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLFxuICBzaWduT3V0LFxuICBBdXRoLFxuICBVc2VyQ3JlZGVudGlhbCxcbiAgVXNlclxufSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuaW1wb3J0IHtcbiAgRW5kZ2FtZVBvc2l0aW9uLFxuICBFbmRnYW1lQ2F0ZWdvcnksXG4gIEVuZGdhbWVDaGFwdGVyLFxufSBmcm9tIFwiQHNoYXJlZC90eXBlcy9lbmRnYW1lXCI7XG5pbXBvcnQgdHlwZSB7IFVzZXJTdGF0cywgQ2FyZFByb2dyZXNzIH0gZnJvbSBcIkBzaGFyZWQvc3RvcmUvc2xpY2VzL3R5cGVzXCI7XG5pbXBvcnQgeyBjbGVhckFsbEVtdWxhdG9yRGF0YSB9IGZyb20gXCIuL2ZpcmViYXNlLWVtdWxhdG9yLWFwaVwiO1xuXG4vLyBUZXN0IEZpcmViYXNlIGNvbmZpZ3VyYXRpb24gZm9yIGVtdWxhdG9yXG5jb25zdCBURVNUX0NPTkZJRyA9IHtcbiAgcHJvamVjdElkOiBwcm9jZXNzLmVudi5URVNUX1BST0pFQ1RfSUQgfHwgXCJlbmRnYW1lLXRyYWluZXItdGVzdFwiLFxuICBhcGlLZXk6IFwidGVzdC1hcGkta2V5XCIsXG4gIGF1dGhEb21haW46IFwibG9jYWxob3N0XCIsXG59O1xuXG4vLyBSZW1vdmUgZ2xvYmFsIHNpbmdsZXRvbnMgdG8gcHJldmVudCB0ZXN0IGlzb2xhdGlvbiBpc3N1ZXNcbi8vIEVhY2ggdGVzdCBzaG91bGQgY3JlYXRlIGl0cyBvd24gRmlyZWJhc2UgaW5zdGFuY2VcbmV4cG9ydCBpbnRlcmZhY2UgVGVzdEZpcmViYXNlSW5zdGFuY2Uge1xuICBhcHA6IEZpcmViYXNlQXBwO1xuICBkYjogRmlyZXN0b3JlO1xuICBhdXRoOiBBdXRoO1xufVxuXG4vLyBUcmFjayBhbGwgdGVzdCBpbnN0YW5jZXMgZm9yIGNsZWFudXBcbmNvbnN0IHRlc3RJbnN0YW5jZXM6IFRlc3RGaXJlYmFzZUluc3RhbmNlW10gPSBbXTtcblxuLyoqXG4gKiBJbml0aWFsaXplIEZpcmViYXNlIGZvciB0ZXN0cyB3aXRoIGVtdWxhdG9yIC0gY3JlYXRlcyBpc29sYXRlZCBpbnN0YW5jZVxuICogQHBhcmFtIGluc3RhbmNlTmFtZSAtIE9wdGlvbmFsIHVuaXF1ZSBuYW1lIGZvciB0aGUgYXBwIGluc3RhbmNlIChkZWZhdWx0cyB0byB0aW1lc3RhbXApXG4gKiBAcmV0dXJucyBUZXN0IEZpcmViYXNlIGluc3RhbmNlIHdpdGggYXBwLCBkYiwgYW5kIGF1dGhcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVUZXN0RmlyZWJhc2UoXG4gIGluc3RhbmNlTmFtZT86IHN0cmluZ1xuKTogUHJvbWlzZTxUZXN0RmlyZWJhc2VJbnN0YW5jZT4ge1xuICAvLyBDcmVhdGUgdW5pcXVlIGluc3RhbmNlIG5hbWUgdG8gcHJldmVudCBjb25mbGljdHNcbiAgY29uc3QgYXBwTmFtZSA9IGluc3RhbmNlTmFtZSB8fCBgdGVzdC1hcHAtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICBcbiAgLy8gSW5pdGlhbGl6ZSB0ZXN0IGFwcCB3aXRoIHVuaXF1ZSBuYW1lXG4gIGNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoVEVTVF9DT05GSUcsIGFwcE5hbWUpO1xuICBjb25zdCBkYiA9IGdldEZpcmVzdG9yZShhcHApO1xuICBjb25zdCBhdXRoID0gZ2V0QXV0aChhcHApO1xuICBcbiAgLy8gQ29ubmVjdCB0byBGaXJlc3RvcmUgZW11bGF0b3JcbiAgdHJ5IHtcbiAgICBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IoZGIsIFwibG9jYWxob3N0XCIsIDgwODApO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgLy8gT25seSBpZ25vcmUgXCJhbHJlYWR5IGNvbm5lY3RlZFwiIGVycm9ycywgdGhyb3cgcmVhbCBjb25uZWN0aW9uIGZhaWx1cmVzXG4gICAgaWYgKCFlcnJvci5tZXNzYWdlPy5pbmNsdWRlcyhcImFscmVhZHkgY29ubmVjdGVkXCIpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNvbm5lY3QgdG8gRmlyZXN0b3JlIGVtdWxhdG9yOlwiLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIENvbm5lY3QgdG8gQXV0aCBlbXVsYXRvciAgXG4gIHRyeSB7XG4gICAgY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCBcImh0dHA6Ly9sb2NhbGhvc3Q6OTA5OVwiLCB7IGRpc2FibGVXYXJuaW5nczogdHJ1ZSB9KTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIC8vIE9ubHkgaWdub3JlIFwiYWxyZWFkeSBjb25uZWN0ZWRcIiBlcnJvcnNcbiAgICBpZiAoIWVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKFwiYWxyZWFkeSBpbml0aWFsaXplZFwiKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjb25uZWN0IHRvIEF1dGggZW11bGF0b3I6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuICBcbiAgY29uc3QgaW5zdGFuY2UgPSB7IGFwcCwgZGIsIGF1dGggfTtcbiAgdGVzdEluc3RhbmNlcy5wdXNoKGluc3RhbmNlKTtcbiAgXG4gIHJldHVybiBpbnN0YW5jZTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW5kIGF1dGhlbnRpY2F0ZSBhIHRlc3QgdXNlclxuICogQHBhcmFtIGVtYWlsIC0gT3B0aW9uYWwgZW1haWwgKGRlZmF1bHRzIHRvIHJhbmRvbSlcbiAqIEBwYXJhbSBwYXNzd29yZCAtIE9wdGlvbmFsIHBhc3N3b3JkIChkZWZhdWx0cyB0byBcInRlc3RwYXNzMTIzXCIpXG4gKiBAcmV0dXJucyBVc2VyQ3JlZGVudGlhbCB3aXRoIGF1dGhlbnRpY2F0ZWQgdXNlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVGVzdFVzZXIoXG4gIGF1dGg6IEF1dGgsXG4gIGVtYWlsPzogc3RyaW5nLFxuICBwYXNzd29yZD86IHN0cmluZ1xuKTogUHJvbWlzZTxVc2VyQ3JlZGVudGlhbD4ge1xuICBjb25zdCB0ZXN0RW1haWwgPSBlbWFpbCB8fCBgdGVzdC0ke0RhdGUubm93KCl9QGV4YW1wbGUuY29tYDtcbiAgY29uc3QgdGVzdFBhc3N3b3JkID0gcGFzc3dvcmQgfHwgXCJ0ZXN0cGFzczEyM1wiO1xuICBcbiAgdHJ5IHtcbiAgICAvLyBUcnkgdG8gY3JlYXRlIG5ldyB1c2VyXG4gICAgcmV0dXJuIGF3YWl0IGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCB0ZXN0RW1haWwsIHRlc3RQYXNzd29yZCk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAvLyBJZiB1c2VyIGV4aXN0cywgc2lnbiBpbiBpbnN0ZWFkXG4gICAgaWYgKGVycm9yLmNvZGUgPT09IFwiYXV0aC9lbWFpbC1hbHJlYWR5LWluLXVzZVwiKSB7XG4gICAgICByZXR1cm4gYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgdGVzdEVtYWlsLCB0ZXN0UGFzc3dvcmQpO1xuICAgIH1cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhbm9ueW1vdXMgdGVzdCB1c2VyIGZvciBxdWljayB0ZXN0aW5nXG4gKiBAcGFyYW0gYXV0aCAtIEF1dGggaW5zdGFuY2VcbiAqIEByZXR1cm5zIFVzZXJDcmVkZW50aWFsIHdpdGggYW5vbnltb3VzIHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFub255bW91c1VzZXIoYXV0aDogQXV0aCk6IFByb21pc2U8VXNlckNyZWRlbnRpYWw+IHtcbiAgcmV0dXJuIGF3YWl0IHNpZ25JbkFub255bW91c2x5KGF1dGgpO1xufVxuXG4vKipcbiAqIENsZWFyIGFsbCBkYXRhIGZyb20gRmlyZWJhc2UgZW11bGF0b3JzIC0gb3B0aW1pemVkIHZlcnNpb25cbiAqIFVzZXMgUkVTVCBBUEkgZm9yIGF0b21pYyBjbGVhcmluZyBvZiBib3RoIEZpcmVzdG9yZSBhbmQgQXV0aFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYXJGaXJlc3RvcmVEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICAvLyBVc2UgdGhlIGF0b21pYyBjbGVhbnVwIG1ldGhvZCBmb3IgYm90aCBlbXVsYXRvcnNcbiAgYXdhaXQgY2xlYXJBbGxFbXVsYXRvckRhdGEoKTtcbn1cblxuLyoqXG4gKiBDbGVhciB1c2VyLXNwZWNpZmljIHByb2dyZXNzIGRhdGFcbiAqIEBwYXJhbSBkYiAtIEZpcmVzdG9yZSBpbnN0YW5jZVxuICogQHBhcmFtIHVzZXJJZCAtIFVzZXIgSUQgdG8gY2xlYXIgZGF0YSBmb3JcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFyVXNlclByb2dyZXNzRGF0YShcbiAgZGI6IEZpcmVzdG9yZSxcbiAgdXNlcklkOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB1c2VyUHJvZ3Jlc3NSZWYgPSBjb2xsZWN0aW9uKGRiLCBgdXNlcnMvJHt1c2VySWR9L3VzZXJQcm9ncmVzc2ApO1xuICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3ModXNlclByb2dyZXNzUmVmKTtcbiAgXG4gIGlmIChzbmFwc2hvdC5lbXB0eSkgcmV0dXJuO1xuICBcbiAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgc25hcHNob3QuZG9jcy5mb3JFYWNoKChkb2MpID0+IHtcbiAgICBiYXRjaC5kZWxldGUoZG9jLnJlZik7XG4gIH0pO1xuICBcbiAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG59XG5cbi8vID09PT09PT09PT0gVVNFUiBQUk9HUkVTUyBURVNUIEZJWFRVUkVTID09PT09PT09PT1cblxuLyoqXG4gKiBUZXN0IFVzZXJTdGF0cyBmaXh0dXJlXG4gKi9cbmV4cG9ydCBjb25zdCBURVNUX1VTRVJfU1RBVFM6IFVzZXJTdGF0cyA9IHtcbiAgdXNlcklkOiBcInRlc3QtdXNlci0xMjNcIixcbiAgdG90YWxQb3NpdGlvbnNDb21wbGV0ZWQ6IDI1LFxuICBvdmVyYWxsU3VjY2Vzc1JhdGU6IDAuODUsXG4gIHRvdGFsVGltZVNwZW50OiAzNjAwMDAwLCAvLyAxIGhvdXIgaW4gbXNcbiAgdG90YWxIaW50c1VzZWQ6IDUsXG4gIGxhc3RBY3RpdmU6IERhdGUubm93KCksXG59O1xuXG4vKipcbiAqIFRlc3QgQ2FyZFByb2dyZXNzIGZpeHR1cmVzIGZvciBzcGFjZWQgcmVwZXRpdGlvblxuICovXG5leHBvcnQgY29uc3QgVEVTVF9DQVJEX1BST0dSRVNTOiBDYXJkUHJvZ3Jlc3NbXSA9IFtcbiAge1xuICAgIGlkOiBcInBvcy0xXCIsXG4gICAgbmV4dFJldmlld0F0OiBEYXRlLm5vdygpICsgODY0MDAwMDAsIC8vIER1ZSBpbiAxIGRheVxuICAgIGxhc3RSZXZpZXdlZEF0OiBEYXRlLm5vdygpLFxuICAgIGludGVydmFsOiAxLFxuICAgIHJlcGV0aXRpb246IDEsXG4gICAgZWZhY3RvcjogMi41LFxuICAgIGxhcHNlczogMCxcbiAgfSxcbiAge1xuICAgIGlkOiBcInBvcy0yXCIsIFxuICAgIG5leHRSZXZpZXdBdDogRGF0ZS5ub3coKSAtIDM2MDAwMDAsIC8vIE92ZXJkdWUgYnkgMSBob3VyXG4gICAgbGFzdFJldmlld2VkQXQ6IERhdGUubm93KCkgLSA5MDAwMDAwMCxcbiAgICBpbnRlcnZhbDogMyxcbiAgICByZXBldGl0aW9uOiAzLFxuICAgIGVmYWN0b3I6IDIuMyxcbiAgICBsYXBzZXM6IDEsXG4gIH0sXG4gIHtcbiAgICBpZDogXCJwb3MtM1wiLFxuICAgIG5leHRSZXZpZXdBdDogRGF0ZS5ub3coKSArIDYwNDgwMDAwMCwgLy8gRHVlIGluIDEgd2Vla1xuICAgIGxhc3RSZXZpZXdlZEF0OiBEYXRlLm5vdygpIC0gODY0MDAwMDAsXG4gICAgaW50ZXJ2YWw6IDcsXG4gICAgcmVwZXRpdGlvbjogNSxcbiAgICBlZmFjdG9yOiAyLjYsXG4gICAgbGFwc2VzOiAwLFxuICB9LFxuXTtcblxuLyoqXG4gKiBTZWVkIFVzZXIgUHJvZ3Jlc3MgZGF0YSB3aXRoIGF1dGhlbnRpY2F0aW9uXG4gKiBAcGFyYW0gZGIgLSBGaXJlc3RvcmUgaW5zdGFuY2VcbiAqIEBwYXJhbSB1c2VySWQgLSBVc2VyIElEXG4gKiBAcGFyYW0gc3RhdHMgLSBVc2VyU3RhdHMgdG8gc2VlZFxuICogQHBhcmFtIGNhcmRzIC0gQ2FyZFByb2dyZXNzIGFycmF5IHRvIHNlZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWRVc2VyUHJvZ3Jlc3MoXG4gIGRiOiBGaXJlc3RvcmUsXG4gIHVzZXJJZDogc3RyaW5nLFxuICBzdGF0cz86IFBhcnRpYWw8VXNlclN0YXRzPixcbiAgY2FyZHM/OiBDYXJkUHJvZ3Jlc3NbXVxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIC8vIFNlZWQgVXNlclN0YXRzIGRvY3VtZW50XG4gIGNvbnN0IHVzZXJTdGF0cyA9IHtcbiAgICAuLi5URVNUX1VTRVJfU1RBVFMsXG4gICAgLi4uc3RhdHMsXG4gICAgdXNlcklkLFxuICAgIGxhc3RBY3RpdmU6IHNlcnZlclRpbWVzdGFtcCgpLFxuICB9O1xuICBcbiAgYXdhaXQgc2V0RG9jKFxuICAgIGRvYyhkYiwgYHVzZXJzLyR7dXNlcklkfS91c2VyUHJvZ3Jlc3Mvc3RhdHNgKSxcbiAgICB1c2VyU3RhdHNcbiAgKTtcbiAgXG4gIC8vIFNlZWQgQ2FyZFByb2dyZXNzIGRvY3VtZW50c1xuICBpZiAoY2FyZHMgJiYgY2FyZHMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgXG4gICAgY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBgdXNlcnMvJHt1c2VySWR9L3VzZXJQcm9ncmVzcy8ke2NhcmQuaWR9YCk7XG4gICAgICBiYXRjaC5zZXQoZG9jUmVmLCB7XG4gICAgICAgIC4uLmNhcmQsXG4gICAgICAgIGxhc3RVcGRhdGVkOiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgdGVzdCB1c2VyIHdpdGggcHJvZ3Jlc3MgZGF0YVxuICogQ29udmVuaWVuY2UgZnVuY3Rpb24gdGhhdCBjb21iaW5lcyB1c2VyIGNyZWF0aW9uIGFuZCBkYXRhIHNlZWRpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRlc3RVc2VyV2l0aFByb2dyZXNzKFxuICBpbnN0YW5jZTogVGVzdEZpcmViYXNlSW5zdGFuY2UsXG4gIGVtYWlsPzogc3RyaW5nLFxuICBzdGF0cz86IFBhcnRpYWw8VXNlclN0YXRzPixcbiAgY2FyZHM/OiBDYXJkUHJvZ3Jlc3NbXVxuKTogUHJvbWlzZTx7IHVzZXI6IFVzZXI7IHVzZXJJZDogc3RyaW5nIH0+IHtcbiAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBjcmVhdGVUZXN0VXNlcihpbnN0YW5jZS5hdXRoLCBlbWFpbCk7XG4gIGNvbnN0IHVzZXJJZCA9IHVzZXJDcmVkZW50aWFsLnVzZXIudWlkO1xuICBcbiAgYXdhaXQgc2VlZFVzZXJQcm9ncmVzcyhcbiAgICBpbnN0YW5jZS5kYixcbiAgICB1c2VySWQsXG4gICAgc3RhdHMsXG4gICAgY2FyZHMgfHwgVEVTVF9DQVJEX1BST0dSRVNTXG4gICk7XG4gIFxuICByZXR1cm4geyB1c2VyOiB1c2VyQ3JlZGVudGlhbC51c2VyLCB1c2VySWQgfTtcbn1cblxuLy8gPT09PT09PT09PSBSRUFMLVRJTUUgVEVTVElORyBVVElMSVRJRVMgPT09PT09PT09PVxuXG4vKipcbiAqIEhlbHBlciBjbGFzcyBmb3IgdGVzdGluZyByZWFsLXRpbWUgdXBkYXRlcyB3aXRoIG9uU25hcHNob3RcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWx0aW1lVGVzdEhlbHBlciB7XG4gIHByaXZhdGUgbGlzdGVuZXJzOiBBcnJheTwoKSA9PiB2b2lkPiA9IFtdO1xuICBcbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgbGlzdGVuZXIgZm9yIGNsZWFudXBcbiAgICovXG4gIHJlZ2lzdGVyTGlzdGVuZXIodW5zdWJzY3JpYmU6ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLmxpc3RlbmVycy5wdXNoKHVuc3Vic2NyaWJlKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENsZWFudXAgYWxsIHJlZ2lzdGVyZWQgbGlzdGVuZXJzXG4gICAqL1xuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2godW5zdWJzY3JpYmUgPT4gdW5zdWJzY3JpYmUoKSk7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIFdhaXQgZm9yIGEgc3BlY2lmaWMgbnVtYmVyIG9mIHNuYXBzaG90IHVwZGF0ZXNcbiAgICogQHBhcmFtIGV4cGVjdGVkVXBkYXRlcyAtIE51bWJlciBvZiB1cGRhdGVzIHRvIHdhaXQgZm9yXG4gICAqIEBwYXJhbSB0aW1lb3V0TXMgLSBNYXhpbXVtIHRpbWUgdG8gd2FpdCAoZGVmYXVsdCA1MDAwbXMpXG4gICAqL1xuICBhc3luYyB3YWl0Rm9yVXBkYXRlcyhcbiAgICBleHBlY3RlZFVwZGF0ZXM6IG51bWJlcixcbiAgICB0aW1lb3V0TXM6IG51bWJlciA9IDUwMDBcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgVGltZW91dCB3YWl0aW5nIGZvciAke2V4cGVjdGVkVXBkYXRlc30gdXBkYXRlc2ApKTtcbiAgICAgIH0sIHRpbWVvdXRNcyk7XG4gICAgICBcbiAgICAgIGxldCB1cGRhdGVDb3VudCA9IDA7XG4gICAgICBjb25zdCBjaGVja1VwZGF0ZXMgPSAoKSA9PiB7XG4gICAgICAgIHVwZGF0ZUNvdW50Kys7XG4gICAgICAgIGlmICh1cGRhdGVDb3VudCA+PSBleHBlY3RlZFVwZGF0ZXMpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBUaGlzIHdvdWxkIGJlIGNhbGxlZCBmcm9tIHdpdGhpbiB0aGUgb25TbmFwc2hvdCBjYWxsYmFja1xuICAgICAgKGdsb2JhbCBhcyBhbnkpLl9fcnRUZXN0VXBkYXRlID0gY2hlY2tVcGRhdGVzO1xuICAgIH0pO1xuICB9XG59XG5cbi8vID09PT09PT09PT0gRVhJU1RJTkcgR0FNRSBDT05URU5UIFRFU1QgREFUQSAocHJlc2VydmVkIGZvciBjb21wYXRpYmlsaXR5KSA9PT09PT09PT09XG5cbi8qKlxuICogU2VlZCB0ZXN0IHBvc2l0aW9ucyBpbnRvIEZpcmVzdG9yZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VlZFRlc3RQb3NpdGlvbnMoXG4gIGRiOiBGaXJlc3RvcmUsXG4gIHBvc2l0aW9uczogRW5kZ2FtZVBvc2l0aW9uW10sXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcblxuICBwb3NpdGlvbnMuZm9yRWFjaCgocG9zaXRpb24pID0+IHtcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsIFwicG9zaXRpb25zXCIsIHBvc2l0aW9uLmlkLnRvU3RyaW5nKCkpO1xuICAgIGJhdGNoLnNldChkb2NSZWYsIHtcbiAgICAgIC4uLnBvc2l0aW9uLFxuICAgICAgY3JlYXRlZEF0OiBUaW1lc3RhbXAubm93KCksXG4gICAgICB1cGRhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG59XG5cbi8qKlxuICogU2VlZCB0ZXN0IGNhdGVnb3JpZXMgaW50byBGaXJlc3RvcmVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlZWRUZXN0Q2F0ZWdvcmllcyhcbiAgZGI6IEZpcmVzdG9yZSxcbiAgY2F0ZWdvcmllczogRW5kZ2FtZUNhdGVnb3J5W10sXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcblxuICBjYXRlZ29yaWVzLmZvckVhY2goKGNhdGVnb3J5KSA9PiB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGRiLCBcImNhdGVnb3JpZXNcIiwgY2F0ZWdvcnkuaWQpO1xuICAgIGJhdGNoLnNldChkb2NSZWYsIHtcbiAgICAgIC4uLmNhdGVnb3J5LFxuICAgICAgY3JlYXRlZEF0OiBUaW1lc3RhbXAubm93KCksXG4gICAgICB1cGRhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG59XG5cbi8qKlxuICogU2VlZCB0ZXN0IGNoYXB0ZXJzIGludG8gRmlyZXN0b3JlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWVkVGVzdENoYXB0ZXJzKFxuICBkYjogRmlyZXN0b3JlLFxuICBjaGFwdGVyczogRW5kZ2FtZUNoYXB0ZXJbXSxcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuXG4gIGNoYXB0ZXJzLmZvckVhY2goKGNoYXB0ZXIpID0+IHtcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsIFwiY2hhcHRlcnNcIiwgY2hhcHRlci5pZCk7XG4gICAgYmF0Y2guc2V0KGRvY1JlZiwge1xuICAgICAgLi4uY2hhcHRlcixcbiAgICAgIGNyZWF0ZWRBdDogVGltZXN0YW1wLm5vdygpLFxuICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAubm93KCksXG4gICAgfSk7XG4gIH0pO1xuXG4gIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xufVxuXG4vKipcbiAqIENvbW1vbiB0ZXN0IGRhdGEgZm9yIGdhbWUgY29udGVudFxuICovXG5leHBvcnQgY29uc3QgVEVTVF9QT1NJVElPTlM6IEVuZGdhbWVQb3NpdGlvbltdID0gW1xuICB7XG4gICAgaWQ6IDEsXG4gICAgdGl0bGU6IFwiT3Bwb3NpdGlvbiBCYXNpY3NcIixcbiAgICBkZXNjcmlwdGlvbjogXCJMZWFybiB0aGUgZnVuZGFtZW50YWwgY29uY2VwdCBvZiBvcHBvc2l0aW9uXCIsXG4gICAgZmVuOiBcIjRrMy84LzRLMy84LzgvOC84LzggdyAtIC0gMCAxXCIsXG4gICAgY2F0ZWdvcnk6IFwia2luZy1wYXduXCIsXG4gICAgZGlmZmljdWx0eTogXCJiZWdpbm5lclwiLFxuICAgIHRhcmdldE1vdmVzOiAxLFxuICAgIGhpbnRzOiBbXCJPcHBvc2l0aW9uIGlzIGtleVwiXSxcbiAgICBzb2x1dGlvbjogW1wiS2U2LWU3XCJdLFxuICAgIHNpZGVUb01vdmU6IFwid2hpdGVcIixcbiAgICBnb2FsOiBcIndpblwiLFxuICB9LFxuICB7XG4gICAgaWQ6IDIsXG4gICAgdGl0bGU6IFwiQWR2YW5jZWQgT3Bwb3NpdGlvblwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIk1hc3RlciBtb3JlIGNvbXBsZXggb3Bwb3NpdGlvbiBwYXR0ZXJuc1wiLFxuICAgIGZlbjogXCI4LzgvNGszLzgvOC80SzMvOC84IHcgLSAtIDAgMVwiLFxuICAgIGNhdGVnb3J5OiBcImtpbmctcGF3blwiLFxuICAgIGRpZmZpY3VsdHk6IFwiaW50ZXJtZWRpYXRlXCIsXG4gICAgdGFyZ2V0TW92ZXM6IDMsXG4gICAgaGludHM6IFtcIlVzZSBvcHBvc2l0aW9uIHRvIGNvbnRyb2wga2V5IHNxdWFyZXNcIl0sXG4gICAgc29sdXRpb246IFtcIktlMy1lNFwiLCBcIktlNC1lNVwiLCBcIktlNS1kNlwiXSxcbiAgICBzaWRlVG9Nb3ZlOiBcIndoaXRlXCIsXG4gICAgZ29hbDogXCJ3aW5cIixcbiAgfSxcbiAge1xuICAgIGlkOiAxMixcbiAgICB0aXRsZTogXCJCcsO8Y2tlbmJhdVwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkJ1aWxkIGEgYnJpZGdlIGZvciB5b3VyIHJvb2tcIixcbiAgICBmZW46IFwiMUs2LzFQNi84LzgvOC84L3I3LzFrNiBiIC0gLSAwIDFcIixcbiAgICBjYXRlZ29yeTogXCJyb29rLXBhd25cIixcbiAgICBkaWZmaWN1bHR5OiBcImFkdmFuY2VkXCIsXG4gICAgdGFyZ2V0TW92ZXM6IDUsXG4gICAgaGludHM6IFtcIkNyZWF0ZSBhIGJyaWRnZSB3aXRoIHlvdXIgcm9va1wiXSxcbiAgICBzb2x1dGlvbjogW1wiUmEyLWE4K1wiLCBcIktiOC1jN1wiLCBcIlJhOC1hN1wiLCBcIktiMS1iMlwiLCBcIlJhNy1iN1wiXSxcbiAgICBzaWRlVG9Nb3ZlOiBcImJsYWNrXCIsXG4gICAgZ29hbDogXCJkcmF3XCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgVEVTVF9DQVRFR09SSUVTOiBFbmRnYW1lQ2F0ZWdvcnlbXSA9IFtcbiAge1xuICAgIGlkOiBcImtpbmctcGF3blwiLFxuICAgIG5hbWU6IFwiS2luZyBhbmQgUGF3blwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkZ1bmRhbWVudGFsIGtpbmcgYW5kIHBhd24gZW5kZ2FtZXNcIixcbiAgICBpY29uOiBcIuKZlFwiLFxuICAgIHBvc2l0aW9uczogW10sXG4gICAgc3ViY2F0ZWdvcmllczogW10sXG4gIH0sXG4gIHtcbiAgICBpZDogXCJyb29rLXBhd25cIixcbiAgICBuYW1lOiBcIlJvb2sgYW5kIFBhd25cIixcbiAgICBkZXNjcmlwdGlvbjogXCJSb29rIGVuZGdhbWVzIHdpdGggcGF3bnNcIixcbiAgICBpY29uOiBcIuKZnFwiLFxuICAgIHBvc2l0aW9uczogW10sXG4gICAgc3ViY2F0ZWdvcmllczogW10sXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgVEVTVF9DSEFQVEVSUzogRW5kZ2FtZUNoYXB0ZXJbXSA9IFtcbiAge1xuICAgIGlkOiBcIm9wcG9zaXRpb24tYmFzaWNzXCIsXG4gICAgbmFtZTogXCJPcHBvc2l0aW9uIEZ1bmRhbWVudGFsc1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkxlYXJuIHRoZSBiYXNpY3Mgb2Ygb3Bwb3NpdGlvblwiLFxuICAgIGNhdGVnb3J5OiBcImtpbmctcGF3blwiLFxuICAgIGxlc3NvbnM6IFtdLFxuICAgIHRvdGFsTGVzc29uczogNSxcbiAgfSxcbiAge1xuICAgIGlkOiBcImJyaWRnZS1idWlsZGluZ1wiLFxuICAgIG5hbWU6IFwiQnJpZGdlIEJ1aWxkaW5nIFRlY2huaXF1ZVwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIk1hc3RlciB0aGUgYnJpZGdlIGJ1aWxkaW5nIHRlY2huaXF1ZVwiLFxuICAgIGNhdGVnb3J5OiBcInJvb2stcGF3blwiLFxuICAgIGxlc3NvbnM6IFtdLFxuICAgIHRvdGFsTGVzc29uczogMyxcbiAgfSxcbl07XG5cbi8qKlxuICogQ2xlYW51cCBhbGwgdGVzdCBGaXJlYmFzZSBhcHBzXG4gKiBTaG91bGQgYmUgY2FsbGVkIGluIGFmdGVyQWxsKCkgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXBBbGxUZXN0RmlyZWJhc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGNsZWFudXBQcm9taXNlcyA9IHRlc3RJbnN0YW5jZXMubWFwKGFzeW5jIChpbnN0YW5jZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkZWxldGVBcHAoaW5zdGFuY2UuYXBwKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gQXBwIG1pZ2h0IGFscmVhZHkgYmUgZGVsZXRlZFxuICAgIH1cbiAgfSk7XG4gIFxuICBhd2FpdCBQcm9taXNlLmFsbChjbGVhbnVwUHJvbWlzZXMpO1xuICB0ZXN0SW5zdGFuY2VzLmxlbmd0aCA9IDA7IC8vIENsZWFyIHRoZSBhcnJheVxufVxuXG4vKipcbiAqIFdhaXQgZm9yIEZpcmVzdG9yZSB0byBiZSByZWFkeSAoZm9yIENJIGVudmlyb25tZW50cylcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JGaXJlc3RvcmUoXG4gIGRiOiBGaXJlc3RvcmUsXG4gIG1heEF0dGVtcHRzID0gMTBcbik6IFByb21pc2U8dm9pZD4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG1heEF0dGVtcHRzOyBpKyspIHtcbiAgICB0cnkge1xuICAgICAgLy8gVHJ5IHRvIHJlYWQgZnJvbSBhIGNvbGxlY3Rpb25cbiAgICAgIGF3YWl0IGdldERvY3MoY29sbGVjdGlvbihkYiwgXCJwb3NpdGlvbnNcIikpO1xuICAgICAgcmV0dXJuOyAvLyBTdWNjZXNzXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChpID09PSBtYXhBdHRlbXB0cyAtIDEpIHRocm93IGVycm9yO1xuICAgICAgLy8gV2FpdCBhbmQgcmV0cnlcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcbiAgICB9XG4gIH1cbn0iXSwibmFtZXMiOlsiUmVhbHRpbWVUZXN0SGVscGVyIiwiVEVTVF9DQVJEX1BST0dSRVNTIiwiVEVTVF9DQVRFR09SSUVTIiwiVEVTVF9DSEFQVEVSUyIsIlRFU1RfUE9TSVRJT05TIiwiVEVTVF9VU0VSX1NUQVRTIiwiY2xlYW51cEFsbFRlc3RGaXJlYmFzZSIsImNsZWFyRmlyZXN0b3JlRGF0YSIsImNsZWFyVXNlclByb2dyZXNzRGF0YSIsImNyZWF0ZUFub255bW91c1VzZXIiLCJjcmVhdGVUZXN0VXNlciIsImNyZWF0ZVRlc3RVc2VyV2l0aFByb2dyZXNzIiwiaW5pdGlhbGl6ZVRlc3RGaXJlYmFzZSIsInNlZWRUZXN0Q2F0ZWdvcmllcyIsInNlZWRUZXN0Q2hhcHRlcnMiLCJzZWVkVGVzdFBvc2l0aW9ucyIsInNlZWRVc2VyUHJvZ3Jlc3MiLCJ3YWl0Rm9yRmlyZXN0b3JlIiwiVEVTVF9DT05GSUciLCJwcm9qZWN0SWQiLCJwcm9jZXNzIiwiZW52IiwiVEVTVF9QUk9KRUNUX0lEIiwiYXBpS2V5IiwiYXV0aERvbWFpbiIsInRlc3RJbnN0YW5jZXMiLCJpbnN0YW5jZU5hbWUiLCJhcHBOYW1lIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsImFwcCIsImluaXRpYWxpemVBcHAiLCJkYiIsImdldEZpcmVzdG9yZSIsImF1dGgiLCJnZXRBdXRoIiwiY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yIiwiZXJyb3IiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwiY29ubmVjdEF1dGhFbXVsYXRvciIsImRpc2FibGVXYXJuaW5ncyIsImluc3RhbmNlIiwicHVzaCIsImVtYWlsIiwicGFzc3dvcmQiLCJ0ZXN0RW1haWwiLCJ0ZXN0UGFzc3dvcmQiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJjb2RlIiwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzaWduSW5Bbm9ueW1vdXNseSIsImNsZWFyQWxsRW11bGF0b3JEYXRhIiwidXNlcklkIiwidXNlclByb2dyZXNzUmVmIiwiY29sbGVjdGlvbiIsInNuYXBzaG90IiwiZ2V0RG9jcyIsImVtcHR5IiwiYmF0Y2giLCJ3cml0ZUJhdGNoIiwiZG9jcyIsImZvckVhY2giLCJkb2MiLCJkZWxldGUiLCJyZWYiLCJjb21taXQiLCJ0b3RhbFBvc2l0aW9uc0NvbXBsZXRlZCIsIm92ZXJhbGxTdWNjZXNzUmF0ZSIsInRvdGFsVGltZVNwZW50IiwidG90YWxIaW50c1VzZWQiLCJsYXN0QWN0aXZlIiwiaWQiLCJuZXh0UmV2aWV3QXQiLCJsYXN0UmV2aWV3ZWRBdCIsImludGVydmFsIiwicmVwZXRpdGlvbiIsImVmYWN0b3IiLCJsYXBzZXMiLCJzdGF0cyIsImNhcmRzIiwidXNlclN0YXRzIiwic2VydmVyVGltZXN0YW1wIiwic2V0RG9jIiwibGVuZ3RoIiwiY2FyZCIsImRvY1JlZiIsInNldCIsImxhc3RVcGRhdGVkIiwidXNlckNyZWRlbnRpYWwiLCJ1c2VyIiwidWlkIiwicmVnaXN0ZXJMaXN0ZW5lciIsInVuc3Vic2NyaWJlIiwibGlzdGVuZXJzIiwiY2xlYW51cCIsIndhaXRGb3JVcGRhdGVzIiwiZXhwZWN0ZWRVcGRhdGVzIiwidGltZW91dE1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsIkVycm9yIiwidXBkYXRlQ291bnQiLCJjaGVja1VwZGF0ZXMiLCJjbGVhclRpbWVvdXQiLCJnbG9iYWwiLCJfX3J0VGVzdFVwZGF0ZSIsInBvc2l0aW9ucyIsInBvc2l0aW9uIiwiY3JlYXRlZEF0IiwiVGltZXN0YW1wIiwidXBkYXRlZEF0IiwiY2F0ZWdvcmllcyIsImNhdGVnb3J5IiwiY2hhcHRlcnMiLCJjaGFwdGVyIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImZlbiIsImRpZmZpY3VsdHkiLCJ0YXJnZXRNb3ZlcyIsImhpbnRzIiwic29sdXRpb24iLCJzaWRlVG9Nb3ZlIiwiZ29hbCIsIm5hbWUiLCJpY29uIiwic3ViY2F0ZWdvcmllcyIsImxlc3NvbnMiLCJ0b3RhbExlc3NvbnMiLCJjbGVhbnVwUHJvbWlzZXMiLCJtYXAiLCJkZWxldGVBcHAiLCJhbGwiLCJtYXhBdHRlbXB0cyIsImkiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Q0FNQzs7Ozs7Ozs7Ozs7UUF1UllBO2VBQUFBOztRQXBHQUM7ZUFBQUE7O1FBaVFBQztlQUFBQTs7UUFtQkFDO2VBQUFBOztRQTdEQUM7ZUFBQUE7O1FBbk9BQztlQUFBQTs7UUF1VFNDO2VBQUFBOztRQXZWQUM7ZUFBQUE7O1FBVUFDO2VBQUFBOztRQWxCQUM7ZUFBQUE7O1FBekJBQztlQUFBQTs7UUF5SkFDO2VBQUFBOztRQXRNQUM7ZUFBQUE7O1FBdVNBQztlQUFBQTs7UUFxQkFDO2VBQUFBOztRQTFDQUM7ZUFBQUE7O1FBbkhBQztlQUFBQTs7UUFzUkFDO2VBQUFBOzs7cUJBNWVnQzsyQkFZL0M7c0JBV0E7cUNBTzhCOzs7Ozs7Ozs7Ozs7OztBQUVyQywyQ0FBMkM7QUFDM0MsTUFBTUMsY0FBYztJQUNsQkMsV0FBV0MsUUFBUUMsR0FBRyxDQUFDQyxlQUFlLElBQUk7SUFDMUNDLFFBQVE7SUFDUkMsWUFBWTtBQUNkO0FBVUEsdUNBQXVDO0FBQ3ZDLE1BQU1DLGdCQUF3QyxFQUFFO0FBT3pDLGVBQWViLHVCQUNwQmMsWUFBcUI7SUFFckIsbURBQW1EO0lBQ25ELE1BQU1DLFVBQVVELGdCQUFnQixDQUFDLFNBQVMsRUFBRUUs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