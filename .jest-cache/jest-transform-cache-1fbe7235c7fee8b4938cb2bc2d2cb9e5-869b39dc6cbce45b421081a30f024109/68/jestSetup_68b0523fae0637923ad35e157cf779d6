1009711b28b7cffc2e40b5f793447ba7
/**
 * Jest Setup Utilities
 * Common setup patterns for Jest 30 with ServiceContainer
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get debugContainer () {
        return debugContainer;
    },
    get getGlobalTestContainer () {
        return getGlobalTestContainer;
    },
    get mockConsole () {
        return mockConsole;
    },
    get platformServiceMatchers () {
        return platformServiceMatchers;
    },
    get setupGlobalTestContainer () {
        return setupGlobalTestContainer;
    },
    get setupPerTestContainer () {
        return setupPerTestContainer;
    },
    get setupReactTestingWithContainer () {
        return setupReactTestingWithContainer;
    },
    get testEnvironment () {
        return testEnvironment;
    },
    get waitForNextTick () {
        return waitForNextTick;
    },
    get waitForServicesReady () {
        return waitForServicesReady;
    }
});
require("@testing-library/jest-dom");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _createTestContainer = require("./createTestContainer");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
var _window_navigator_userAgent, _window_navigator, _process_versions;
/**
 * Global test container for tests that need shared state
 * Use sparingly - prefer per-test containers for better isolation
 */ let globalTestContainer = null;
function setupGlobalTestContainer(overrides) {
    beforeAll(()=>{
        globalTestContainer = (0, _createTestContainer.createTestContainer)(overrides);
    });
    afterAll(()=>{
        globalTestContainer = null;
    });
    beforeEach(()=>{
        // Clear instances between tests for fresh state
        globalTestContainer === null || globalTestContainer === void 0 ? void 0 : globalTestContainer.clearInstances();
    });
}
function getGlobalTestContainer() {
    if (!globalTestContainer) {
        throw new Error("Global test container not set up. Call setupGlobalTestContainer() first.");
    }
    return globalTestContainer;
}
function setupPerTestContainer(overrides) {
    let container;
    beforeEach(()=>{
        container = (0, _createTestContainer.createTestContainer)(overrides);
    });
    afterEach(()=>{
        container.clearInstances();
    });
    return ()=>container;
}
function setupReactTestingWithContainer(overrides) {
    let container;
    let wrapper;
    beforeEach(()=>{
        container = (0, _createTestContainer.createTestContainer)(overrides);
        // Create wrapper component
        /**
     *
     * @param root0
     * @param root0.children
     */ wrapper = ({ children })=>{
            const { ServiceProvider } = require("@shared/services/container/adapter");
            return _react.default.createElement(ServiceProvider, {
                container
            }, children);
        };
    });
    afterEach(()=>{
        container.clearInstances();
    });
    return {
        /**
     *
     */ getContainer: ()=>container,
        /**
     *
     */ getWrapper: ()=>wrapper
    };
}
/**
 *
 */ const platformServiceMatchers = {
    /**
   * Check if a service method was called
   * @param service
   * @param method
   * @param args
   */ toHaveBeenCalledOnService: (service, method, ...args)=>{
        if (typeof jest !== "undefined") {
            expect(service[method]).toHaveBeenCalledWith(...args);
        }
    },
    /**
   * Check storage operations
   * @param storage
   * @param key
   * @param value
   */ toHaveStorageItem: (storage, key, value)=>{
        expect(storage.getItem(key)).toBe(value);
    },
    /**
   * Check storage calls
   * @param storage
   * @param method
   * @param args
   */ toHaveCalledStorageMethod: (storage, method, ...args)=>{
        if (typeof jest !== "undefined") {
            expect(storage[method]).toHaveBeenCalledWith(...args);
        }
    }
};
/**
 *
 */ const testEnvironment = {
    isJest: typeof jest !== "undefined",
    isJSDOM: typeof window !== "undefined" && ((_window_navigator = window.navigator) === null || _window_navigator === void 0 ? void 0 : (_window_navigator_userAgent = _window_navigator.userAgent) === null || _window_navigator_userAgent === void 0 ? void 0 : _window_navigator_userAgent.includes("jsdom")),
    isNode: typeof process !== "undefined" && ((_process_versions = process.versions) === null || _process_versions === void 0 ? void 0 : _process_versions.node)
};
/**
 *
 */ const waitForNextTick = ()=>{
    return new Promise((resolve)=>{
        if (typeof setImmediate !== "undefined") {
            setImmediate(resolve);
        } else {
            setTimeout(resolve, 0);
        }
    });
};
/**
 *
 */ const waitForServicesReady = async (container)=>{
    // Give services time to initialize
    await waitForNextTick();
    // Try to resolve a basic service to ensure container is ready
    try {
        container.resolveCustom("browser.localStorage");
    } catch (error) {
        // If services aren't ready, wait a bit more
        await new Promise((resolve)=>setTimeout(resolve, 10));
    }
};
function debugContainer(container) {
    if (process.env.NODE_ENV === "test" && process.env.DEBUG_CONTAINER) {
        var _container_getStats, _container_getRegisteredKeys;
        console.log("Container Stats:", (_container_getStats = container.getStats) === null || _container_getStats === void 0 ? void 0 : _container_getStats.call(container));
        console.log("Registered Keys:", (_container_getRegisteredKeys = container.getRegisteredKeys) === null || _container_getRegisteredKeys === void 0 ? void 0 : _container_getRegisteredKeys.call(container));
    }
}
function mockConsole() {
    const originalConsole = {
        ...console
    };
    beforeEach(()=>{
        jest.spyOn(console, "log").mockImplementation(()=>{});
        jest.spyOn(console, "warn").mockImplementation(()=>{});
        jest.spyOn(console, "error").mockImplementation(()=>{});
    });
    afterEach(()=>{
        Object.assign(console, originalConsole);
    });
    return {
        /**
     *
     * @param message
     */ expectConsoleLog: (message)=>{
            expect(console.log).toHaveBeenCalledWith(expect.stringContaining(message));
        },
        /**
     *
     * @param message
     */ expectConsoleWarn: (message)=>{
            expect(console.warn).toHaveBeenCalledWith(expect.stringContaining(message));
        },
        /**
     *
     * @param message
     */ expectConsoleError: (message)=>{
            expect(console.error).toHaveBeenCalledWith(expect.stringContaining(message));
        }
    };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RoZWh1L2Nvb2xQcm9qZWN0cy9FbmRnYW1lVHJhaW5lci10cmFpbmluZy1ib2FyZC1jb21wbGV0ZS9zcmMvdGVzdHMvdXRpbHMvamVzdFNldHVwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSmVzdCBTZXR1cCBVdGlsaXRpZXNcbiAqIENvbW1vbiBzZXR1cCBwYXR0ZXJucyBmb3IgSmVzdCAzMCB3aXRoIFNlcnZpY2VDb250YWluZXJcbiAqL1xuXG5pbXBvcnQgXCJAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tXCI7XG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbi8vIE5vdGU6IE1TVyBwb2x5ZmlsbHMgcmVtb3ZlZCAtIHVzaW5nIHNlcnZpY2UtbGV2ZWwgbW9ja2luZyBpbnN0ZWFkXG4vLyBUaGlzIHNpZ25pZmljYW50bHkgaW1wcm92ZXMgdGVzdCBwZXJmb3JtYW5jZSBhbmQgc3RhYmlsaXR5XG5pbXBvcnQgeyBJU2VydmljZUNvbnRhaW5lciB9IGZyb20gXCJAc2hhcmVkL3NlcnZpY2VzL2NvbnRhaW5lclwiO1xuaW1wb3J0IHtcbiAgY3JlYXRlVGVzdENvbnRhaW5lcixcbiAgVGVzdFNlcnZpY2VPdmVycmlkZXMsXG59IGZyb20gXCIuL2NyZWF0ZVRlc3RDb250YWluZXJcIjtcblxuLyoqXG4gKiBHbG9iYWwgdGVzdCBjb250YWluZXIgZm9yIHRlc3RzIHRoYXQgbmVlZCBzaGFyZWQgc3RhdGVcbiAqIFVzZSBzcGFyaW5nbHkgLSBwcmVmZXIgcGVyLXRlc3QgY29udGFpbmVycyBmb3IgYmV0dGVyIGlzb2xhdGlvblxuICovXG5sZXQgZ2xvYmFsVGVzdENvbnRhaW5lcjogSVNlcnZpY2VDb250YWluZXIgfCBudWxsID0gbnVsbDtcblxuLyoqXG4gKiBTZXR1cCBnbG9iYWwgdGVzdCBjb250YWluZXJcbiAqIENhbGwgaW4gamVzdC5zZXR1cC5qcyBvciBkZXNjcmliZSBibG9ja1xuICogQHBhcmFtIG92ZXJyaWRlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBHbG9iYWxUZXN0Q29udGFpbmVyKFxuICBvdmVycmlkZXM/OiBUZXN0U2VydmljZU92ZXJyaWRlcyxcbik6IHZvaWQge1xuICBiZWZvcmVBbGwoKCkgPT4ge1xuICAgIGdsb2JhbFRlc3RDb250YWluZXIgPSBjcmVhdGVUZXN0Q29udGFpbmVyKG92ZXJyaWRlcyk7XG4gIH0pO1xuXG4gIGFmdGVyQWxsKCgpID0+IHtcbiAgICBnbG9iYWxUZXN0Q29udGFpbmVyID0gbnVsbDtcbiAgfSk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgaW5zdGFuY2VzIGJldHdlZW4gdGVzdHMgZm9yIGZyZXNoIHN0YXRlXG4gICAgZ2xvYmFsVGVzdENvbnRhaW5lcj8uY2xlYXJJbnN0YW5jZXMoKTtcbiAgfSk7XG59XG5cbi8qKlxuICogR2V0IGdsb2JhbCB0ZXN0IGNvbnRhaW5lclxuICogVGhyb3dzIGVycm9yIGlmIG5vdCBzZXQgdXBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbFRlc3RDb250YWluZXIoKTogSVNlcnZpY2VDb250YWluZXIge1xuICBpZiAoIWdsb2JhbFRlc3RDb250YWluZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIkdsb2JhbCB0ZXN0IGNvbnRhaW5lciBub3Qgc2V0IHVwLiBDYWxsIHNldHVwR2xvYmFsVGVzdENvbnRhaW5lcigpIGZpcnN0LlwiLFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGdsb2JhbFRlc3RDb250YWluZXI7XG59XG5cbi8qKlxuICogUGVyLXRlc3QgY29udGFpbmVyIHNldHVwXG4gKiBQcmVmZXJyZWQgYXBwcm9hY2ggZm9yIGJldHRlciB0ZXN0IGlzb2xhdGlvblxuICogQHBhcmFtIG92ZXJyaWRlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBQZXJUZXN0Q29udGFpbmVyKFxuICBvdmVycmlkZXM/OiBUZXN0U2VydmljZU92ZXJyaWRlcyxcbik6ICgpID0+IElTZXJ2aWNlQ29udGFpbmVyIHtcbiAgbGV0IGNvbnRhaW5lcjogSVNlcnZpY2VDb250YWluZXI7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY29udGFpbmVyID0gY3JlYXRlVGVzdENvbnRhaW5lcihvdmVycmlkZXMpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGNvbnRhaW5lci5jbGVhckluc3RhbmNlcygpO1xuICB9KTtcblxuICByZXR1cm4gKCkgPT4gY29udGFpbmVyO1xufVxuXG4vKipcbiAqIFJlYWN0IFRlc3RpbmcgTGlicmFyeSBzZXR1cCB3aXRoIFNlcnZpY2VDb250YWluZXJcbiAqIEBwYXJhbSBvdmVycmlkZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldHVwUmVhY3RUZXN0aW5nV2l0aENvbnRhaW5lcihcbiAgb3ZlcnJpZGVzPzogVGVzdFNlcnZpY2VPdmVycmlkZXMsXG4pIHtcbiAgbGV0IGNvbnRhaW5lcjogSVNlcnZpY2VDb250YWluZXI7XG4gIGxldCB3cmFwcGVyOiBSZWFjdC5Db21wb25lbnRUeXBlPHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9PjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBjb250YWluZXIgPSBjcmVhdGVUZXN0Q29udGFpbmVyKG92ZXJyaWRlcyk7XG5cbiAgICAvLyBDcmVhdGUgd3JhcHBlciBjb21wb25lbnRcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSByb290MFxuICAgICAqIEBwYXJhbSByb290MC5jaGlsZHJlblxuICAgICAqL1xuICAgIHdyYXBwZXIgPSAoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkgPT4ge1xuICAgICAgY29uc3QgeyBTZXJ2aWNlUHJvdmlkZXIgfSA9IHJlcXVpcmUoXCJAc2hhcmVkL3NlcnZpY2VzL2NvbnRhaW5lci9hZGFwdGVyXCIpO1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VydmljZVByb3ZpZGVyLCB7IGNvbnRhaW5lciB9LCBjaGlsZHJlbik7XG4gICAgfTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBjb250YWluZXIuY2xlYXJJbnN0YW5jZXMoKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIGdldENvbnRhaW5lcjogKCkgPT4gY29udGFpbmVyLFxuICAgIC8qKlxuICAgICAqXG4gICAgICovXG4gICAgZ2V0V3JhcHBlcjogKCkgPT4gd3JhcHBlcixcbiAgfTtcbn1cblxuLyoqXG4gKiBDb21tb24gSmVzdCBtYXRjaGVycyBmb3IgcGxhdGZvcm0gc2VydmljZXNcbiAqL1xuZXhwb3J0IC8qKlxuICpcbiAqL1xuY29uc3QgcGxhdGZvcm1TZXJ2aWNlTWF0Y2hlcnMgPSB7XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHNlcnZpY2UgbWV0aG9kIHdhcyBjYWxsZWRcbiAgICogQHBhcmFtIHNlcnZpY2VcbiAgICogQHBhcmFtIG1ldGhvZFxuICAgKiBAcGFyYW0gYXJnc1xuICAgKi9cbiAgdG9IYXZlQmVlbkNhbGxlZE9uU2VydmljZTogKHNlcnZpY2U6IGFueSwgbWV0aG9kOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBqZXN0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBleHBlY3Qoc2VydmljZVttZXRob2RdKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCguLi5hcmdzKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIHN0b3JhZ2Ugb3BlcmF0aW9uc1xuICAgKiBAcGFyYW0gc3RvcmFnZVxuICAgKiBAcGFyYW0ga2V5XG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKi9cbiAgdG9IYXZlU3RvcmFnZUl0ZW06IChzdG9yYWdlOiBTdG9yYWdlLCBrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4ge1xuICAgIGV4cGVjdChzdG9yYWdlLmdldEl0ZW0oa2V5KSkudG9CZSh2YWx1ZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrIHN0b3JhZ2UgY2FsbHNcbiAgICogQHBhcmFtIHN0b3JhZ2VcbiAgICogQHBhcmFtIG1ldGhvZFxuICAgKiBAcGFyYW0gYXJnc1xuICAgKi9cbiAgdG9IYXZlQ2FsbGVkU3RvcmFnZU1ldGhvZDogKFxuICAgIHN0b3JhZ2U6IFN0b3JhZ2UsXG4gICAgbWV0aG9kOiBrZXlvZiBTdG9yYWdlLFxuICAgIC4uLmFyZ3M6IGFueVtdXG4gICkgPT4ge1xuICAgIGlmICh0eXBlb2YgamVzdCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgZXhwZWN0KChzdG9yYWdlIGFzIGFueSlbbWV0aG9kXSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoLi4uYXJncyk7XG4gICAgfVxuICB9LFxufTtcblxuLyoqXG4gKiBUZXN0IGVudmlyb25tZW50IGRldGVjdGlvblxuICovXG5leHBvcnQgLyoqXG4gKlxuICovXG5jb25zdCB0ZXN0RW52aXJvbm1lbnQgPSB7XG4gIGlzSmVzdDogdHlwZW9mIGplc3QgIT09IFwidW5kZWZpbmVkXCIsXG4gIGlzSlNET006XG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHdpbmRvdy5uYXZpZ2F0b3I/LnVzZXJBZ2VudD8uaW5jbHVkZXMoXCJqc2RvbVwiKSxcbiAgaXNOb2RlOiB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLnZlcnNpb25zPy5ub2RlLFxufTtcblxuLyoqXG4gKiBXYWl0IGZvciBuZXh0IHRpY2sgKHVzZWZ1bCBmb3IgYXN5bmMgb3BlcmF0aW9ucylcbiAqL1xuZXhwb3J0IC8qKlxuICpcbiAqL1xuY29uc3Qgd2FpdEZvck5leHRUaWNrID0gKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBpZiAodHlwZW9mIHNldEltbWVkaWF0ZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgc2V0SW1tZWRpYXRlKHJlc29sdmUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIDApO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIFdhaXQgZm9yIGNvbnRhaW5lciBzZXJ2aWNlcyB0byBiZSByZWFkeVxuICogVXNlZnVsIHdoZW4gc2VydmljZXMgaGF2ZSBhc3luYyBpbml0aWFsaXphdGlvblxuICogQHBhcmFtIGNvbnRhaW5lclxuICovXG5leHBvcnQgLyoqXG4gKlxuICovXG5jb25zdCB3YWl0Rm9yU2VydmljZXNSZWFkeSA9IGFzeW5jIChcbiAgY29udGFpbmVyOiBJU2VydmljZUNvbnRhaW5lcixcbik6IFByb21pc2U8dm9pZD4gPT4ge1xuICAvLyBHaXZlIHNlcnZpY2VzIHRpbWUgdG8gaW5pdGlhbGl6ZVxuICBhd2FpdCB3YWl0Rm9yTmV4dFRpY2soKTtcblxuICAvLyBUcnkgdG8gcmVzb2x2ZSBhIGJhc2ljIHNlcnZpY2UgdG8gZW5zdXJlIGNvbnRhaW5lciBpcyByZWFkeVxuICB0cnkge1xuICAgIGNvbnRhaW5lci5yZXNvbHZlQ3VzdG9tKFwiYnJvd3Nlci5sb2NhbFN0b3JhZ2VcIik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gSWYgc2VydmljZXMgYXJlbid0IHJlYWR5LCB3YWl0IGEgYml0IG1vcmVcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMCkpO1xuICB9XG59O1xuXG4vKipcbiAqIERlYnVnIGhlbHBlciB0byBpbnNwZWN0IGNvbnRhaW5lciBzdGF0ZVxuICogQHBhcmFtIGNvbnRhaW5lclxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVidWdDb250YWluZXIoY29udGFpbmVyOiBJU2VydmljZUNvbnRhaW5lcik6IHZvaWQge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwidGVzdFwiICYmIHByb2Nlc3MuZW52LkRFQlVHX0NPTlRBSU5FUikge1xuICAgIGNvbnNvbGUubG9nKFwiQ29udGFpbmVyIFN0YXRzOlwiLCAoY29udGFpbmVyIGFzIGFueSkuZ2V0U3RhdHM/LigpKTtcbiAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdGVyZWQgS2V5czpcIiwgKGNvbnRhaW5lciBhcyBhbnkpLmdldFJlZ2lzdGVyZWRLZXlzPy4oKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBNb2NrIGNvbnNvbGUgbWV0aG9kcyBmb3IgdGVzdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vY2tDb25zb2xlKCkge1xuICBjb25zdCBvcmlnaW5hbENvbnNvbGUgPSB7IC4uLmNvbnNvbGUgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LnNweU9uKGNvbnNvbGUsIFwibG9nXCIpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG4gICAgamVzdC5zcHlPbihjb25zb2xlLCBcIndhcm5cIikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcbiAgICBqZXN0LnNweU9uKGNvbnNvbGUsIFwiZXJyb3JcIikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBPYmplY3QuYXNzaWduKGNvbnNvbGUsIG9yaWdpbmFsQ29uc29sZSk7XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgICAqL1xuICAgIGV4cGVjdENvbnNvbGVMb2c6IChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgIGV4cGVjdChjb25zb2xlLmxvZykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKG1lc3NhZ2UpLFxuICAgICAgKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICAgKi9cbiAgICBleHBlY3RDb25zb2xlV2FybjogKG1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgZXhwZWN0KGNvbnNvbGUud2FybikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKG1lc3NhZ2UpLFxuICAgICAgKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICAgKi9cbiAgICBleHBlY3RDb25zb2xlRXJyb3I6IChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgIGV4cGVjdChjb25zb2xlLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcobWVzc2FnZSksXG4gICAgICApO1xuICAgIH0sXG4gIH07XG59XG4iXSwibmFtZXMiOlsiZGVidWdDb250YWluZXIiLCJnZXRHbG9iYWxUZXN0Q29udGFpbmVyIiwibW9ja0NvbnNvbGUiLCJwbGF0Zm9ybVNlcnZpY2VNYXRjaGVycyIsInNldHVwR2xvYmFsVGVzdENvbnRhaW5lciIsInNldHVwUGVyVGVzdENvbnRhaW5lciIsInNldHVwUmVhY3RUZXN0aW5nV2l0aENvbnRhaW5lciIsInRlc3RFbnZpcm9ubWVudCIsIndhaXRGb3JOZXh0VGljayIsIndhaXRGb3JTZXJ2aWNlc1JlYWR5Iiwid2luZG93IiwicHJvY2VzcyIsImdsb2JhbFRlc3RDb250YWluZXIiLCJvdmVycmlkZXMiLCJiZWZvcmVBbGwiLCJjcmVhdGVUZXN0Q29udGFpbmVyIiwiYWZ0ZXJBbGwiLCJiZWZvcmVFYWNoIiwiY2xlYXJJbnN0YW5jZXMiLCJFcnJvciIsImNvbnRhaW5lciIsImFmdGVyRWFjaCIsIndyYXBwZXIiLCJjaGlsZHJlbiIsIlNlcnZpY2VQcm92aWRlciIsInJlcXVpcmUiLCJSZWFjdCIsImNyZWF0ZUVsZW1lbnQiLCJnZXRDb250YWluZXIiLCJnZXRXcmFwcGVyIiwidG9IYXZlQmVlbkNhbGxlZE9uU2VydmljZSIsInNlcnZpY2UiLCJtZXRob2QiLCJhcmdzIiwiamVzdCIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidG9IYXZlU3RvcmFnZUl0ZW0iLCJzdG9yYWdlIiwia2V5IiwidmFsdWUiLCJnZXRJdGVtIiwidG9CZSIsInRvSGF2ZUNhbGxlZFN0b3JhZ2VNZXRob2QiLCJpc0plc3QiLCJpc0pTRE9NIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5jbHVkZXMiLCJpc05vZGUiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldEltbWVkaWF0ZSIsInNldFRpbWVvdXQiLCJyZXNvbHZlQ3VzdG9tIiwiZXJyb3IiLCJlbnYiLCJOT0RFX0VOViIsIkRFQlVHX0NPTlRBSU5FUiIsImNvbnNvbGUiLCJsb2ciLCJnZXRTdGF0cyIsImdldFJlZ2lzdGVyZWRLZXlzIiwib3JpZ2luYWxDb25zb2xlIiwic3B5T24iLCJtb2NrSW1wbGVtZW50YXRpb24iLCJPYmplY3QiLCJhc3NpZ24iLCJleHBlY3RDb25zb2xlTG9nIiwibWVzc2FnZSIsInN0cmluZ0NvbnRhaW5pbmciLCJleHBlY3RDb25zb2xlV2FybiIsIndhcm4iLCJleHBlY3RDb25zb2xlRXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQzs7Ozs7Ozs7Ozs7UUEyTmVBO2VBQUFBOztRQTlLQUM7ZUFBQUE7O1FBd0xBQztlQUFBQTs7UUEzR1ZDO2VBQUFBOztRQWxHVUM7ZUFBQUE7O1FBbUNBQztlQUFBQTs7UUFvQkFDO2VBQUFBOztRQXlGVkM7ZUFBQUE7O1FBY0FDO2VBQUFBOztRQWtCQUM7ZUFBQUE7OztRQXRNQzs4REFDVztxQ0FRWDs7Ozs7O0lBaUtIQyw2QkFBQUEsbUJBQ3dDQztBQWhLNUM7OztDQUdDLEdBQ0QsSUFBSUMsc0JBQWdEO0FBTzdDLFNBQVNSLHlCQUNkUyxTQUFnQztJQUVoQ0MsVUFBVTtRQUNSRixzQkFBc0JHLElBQUFBLHdDQUFtQixFQUFDRjtJQUM1QztJQUVBRyxTQUFTO1FBQ1BKLHNCQUFzQjtJQUN4QjtJQUVBSyxXQUFXO1FBQ1QsZ0RBQWdEO1FBQ2hETCxnQ0FBQUEsMENBQUFBLG9C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