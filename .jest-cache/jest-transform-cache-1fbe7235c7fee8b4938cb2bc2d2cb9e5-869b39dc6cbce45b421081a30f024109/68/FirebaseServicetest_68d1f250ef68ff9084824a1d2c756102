09c215069cd3525d76e9eed5dd8d8273
/**
 * @file Firebase Service Integration Tests
 * @description Comprehensive Firebase integration tests with emulator
 * 
 * Tests for Issue #83: Firebase service integration test infrastructure
 * Covers User Progress CRUD, Authentication, Real-time updates, and concurrency
 * 
 * @jest-environment node
 */ // Setup fetch for Firebase Auth in Node environment
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
require("../../setup/firebase-test-setup");
const _firebasepaths = require("../../utils/firebase-paths");
const _firestore = require("firebase/firestore");
const _firebasetesthelpers = require("../../utils/firebase-test-helpers");
const _auth = require("firebase/auth");
const _firebaseemulatorapi = require("../../utils/firebase-emulator-api");
// Increase timeout for integration tests (60s for Firebase emulator)
jest.setTimeout(60000);
describe('Firebase Service Integration', ()=>{
    let testInstance;
    let testUserId;
    let realtimeHelper;
    beforeAll(async ()=>{
        // Ensure emulator is running
        const emulatorReady = await (0, _firebaseemulatorapi.isEmulatorRunning)();
        if (!emulatorReady) {
            console.log('Waiting for Firebase emulator to start...');
            await (0, _firebaseemulatorapi.waitForEmulator)();
        }
        // Clear all data before starting tests
        await (0, _firebasetesthelpers.clearFirestoreData)();
    });
    beforeEach(async ()=>{
        // Create isolated Firebase instance for each test
        testInstance = await (0, _firebasetesthelpers.initializeTestFirebase)();
        realtimeHelper = new _firebasetesthelpers.RealtimeTestHelper();
        // Create authenticated test user
        const userCredential = await (0, _firebasetesthelpers.createTestUser)(testInstance.auth);
        testUserId = userCredential.user.uid;
    });
    afterEach(async ()=>{
        // Cleanup real-time listeners
        realtimeHelper.cleanup();
        // Clear user data BEFORE signing out (needs auth for security rules)
        if (testUserId && (testInstance === null || testInstance === void 0 ? void 0 : testInstance.db)) {
            try {
                await (0, _firebasetesthelpers.clearUserProgressData)(testInstance.db, testUserId);
            } catch (error) {
            // Ignore errors if user data doesn't exist
            }
        }
        // Sign out any authenticated user AFTER clearing data
        if (testInstance === null || testInstance === void 0 ? void 0 : testInstance.auth) {
            await (0, _auth.signOut)(testInstance.auth);
        }
    });
    afterAll(async ()=>{
        // Cleanup all test Firebase instances
        await (0, _firebasetesthelpers.cleanupAllTestFirebase)();
    });
    describe('Firestore CRUD Operations', ()=>{
        describe('UserStats Operations', ()=>{
            it('creates user progress document with authentication', async ()=>{
                var _docSnap_data, _docSnap_data1;
                const userStats = {
                    ..._firebasetesthelpers.TEST_USER_STATS,
                    userId: testUserId
                };
                const docRef = (0, _firestore.doc)(testInstance.db, (0, _firebasepaths.getUserStatsPath)(testUserId));
                await (0, _firestore.setDoc)(docRef, {
                    ...userStats,
                    lastActive: (0, _firestore.serverTimestamp)()
                });
                const docSnap = await (0, _firestore.getDoc)(docRef);
                expect(docSnap.exists()).toBe(true);
                expect((_docSnap_data = docSnap.data()) === null || _docSnap_data === void 0 ? void 0 : _docSnap_data.userId).toBe(testUserId);
                expect((_docSnap_data1 = docSnap.data()) === null || _docSnap_data1 === void 0 ? void 0 : _docSnap_data1.totalPositionsCompleted).toBe(25);
            });
            it('reads user progress document', async ()=>{
                var _docSnap_data, _docSnap_data1;
                await (0, _firebasetesthelpers.seedUserProgress)(testInstance.db, testUserId);
                const docRef = (0, _firestore.doc)(testInstance.db, (0, _firebasepaths.getUserStatsPath)(testUserId));
                const docSnap = await (0, _firestore.getDoc)(docRef);
                expect(docSnap.exists()).toBe(true);
                expect((_docSnap_data = docSnap.data()) === null || _docSnap_data === void 0 ? void 0 : _docSnap_data.totalPositionsCompleted).toBe(25);
                expect((_docSnap_data1 = docSnap.data()) === null || _docSnap_data1 === void 0 ? void 0 : _docSnap_data1.overallSuccessRate).toBe(0.85);
            });
            it('updates user progress document', async ()=>{
                var _docSnap_data, _docSnap_data1;
                await (0, _firebasetesthelpers.seedUserProgress)(testInstance.db, testUserId);
                const docRef = (0, _firestore.doc)(testInstance.db, (0, _firebasepaths.getUserStatsPath)(testUserId));
                await (0, _firestore.updateDoc)(docRef, {
                    totalPositionsCompleted: 30,
                    overallSuccessRate: 0.90,
                    lastActive: (0, _firestore.serverTimestamp)()
                });
                const docSnap = await (0, _firestore.getDoc)(docRef);
                expect((_docSnap_data = docSnap.data()) === null || _docSnap_data === void 0 ? void 0 : _docSnap_data.totalPositionsCompleted).toBe(30);
                expect((_docSnap_data1 = docSnap.data()) === null || _docSnap_data1 === void 0 ? void 0 : _docSnap_data1.overallSuccessRate).toBe(0.90);
            });
            it('deletes user progress document', async ()=>{
                await (0, _firebasetesthelpers.seedUserProgress)(testInstance.db, testUserId);
                const docRef = (0, _firestore.doc)(testInstance.db, (0, _firebasepaths.getUserStatsPath)(testUserId));
                await (0, _firestore.deleteDoc)(docRef);
                const docSnap = await (0, _firestore.getDoc)(docRef);
                expect(docSnap.exists()).toBe(false);
            });
        });
        describe('CardProgress Operations', ()=>{
            it('creates multiple card progress documents', async ()=>{
                const batch = (0, _firestore.writeBatch)(testInstance.db);
                _firebasetesthelpers.TEST_CARD_PROGRESS.forEach((card)=>{
                    const docRef = (0, _firestore.doc)(testInstance.db, `users/${testUserId}/userProgress/${card.id}`);
                    batch.set(docRef, {
                        ...card,
                        lastUpdated: (0, _firestore.serverTimestamp)()
                    });
                });
                await batch.commit();
                // Verify all cards were created
                const progressCollection = (0, _firestore.collection)(testInstance.db, `users/${testUserId}/userProgress`);
                const snapshot = await (0, _firestore.getDocs)(progressCollection);
                // Filter out stats document, count only card documents
                const cardDocs = snapshot.docs.filter((d)=>d.id !== 'stats');
                expect(cardDocs.length).toBe(_firebasetesthelpers.TEST_CARD_PROGRESS.length);
            });
            it('queries due cards using where clause', async ()=>{
                await (0, _firebasetesthelpers.seedUserProgress)(testInstance.db, testUserId, undefined, _firebasetesthelpers.TEST_CARD_PROGRESS);
                const now = Date.now();
                const progressCollection = (0, _firestore.collection)(testInstance.db, `users/${testUserId}/userProgress`);
                // Query for due cards (nextReviewAt <= now)
                const dueCardsQuery = (0, _firestore.query)(progressCollection, (0, _firestore.where)('nextReviewAt', '<=', now));
                const snapshot = await (0, _firestore.getDocs)(dueCardsQuery);
                // Should find pos-2 which is overdue
                expect(snapshot.size).toBeGreaterThan(0);
                const dueCard = snapshot.docs.find((d)=>d.id === 'pos-2');
                expect(dueCard).toBeDefined();
            });
        });
    });
    describe('Real-time Updates', ()=>{
        it('receives real-time updates through onSnapshot for UserStats', (done)=>{
            const docRef = (0, _firestore.doc)(testInstance.db, `users/${testUserId}/userProgress/stats`);
            let updateCount = 0;
            const unsubscribe = (0, _firestore.onSnapshot)(docRef, (snapshot)=>{
                updateCount++;
                if (updateCount === 1) {
                    // Initial empty snapshot
                    expect(snapshot.exists()).toBe(false);
                    // Trigger first write
                    (0, _firestore.setDoc)(docRef, {
                        ..._firebasetesthelpers.TEST_USER_STATS,
                        userId: testUserId,
                        totalPositionsCompleted: 10
                    });
                } else if (updateCount === 2) {
                    var _snapshot_data;
                    // After first write
                    expect(snapshot.exists()).toBe(true);
                    expect((_snapshot_data = snapshot.data()) === null || _snapshot_data === void 0 ? void 0 : _snapshot_data.totalPositionsCompleted).toBe(10);
                    // Trigger update
                    (0, _firestore.updateDoc)(docRef, {
                        totalPositionsCompleted: 15
                    });
                } else if (updateCount === 3) {
                    var _snapshot_data1;
                    // After update
                    expect((_snapshot_data1 = snapshot.data()) === null || _snapshot_data1 === void 0 ? void 0 : _snapshot_data1.totalPositionsCompleted).toBe(15);
                    unsubscribe();
                    done();
                }
            });
            realtimeHelper.registerListener(unsubscribe);
        });
        it('receives real-time updates for CardProgress collection', (done)=>{
            const progressCollection = (0, _firestore.collection)(testInstance.db, `users/${testUserId}/userProgress`);
            let snapshotCount = 0;
            const unsubscribe = (0, _firestore.onSnapshot)(progressCollection, (snapshot)=>{
                snapshotCount++;
                if (snapshotCount === 1) {
                    // Initial empty collection
                    expect(snapshot.empty).toBe(true);
                    // Add first card
                    const card1Ref = (0, _firestore.doc)(progressCollection, 'card-1');
                    (0, _firestore.setDoc)(card1Ref, {
                        id: 'card-1',
                        nextReviewAt: Date.now() + 86400000,
                        lastReviewedAt: Date.now(),
                        interval: 1,
                        repetition: 1,
                        efactor: 2.5,
                        lapses: 0
                    });
                } else if (snapshotCount === 2) {
                    // After first card added
                    expect(snapshot.size).toBe(1);
                    // Add second card
                    const card2Ref = (0, _firestore.doc)(progressCollection, 'card-2');
                    (0, _firestore.setDoc)(card2Ref, {
                        id: 'card-2',
                        nextReviewAt: Date.now() + 172800000,
                        lastReviewedAt: Date.now(),
                        interval: 2,
                        repetition: 2,
                        efactor: 2.4,
                        lapses: 1
                    });
                } else if (snapshotCount === 3) {
                    // After second card added
                    expect(snapshot.size).toBe(2);
                    unsubscribe();
                    done();
                }
            });
            realtimeHelper.registerListener(unsubscribe);
        });
    });
    describe('Authentication & Security', ()=>{
        it('allows user to access only their own progress data', async ()=>{
            var _user2Doc_data;
            // Create first user with progress
            const { userId: userId1 } = await (0, _firebasetesthelpers.createTestUserWithProgress)(testInstance, 'user1@test.com');
            // Sign out user1
            await (0, _auth.signOut)(testInstance.auth);
            // Create and sign in as user2
            const userCredential2 = await (0, _firebasetesthelpers.createTestUser)(testInstance.auth, 'user2@test.com');
            const userId2 = userCredential2.user.uid;
            // Now as user2, try to read user1's data (should fail with security rules)
            const user1DocRef = (0, _firestore.doc)(testInstance.db, (0, _firebasepaths.getUserStatsPath)(userId1));
            // This should fail with security rules enabled
            await expect((0, _firestore.getDoc)(user1DocRef)).rejects.toThrow();
            // User2 should be able to write and read their own data
            await (0, _firebasetesthelpers.seedUserProgress)(testInstance.db, userId2);
            const user2DocRef = (0, _firestore.doc)(testInstance.db, (0, _firebasepaths.getUserStatsPath)(userId2));
            const user2Doc = await (0, _firestore.getDoc)(user2DocRef);
            expect(user2Doc.exists()).toBe(true);
            expect((_user2Doc_data = user2Doc.data()) === null || _user2Doc_data === void 0 ? void 0 : _user2Doc_data.userId).toBe(userId2);
        });
        it('supports anonymous user progress tracking', async ()=>{
            var _docSnap_data;
            const anonCredential = await (0, _firebasetesthelpers.createAnonymousUser)(testInstance.auth);
            const anonUserId = anonCredential.user.uid;
            await (0, _firebasetesthelpers.seedUserProgress)(testInstance.db, anonUserId, {
                userId: anonUserId
            });
            const docRef = (0, _firestore.doc)(testInstance.db, `users/${anonUserId}/userProgress/stats`);
            const docSnap = await (0, _firestore.getDoc)(docRef);
            expect(docSnap.exists()).toBe(true);
            expect((_docSnap_data = docSnap.data()) === null || _docSnap_data === void 0 ? void 0 : _docSnap_data.userId).toBe(anonUserId);
        });
    });
    describe('Concurrent Operations', ()=>{
        it('handles concurrent updates to the same document', async ()=>{
            var _finalDoc_data, _finalDoc_data1;
            const docRef = (0, _firestore.doc)(testInstance.db, `users/${testUserId}/userProgress/stats`);
            // Set initial value
            await (0, _firestore.setDoc)(docRef, {
                ..._firebasetesthelpers.TEST_USER_STATS,
                userId: testUserId,
                totalPositionsCompleted: 0
            });
            // Simulate concurrent updates
            const updates = Array.from({
                length: 5
            }, (_, i)=>(0, _firestore.updateDoc)(docRef, {
                    totalPositionsCompleted: i + 1,
                    lastActive: (0, _firestore.serverTimestamp)()
                }));
            await Promise.all(updates);
            // Check final state
            const finalDoc = await (0, _firestore.getDoc)(docRef);
            expect(finalDoc.exists()).toBe(true);
            expect((_finalDoc_data = finalDoc.data()) === null || _finalDoc_data === void 0 ? void 0 : _finalDoc_data.totalPositionsCompleted).toBeDefined();
            expect(typeof ((_finalDoc_data1 = finalDoc.data()) === null || _finalDoc_data1 === void 0 ? void 0 : _finalDoc_data1.totalPositionsCompleted)).toBe('number');
        });
        it('handles batch operations with multiple cards', async ()=>{
            const batch = (0, _firestore.writeBatch)(testInstance.db);
            // Create 10 cards in a batch
            for(let i = 0; i < 10; i++){
                const cardRef = (0, _firestore.doc)(testInstance.db, `users/${testUserId}/userProgress/card-${i}`);
                batch.set(cardRef, {
                    id: `card-${i}`,
                    nextReviewAt: Date.now() + i * 86400000,
                    lastReviewedAt: Date.now(),
                    interval: i + 1,
                    repetition: 1,
                    efactor: 2.5,
                    quality: 4,
                    lastUpdated: (0, _firestore.serverTimestamp)()
                });
            }
            await batch.commit();
            // Verify all cards were created
            const progressCollection = (0, _firestore.collection)(testInstance.db, `users/${testUserId}/userProgress`);
            const snapshot = await (0, _firestore.getDocs)(progressCollection);
            expect(snapshot.size).toBe(10);
        });
    });
    describe('Error Handling', ()=>{
        it('handles invalid document paths gracefully', async ()=>{
            // Test invalid path construction
            expect(()=>{
                // This creates an invalid path with empty segment
                (0, _firestore.doc)(testInstance.db, 'users', '', 'userProgress', 'stats');
            }).toThrow('Invalid document reference');
        });
        it('handles missing required fields', async ()=>{
            var _docSnap_data;
            const docRef = (0, _firestore.doc)(testInstance.db, `users/${testUserId}/userProgress/stats`);
            // Missing required userId field
            const invalidStats = {
                totalPositionsCompleted: 10
            };
            // This should succeed at Firestore level but fail validation in app
            await (0, _firestore.setDoc)(docRef, invalidStats);
            const docSnap = await (0, _firestore.getDoc)(docRef);
            expect(docSnap.exists()).toBe(true);
            expect((_docSnap_data = docSnap.data()) === null || _docSnap_data === void 0 ? void 0 : _docSnap_data.userId).toBeUndefined();
        });
    });
    describe('Multi-device Sync Scenarios', ()=>{
        it('simulates progress sync between multiple devices', async ()=>{
            var _deviceBRead_data, _deviceARead_data, _deviceARead_data1;
            const statsDocRef = (0, _firestore.doc)(testInstance.db, `users/${testUserId}/userProgress/stats`);
            // Device A initial write
            await (0, _firestore.setDoc)(statsDocRef, {
                ..._firebasetesthelpers.TEST_USER_STATS,
                userId: testUserId,
                totalPositionsCompleted: 10,
                device: 'A',
                lastActive: _firestore.Timestamp.fromMillis(Date.now())
            });
            // Device B reads current state
            const deviceBRead = await (0, _firestore.getDoc)(statsDocRef);
            expect((_deviceBRead_data = deviceBRead.data()) === null || _deviceBRead_data === void 0 ? void 0 : _deviceBRead_data.totalPositionsCompleted).toBe(10);
            // Device B updates
            await (0, _firestore.updateDoc)(statsDocRef, {
                totalPositionsCompleted: 15,
                device: 'B',
                lastActive: _firestore.Timestamp.fromMillis(Date.now() + 1000)
            });
            // Device A reads updated state
            const deviceARead = await (0, _firestore.getDoc)(statsDocRef);
            expect((_deviceARead_data = deviceARead.data()) === null || _deviceARead_data === void 0 ? void 0 : _deviceARead_data.totalPositionsCompleted).toBe(15);
            expect((_deviceARead_data1 = deviceARead.data()) === null || _deviceARead_data1 === void 0 ? void 0 : _deviceARead_data1.device).toBe('B');
        });
        it('handles conflicting card progress updates', async ()=>{
            var _finalState_data, _finalState_data1;
            const cardRef = (0, _firestore.doc)(testInstance.db, `users/${testUserId}/userProgress/card-1`);
            // Initial card state
            await (0, _firestore.setDoc)(cardRef, {
                id: 'card-1',
                nextReviewAt: Date.now() + 86400000,
                lastReviewedAt: Date.now(),
                interval: 1,
                repetition: 1,
                efactor: 2.5,
                quality: 4
            });
            // Simulate two devices updating the same card
            const device1Update = (0, _firestore.updateDoc)(cardRef, {
                lapses: 0,
                repetition: 2,
                lastReviewedAt: _firestore.Timestamp.fromMillis(Date.now() + 1000)
            });
            const device2Update = (0, _firestore.updateDoc)(cardRef, {
                quality: 3,
                repetition: 2,
                lastReviewedAt: _firestore.Timestamp.fromMillis(Date.now() + 2000)
            });
            // Both updates should succeed (last write wins)
            await Promise.all([
                device1Update,
                device2Update
            ]);
            const finalState = await (0, _firestore.getDoc)(cardRef);
            expect(finalState.exists()).toBe(true);
            expect((_finalState_data = finalState.data()) === null || _finalState_data === void 0 ? void 0 : _finalState_data.repetition).toBe(2);
            // Lapses will be either 0 or 1 depending on timing
            expect([
                0,
                1
            ]).toContain((_finalState_data1 = finalState.data()) === null || _finalState_data1 === void 0 ? void 0 : _finalState_data1.lapses);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RoZWh1L2Nvb2xQcm9qZWN0cy9FbmRnYW1lVHJhaW5lci10cmFpbmluZy1ib2FyZC1jb21wbGV0ZS9zcmMvdGVzdHMvaW50ZWdyYXRpb24vZmlyZWJhc2UvRmlyZWJhc2VTZXJ2aWNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBGaXJlYmFzZSBTZXJ2aWNlIEludGVncmF0aW9uIFRlc3RzXG4gKiBAZGVzY3JpcHRpb24gQ29tcHJlaGVuc2l2ZSBGaXJlYmFzZSBpbnRlZ3JhdGlvbiB0ZXN0cyB3aXRoIGVtdWxhdG9yXG4gKiBcbiAqIFRlc3RzIGZvciBJc3N1ZSAjODM6IEZpcmViYXNlIHNlcnZpY2UgaW50ZWdyYXRpb24gdGVzdCBpbmZyYXN0cnVjdHVyZVxuICogQ292ZXJzIFVzZXIgUHJvZ3Jlc3MgQ1JVRCwgQXV0aGVudGljYXRpb24sIFJlYWwtdGltZSB1cGRhdGVzLCBhbmQgY29uY3VycmVuY3lcbiAqIFxuICogQGplc3QtZW52aXJvbm1lbnQgbm9kZVxuICovXG5cbi8vIFNldHVwIGZldGNoIGZvciBGaXJlYmFzZSBBdXRoIGluIE5vZGUgZW52aXJvbm1lbnRcbmltcG9ydCAnLi4vLi4vc2V0dXAvZmlyZWJhc2UtdGVzdC1zZXR1cCc7XG5cbi8vIFBhdGggYWJzdHJhY3Rpb24gbGF5ZXJcbmltcG9ydCB7IFxuICBnZXRVc2VyUHJvZ3Jlc3NQYXRoLCBcbiAgZ2V0VXNlclN0YXRzUGF0aCwgXG4gIGdldENhcmRQcm9ncmVzc1BhdGggXG59IGZyb20gJ0B0ZXN0cy91dGlscy9maXJlYmFzZS1wYXRocyc7XG5cbmltcG9ydCB7IFxuICBkb2MsIFxuICBnZXREb2MsIFxuICBzZXREb2MsIFxuICB1cGRhdGVEb2MsIFxuICBkZWxldGVEb2MsXG4gIG9uU25hcHNob3QsXG4gIHNlcnZlclRpbWVzdGFtcCxcbiAgZ2V0RG9jcyxcbiAgY29sbGVjdGlvbixcbiAgcXVlcnksXG4gIHdoZXJlLFxuICB3cml0ZUJhdGNoLFxuICBUaW1lc3RhbXBcbn0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcblxuaW1wb3J0IHtcbiAgaW5pdGlhbGl6ZVRlc3RGaXJlYmFzZSxcbiAgY3JlYXRlVGVzdFVzZXIsXG4gIGNyZWF0ZUFub255bW91c1VzZXIsXG4gIGNyZWF0ZVRlc3RVc2VyV2l0aFByb2dyZXNzLFxuICBzZWVkVXNlclByb2dyZXNzLFxuICBjbGVhclVzZXJQcm9ncmVzc0RhdGEsXG4gIGNsZWFyRmlyZXN0b3JlRGF0YSxcbiAgY2xlYW51cEFsbFRlc3RGaXJlYmFzZSxcbiAgVEVTVF9VU0VSX1NUQVRTLFxuICBURVNUX0NBUkRfUFJPR1JFU1MsXG4gIFJlYWx0aW1lVGVzdEhlbHBlcixcbiAgdHlwZSBUZXN0RmlyZWJhc2VJbnN0YW5jZVxufSBmcm9tICdAdGVzdHMvdXRpbHMvZmlyZWJhc2UtdGVzdC1oZWxwZXJzJztcblxuaW1wb3J0IHsgc2lnbk91dCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQgfSBmcm9tICdmaXJlYmFzZS9hdXRoJztcblxuaW1wb3J0IHsgd2FpdEZvckVtdWxhdG9yLCBpc0VtdWxhdG9yUnVubmluZyB9IGZyb20gJ0B0ZXN0cy91dGlscy9maXJlYmFzZS1lbXVsYXRvci1hcGknO1xuaW1wb3J0IHR5cGUgeyBVc2VyU3RhdHMsIENhcmRQcm9ncmVzcyB9IGZyb20gJ0BzaGFyZWQvc3RvcmUvc2xpY2VzL3R5cGVzJztcblxuLy8gSW5jcmVhc2UgdGltZW91dCBmb3IgaW50ZWdyYXRpb24gdGVzdHMgKDYwcyBmb3IgRmlyZWJhc2UgZW11bGF0b3IpXG5qZXN0LnNldFRpbWVvdXQoNjAwMDApO1xuXG5kZXNjcmliZSgnRmlyZWJhc2UgU2VydmljZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgbGV0IHRlc3RJbnN0YW5jZTogVGVzdEZpcmViYXNlSW5zdGFuY2U7XG4gIGxldCB0ZXN0VXNlcklkOiBzdHJpbmc7XG4gIGxldCByZWFsdGltZUhlbHBlcjogUmVhbHRpbWVUZXN0SGVscGVyO1xuXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gRW5zdXJlIGVtdWxhdG9yIGlzIHJ1bm5pbmdcbiAgICBjb25zdCBlbXVsYXRvclJlYWR5ID0gYXdhaXQgaXNFbXVsYXRvclJ1bm5pbmcoKTtcbiAgICBpZiAoIWVtdWxhdG9yUmVhZHkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdXYWl0aW5nIGZvciBGaXJlYmFzZSBlbXVsYXRvciB0byBzdGFydC4uLicpO1xuICAgICAgYXdhaXQgd2FpdEZvckVtdWxhdG9yKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIENsZWFyIGFsbCBkYXRhIGJlZm9yZSBzdGFydGluZyB0ZXN0c1xuICAgIGF3YWl0IGNsZWFyRmlyZXN0b3JlRGF0YSgpO1xuICB9KTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAvLyBDcmVhdGUgaXNvbGF0ZWQgRmlyZWJhc2UgaW5zdGFuY2UgZm9yIGVhY2ggdGVzdFxuICAgIHRlc3RJbnN0YW5jZSA9IGF3YWl0IGluaXRpYWxpemVUZXN0RmlyZWJhc2UoKTtcbiAgICByZWFsdGltZUhlbHBlciA9IG5ldyBSZWFsdGltZVRlc3RIZWxwZXIoKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgYXV0aGVudGljYXRlZCB0ZXN0IHVzZXJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IGNyZWF0ZVRlc3RVc2VyKHRlc3RJbnN0YW5jZS5hdXRoKTtcbiAgICB0ZXN0VXNlcklkID0gdXNlckNyZWRlbnRpYWwudXNlci51aWQ7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8gQ2xlYW51cCByZWFsLXRpbWUgbGlzdGVuZXJzXG4gICAgcmVhbHRpbWVIZWxwZXIuY2xlYW51cCgpO1xuICAgIFxuICAgIC8vIENsZWFyIHVzZXIgZGF0YSBCRUZPUkUgc2lnbmluZyBvdXQgKG5lZWRzIGF1dGggZm9yIHNlY3VyaXR5IHJ1bGVzKVxuICAgIGlmICh0ZXN0VXNlcklkICYmIHRlc3RJbnN0YW5jZT8uZGIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGNsZWFyVXNlclByb2dyZXNzRGF0YSh0ZXN0SW5zdGFuY2UuZGIsIHRlc3RVc2VySWQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSWdub3JlIGVycm9ycyBpZiB1c2VyIGRhdGEgZG9lc24ndCBleGlzdFxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTaWduIG91dCBhbnkgYXV0aGVudGljYXRlZCB1c2VyIEFGVEVSIGNsZWFyaW5nIGRhdGFcbiAgICBpZiAodGVzdEluc3RhbmNlPy5hdXRoKSB7XG4gICAgICBhd2FpdCBzaWduT3V0KHRlc3RJbnN0YW5jZS5hdXRoKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICAvLyBDbGVhbnVwIGFsbCB0ZXN0IEZpcmViYXNlIGluc3RhbmNlc1xuICAgIGF3YWl0IGNsZWFudXBBbGxUZXN0RmlyZWJhc2UoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZpcmVzdG9yZSBDUlVEIE9wZXJhdGlvbnMnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ1VzZXJTdGF0cyBPcGVyYXRpb25zJywgKCkgPT4ge1xuICAgICAgaXQoJ2NyZWF0ZXMgdXNlciBwcm9ncmVzcyBkb2N1bWVudCB3aXRoIGF1dGhlbnRpY2F0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VyU3RhdHM6IFVzZXJTdGF0cyA9IHtcbiAgICAgICAgICAuLi5URVNUX1VTRVJfU1RBVFMsXG4gICAgICAgICAgdXNlcklkOiB0ZXN0VXNlcklkLFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZG9jUmVmID0gZG9jKHRlc3RJbnN0YW5jZS5kYiwgZ2V0VXNlclN0YXRzUGF0aCh0ZXN0VXNlcklkKSk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCBzZXREb2MoZG9jUmVmLCB7XG4gICAgICAgICAgLi4udXNlclN0YXRzLFxuICAgICAgICAgIGxhc3RBY3RpdmU6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MoZG9jUmVmKTtcbiAgICAgICAgZXhwZWN0KGRvY1NuYXAuZXhpc3RzKCkpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChkb2NTbmFwLmRhdGEoKT8udXNlcklkKS50b0JlKHRlc3RVc2VySWQpO1xuICAgICAgICBleHBlY3QoZG9jU25hcC5kYXRhKCk/LnRvdGFsUG9zaXRpb25zQ29tcGxldGVkKS50b0JlKDI1KTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncmVhZHMgdXNlciBwcm9ncmVzcyBkb2N1bWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgc2VlZFVzZXJQcm9ncmVzcyh0ZXN0SW5zdGFuY2UuZGIsIHRlc3RVc2VySWQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZG9jUmVmID0gZG9jKHRlc3RJbnN0YW5jZS5kYiwgZ2V0VXNlclN0YXRzUGF0aCh0ZXN0VXNlcklkKSk7XG4gICAgICAgIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MoZG9jUmVmKTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChkb2NTbmFwLmV4aXN0cygpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoZG9jU25hcC5kYXRhKCk/LnRvdGFsUG9zaXRpb25zQ29tcGxldGVkKS50b0JlKDI1KTtcbiAgICAgICAgZXhwZWN0KGRvY1NuYXAuZGF0YSgpPy5vdmVyYWxsU3VjY2Vzc1JhdGUpLnRvQmUoMC44NSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3VwZGF0ZXMgdXNlciBwcm9ncmVzcyBkb2N1bWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgc2VlZFVzZXJQcm9ncmVzcyh0ZXN0SW5zdGFuY2UuZGIsIHRlc3RVc2VySWQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZG9jUmVmID0gZG9jKHRlc3RJbnN0YW5jZS5kYiwgZ2V0VXNlclN0YXRzUGF0aCh0ZXN0VXNlcklkKSk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jUmVmLCB7XG4gICAgICAgICAgdG90YWxQb3NpdGlvbnNDb21wbGV0ZWQ6IDMwLFxuICAgICAgICAgIG92ZXJhbGxTdWNjZXNzUmF0ZTogMC45MCxcbiAgICAgICAgICBsYXN0QWN0aXZlOiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgICAgIGV4cGVjdChkb2NTbmFwLmRhdGEoKT8udG90YWxQb3NpdGlvbnNDb21wbGV0ZWQpLnRvQmUoMzApO1xuICAgICAgICBleHBlY3QoZG9jU25hcC5kYXRhKCk/Lm92ZXJhbGxTdWNjZXNzUmF0ZSkudG9CZSgwLjkwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgnZGVsZXRlcyB1c2VyIHByb2dyZXNzIGRvY3VtZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBzZWVkVXNlclByb2dyZXNzKHRlc3RJbnN0YW5jZS5kYiwgdGVzdFVzZXJJZCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkb2NSZWYgPSBkb2ModGVzdEluc3RhbmNlLmRiLCBnZXRVc2VyU3RhdHNQYXRoKHRlc3RVc2VySWQpKTtcbiAgICAgICAgYXdhaXQgZGVsZXRlRG9jKGRvY1JlZik7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgICAgIGV4cGVjdChkb2NTbmFwLmV4aXN0cygpKS50b0JlKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0NhcmRQcm9ncmVzcyBPcGVyYXRpb25zJywgKCkgPT4ge1xuICAgICAgaXQoJ2NyZWF0ZXMgbXVsdGlwbGUgY2FyZCBwcm9ncmVzcyBkb2N1bWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaCh0ZXN0SW5zdGFuY2UuZGIpO1xuICAgICAgICBcbiAgICAgICAgVEVTVF9DQVJEX1BST0dSRVNTLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgICAgICBjb25zdCBkb2NSZWYgPSBkb2MoXG4gICAgICAgICAgICB0ZXN0SW5zdGFuY2UuZGIsIFxuICAgICAgICAgICAgYHVzZXJzLyR7dGVzdFVzZXJJZH0vdXNlclByb2dyZXNzLyR7Y2FyZC5pZH1gXG4gICAgICAgICAgKTtcbiAgICAgICAgICBiYXRjaC5zZXQoZG9jUmVmLCB7XG4gICAgICAgICAgICAuLi5jYXJkLFxuICAgICAgICAgICAgbGFzdFVwZGF0ZWQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gVmVyaWZ5IGFsbCBjYXJkcyB3ZXJlIGNyZWF0ZWRcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NDb2xsZWN0aW9uID0gY29sbGVjdGlvbihcbiAgICAgICAgICB0ZXN0SW5zdGFuY2UuZGIsIFxuICAgICAgICAgIGB1c2Vycy8ke3Rlc3RVc2VySWR9L3VzZXJQcm9ncmVzc2BcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHByb2dyZXNzQ29sbGVjdGlvbik7XG4gICAgICAgIFxuICAgICAgICAvLyBGaWx0ZXIgb3V0IHN0YXRzIGRvY3VtZW50LCBjb3VudCBvbmx5IGNhcmQgZG9jdW1lbnRzXG4gICAgICAgIGNvbnN0IGNhcmREb2NzID0gc25hcHNob3QuZG9jcy5maWx0ZXIoZCA9PiBkLmlkICE9PSAnc3RhdHMnKTtcbiAgICAgICAgZXhwZWN0KGNhcmREb2NzLmxlbmd0aCkudG9CZShURVNUX0NBUkRfUFJPR1JFU1MubGVuZ3RoKTtcbiAgICAgIH0pO1xuXG4gICAgICBpdCgncXVlcmllcyBkdWUgY2FyZHMgdXNpbmcgd2hlcmUgY2xhdXNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBzZWVkVXNlclByb2dyZXNzKHRlc3RJbnN0YW5jZS5kYiwgdGVzdFVzZXJJZCwgdW5kZWZpbmVkLCBURVNUX0NBUkRfUFJPR1JFU1MpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NDb2xsZWN0aW9uID0gY29sbGVjdGlvbihcbiAgICAgICAgICB0ZXN0SW5zdGFuY2UuZGIsXG4gICAgICAgICAgYHVzZXJzLyR7dGVzdFVzZXJJZH0vdXNlclByb2dyZXNzYFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gUXVlcnkgZm9yIGR1ZSBjYXJkcyAobmV4dFJldmlld0F0IDw9IG5vdylcbiAgICAgICAgY29uc3QgZHVlQ2FyZHNRdWVyeSA9IHF1ZXJ5KFxuICAgICAgICAgIHByb2dyZXNzQ29sbGVjdGlvbixcbiAgICAgICAgICB3aGVyZSgnbmV4dFJldmlld0F0JywgJzw9Jywgbm93KVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGR1ZUNhcmRzUXVlcnkpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2hvdWxkIGZpbmQgcG9zLTIgd2hpY2ggaXMgb3ZlcmR1ZVxuICAgICAgICBleHBlY3Qoc25hcHNob3Quc2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICBjb25zdCBkdWVDYXJkID0gc25hcHNob3QuZG9jcy5maW5kKGQgPT4gZC5pZCA9PT0gJ3Bvcy0yJyk7XG4gICAgICAgIGV4cGVjdChkdWVDYXJkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZWFsLXRpbWUgVXBkYXRlcycsICgpID0+IHtcbiAgICBpdCgncmVjZWl2ZXMgcmVhbC10aW1lIHVwZGF0ZXMgdGhyb3VnaCBvblNuYXBzaG90IGZvciBVc2VyU3RhdHMnLCAoZG9uZSkgPT4ge1xuICAgICAgY29uc3QgZG9jUmVmID0gZG9jKHRlc3RJbnN0YW5jZS5kYiwgYHVzZXJzLyR7dGVzdFVzZXJJZH0vdXNlclByb2dyZXNzL3N0YXRzYCk7XG4gICAgICBsZXQgdXBkYXRlQ291bnQgPSAwO1xuICAgICAgXG4gICAgICBjb25zdCB1bnN1YnNjcmliZSA9IG9uU25hcHNob3QoZG9jUmVmLCAoc25hcHNob3QpID0+IHtcbiAgICAgICAgdXBkYXRlQ291bnQrKztcbiAgICAgICAgXG4gICAgICAgIGlmICh1cGRhdGVDb3VudCA9PT0gMSkge1xuICAgICAgICAgIC8vIEluaXRpYWwgZW1wdHkgc25hcHNob3RcbiAgICAgICAgICBleHBlY3Qoc25hcHNob3QuZXhpc3RzKCkpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFRyaWdnZXIgZmlyc3Qgd3JpdGVcbiAgICAgICAgICBzZXREb2MoZG9jUmVmLCB7XG4gICAgICAgICAgICAuLi5URVNUX1VTRVJfU1RBVFMsXG4gICAgICAgICAgICB1c2VySWQ6IHRlc3RVc2VySWQsXG4gICAgICAgICAgICB0b3RhbFBvc2l0aW9uc0NvbXBsZXRlZDogMTAsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodXBkYXRlQ291bnQgPT09IDIpIHtcbiAgICAgICAgICAvLyBBZnRlciBmaXJzdCB3cml0ZVxuICAgICAgICAgIGV4cGVjdChzbmFwc2hvdC5leGlzdHMoKSkudG9CZSh0cnVlKTtcbiAgICAgICAgICBleHBlY3Qoc25hcHNob3QuZGF0YSgpPy50b3RhbFBvc2l0aW9uc0NvbXBsZXRlZCkudG9CZSgxMCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVHJpZ2dlciB1cGRhdGVcbiAgICAgICAgICB1cGRhdGVEb2MoZG9jUmVmLCB7XG4gICAgICAgICAgICB0b3RhbFBvc2l0aW9uc0NvbXBsZXRlZDogMTUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodXBkYXRlQ291bnQgPT09IDMpIHtcbiAgICAgICAgICAvLyBBZnRlciB1cGRhdGVcbiAgICAgICAgICBleHBlY3Qoc25hcHNob3QuZGF0YSgpPy50b3RhbFBvc2l0aW9uc0NvbXBsZXRlZCkudG9CZSgxNSk7XG4gICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZWFsdGltZUhlbHBlci5yZWdpc3Rlckxpc3RlbmVyKHVuc3Vic2NyaWJlKTtcbiAgICB9KTtcblxuICAgIGl0KCdyZWNlaXZlcyByZWFsLXRpbWUgdXBkYXRlcyBmb3IgQ2FyZFByb2dyZXNzIGNvbGxlY3Rpb24nLCAoZG9uZSkgPT4ge1xuICAgICAgY29uc3QgcHJvZ3Jlc3NDb2xsZWN0aW9uID0gY29sbGVjdGlvbihcbiAgICAgICAgdGVzdEluc3RhbmNlLmRiLFxuICAgICAgICBgdXNlcnMvJHt0ZXN0VXNlcklkfS91c2VyUHJvZ3Jlc3NgXG4gICAgICApO1xuICAgICAgXG4gICAgICBsZXQgc25hcHNob3RDb3VudCA9IDA7XG4gICAgICBcbiAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gb25TbmFwc2hvdChwcm9ncmVzc0NvbGxlY3Rpb24sIChzbmFwc2hvdCkgPT4ge1xuICAgICAgICBzbmFwc2hvdENvdW50Kys7XG4gICAgICAgIFxuICAgICAgICBpZiAoc25hcHNob3RDb3VudCA9PT0gMSkge1xuICAgICAgICAgIC8vIEluaXRpYWwgZW1wdHkgY29sbGVjdGlvblxuICAgICAgICAgIGV4cGVjdChzbmFwc2hvdC5lbXB0eSkudG9CZSh0cnVlKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgZmlyc3QgY2FyZFxuICAgICAgICAgIGNvbnN0IGNhcmQxUmVmID0gZG9jKHByb2dyZXNzQ29sbGVjdGlvbiwgJ2NhcmQtMScpO1xuICAgICAgICAgIHNldERvYyhjYXJkMVJlZiwge1xuICAgICAgICAgICAgaWQ6ICdjYXJkLTEnLFxuICAgICAgICAgICAgbmV4dFJldmlld0F0OiBEYXRlLm5vdygpICsgODY0MDAwMDAsXG4gICAgICAgICAgICBsYXN0UmV2aWV3ZWRBdDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIGludGVydmFsOiAxLFxuICAgICAgICAgICAgcmVwZXRpdGlvbjogMSxcbiAgICAgICAgICAgIGVmYWN0b3I6IDIuNSxcbiAgICAgICAgICAgIGxhcHNlczogMCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChzbmFwc2hvdENvdW50ID09PSAyKSB7XG4gICAgICAgICAgLy8gQWZ0ZXIgZmlyc3QgY2FyZCBhZGRlZFxuICAgICAgICAgIGV4cGVjdChzbmFwc2hvdC5zaXplKS50b0JlKDEpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCBzZWNvbmQgY2FyZFxuICAgICAgICAgIGNvbnN0IGNhcmQyUmVmID0gZG9jKHByb2dyZXNzQ29sbGVjdGlvbiwgJ2NhcmQtMicpO1xuICAgICAgICAgIHNldERvYyhjYXJkMlJlZiwge1xuICAgICAgICAgICAgaWQ6ICdjYXJkLTInLFxuICAgICAgICAgICAgbmV4dFJldmlld0F0OiBEYXRlLm5vdygpICsgMTcyODAwMDAwLFxuICAgICAgICAgICAgbGFzdFJldmlld2VkQXQ6IERhdGUubm93KCksXG4gICAgICAgICAgICBpbnRlcnZhbDogMixcbiAgICAgICAgICAgIHJlcGV0aXRpb246IDIsXG4gICAgICAgICAgICBlZmFjdG9yOiAyLjQsXG4gICAgICAgICAgICBsYXBzZXM6IDEsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc25hcHNob3RDb3VudCA9PT0gMykge1xuICAgICAgICAgIC8vIEFmdGVyIHNlY29uZCBjYXJkIGFkZGVkXG4gICAgICAgICAgZXhwZWN0KHNuYXBzaG90LnNpemUpLnRvQmUoMik7XG4gICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZWFsdGltZUhlbHBlci5yZWdpc3Rlckxpc3RlbmVyKHVuc3Vic2NyaWJlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0F1dGhlbnRpY2F0aW9uICYgU2VjdXJpdHknLCAoKSA9PiB7XG4gICAgaXQoJ2FsbG93cyB1c2VyIHRvIGFjY2VzcyBvbmx5IHRoZWlyIG93biBwcm9ncmVzcyBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGZpcnN0IHVzZXIgd2l0aCBwcm9ncmVzc1xuICAgICAgY29uc3QgeyB1c2VySWQ6IHVzZXJJZDEgfSA9IGF3YWl0IGNyZWF0ZVRlc3RVc2VyV2l0aFByb2dyZXNzKFxuICAgICAgICB0ZXN0SW5zdGFuY2UsXG4gICAgICAgICd1c2VyMUB0ZXN0LmNvbSdcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIFNpZ24gb3V0IHVzZXIxXG4gICAgICBhd2FpdCBzaWduT3V0KHRlc3RJbnN0YW5jZS5hdXRoKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGFuZCBzaWduIGluIGFzIHVzZXIyXG4gICAgICBjb25zdCB1c2VyQ3JlZGVudGlhbDIgPSBhd2FpdCBjcmVhdGVUZXN0VXNlcihcbiAgICAgICAgdGVzdEluc3RhbmNlLmF1dGgsXG4gICAgICAgICd1c2VyMkB0ZXN0LmNvbSdcbiAgICAgICk7XG4gICAgICBjb25zdCB1c2VySWQyID0gdXNlckNyZWRlbnRpYWwyLnVzZXIudWlkO1xuICAgICAgXG4gICAgICAvLyBOb3cgYXMgdXNlcjIsIHRyeSB0byByZWFkIHVzZXIxJ3MgZGF0YSAoc2hvdWxkIGZhaWwgd2l0aCBzZWN1cml0eSBydWxlcylcbiAgICAgIGNvbnN0IHVzZXIxRG9jUmVmID0gZG9jKFxuICAgICAgICB0ZXN0SW5zdGFuY2UuZGIsXG4gICAgICAgIGdldFVzZXJTdGF0c1BhdGgodXNlcklkMSlcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIFRoaXMgc2hvdWxkIGZhaWwgd2l0aCBzZWN1cml0eSBydWxlcyBlbmFibGVkXG4gICAgICBhd2FpdCBleHBlY3QoZ2V0RG9jKHVzZXIxRG9jUmVmKSkucmVqZWN0cy50b1Rocm93KCk7XG4gICAgICBcbiAgICAgIC8vIFVzZXIyIHNob3VsZCBiZSBhYmxlIHRvIHdyaXRlIGFuZCByZWFkIHRoZWlyIG93biBkYXRhXG4gICAgICBhd2FpdCBzZWVkVXNlclByb2dyZXNzKHRlc3RJbnN0YW5jZS5kYiwgdXNlcklkMik7XG4gICAgICBjb25zdCB1c2VyMkRvY1JlZiA9IGRvYyh0ZXN0SW5zdGFuY2UuZGIsIGdldFVzZXJTdGF0c1BhdGgodXNlcklkMikpO1xuICAgICAgY29uc3QgdXNlcjJEb2MgPSBhd2FpdCBnZXREb2ModXNlcjJEb2NSZWYpO1xuICAgICAgXG4gICAgICBleHBlY3QodXNlcjJEb2MuZXhpc3RzKCkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodXNlcjJEb2MuZGF0YSgpPy51c2VySWQpLnRvQmUodXNlcklkMik7XG4gICAgfSk7XG5cbiAgICBpdCgnc3VwcG9ydHMgYW5vbnltb3VzIHVzZXIgcHJvZ3Jlc3MgdHJhY2tpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhbm9uQ3JlZGVudGlhbCA9IGF3YWl0IGNyZWF0ZUFub255bW91c1VzZXIodGVzdEluc3RhbmNlLmF1dGgpO1xuICAgICAgY29uc3QgYW5vblVzZXJJZCA9IGFub25DcmVkZW50aWFsLnVzZXIudWlkO1xuICAgICAgXG4gICAgICBhd2FpdCBzZWVkVXNlclByb2dyZXNzKFxuICAgICAgICB0ZXN0SW5zdGFuY2UuZGIsXG4gICAgICAgIGFub25Vc2VySWQsXG4gICAgICAgIHsgdXNlcklkOiBhbm9uVXNlcklkIH1cbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhcbiAgICAgICAgdGVzdEluc3RhbmNlLmRiLFxuICAgICAgICBgdXNlcnMvJHthbm9uVXNlcklkfS91c2VyUHJvZ3Jlc3Mvc3RhdHNgXG4gICAgICApO1xuICAgICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpO1xuICAgICAgXG4gICAgICBleHBlY3QoZG9jU25hcC5leGlzdHMoKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkb2NTbmFwLmRhdGEoKT8udXNlcklkKS50b0JlKGFub25Vc2VySWQpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29uY3VycmVudCBPcGVyYXRpb25zJywgKCkgPT4ge1xuICAgIGl0KCdoYW5kbGVzIGNvbmN1cnJlbnQgdXBkYXRlcyB0byB0aGUgc2FtZSBkb2N1bWVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhcbiAgICAgICAgdGVzdEluc3RhbmNlLmRiLFxuICAgICAgICBgdXNlcnMvJHt0ZXN0VXNlcklkfS91c2VyUHJvZ3Jlc3Mvc3RhdHNgXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBTZXQgaW5pdGlhbCB2YWx1ZVxuICAgICAgYXdhaXQgc2V0RG9jKGRvY1JlZiwge1xuICAgICAgICAuLi5URVNUX1VTRVJfU1RBVFMsXG4gICAgICAgIHVzZXJJZDogdGVzdFVzZXJJZCxcbiAgICAgICAgdG90YWxQb3NpdGlvbnNDb21wbGV0ZWQ6IDAsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgY29uY3VycmVudCB1cGRhdGVzXG4gICAgICBjb25zdCB1cGRhdGVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoXywgaSkgPT4gXG4gICAgICAgIHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgICAgICB0b3RhbFBvc2l0aW9uc0NvbXBsZXRlZDogaSArIDEsXG4gICAgICAgICAgbGFzdEFjdGl2ZTogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh1cGRhdGVzKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZmluYWwgc3RhdGVcbiAgICAgIGNvbnN0IGZpbmFsRG9jID0gYXdhaXQgZ2V0RG9jKGRvY1JlZik7XG4gICAgICBleHBlY3QoZmluYWxEb2MuZXhpc3RzKCkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZmluYWxEb2MuZGF0YSgpPy50b3RhbFBvc2l0aW9uc0NvbXBsZXRlZCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgZmluYWxEb2MuZGF0YSgpPy50b3RhbFBvc2l0aW9uc0NvbXBsZXRlZCkudG9CZSgnbnVtYmVyJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGFuZGxlcyBiYXRjaCBvcGVyYXRpb25zIHdpdGggbXVsdGlwbGUgY2FyZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2godGVzdEluc3RhbmNlLmRiKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIDEwIGNhcmRzIGluIGEgYmF0Y2hcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICBjb25zdCBjYXJkUmVmID0gZG9jKFxuICAgICAgICAgIHRlc3RJbnN0YW5jZS5kYixcbiAgICAgICAgICBgdXNlcnMvJHt0ZXN0VXNlcklkfS91c2VyUHJvZ3Jlc3MvY2FyZC0ke2l9YFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgYmF0Y2guc2V0KGNhcmRSZWYsIHtcbiAgICAgICAgICBpZDogYGNhcmQtJHtpfWAsXG4gICAgICAgICAgbmV4dFJldmlld0F0OiBEYXRlLm5vdygpICsgKGkgKiA4NjQwMDAwMCksIC8vIFN0YWdnZXIgYnkgZGF5c1xuICAgICAgICAgIGxhc3RSZXZpZXdlZEF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgIGludGVydmFsOiBpICsgMSxcbiAgICAgICAgICByZXBldGl0aW9uOiAxLFxuICAgICAgICAgIGVmYWN0b3I6IDIuNSxcbiAgICAgICAgICBxdWFsaXR5OiA0LFxuICAgICAgICAgIGxhc3RVcGRhdGVkOiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgYWxsIGNhcmRzIHdlcmUgY3JlYXRlZFxuICAgICAgY29uc3QgcHJvZ3Jlc3NDb2xsZWN0aW9uID0gY29sbGVjdGlvbihcbiAgICAgICAgdGVzdEluc3RhbmNlLmRiLFxuICAgICAgICBgdXNlcnMvJHt0ZXN0VXNlcklkfS91c2VyUHJvZ3Jlc3NgXG4gICAgICApO1xuICAgICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHByb2dyZXNzQ29sbGVjdGlvbik7XG4gICAgICBcbiAgICAgIGV4cGVjdChzbmFwc2hvdC5zaXplKS50b0JlKDEwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdoYW5kbGVzIGludmFsaWQgZG9jdW1lbnQgcGF0aHMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgaW52YWxpZCBwYXRoIGNvbnN0cnVjdGlvblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgLy8gVGhpcyBjcmVhdGVzIGFuIGludmFsaWQgcGF0aCB3aXRoIGVtcHR5IHNlZ21lbnRcbiAgICAgICAgZG9jKHRlc3RJbnN0YW5jZS5kYiwgJ3VzZXJzJywgJycsICd1c2VyUHJvZ3Jlc3MnLCAnc3RhdHMnKTtcbiAgICAgIH0pLnRvVGhyb3coJ0ludmFsaWQgZG9jdW1lbnQgcmVmZXJlbmNlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGFuZGxlcyBtaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhcbiAgICAgICAgdGVzdEluc3RhbmNlLmRiLFxuICAgICAgICBgdXNlcnMvJHt0ZXN0VXNlcklkfS91c2VyUHJvZ3Jlc3Mvc3RhdHNgXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBNaXNzaW5nIHJlcXVpcmVkIHVzZXJJZCBmaWVsZFxuICAgICAgY29uc3QgaW52YWxpZFN0YXRzID0ge1xuICAgICAgICB0b3RhbFBvc2l0aW9uc0NvbXBsZXRlZDogMTAsXG4gICAgICAgIC8vIHVzZXJJZCBtaXNzaW5nXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBUaGlzIHNob3VsZCBzdWNjZWVkIGF0IEZpcmVzdG9yZSBsZXZlbCBidXQgZmFpbCB2YWxpZGF0aW9uIGluIGFwcFxuICAgICAgYXdhaXQgc2V0RG9jKGRvY1JlZiwgaW52YWxpZFN0YXRzKTtcbiAgICAgIFxuICAgICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpO1xuICAgICAgZXhwZWN0KGRvY1NuYXAuZXhpc3RzKCkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZG9jU25hcC5kYXRhKCk/LnVzZXJJZCkudG9CZVVuZGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTXVsdGktZGV2aWNlIFN5bmMgU2NlbmFyaW9zJywgKCkgPT4ge1xuICAgIGl0KCdzaW11bGF0ZXMgcHJvZ3Jlc3Mgc3luYyBiZXR3ZWVuIG11bHRpcGxlIGRldmljZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0c0RvY1JlZiA9IGRvYyhcbiAgICAgICAgdGVzdEluc3RhbmNlLmRiLFxuICAgICAgICBgdXNlcnMvJHt0ZXN0VXNlcklkfS91c2VyUHJvZ3Jlc3Mvc3RhdHNgXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBEZXZpY2UgQSBpbml0aWFsIHdyaXRlXG4gICAgICBhd2FpdCBzZXREb2Moc3RhdHNEb2NSZWYsIHtcbiAgICAgICAgLi4uVEVTVF9VU0VSX1NUQVRTLFxuICAgICAgICB1c2VySWQ6IHRlc3RVc2VySWQsXG4gICAgICAgIHRvdGFsUG9zaXRpb25zQ29tcGxldGVkOiAxMCxcbiAgICAgICAgZGV2aWNlOiAnQScsXG4gICAgICAgIGxhc3RBY3RpdmU6IFRpbWVzdGFtcC5mcm9tTWlsbGlzKERhdGUubm93KCkpLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIERldmljZSBCIHJlYWRzIGN1cnJlbnQgc3RhdGVcbiAgICAgIGNvbnN0IGRldmljZUJSZWFkID0gYXdhaXQgZ2V0RG9jKHN0YXRzRG9jUmVmKTtcbiAgICAgIGV4cGVjdChkZXZpY2VCUmVhZC5kYXRhKCk/LnRvdGFsUG9zaXRpb25zQ29tcGxldGVkKS50b0JlKDEwKTtcbiAgICAgIFxuICAgICAgLy8gRGV2aWNlIEIgdXBkYXRlc1xuICAgICAgYXdhaXQgdXBkYXRlRG9jKHN0YXRzRG9jUmVmLCB7XG4gICAgICAgIHRvdGFsUG9zaXRpb25zQ29tcGxldGVkOiAxNSxcbiAgICAgICAgZGV2aWNlOiAnQicsXG4gICAgICAgIGxhc3RBY3RpdmU6IFRpbWVzdGFtcC5mcm9tTWlsbGlzKERhdGUubm93KCkgKyAxMDAwKSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBEZXZpY2UgQSByZWFkcyB1cGRhdGVkIHN0YXRlXG4gICAgICBjb25zdCBkZXZpY2VBUmVhZCA9IGF3YWl0IGdldERvYyhzdGF0c0RvY1JlZik7XG4gICAgICBleHBlY3QoZGV2aWNlQVJlYWQuZGF0YSgpPy50b3RhbFBvc2l0aW9uc0NvbXBsZXRlZCkudG9CZSgxNSk7XG4gICAgICBleHBlY3QoZGV2aWNlQVJlYWQuZGF0YSgpPy5kZXZpY2UpLnRvQmUoJ0InKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYW5kbGVzIGNvbmZsaWN0aW5nIGNhcmQgcHJvZ3Jlc3MgdXBkYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRSZWYgPSBkb2MoXG4gICAgICAgIHRlc3RJbnN0YW5jZS5kYixcbiAgICAgICAgYHVzZXJzLyR7dGVzdFVzZXJJZH0vdXNlclByb2dyZXNzL2NhcmQtMWBcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWwgY2FyZCBzdGF0ZVxuICAgICAgYXdhaXQgc2V0RG9jKGNhcmRSZWYsIHtcbiAgICAgICAgaWQ6ICdjYXJkLTEnLFxuICAgICAgICBuZXh0UmV2aWV3QXQ6IERhdGUubm93KCkgKyA4NjQwMDAwMCxcbiAgICAgICAgbGFzdFJldmlld2VkQXQ6IERhdGUubm93KCksXG4gICAgICAgIGludGVydmFsOiAxLFxuICAgICAgICByZXBldGl0aW9uOiAxLFxuICAgICAgICBlZmFjdG9yOiAyLjUsXG4gICAgICAgIHF1YWxpdHk6IDQsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgdHdvIGRldmljZXMgdXBkYXRpbmcgdGhlIHNhbWUgY2FyZFxuICAgICAgY29uc3QgZGV2aWNlMVVwZGF0ZSA9IHVwZGF0ZURvYyhjYXJkUmVmLCB7XG4gICAgICAgIGxhcHNlczogMCxcbiAgICAgICAgcmVwZXRpdGlvbjogMixcbiAgICAgICAgbGFzdFJldmlld2VkQXQ6IFRpbWVzdGFtcC5mcm9tTWlsbGlzKERhdGUubm93KCkgKyAxMDAwKSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBkZXZpY2UyVXBkYXRlID0gdXBkYXRlRG9jKGNhcmRSZWYsIHtcbiAgICAgICAgcXVhbGl0eTogMyxcbiAgICAgICAgcmVwZXRpdGlvbjogMixcbiAgICAgICAgbGFzdFJldmlld2VkQXQ6IFRpbWVzdGFtcC5mcm9tTWlsbGlzKERhdGUubm93KCkgKyAyMDAwKSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBCb3RoIHVwZGF0ZXMgc2hvdWxkIHN1Y2NlZWQgKGxhc3Qgd3JpdGUgd2lucylcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtkZXZpY2UxVXBkYXRlLCBkZXZpY2UyVXBkYXRlXSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZpbmFsU3RhdGUgPSBhd2FpdCBnZXREb2MoY2FyZFJlZik7XG4gICAgICBleHBlY3QoZmluYWxTdGF0ZS5leGlzdHMoKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChmaW5hbFN0YXRlLmRhdGEoKT8ucmVwZXRpdGlvbikudG9CZSgyKTtcbiAgICAgIC8vIExhcHNlcyB3aWxsIGJlIGVpdGhlciAwIG9yIDEgZGVwZW5kaW5nIG9uIHRpbWluZ1xuICAgICAgZXhwZWN0KFswLCAxXSkudG9Db250YWluKGZpbmFsU3RhdGUuZGF0YSgpPy5sYXBzZXMpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJuYW1lcyI6WyJqZXN0Iiwic2V0VGltZW91dCIsImRlc2NyaWJlIiwidGVzdEluc3RhbmNlIiwidGVzdFVzZXJJZCIsInJlYWx0aW1lSGVscGVyIiwiYmVmb3JlQWxsIiwiZW11bGF0b3JSZWFkeSIsImlzRW11bGF0b3JSdW5uaW5nIiwiY29uc29sZSIsImxvZyIsIndhaXRGb3JFbXVsYXRvciIsImNsZWFyRmlyZXN0b3JlRGF0YSIsImJlZm9yZUVhY2giLCJpbml0aWFsaXplVGVzdEZpcmViYXNlIiwiUmVhbHRpbWVUZXN0SGVscGVyIiwidXNlckNyZWRlbnRpYWwiLCJjcmVhdGVUZXN0VXNlciIsImF1dGgiLCJ1c2VyIiwidWlkIiwiYWZ0ZXJFYWNoIiwiY2xlYW51cCIsImRiIiwiY2xlYXJVc2VyUHJvZ3Jlc3NEYXRhIiwiZXJyb3IiLCJzaWduT3V0IiwiYWZ0ZXJBbGwiLCJjbGVhbnVwQWxsVGVzdEZpcmViYXNlIiwiaXQiLCJkb2NTbmFwIiwidXNlclN0YXRzIiwiVEVTVF9VU0VSX1NUQVRTIiwidXNlcklkIiwiZG9jUmVmIiwiZG9jIiwiZ2V0VXNlclN0YXRzUGF0aCIsInNldERvYyIsImxhc3RBY3RpdmUiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJnZXREb2MiLCJleHBlY3QiLCJleGlzdHMiLCJ0b0JlIiwiZGF0YSIsInRvdGFsUG9zaXRpb25zQ29tcGxldGVkIiwic2VlZFVzZXJQcm9ncmVzcyIsIm92ZXJhbGxTdWNjZXNzUmF0ZSIsInVwZGF0ZURvYyIsImRlbGV0ZURvYyIsImJhdGNoIiwid3JpdGVCYXRjaCIsIlRFU1RfQ0FSRF9QUk9HUkVTUyIsImZvckVhY2giLCJjYXJkIiwiaWQiLCJzZXQiLCJsYXN0VXBkYXRlZCIsImNvbW1pdCIsInByb2dyZXNzQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJzbmFwc2hvdCIsImdldERvY3MiLCJjYXJkRG9jcyIsImRvY3MiLCJmaWx0ZXIiLCJkIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibm93IiwiRGF0ZSIsImR1ZUNhcmRzUXVlcnkiLCJxdWVyeSIsIndoZXJlIiwic2l6ZSIsInRvQmVHcmVhdGVyVGhhbiIsImR1ZUNhcmQiLCJmaW5kIiwidG9CZURlZmluZWQiLCJkb25lIiwidXBkYXRlQ291bnQiLCJ1bnN1YnNjcmliZSIsIm9uU25hcHNob3QiLCJyZWdpc3Rlckxpc3RlbmVyIiwic25hcHNob3RDb3VudCIsImVtcHR5IiwiY2FyZDFSZWYiLCJuZXh0UmV2aWV3QXQiLCJsYXN0UmV2aWV3ZWRBdCIsImludGVydmFsIiwicmVwZXRpdGlvbiIsImVmYWN0b3IiLCJsYXBzZXMiLCJjYXJkMlJlZiIsInVzZXIyRG9jIiwidXNlcklkMSIsImNyZWF0ZVRlc3RVc2VyV2l0aFByb2dyZXNzIiwidXNlckNyZWRlbnRpYWwyIiwidXNlcklkMiIsInVzZXIxRG9jUmVmIiwicmVqZWN0cyIsInRvVGhyb3ciLCJ1c2VyMkRvY1JlZiIsImFub25DcmVkZW50aWFsIiwiY3JlYXRlQW5vbnltb3VzVXNlciIsImFub25Vc2VySWQiLCJmaW5hbERvYyIsInVwZGF0ZXMiLCJBcnJheSIsImZyb20iLCJfIiwiaSIsIlByb21pc2UiLCJhbGwiLCJjYXJkUmVmIiwicXVhbGl0eSIsImludmFsaWRTdGF0cyIsInRvQmVVbmRlZmluZWQiLCJkZXZpY2VCUmVhZCIsImRldmljZUFSZWFkIiwic3RhdHNEb2NSZWYiLCJkZXZpY2UiLCJUaW1lc3RhbXAiLCJmcm9tTWlsbGlzIiwiZmluYWxTdGF0ZSIsImRldmljZTFVcGRhdGUiLCJkZXZpY2UyVXBkYXRlIiwidG9Db250YWluIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Q0FRQyxHQUVELG9EQUFvRDs7Ozs7UUFDN0M7K0JBT0E7MkJBZ0JBO3FDQWVBO3NCQUU2QztxQ0FFRDtBQUduRCxxRUFBcUU7QUFDckVBLEtBQUtDLFVBQVUsQ0FBQztBQUVoQkMsU0FBUyxnQ0FBZ0M7SUFDdkMsSUFBSUM7SUFDSixJQUFJQztJQUNKLElBQUlDO0lBRUpDLFVBQVU7UUFDUiw2QkFBNkI7UUFDN0IsTUFBTUMsZ0JBQWdCLE1BQU1DLElBQUFBLHNDQUFpQjtRQUM3QyxJQUFJLENBQUNELGVBQWU7WUFDbEJFLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE1BQU1DLElBQUFBLG9DQUFlO1FBQ3ZCO1FBRUEsdUNBQXVDO1FBQ3ZDLE1BQU1DLElBQUFBLHVDQUFrQjtJQUMxQjtJQUVBQyxXQUFXO1FBQ1Qsa0RBQWtEO1FBQ2xEVixlQUFlLE1BQU1XLElBQUFBLDJDQUFzQjtRQUMzQ1QsaUJBQWlCLElBQUlVLHVDQUFrQjtRQUV2QyxpQ0FBaUM7UUFDakMsTUFBTUMsaUJBQWlCLE1BQU1DLElBQUFBLG1DQUFjLEVBQUNkLGFBQWFlLElBQUk7UUFDN0RkLGFBQWFZLGVBQWVHLElBQUksQ0FBQ0MsR0FBRztJQUN0QztJQUVBQyxVQUFVO1FBQ1IsOEJBQThCO1FBQzlCaEIsZUFBZWlCLE9BQU87UUFFdEIscUVBQXFFO1FBQ3JFLElBQUlsQixlQUFjRCx5QkFBQUEsbUNBQUFBLGFBQWNvQixFQUFFLEdBQUU7WUFDbEMsSUFBSTtnQkFDRixNQUFNQyxJQUFBQSwwQ0FBcUIsRUFBQ3JCLGFBQWFvQixFQUFFLEVBQUVuQjtZQUMvQyxFQUFFLE9BQU9xQixPQUFPO1lBQ2QsMkNBQTJDO1lBQzdDO1FBQ0Y7UUFFQSxzREFBc0Q7UUFDdEQsSUFBSXRCLHlCQUFBQSxtQ0FBQUEsYUFBY2UsSUFBSSxFQUFFO1lBQ3RCLE1BQU1RLElBQUFBLGFBQU8sRUFBQ3ZCLGFBQWFlLElBQUk7UUFDakM7SUFDRjtJQUVBUyxTQUFTO1FBQ1Asc0NBQXNDO1FBQ3RDLE1BQU1DLElBQUFBLDJDQUFzQjtJQUM5QjtJQUVBMUIsU0FBUyw2QkFBNkI7UUFDcENBLFNBQVMsd0JBQXdCO1lBQy9CMkIsR0FBRyxzREFBc0Q7b0JBZWhEQyxlQUNBQTtnQkFmUCxNQUFNQyxZQUF1QjtvQkFDM0IsR0FBR0Msb0NBQWU7b0JBQ2xCQyxRQUFRN0I7Z0JBQ1Y7Z0JBRUEsTUFBTThCLFNBQVNDLElBQUFBLGNBQUcsRUFBQ2hDLGFBQWFvQixFQUFFLEVBQUVhLElBQUFBLCtCQUFnQixFQUFDaEM7Z0JBRXJELE1BQU1pQyxJQUFBQSxpQkFBTSxFQUFDSCxRQUFRO29CQUNuQixHQUFHSCxTQUFTO29CQUNaTyxZQUFZQyxJQUFBQSwwQkFBZTtnQkFDN0I7Z0JBRUEsTUFBTVQsVUFBVSxNQUFNVSxJQUFBQSxpQkFBTSxFQUFDTjtnQkFDN0JPLE9BQU9YLFFBQVFZLE1BQU0sSUFBSUMsSUFBSSxDQUFDO2dCQUM5QkYsUUFBT1gsZ0JBQUFBLFFBQVFjLElBQUksZ0JBQVpkLG9DQUFBQSxjQUFnQkcsTUFBTSxFQUFFVSxJQUFJLENBQUN2QztnQkFDcENxQyxRQUFPWCxpQkFBQUEsUUFBUWMsSUFBSSxnQkFBWmQscUNBQUFBLGVBQWdCZSx1QkFBdUIsRUFBRUYsSUFBSSxDQUFDO1lBQ3ZEO1lBRUFkLEdBQUcsZ0NBQWdDO29CQU8xQkMsZUFDQUE7Z0JBUFAsTUFBTWdCLElBQUFBLHFDQUFnQixFQUFDM0MsYUFBYW9CLEVBQUUsRUFBRW5CO2dCQUV4QyxNQUFNOEIsU0FBU0MsSUFBQUEsY0FBRyxFQUFDaEMsYUFBYW9CLEVBQUUsRUFBRWEsSUFBQUEsK0JBQWdCLEVBQUNoQztnQkFDckQsTUFBTTBCLFVBQVUsTUFBTVUsSUFBQUEsaUJBQU0sRUFBQ047Z0JBRTdCTyxPQUFPWCxRQUFRWSxNQUFNLElBQUlDLElBQUksQ0FBQztnQkFDOUJGLFFBQU9YLGdCQUFBQSxRQUFRYyxJQUFJLGdCQUFaZCxvQ0FBQUEsY0FBZ0JlLHVCQUF1QixFQUFFRixJQUFJLENBQUM7Z0JBQ3JERixRQUFPWCxpQkFBQUEsUUFBUWMsSUFBSSxnQkFBWmQscUNBQUFBLGVBQWdCaUIsa0JBQWtCLEVBQUVKLElBQUksQ0FBQztZQUNsRDtZQUVBZCxHQUFHLGtDQUFrQztvQkFZNUJDLGVBQ0FBO2dCQVpQLE1BQU1nQixJQUFBQSxxQ0FBZ0IsRUFBQzNDLGFBQWFvQixFQUFFLEVBQUVuQjtnQkFFeEMsTUFBTThCLFNBQVNDLElBQUFBLGNBQUcsRUFBQ2hDLGFBQWFvQixFQUFFLEVBQUVhLElBQUFBLCtCQUFnQixFQUFDaEM7Z0JBRXJELE1BQU00QyxJQUFBQSxvQkFBUyxFQUFDZCxRQUFRO29CQUN0QlcseUJBQXlCO29CQUN6QkUsb0JBQW9CO29CQUNwQlQsWUFBWUMsSUFBQUEsMEJBQWU7Z0JBQzdCO2dCQUVBLE1BQU1ULFVBQVUsTUFBTVUsSUFBQUEsaUJBQU0sRUFBQ047Z0JBQzdCTyxRQUFPWCxnQkFBQUEsUUFBUWMsSUFBSSxnQkFBWmQsb0NBQUFBLGNBQWdCZSx1QkFBdUIsRUFBRUYsSUFBSSxDQUFDO2dCQUNyREYsUUFBT1gsaUJBQUFBLFFBQVFjLElBQUksZ0JBQVpkLHFDQUFBQSxlQUFnQmlCLGtCQUFrQixFQUFFSixJQUFJLENBQUM7WUFDbEQ7WUFFQWQsR0FBRyxrQ0FBa0M7Z0JBQ25DLE1BQU1pQixJQUFBQSxxQ0FBZ0IsRUFBQzNDLGFBQWFvQixFQUFFLEVBQUVuQjtnQkFFeEMsTUFBTThCLFNBQVNDLElBQUFBLGNBQUcsRUFBQ2hDLGFBQWFvQixFQUFFLEVBQUVhLElBQUFBLCtCQUFnQixFQUFDaEM7Z0JBQ3JELE1BQU02QyxJQUFBQSxvQkFBUyxFQUFDZjtnQkFFaEIsTUFBTUosVUFBVSxNQUFNVSxJQUFBQSxpQkFBTSxFQUFDTjtnQkFDN0JPLE9BQU9YLFFBQVFZLE1BQU0sSUFBSUMsSUFBSSxDQUFDO1lBQ2hDO1FBQ0Y7UUFFQXpDLFNBQVMsMkJBQTJCO1lBQ2xDMkIsR0FBRyw0Q0FBNEM7Z0JBQzdDLE1BQU1xQixRQUFRQyxJQUFBQSxxQkFBVSxFQUFDaEQsYUFBYW9CLEVBQUU7Z0JBRXhDNkIsdUNBQWtCLENBQUNDLE9BQU8sQ0FBQyxDQUFDQztvQkFDMUIsTUFBTXBCLFNBQVNDLElBQUFBLGNBQUcsRUFDaEJoQyxhQUFhb0IsRUFBRSxFQUNmLENBQUMsTUFBTSxFQUFFbkIsV0FBVyxjQUFjLEVBQUVrRCxLQUFLQyxFQUFFLEVBQUU7b0JBRS9DTCxNQUFNTSxHQUFHLENBQUN0QixRQUFRO3dCQUNoQixHQUFHb0IsSUFBSTt3QkFDUEcsYUFBYWxCLElBQUFBLDBCQUFlO29CQUM5QjtnQkFDRjtnQkFFQSxNQUFNVyxNQUFNUSxNQUFNO2dCQUVsQixnQ0FBZ0M7Z0JBQ2hDLE1BQU1DLHFCQUFxQkMsSUFBQUEscUJBQVUsRUFDbkN6RCxhQUFhb0IsRUFBRSxFQUNmLENBQUMsTUFBTSxFQUFFbkIsV0FBVyxhQUFhLENBQUM7Z0JBRXBDLE1BQU15RCxXQUFXLE1BQU1DLElBQUFBLGtCQUFPLEVBQUNIO2dCQUUvQix1REFBdUQ7Z0JBQ3ZELE1BQU1JLFdBQVdGLFNBQVNHLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFWCxFQUFFLEtBQUs7Z0JBQ3BEZCxPQUFPc0IsU0FBU0ksTUFBTSxFQUFFeEIsSUFBSSxDQUFDUyx1Q0FBa0IsQ0FBQ2UsTUFBTTtZQUN4RDtZQUVBdEMsR0FBRyx3Q0FBd0M7Z0JBQ3pDLE1BQU1pQixJQUFBQSxxQ0FBZ0IsRUFBQzNDLGFBQWFvQixFQUFFLEVBQUVuQixZQUFZZ0UsV0FBV2hCLHVDQUFrQjtnQkFFakYsTUFBTWlCLE1BQU1DLEtBQUtELEdBQUc7Z0JBQ3BCLE1BQU1WLHFCQUFxQkMsSUFBQUEscUJBQVUsRUFDbkN6RCxhQUFhb0IsRUFBRSxFQUNmLENBQUMsTUFBTSxFQUFFbkIsV0FBVyxhQUFhLENBQUM7Z0JBR3BDLDRDQUE0QztnQkFDNUMsTUFBTW1FLGdCQUFnQkMsSUFBQUEsZ0JBQUssRUFDekJiLG9CQUNBYyxJQUFBQSxnQkFBSyxFQUFDLGdCQUFnQixNQUFNSjtnQkFHOUIsTUFBTVIsV0FBVyxNQUFNQyxJQUFBQSxrQkFBTyxFQUFDUztnQkFFL0IscUNBQXFDO2dCQUNyQzlCLE9BQU9vQixTQUFTYSxJQUFJLEVBQUVDLGVBQWUsQ0FBQztnQkFDdEMsTUFBTUMsVUFBVWYsU0FBU0csSUFBSSxDQUFDYSxJQUFJLENBQUNYLENBQUFBLElBQUtBLEVBQUVYLEVBQUUsS0FBSztnQkFDakRkLE9BQU9tQyxTQUFTRSxXQUFXO1lBQzdCO1FBQ0Y7SUFDRjtJQUVBNUUsU0FBUyxxQkFBcUI7UUFDNUIyQixHQUFHLCtEQUErRCxDQUFDa0Q7WUFDakUsTUFBTTdDLFNBQVNDLElBQUFBLGNBQUcsRUFBQ2hDLGFBQWFvQixFQUFFLEVBQUUsQ0FBQyxNQUFNLEVBQUVuQixXQUFXLG1CQUFtQixDQUFDO1lBQzVFLElBQUk0RSxjQUFjO1lBRWxCLE1BQU1DLGNBQWNDLElBQUFBLHFCQUFVLEVBQUNoRCxRQUFRLENBQUMyQjtnQkFDdENtQjtnQkFFQSxJQUFJQSxnQkFBZ0IsR0FBRztvQkFDckIseUJBQXlCO29CQUN6QnZDLE9BQU9vQixTQUFTbkIsTUFBTSxJQUFJQyxJQUFJLENBQUM7b0JBRS9CLHNCQUFzQjtvQkFDdEJOLElBQUFBLGlCQUFNLEVBQUNILFFBQVE7d0JBQ2IsR0FBR0Ysb0NBQWU7d0JBQ2xCQyxRQUFRN0I7d0JBQ1J5Qyx5QkFBeUI7b0JBQzNCO2dCQUNGLE9BQU8sSUFBSW1DLGdCQUFnQixHQUFHO3dCQUdyQm5CO29CQUZQLG9CQUFvQjtvQkFDcEJwQixPQUFPb0IsU0FBU25CLE1BQU0sSUFBSUMsSUFBSSxDQUFDO29CQUMvQkYsUUFBT29CLGlCQUFBQSxTQUFTakIsSUFBSSxnQkFBYmlCLHFDQUFBQSxlQUFpQmhCLHVCQUF1QixFQUFFRixJQUFJLENBQUM7b0JBRXRELGlCQUFpQjtvQkFDakJLLElBQUFBLG9CQUFTLEVBQUNkLFFBQVE7d0JBQ2hCVyx5QkFBeUI7b0JBQzNCO2dCQUNGLE9BQU8sSUFBSW1DLGdCQUFnQixHQUFHO3dCQUVyQm5CO29CQURQLGVBQWU7b0JBQ2ZwQixRQUFPb0Isa0JBQUFBLFNBQVNqQixJQUFJLGdCQUFiaUIsc0NBQUFBLGdCQUFpQmhCLHVCQUF1QixFQUFFRixJQUFJLENBQUM7b0JBQ3REc0M7b0JBQ0FGO2dCQUNGO1lBQ0Y7WUFFQTFFLGVBQWU4RSxnQkFBZ0IsQ0FBQ0Y7UUFDbEM7UUFFQXBELEdBQUcsMERBQTBELENBQUNrRDtZQUM1RCxNQUFNcEIscUJBQXFCQyxJQUFBQSxxQkFBVSxFQUNuQ3pELGFBQWFvQixFQUFFLEVBQ2YsQ0FBQyxNQUFNLEVBQUVuQixXQUFXLGFBQWEsQ0FBQztZQUdwQyxJQUFJZ0YsZ0JBQWdCO1lBRXBCLE1BQU1ILGNBQWNDLElBQUFBLHFCQUFVLEVBQUN2QixvQkFBb0IsQ0FBQ0U7Z0JBQ2xEdUI7Z0JBRUEsSUFBSUEsa0JBQWtCLEdBQUc7b0JBQ3ZCLDJCQUEyQjtvQkFDM0IzQyxPQUFPb0IsU0FBU3dCLEtBQUssRUFBRTFDLElBQUksQ0FBQztvQkFFNUIsaUJBQWlCO29CQUNqQixNQUFNMkMsV0FBV25ELElBQUFBLGNBQUcsRUFBQ3dCLG9CQUFvQjtvQkFDekN0QixJQUFBQSxpQkFBTSxFQUFDaUQsVUFBVTt3QkFDZi9CLElBQUk7d0JBQ0pnQyxjQUFjakIsS0FBS0QsR0FBRyxLQUFLO3dCQUMzQm1CLGdCQUFnQmxCLEtBQUtELEdBQUc7d0JBQ3hCb0IsVUFBVTt3QkFDVkMsWUFBWTt3QkFDWkMsU0FBUzt3QkFDVEMsUUFBUTtvQkFDVjtnQkFDRixPQUFPLElBQUlSLGtCQUFrQixHQUFHO29CQUM5Qix5QkFBeUI7b0JBQ3pCM0MsT0FBT29CLFNBQVNhLElBQUksRUFBRS9CLElBQUksQ0FBQztvQkFFM0Isa0JBQWtCO29CQUNsQixNQUFNa0QsV0FBVzFELElBQUFBLGNBQUcsRUFBQ3dCLG9CQUFvQjtvQkFDekN0QixJQUFBQSxpQkFBTSxFQUFDd0QsVUFBVTt3QkFDZnRDLElBQUk7d0JBQ0pnQyxjQUFjakIsS0FBS0QsR0FBRyxLQUFLO3dCQUMzQm1CLGdCQUFnQmxCLEtBQUtELEdBQUc7d0JBQ3hCb0IsVUFBVTt3QkFDVkMsWUFBWTt3QkFDWkMsU0FBUzt3QkFDVEMsUUFBUTtvQkFDVjtnQkFDRixPQUFPLElBQUlSLGtCQUFrQixHQUFHO29CQUM5QiwwQkFBMEI7b0JBQzFCM0MsT0FBT29CLFNBQVNhLElBQUksRUFBRS9CLElBQUksQ0FBQztvQkFDM0JzQztvQkFDQUY7Z0JBQ0Y7WUFDRjtZQUVBMUUsZUFBZThFLGdCQUFnQixDQUFDRjtRQUNsQztJQUNGO0lBRUEvRSxTQUFTLDZCQUE2QjtRQUNwQzJCLEdBQUcsc0RBQXNEO2dCQWdDaERpRTtZQS9CUCxrQ0FBa0M7WUFDbEMsTUFBTSxFQUFFN0QsUUFBUThELE9BQU8sRUFBRSxHQUFHLE1BQU1DLElBQUFBLCtDQUEwQixFQUMxRDdGLGNBQ0E7WUFHRixpQkFBaUI7WUFDakIsTUFBTXVCLElBQUFBLGFBQU8sRUFBQ3ZCLGFBQWFlLElBQUk7WUFFL0IsOEJBQThCO1lBQzlCLE1BQU0rRSxrQkFBa0IsTUFBTWhGLElBQUFBLG1DQUFjLEVBQzFDZCxhQUFhZSxJQUFJLEVBQ2pCO1lBRUYsTUFBTWdGLFVBQVVELGdCQUFnQjlFLElBQUksQ0FBQ0MsR0FBRztZQUV4QywyRUFBMkU7WUFDM0UsTUFBTStFLGNBQWNoRSxJQUFBQSxjQUFHLEVBQ3JCaEMsYUFBYW9CLEVBQUUsRUFDZmEsSUFBQUEsK0JBQWdCLEVBQUMyRDtZQUduQiwrQ0FBK0M7WUFDL0MsTUFBTXRELE9BQU9ELElBQUFBLGlCQUFNLEVBQUMyRCxjQUFjQyxPQUFPLENBQUNDLE9BQU87WUFFakQsd0RBQXdEO1lBQ3hELE1BQU12RCxJQUFBQSxxQ0FBZ0IsRUFBQzNDLGFBQWFvQixFQUFFLEVBQUUyRTtZQUN4QyxNQUFNSSxjQUFjbkUsSUFBQUEsY0FBRyxFQUFDaEMsYUFBYW9CLEVBQUUsRUFBRWEsSUFBQUEsK0JBQWdCLEVBQUM4RDtZQUMxRCxNQUFNSixXQUFXLE1BQU10RCxJQUFBQSxpQkFBTSxFQUFDOEQ7WUFFOUI3RCxPQUFPcUQsU0FBU3BELE1BQU0sSUFBSUMsSUFBSSxDQUFDO1lBQy9CRixRQUFPcUQsaUJBQUFBLFNBQVNsRCxJQUFJLGdCQUFia0QscUNBQUFBLGVBQWlCN0QsTUFBTSxFQUFFVSxJQUFJLENBQUN1RDtRQUN2QztRQUVBckUsR0FBRyw2Q0FBNkM7Z0JBaUJ2Q0M7WUFoQlAsTUFBTXlFLGlCQUFpQixNQUFNQyxJQUFBQSx3Q0FBbUIsRUFBQ3JHLGFBQWFlLElBQUk7WUFDbEUsTUFBTXVGLGFBQWFGLGVBQWVwRixJQUFJLENBQUNDLEdBQUc7WUFFMUMsTUFBTTBCLElBQUFBLHFDQUFnQixFQUNwQjNDLGFBQWFvQixFQUFFLEVBQ2ZrRixZQUNBO2dCQUFFeEUsUUFBUXdFO1lBQVc7WUFHdkIsTUFBTXZFLFNBQVNDLElBQUFBLGNBQUcsRUFDaEJoQyxhQUFhb0IsRUFBRSxFQUNmLENBQUMsTUFBTSxFQUFFa0YsV0FBVyxtQkFBbUIsQ0FBQztZQUUxQyxNQUFNM0UsVUFBVSxNQUFNVSxJQUFBQSxpQkFBTSxFQUFDTjtZQUU3Qk8sT0FBT1gsUUFBUVksTUFBTSxJQUFJQyxJQUFJLENBQUM7WUFDOUJGLFFBQU9YLGdCQUFBQSxRQUFRYyxJQUFJLGdCQUFaZCxvQ0FBQUEsY0FBZ0JHLE1BQU0sRUFBRVUsSUFBSSxDQUFDOEQ7UUFDdEM7SUFDRjtJQUVBdkcsU0FBUyx5QkFBeUI7UUFDaEMyQixHQUFHLG1EQUFtRDtnQkEwQjdDNkUsZ0JBQ09BO1lBMUJkLE1BQU14RSxTQUFTQyxJQUFBQSxjQUFHLEVBQ2hCaEMsYUFBYW9CLEVBQUUsRUFDZixDQUFDLE1BQU0sRUFBRW5CLFdBQVcsbUJBQW1CLENBQUM7WUFHMUMsb0JBQW9CO1lBQ3BCLE1BQU1pQyxJQUFBQSxpQkFBTSxFQUFDSCxRQUFRO2dCQUNuQixHQUFHRixvQ0FBZTtnQkFDbEJDLFFBQVE3QjtnQkFDUnlDLHlCQUF5QjtZQUMzQjtZQUVBLDhCQUE4QjtZQUM5QixNQUFNOEQsVUFBVUMsTUFBTUMsSUFBSSxDQUFDO2dCQUFFMUMsUUFBUTtZQUFFLEdBQUcsQ0FBQzJDLEdBQUdDLElBQzVDL0QsSUFBQUEsb0JBQVMsRUFBQ2QsUUFBUTtvQkFDaEJXLHlCQUF5QmtFLElBQUk7b0JBQzdCekUsWUFBWUMsSUFBQUEsMEJBQWU7Z0JBQzdCO1lBR0YsTUFBTXlFLFFBQVFDLEdBQUcsQ0FBQ047WUFFbEIsb0JBQW9CO1lBQ3BCLE1BQU1ELFdBQVcsTUFBTWxFLElBQUFBLGlCQUFNLEVBQUNOO1lBQzlCTyxPQUFPaUUsU0FBU2hFLE1BQU0sSUFBSUMsSUFBSSxDQUFDO1lBQy9CRixRQUFPaUUsaUJBQUFBLFNBQVM5RCxJQUFJLGdCQUFiOEQscUNBQUFBLGVBQWlCN0QsdUJBQXVCLEVBQUVpQyxXQUFXO1lBQzVEckMsT0FBTyxTQUFPaUUsa0JBQUFBLFNBQVM5RCxJQUFJLGdCQUFiOEQsc0NBQUFBLGdCQUFpQjdELHVCQUF1QixHQUFFRixJQUFJLENBQUM7UUFDL0Q7UUFFQWQsR0FBRyxnREFBZ0Q7WUFDakQsTUFBTXFCLFFBQVFDLElBQUFBLHFCQUFVLEVBQUNoRCxhQUFhb0IsRUFBRTtZQUV4Qyw2QkFBNkI7WUFDN0IsSUFBSyxJQUFJd0YsSUFBSSxHQUFHQSxJQUFJLElBQUlBLElBQUs7Z0JBQzNCLE1BQU1HLFVBQVUvRSxJQUFBQSxjQUFHLEVBQ2pCaEMsYUFBYW9CLEVBQUUsRUFDZixDQUFDLE1BQU0sRUFBRW5CLFdBQVcsbUJBQW1CLEVBQUUyRyxHQUFHO2dCQUc5QzdELE1BQU1NLEdBQUcsQ0FBQzBELFNBQVM7b0JBQ2pCM0QsSUFBSSxDQUFDLEtBQUssRUFBRXdELEdBQUc7b0JBQ2Z4QixjQUFjakIsS0FBS0QsR0FBRyxLQUFNMEMsSUFBSTtvQkFDaEN2QixnQkFBZ0JsQixLQUFLRCxHQUFHO29CQUN4Qm9CLFVBQVVzQixJQUFJO29CQUNkckIsWUFBWTtvQkFDWkMsU0FBUztvQkFDVHdCLFNBQVM7b0JBQ1QxRCxhQUFhbEIsSUFBQUEsMEJBQWU7Z0JBQzlCO1lBQ0Y7WUFFQSxNQUFNVyxNQUFNUSxNQUFNO1lBRWxCLGdDQUFnQztZQUNoQyxNQUFNQyxxQkFBcUJDLElBQUFBLHFCQUFVLEVBQ25DekQsYUFBYW9CLEVBQUUsRUFDZixDQUFDLE1BQU0sRUFBRW5CLFdBQVcsYUFBYSxDQUFDO1lBRXBDLE1BQU15RCxXQUFXLE1BQU1DLElBQUFBLGtCQUFPLEVBQUNIO1lBRS9CbEIsT0FBT29CLFNBQVNhLElBQUksRUFBRS9CLElBQUksQ0FBQztRQUM3QjtJQUNGO0lBRUF6QyxTQUFTLGtCQUFrQjtRQUN6QjJCLEdBQUcsNkNBQTZDO1lBQzlDLGlDQUFpQztZQUNqQ1ksT0FBTztnQkFDTCxrREFBa0Q7Z0JBQ2xETixJQUFBQSxjQUFHLEVBQUNoQyxhQUFhb0IsRUFBRSxFQUFFLFNBQVMsSUFBSSxnQkFBZ0I7WUFDcEQsR0FBRzhFLE9BQU8sQ0FBQztRQUNiO1FBRUF4RSxHQUFHLG1DQUFtQztnQkFpQjdCQztZQWhCUCxNQUFNSSxTQUFTQyxJQUFBQSxjQUFHLEVBQ2hCaEMsYUFBYW9CLEVBQUUsRUFDZixDQUFDLE1BQU0sRUFBRW5CLFdBQVcsbUJBQW1CLENBQUM7WUFHMUMsZ0NBQWdDO1lBQ2hDLE1BQU1nSCxlQUFlO2dCQUNuQnZFLHlCQUF5QjtZQUUzQjtZQUVBLG9FQUFvRTtZQUNwRSxNQUFNUixJQUFBQSxpQkFBTSxFQUFDSCxRQUFRa0Y7WUFFckIsTUFBTXRGLFVBQVUsTUFBTVUsSUFBQUEsaUJBQU0sRUFBQ047WUFDN0JPLE9BQU9YLFFBQVFZLE1BQU0sSUFBSUMsSUFBSSxDQUFDO1lBQzlCRixRQUFPWCxnQkFBQUEsUUFBUWMsSUFBSSxnQkFBWmQsb0NBQUFBLGNBQWdCRyxNQUFNLEVBQUVvRixhQUFhO1FBQzlDO0lBQ0Y7SUFFQW5ILFNBQVMsK0JBQStCO1FBQ3RDMkIsR0FBRyxvREFBb0Q7Z0JBaUI5Q3lGLG1CQVdBQyxtQkFDQUE7WUE1QlAsTUFBTUMsY0FBY3JGLElBQUFBLGNBQUcsRUFDckJoQyxhQUFhb0IsRUFBRSxFQUNmLENBQUMsTUFBTSxFQUFFbkIsV0FBVyxtQkFBbUIsQ0FBQztZQUcxQyx5QkFBeUI7WUFDekIsTUFBTWlDLElBQUFBLGlCQUFNLEVBQUNtRixhQUFhO2dCQUN4QixHQUFHeEYsb0NBQWU7Z0JBQ2xCQyxRQUFRN0I7Z0JBQ1J5Qyx5QkFBeUI7Z0JBQ3pCNEUsUUFBUTtnQkFDUm5GLFlBQVlvRixvQkFBUyxDQUFDQyxVQUFVLENBQUNyRCxLQUFLRCxHQUFHO1lBQzNDO1lBRUEsK0JBQStCO1lBQy9CLE1BQU1pRCxjQUFjLE1BQU05RSxJQUFBQSxpQkFBTSxFQUFDZ0Y7WUFDakMvRSxRQUFPNkUsb0JBQUFBLFlBQVkxRSxJQUFJLGdCQUFoQjBFLHdDQUFBQSxrQkFBb0J6RSx1QkFBdUIsRUFBRUYsSUFBSSxDQUFDO1lBRXpELG1CQUFtQjtZQUNuQixNQUFNSyxJQUFBQSxvQkFBUyxFQUFDd0UsYUFBYTtnQkFDM0IzRSx5QkFBeUI7Z0JBQ3pCNEUsUUFBUTtnQkFDUm5GLFlBQVlvRixvQkFBUyxDQUFDQyxVQUFVLENBQUNyRCxLQUFLRCxHQUFHLEtBQUs7WUFDaEQ7WUFFQSwrQkFBK0I7WUFDL0IsTUFBTWtELGNBQWMsTUFBTS9FLElBQUFBLGlCQUFNLEVBQUNnRjtZQUNqQy9FLFFBQU84RSxvQkFBQUEsWUFBWTNFLElBQUksZ0JBQWhCMkUsd0NBQUFBLGtCQUFvQjFFLHVCQUF1QixFQUFFRixJQUFJLENBQUM7WUFDekRGLFFBQU84RSxxQkFBQUEsWUFBWTNFLElBQUksZ0JBQWhCMkUseUNBQUFBLG1CQUFvQkUsTUFBTSxFQUFFOUUsSUFBSSxDQUFDO1FBQzFDO1FBRUFkLEdBQUcsNkNBQTZDO2dCQW1DdkMrRixrQkFFa0JBO1lBcEN6QixNQUFNVixVQUFVL0UsSUFBQUEsY0FBRyxFQUNqQmhDLGFBQWFvQixFQUFFLEVBQ2YsQ0FBQyxNQUFNLEVBQUVuQixXQUFXLG9CQUFvQixDQUFDO1lBRzNDLHFCQUFxQjtZQUNyQixNQUFNaUMsSUFBQUEsaUJBQU0sRUFBQzZFLFNBQVM7Z0JBQ3BCM0QsSUFBSTtnQkFDSmdDLGNBQWNqQixLQUFLRCxHQUFHLEtBQUs7Z0JBQzNCbUIsZ0JBQWdCbEIsS0FBS0QsR0FBRztnQkFDeEJvQixVQUFVO2dCQUNWQyxZQUFZO2dCQUNaQyxTQUFTO2dCQUNUd0IsU0FBUztZQUNYO1lBRUEsOENBQThDO1lBQzlDLE1BQU1VLGdCQUFnQjdFLElBQUFBLG9CQUFTLEVBQUNrRSxTQUFTO2dCQUN2Q3RCLFFBQVE7Z0JBQ1JGLFlBQVk7Z0JBQ1pGLGdCQUFnQmtDLG9CQUFTLENBQUNDLFVBQVUsQ0FBQ3JELEtBQUtELEdBQUcsS0FBSztZQUNwRDtZQUVBLE1BQU15RCxnQkFBZ0I5RSxJQUFBQSxvQkFBUyxFQUFDa0UsU0FBUztnQkFDdkNDLFNBQVM7Z0JBQ1R6QixZQUFZO2dCQUNaRixnQkFBZ0JrQyxvQkFBUyxDQUFDQyxVQUFVLENBQUNyRCxLQUFLRCxHQUFHLEtBQUs7WUFDcEQ7WUFFQSxnREFBZ0Q7WUFDaEQsTUFBTTJDLFFBQVFDLEdBQUcsQ0FBQztnQkFBQ1k7Z0JBQWVDO2FBQWM7WUFFaEQsTUFBTUYsYUFBYSxNQUFNcEYsSUFBQUEsaUJBQU0sRUFBQzBFO1lBQ2hDekUsT0FBT21GLFdBQVdsRixNQUFNLElBQUlDLElBQUksQ0FBQztZQUNqQ0YsUUFBT21GLG1CQUFBQSxXQUFXaEYsSUFBSSxnQkFBZmdGLHVDQUFBQSxpQkFBbUJsQyxVQUFVLEVBQUUvQyxJQUFJLENBQUM7WUFDM0MsbURBQW1EO1lBQ25ERixPQUFPO2dCQUFDO2dCQUFHO2FBQUUsRUFBRXNGLFNBQVMsRUFBQ0gsb0JBQUFBLFdBQVdoRixJQUFJLGdCQUFmZ0Ysd0NBQUFBLGtCQUFtQmhDLE1BQU07UUFDcEQ7SUFDRjtBQUNGIn0=