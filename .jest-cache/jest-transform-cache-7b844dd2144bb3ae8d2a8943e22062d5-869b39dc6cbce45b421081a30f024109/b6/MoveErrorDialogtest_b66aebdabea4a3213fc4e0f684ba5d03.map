{"version":3,"sources":["/home/thehu/coolProjects/EndgameTrainer-training-board-complete/src/tests/unit/components/ui/MoveErrorDialog.test.tsx"],"sourcesContent":["import React from \"react\";\nimport { render, screen, fireEvent } from \"@testing-library/react\";\nimport \"@testing-library/jest-dom\";\nimport { MoveErrorDialog } from \"@shared/components/ui/MoveErrorDialog\";\n\ndescribe(\"MoveErrorDialog\", () => {\n  const defaultProps = {\n    isOpen: true,\n    wdlBefore: 2,\n    wdlAfter: -1,\n    bestMove: \"Kb1\",\n    onClose: jest.fn(),\n    onTakeBack: jest.fn(),\n  };\n\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe(\"Rendering\", () => {\n    it(\"renders dialog when open\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      // Check for German error message header\n      expect(screen.getByText(\"Fehler erkannt!\")).toBeInTheDocument();\n    });\n\n    it(\"does not render when closed\", () => {\n      render(<MoveErrorDialog {...defaultProps} isOpen={false} />);\n\n      expect(screen.queryByText(\"Fehler erkannt!\")).not.toBeInTheDocument();\n    });\n\n    it(\"displays the best move\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      expect(screen.getByText(defaultProps.bestMove)).toBeInTheDocument();\n      expect(screen.getByText(\"Bester Zug war:\")).toBeInTheDocument();\n    });\n\n    it(\"shows correct message for win to loss\", () => {\n      render(<MoveErrorDialog {...defaultProps} wdlBefore={2} wdlAfter={0} />);\n\n      // Should show that the move ruins the win\n      expect(\n        screen.getByText(\"Dieser Zug verdirbt den Gewinn!\"),\n      ).toBeInTheDocument();\n    });\n\n    it(\"shows correct message for draw to loss\", () => {\n      render(<MoveErrorDialog {...defaultProps} wdlBefore={0} wdlAfter={-2} />);\n\n      // Should show that the move leads to loss\n      expect(\n        screen.getByText(\"Dieser Zug führt zum Verlust!\"),\n      ).toBeInTheDocument();\n    });\n\n    it(\"shows correct message for position deterioration\", () => {\n      render(<MoveErrorDialog {...defaultProps} wdlBefore={2} wdlAfter={0} />);\n\n      // Should show that the position worsens\n      expect(\n        screen.getByText(\"Dieser Zug verdirbt den Gewinn!\"),\n      ).toBeInTheDocument();\n    });\n\n    it(\"shows default error message\", () => {\n      render(\n        <MoveErrorDialog {...defaultProps} wdlBefore={-2} wdlAfter={-2} />,\n      );\n\n      // Should show default error message\n      expect(\n        screen.getByText(\"Dieser Zug ist ein Fehler!\"),\n      ).toBeInTheDocument();\n    });\n\n    it(\"hides best move when not provided\", () => {\n      render(<MoveErrorDialog {...defaultProps} bestMove={undefined} />);\n\n      expect(screen.queryByText(\"Bester Zug war:\")).not.toBeInTheDocument();\n    });\n  });\n\n  describe(\"Interactions\", () => {\n    it(\"calls onTakeBack when take back button is clicked\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      const takeBackButton = screen.getByRole(\"button\", {\n        name: \"Zurücknehmen\",\n      });\n      fireEvent.click(takeBackButton);\n\n      expect(defaultProps.onTakeBack).toHaveBeenCalledTimes(1);\n    });\n\n    it(\"calls onClose when continue playing button is clicked\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      const closeButton = screen.getByRole(\"button\", { name: \"Weiterspielen\" });\n      fireEvent.click(closeButton);\n\n      expect(defaultProps.onClose).toHaveBeenCalledTimes(1);\n      expect(defaultProps.onTakeBack).not.toHaveBeenCalled();\n    });\n\n    it(\"calls onClose when clicking outside the dialog\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      // Click on the backdrop/overlay - it's the outermost div\n      const backdrop = screen.getByText(\"Fehler erkannt!\").closest(\".fixed\");\n      fireEvent.click(backdrop!);\n\n      expect(defaultProps.onClose).toHaveBeenCalledTimes(1);\n    });\n\n    it(\"does not close when clicking inside the dialog content\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      // Click on the inner dialog content\n      const dialogTitle = screen.getByText(\"Fehler erkannt!\");\n      fireEvent.click(dialogTitle);\n\n      expect(defaultProps.onClose).not.toHaveBeenCalled();\n    });\n\n    it(\"prevents event propagation when clicking dialog content\", () => {\n      const mockOnClick = jest.fn();\n\n      render(\n        <div onClick={mockOnClick}>\n          <MoveErrorDialog {...defaultProps} />\n        </div>,\n      );\n\n      // Click on dialog content should not propagate to parent\n      const dialogTitle = screen.getByText(\"Fehler erkannt!\");\n      fireEvent.click(dialogTitle);\n\n      expect(mockOnClick).not.toHaveBeenCalled();\n    });\n  });\n\n  describe(\"Accessibility\", () => {\n    it(\"has proper heading structure\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      const heading = screen.getByRole(\"heading\", { name: \"Fehler erkannt!\" });\n      expect(heading).toBeInTheDocument();\n    });\n\n    it(\"has interactive buttons\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      const buttons = screen.getAllByRole(\"button\");\n      expect(buttons).toHaveLength(2);\n\n      const weiterspielen = screen.getByRole(\"button\", {\n        name: \"Weiterspielen\",\n      });\n      const zurücknehmen = screen.getByRole(\"button\", { name: \"Zurücknehmen\" });\n\n      expect(weiterspielen).toBeInTheDocument();\n      expect(zurücknehmen).toBeInTheDocument();\n    });\n\n    it(\"renders semantic structure\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      // Check for proper text structure\n      expect(screen.getByText(\"Fehler erkannt!\")).toBeInTheDocument();\n      expect(screen.getByText(/Dieser Zug/)).toBeInTheDocument();\n    });\n  });\n\n  describe(\"Edge Cases\", () => {\n    it(\"handles missing bestMove gracefully\", () => {\n      render(<MoveErrorDialog {...defaultProps} bestMove={undefined} />);\n\n      expect(screen.getByText(\"Fehler erkannt!\")).toBeInTheDocument();\n      expect(screen.queryByText(\"Bester Zug war:\")).not.toBeInTheDocument();\n    });\n\n    it(\"handles equal WDL values\", () => {\n      render(<MoveErrorDialog {...defaultProps} wdlBefore={0} wdlAfter={0} />);\n\n      // Should show default error message\n      expect(\n        screen.getByText(\"Dieser Zug ist ein Fehler!\"),\n      ).toBeInTheDocument();\n    });\n\n    it(\"shows correct message for position worsening\", () => {\n      render(<MoveErrorDialog {...defaultProps} wdlBefore={1} wdlAfter={-1} />);\n\n      // Should show that position worsens (wdlBefore > wdlAfter)\n      expect(\n        screen.getByText(\"Dieser Zug verschlechtert die Stellung!\"),\n      ).toBeInTheDocument();\n    });\n  });\n\n  describe(\"Visual Elements\", () => {\n    it(\"displays warning icon\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      // Check for SVG warning icon by looking for the path element\n      const svgElements = document.querySelectorAll(\"svg\");\n      expect(svgElements.length).toBe(1);\n\n      // Check the warning triangle path is present\n      const pathElement = document.querySelector('path[d*=\"M12 9v2m0 4h.01\"]');\n      expect(pathElement).toBeInTheDocument();\n    });\n\n    it(\"has proper styling classes\", () => {\n      render(<MoveErrorDialog {...defaultProps} />);\n\n      const backdrop = screen.getByText(\"Fehler erkannt!\").closest(\".fixed\");\n      expect(backdrop).toHaveClass(\n        \"fixed\",\n        \"inset-0\",\n        \"bg-black\",\n        \"bg-opacity-80\",\n      );\n    });\n  });\n});\n"],"names":["describe","defaultProps","isOpen","wdlBefore","wdlAfter","bestMove","onClose","jest","fn","onTakeBack","beforeEach","clearAllMocks","it","render","MoveErrorDialog","expect","screen","getByText","toBeInTheDocument","queryByText","not","undefined","takeBackButton","getByRole","name","fireEvent","click","toHaveBeenCalledTimes","closeButton","toHaveBeenCalled","backdrop","closest","dialogTitle","mockOnClick","div","onClick","heading","buttons","getAllByRole","toHaveLength","weiterspielen","zurücknehmen","svgElements","document","querySelectorAll","length","toBe","pathElement","querySelector","toHaveClass"],"mappings":"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"}