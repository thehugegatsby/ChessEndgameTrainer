6e14072d94b665200d77264062c12a0b
/**
 * @file DueCardsCacheService
 * @description High-performance localStorage cache for Due Cards with TTL and LRU
 * 
 * This service provides intelligent caching for due cards calculation with:
 * - 24h TTL with midnight invalidation (UTC-based)
 * - LRU-based memory management for large collections
 * - Graceful fallback on cache corruption or localStorage issues
 * - Performance optimization for collections >500 cards
 * 
 * @example
 * ```typescript
 * const cacheService = DueCardsCacheService.getInstance();
 * 
 * // Get cached due cards (returns null if cache miss/expired)
 * const cachedResult = cacheService.getDueCards(userId);
 * 
 * // Cache new calculation result
 * cacheService.setDueCards(userId, { dueCards, timestamp, stats });
 * 
 * // Clear cache on user logout
 * cacheService.clearUserCache(userId);
 * ```
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get DueCardsCacheService () {
        return DueCardsCacheService;
    },
    get createInputHash () {
        return createInputHash;
    },
    get dueCardsCacheService () {
        return dueCardsCacheService;
    }
});
const _Logger = require("./logging/Logger");
function _define_property(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
const logger = (0, _Logger.getLogger)().setContext('DueCardsCacheService');
/**
 * Cache configuration constants
 */ const CACHE_CONFIG = {
    /** Cache key prefix in localStorage */ KEY_PREFIX: 'endgame_due_cards_',
    /** Metadata key in localStorage */ METADATA_KEY: 'endgame_cache_metadata',
    /** Current cache version */ VERSION: 1,
    /** TTL in milliseconds (24 hours) */ TTL_MS: 24 * 60 * 60 * 1000,
    /** Maximum entries before LRU cleanup */ MAX_ENTRIES: 50,
    /** Maximum estimated size in bytes (5MB) */ MAX_SIZE_BYTES: 5 * 1024 * 1024,
    /** Cleanup interval in milliseconds (1 hour) */ CLEANUP_INTERVAL_MS: 60 * 60 * 1000,
    /** Large collection threshold for performance warnings */ LARGE_COLLECTION_THRESHOLD: 500
};
class DueCardsCacheService {
    /**
   * Get singleton instance
   * 
   * @returns DueCardsCacheService instance
   */ static getInstance() {
        if (!DueCardsCacheService.instance) {
            DueCardsCacheService.instance = new DueCardsCacheService();
        }
        return DueCardsCacheService.instance;
    }
    /**
   * Get cached due cards for a user
   * 
   * @param userId - User identifier
   * @param inputHash - Hash of input data for validation
   * @returns Cached result or null if cache miss/expired
   */ getDueCards(userId, inputHash) {
        if (!this.isLocalStorageAvailable()) {
            return null;
        }
        try {
            const cacheKey = this.getCacheKey(userId);
            const cached = localStorage.getItem(cacheKey);
            if (!cached) {
                logger.debug('Cache miss for user', {
                    userId
                });
                return null;
            }
            const entry = JSON.parse(cached);
            // Validate cache entry structure
            if (!this.isValidCacheEntry(entry)) {
                logger.warn('Invalid cache entry structure, removing', {
                    userId
                });
                this.clearUserCache(userId);
                return null;
            }
            // Check TTL expiration
            if (this.isExpired(entry)) {
                logger.debug('Cache expired for user', {
                    userId,
                    age: Date.now() - entry.createdAt
                });
                this.clearUserCache(userId);
                return null;
            }
            // Check midnight invalidation (UTC)
            if (this.isAfterMidnight(entry.createdAt)) {
                logger.debug('Cache invalid due to midnight rollover', {
                    userId
                });
                this.clearUserCache(userId);
                return null;
            }
            // Validate input hash for cache invalidation
            if (entry.inputHash !== inputHash) {
                logger.debug('Cache invalid due to input change', {
                    userId
                });
                this.clearUserCache(userId);
                return null;
            }
            // Update last accessed timestamp for LRU
            const updatedEntry = {
                ...entry,
                lastAccessedAt: Date.now()
            };
            localStorage.setItem(cacheKey, JSON.stringify(updatedEntry));
            logger.debug('Cache hit for user', {
                userId,
                dueCount: entry.dueCards.length,
                age: Date.now() - entry.createdAt
            });
            return updatedEntry;
        } catch (error) {
            logger.error('Error reading from cache', {
                userId,
                error: error.message
            });
            this.clearUserCache(userId);
            return null;
        }
    }
    /**
   * Cache due cards calculation result
   * 
   * @param userId - User identifier
   * @param dueCards - Calculated due cards
   * @param stats - Calculation statistics
   * @param inputHash - Hash of input data
   */ setDueCards(userId, dueCards, stats, inputHash) {
        if (!this.isLocalStorageAvailable()) {
            return;
        }
        try {
            // Performance warning for large collections
            if (dueCards.length > CACHE_CONFIG.LARGE_COLLECTION_THRESHOLD) {
                logger.warn('Caching large collection', {
                    userId,
                    count: dueCards.length
                });
            }
            const now = Date.now();
            const entry = {
                dueCards,
                calculatedAt: now,
                stats,
                inputHash,
                createdAt: now,
                lastAccessedAt: now
            };
            const cacheKey = this.getCacheKey(userId);
            const serialized = JSON.stringify(entry);
            // Check if we need to make space
            this.ensureSpaceAvailable(serialized.length);
            localStorage.setItem(cacheKey, serialized);
            this.updateMetadata(1, serialized.length);
            logger.debug('Cached due cards for user', {
                userId,
                dueCount: dueCards.length,
                size: serialized.length
            });
        } catch (error) {
            logger.error('Error writing to cache', {
                userId,
                error: error.message
            });
        }
    }
    /**
   * Clear cache for specific user
   * 
   * @param userId - User identifier
   */ clearUserCache(userId) {
        if (!this.isLocalStorageAvailable()) {
            return;
        }
        try {
            const cacheKey = this.getCacheKey(userId);
            const existing = localStorage.getItem(cacheKey);
            if (existing) {
                localStorage.removeItem(cacheKey);
                this.updateMetadata(-1, -existing.length);
                logger.debug('Cleared cache for user', {
                    userId
                });
            }
        } catch (error) {
            logger.error('Error clearing user cache', {
                userId,
                error: error.message
            });
        }
    }
    /**
   * Clear all cache entries
   */ clearAllCache() {
        if (!this.isLocalStorageAvailable()) {
            return;
        }
        try {
            const keysToRemove = [];
            // Find all cache keys
            for(let i = 0; i < localStorage.length; i++){
                const key = localStorage.key(i);
                if (key === null || key === void 0 ? void 0 : key.startsWith(CACHE_CONFIG.KEY_PREFIX)) {
                    keysToRemove.push(key);
                }
            }
            // Remove all cache entries
            keysToRemove.forEach((key)=>localStorage.removeItem(key));
            // Reset metadata
            localStorage.removeItem(CACHE_CONFIG.METADATA_KEY);
            logger.info('Cleared all cache entries', {
                removedKeys: keysToRemove.length
            });
        } catch (error) {
            logger.error('Error clearing all cache', {
                error: error.message
            });
        }
    }
    /**
   * Get cache statistics
   * 
   * @returns Cache statistics
   */ getCacheStats() {
        if (!this.isLocalStorageAvailable()) {
            return {
                available: false,
                totalEntries: 0,
                estimatedSize: 0,
                lastCleanup: null
            };
        }
        const metadata = this.getMetadata();
        return {
            available: true,
            totalEntries: metadata.totalEntries,
            estimatedSize: metadata.estimatedSize,
            lastCleanup: metadata.lastCleanup ? new Date(metadata.lastCleanup) : null,
            maxEntries: CACHE_CONFIG.MAX_ENTRIES,
            maxSize: CACHE_CONFIG.MAX_SIZE_BYTES
        };
    }
    /**
   * Force cleanup of expired and least recently used entries
   */ forceCleanup() {
        this.performCleanup();
    }
    /**
   * Destroy service and cleanup resources
   */ destroy() {
        if (this.cleanupTimeoutId) {
            clearTimeout(this.cleanupTimeoutId);
            this.cleanupTimeoutId = null;
        }
        DueCardsCacheService.instance = null;
        logger.debug('DueCardsCacheService destroyed');
    }
    // Private helper methods
    /**
   * Generate cache key for user
   */ getCacheKey(userId) {
        return `${CACHE_CONFIG.KEY_PREFIX}${userId}`;
    }
    /**
   * Check if localStorage is available
   */ isLocalStorageAvailable() {
        try {
            const testKey = '__localStorage_test__';
            localStorage.setItem(testKey, 'test');
            localStorage.removeItem(testKey);
            return true;
        } catch  {
            return false;
        }
    }
    /**
   * Validate cache entry structure
   */ isValidCacheEntry(entry) {
        return typeof entry === 'object' && entry !== null && Array.isArray(entry.dueCards) && typeof entry.calculatedAt === 'number' && typeof entry.stats === 'object' && typeof entry.inputHash === 'string' && typeof entry.createdAt === 'number' && typeof entry.lastAccessedAt === 'number';
    }
    /**
   * Check if cache entry is expired
   */ isExpired(entry) {
        return Date.now() - entry.createdAt > CACHE_CONFIG.TTL_MS;
    }
    /**
   * Check if entry was created before last midnight (UTC)
   */ isAfterMidnight(createdAt) {
        const now = Date.now();
        const nowDate = new Date(now);
        const todayMidnightUTC = new Date(Date.UTC(nowDate.getUTCFullYear(), nowDate.getUTCMonth(), nowDate.getUTCDate(), 0, 0, 0, 0)).getTime();
        return createdAt < todayMidnightUTC;
    }
    /**
   * Get cache metadata
   */ getMetadata() {
        try {
            const stored = localStorage.getItem(CACHE_CONFIG.METADATA_KEY);
            if (stored) {
                const metadata = JSON.parse(stored);
                if (metadata.version === CACHE_CONFIG.VERSION) {
                    return metadata;
                }
            }
        } catch  {
        // Fall through to default
        }
        return {
            totalEntries: 0,
            estimatedSize: 0,
            lastCleanup: 0,
            version: CACHE_CONFIG.VERSION
        };
    }
    /**
   * Update cache metadata
   */ updateMetadata(entriesDelta, sizeDelta) {
        try {
            const metadata = this.getMetadata();
            metadata.totalEntries = Math.max(0, metadata.totalEntries + entriesDelta);
            metadata.estimatedSize = Math.max(0, metadata.estimatedSize + sizeDelta);
            localStorage.setItem(CACHE_CONFIG.METADATA_KEY, JSON.stringify(metadata));
        } catch (error) {
            logger.warn('Failed to update cache metadata', {
                error: error.message
            });
        }
    }
    /**
   * Ensure space is available for new entry
   */ ensureSpaceAvailable(newEntrySize) {
        const metadata = this.getMetadata();
        // Check if cleanup is needed
        const needsCleanup = metadata.totalEntries >= CACHE_CONFIG.MAX_ENTRIES || metadata.estimatedSize + newEntrySize > CACHE_CONFIG.MAX_SIZE_BYTES;
        if (needsCleanup) {
            logger.debug('Cache space cleanup needed', {
                totalEntries: metadata.totalEntries,
                estimatedSize: metadata.estimatedSize,
                newEntrySize
            });
            this.performCleanup();
        }
    }
    /**
   * Perform cache cleanup (expired entries and LRU eviction)
   */ performCleanup() {
        if (!this.isLocalStorageAvailable()) {
            return;
        }
        try {
            const entries = [];
            const now = Date.now();
            // Collect all cache entries
            for(let i = 0; i < localStorage.length; i++){
                const key = localStorage.key(i);
                if (key === null || key === void 0 ? void 0 : key.startsWith(CACHE_CONFIG.KEY_PREFIX)) {
                    try {
                        const stored = localStorage.getItem(key);
                        if (stored) {
                            const entry = JSON.parse(stored);
                            if (this.isValidCacheEntry(entry)) {
                                entries.push({
                                    key,
                                    entry
                                });
                            } else {
                                // Remove invalid entry
                                localStorage.removeItem(key);
                            }
                        }
                    } catch  {
                        // Remove corrupted entry
                        localStorage.removeItem(key);
                    }
                }
            }
            let removedCount = 0;
            let removedSize = 0;
            // Remove expired entries
            entries.forEach(({ key, entry })=>{
                if (this.isExpired(entry) || this.isAfterMidnight(entry.createdAt)) {
                    const serialized = JSON.stringify(entry);
                    localStorage.removeItem(key);
                    removedCount++;
                    removedSize += serialized.length;
                }
            });
            // Remove LRU entries if still over limit
            const remaining = entries.filter(({ key })=>{
                return localStorage.getItem(key) !== null;
            });
            if (remaining.length > CACHE_CONFIG.MAX_ENTRIES) {
                // Sort by last accessed (LRU first)
                remaining.sort((a, b)=>a.entry.lastAccessedAt - b.entry.lastAccessedAt);
                const toRemove = remaining.length - CACHE_CONFIG.MAX_ENTRIES;
                for(let i = 0; i < toRemove; i++){
                    const { key, entry } = remaining[i];
                    const serialized = JSON.stringify(entry);
                    localStorage.removeItem(key);
                    removedCount++;
                    removedSize += serialized.length;
                }
            }
            // Update metadata
            if (removedCount > 0) {
                this.updateMetadata(-removedCount, -removedSize);
                const metadata = this.getMetadata();
                metadata.lastCleanup = now;
                localStorage.setItem(CACHE_CONFIG.METADATA_KEY, JSON.stringify(metadata));
                logger.info('Cache cleanup completed', {
                    removedEntries: removedCount,
                    removedSize,
                    remainingEntries: metadata.totalEntries
                });
            }
        } catch (error) {
            logger.error('Cache cleanup failed', {
                error: error.message
            });
        }
    }
    /**
   * Schedule periodic cleanup
   */ scheduleCleanup() {
        if (this.cleanupTimeoutId) {
            clearTimeout(this.cleanupTimeoutId);
        }
        this.cleanupTimeoutId = setTimeout(()=>{
            this.performCleanup();
            this.scheduleCleanup(); // Reschedule
        }, CACHE_CONFIG.CLEANUP_INTERVAL_MS);
    }
    /**
   * Private constructor for singleton pattern
   */ constructor(){
        _define_property(this, "cleanupTimeoutId", null);
        this.scheduleCleanup();
        logger.debug('DueCardsCacheService initialized');
    }
}
_define_property(DueCardsCacheService, "instance", null);
function createInputHash(input) {
    const str = typeof input === 'string' ? input : JSON.stringify(input);
    let hash = 0;
    for(let i = 0; i < str.length; i++){
        const char = str.charCodeAt(i);
        hash = (hash << 5) - hash + char;
        hash = hash & hash; // Convert to 32-bit integer
    }
    return Math.abs(hash).toString(36);
}
const dueCardsCacheService = DueCardsCacheService.getInstance();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RoZWh1L2Nvb2xQcm9qZWN0cy9FbmRnYW1lVHJhaW5lci10cmFpbmluZy1ib2FyZC1jb21wbGV0ZS9zcmMvc2hhcmVkL3NlcnZpY2VzL0R1ZUNhcmRzQ2FjaGVTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgRHVlQ2FyZHNDYWNoZVNlcnZpY2VcbiAqIEBkZXNjcmlwdGlvbiBIaWdoLXBlcmZvcm1hbmNlIGxvY2FsU3RvcmFnZSBjYWNoZSBmb3IgRHVlIENhcmRzIHdpdGggVFRMIGFuZCBMUlVcbiAqIFxuICogVGhpcyBzZXJ2aWNlIHByb3ZpZGVzIGludGVsbGlnZW50IGNhY2hpbmcgZm9yIGR1ZSBjYXJkcyBjYWxjdWxhdGlvbiB3aXRoOlxuICogLSAyNGggVFRMIHdpdGggbWlkbmlnaHQgaW52YWxpZGF0aW9uIChVVEMtYmFzZWQpXG4gKiAtIExSVS1iYXNlZCBtZW1vcnkgbWFuYWdlbWVudCBmb3IgbGFyZ2UgY29sbGVjdGlvbnNcbiAqIC0gR3JhY2VmdWwgZmFsbGJhY2sgb24gY2FjaGUgY29ycnVwdGlvbiBvciBsb2NhbFN0b3JhZ2UgaXNzdWVzXG4gKiAtIFBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiBmb3IgY29sbGVjdGlvbnMgPjUwMCBjYXJkc1xuICogXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgY2FjaGVTZXJ2aWNlID0gRHVlQ2FyZHNDYWNoZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAqIFxuICogLy8gR2V0IGNhY2hlZCBkdWUgY2FyZHMgKHJldHVybnMgbnVsbCBpZiBjYWNoZSBtaXNzL2V4cGlyZWQpXG4gKiBjb25zdCBjYWNoZWRSZXN1bHQgPSBjYWNoZVNlcnZpY2UuZ2V0RHVlQ2FyZHModXNlcklkKTtcbiAqIFxuICogLy8gQ2FjaGUgbmV3IGNhbGN1bGF0aW9uIHJlc3VsdFxuICogY2FjaGVTZXJ2aWNlLnNldER1ZUNhcmRzKHVzZXJJZCwgeyBkdWVDYXJkcywgdGltZXN0YW1wLCBzdGF0cyB9KTtcbiAqIFxuICogLy8gQ2xlYXIgY2FjaGUgb24gdXNlciBsb2dvdXRcbiAqIGNhY2hlU2VydmljZS5jbGVhclVzZXJDYWNoZSh1c2VySWQpO1xuICogYGBgXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBEdWVDYXJkLCBEdWVDYXJkc1N0YXRzIH0gZnJvbSAnQHNoYXJlZC90eXBlcy9wcm9ncmVzcyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAc2hhcmVkL3NlcnZpY2VzL2xvZ2dpbmcvTG9nZ2VyJztcblxuY29uc3QgbG9nZ2VyID0gZ2V0TG9nZ2VyKCkuc2V0Q29udGV4dCgnRHVlQ2FyZHNDYWNoZVNlcnZpY2UnKTtcblxuLyoqXG4gKiBDYWNoZSBlbnRyeSBpbnRlcmZhY2UgZm9yIGR1ZSBjYXJkcyBjYWxjdWxhdGlvbiByZXN1bHRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEdWVDYWNoZUVudHJ5IHtcbiAgLyoqIEFycmF5IG9mIGR1ZSBjYXJkcyBhdCB0aW1lIG9mIGNhbGN1bGF0aW9uICovXG4gIGR1ZUNhcmRzOiBEdWVDYXJkW107XG4gIFxuICAvKiogVGltZXN0YW1wIHdoZW4gdGhpcyBjYWxjdWxhdGlvbiB3YXMgcGVyZm9ybWVkICovXG4gIGNhbGN1bGF0ZWRBdDogbnVtYmVyO1xuICBcbiAgLyoqIFN0YXRpc3RpY3MgYXQgdGltZSBvZiBjYWxjdWxhdGlvbiAqL1xuICBzdGF0czogRHVlQ2FyZHNTdGF0cztcbiAgXG4gIC8qKiBJbnB1dCBoYXNoIGZvciBpbnZhbGlkYXRpb24gZGV0ZWN0aW9uICovXG4gIGlucHV0SGFzaDogc3RyaW5nO1xuICBcbiAgLyoqIEVudHJ5IGNyZWF0aW9uIHRpbWVzdGFtcCBmb3IgVFRMICovXG4gIGNyZWF0ZWRBdDogbnVtYmVyO1xuICBcbiAgLyoqIExhc3QgYWNjZXNzIHRpbWVzdGFtcCBmb3IgTFJVICovXG4gIGxhc3RBY2Nlc3NlZEF0OiBudW1iZXI7XG59XG5cbi8qKlxuICogQ2FjaGUgbWV0YWRhdGEgZm9yIG1lbW9yeSBtYW5hZ2VtZW50XG4gKi9cbmludGVyZmFjZSBDYWNoZU1ldGFkYXRhIHtcbiAgLyoqIFRvdGFsIG51bWJlciBvZiBjYWNoZWQgZW50cmllcyAqL1xuICB0b3RhbEVudHJpZXM6IG51bWJlcjtcbiAgXG4gIC8qKiBDb21iaW5lZCBzaXplIGVzdGltYXRlIGluIGJ5dGVzICovXG4gIGVzdGltYXRlZFNpemU6IG51bWJlcjtcbiAgXG4gIC8qKiBMYXN0IGNsZWFudXAgdGltZXN0YW1wICovXG4gIGxhc3RDbGVhbnVwOiBudW1iZXI7XG4gIFxuICAvKiogQ2FjaGUgdmVyc2lvbiBmb3IgbWlncmF0aW9uIHN1cHBvcnQgKi9cbiAgdmVyc2lvbjogbnVtYmVyO1xufVxuXG4vKipcbiAqIENhY2hlIGNvbmZpZ3VyYXRpb24gY29uc3RhbnRzXG4gKi9cbmNvbnN0IENBQ0hFX0NPTkZJRyA9IHtcbiAgLyoqIENhY2hlIGtleSBwcmVmaXggaW4gbG9jYWxTdG9yYWdlICovXG4gIEtFWV9QUkVGSVg6ICdlbmRnYW1lX2R1ZV9jYXJkc18nLFxuICBcbiAgLyoqIE1ldGFkYXRhIGtleSBpbiBsb2NhbFN0b3JhZ2UgKi9cbiAgTUVUQURBVEFfS0VZOiAnZW5kZ2FtZV9jYWNoZV9tZXRhZGF0YScsXG4gIFxuICAvKiogQ3VycmVudCBjYWNoZSB2ZXJzaW9uICovXG4gIFZFUlNJT046IDEsXG4gIFxuICAvKiogVFRMIGluIG1pbGxpc2Vjb25kcyAoMjQgaG91cnMpICovXG4gIFRUTF9NUzogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgXG4gIC8qKiBNYXhpbXVtIGVudHJpZXMgYmVmb3JlIExSVSBjbGVhbnVwICovXG4gIE1BWF9FTlRSSUVTOiA1MCxcbiAgXG4gIC8qKiBNYXhpbXVtIGVzdGltYXRlZCBzaXplIGluIGJ5dGVzICg1TUIpICovXG4gIE1BWF9TSVpFX0JZVEVTOiA1ICogMTAyNCAqIDEwMjQsXG4gIFxuICAvKiogQ2xlYW51cCBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHMgKDEgaG91cikgKi9cbiAgQ0xFQU5VUF9JTlRFUlZBTF9NUzogNjAgKiA2MCAqIDEwMDAsXG4gIFxuICAvKiogTGFyZ2UgY29sbGVjdGlvbiB0aHJlc2hvbGQgZm9yIHBlcmZvcm1hbmNlIHdhcm5pbmdzICovXG4gIExBUkdFX0NPTExFQ1RJT05fVEhSRVNIT0xEOiA1MDAsXG59IGFzIGNvbnN0O1xuXG4vKipcbiAqIEhpZ2gtcGVyZm9ybWFuY2UgRHVlIENhcmRzIGNhY2hlIHNlcnZpY2Ugd2l0aCBsb2NhbFN0b3JhZ2UgcGVyc2lzdGVuY2VcbiAqIFxuICogRmVhdHVyZXM6XG4gKiAtIFNpbmdsZXRvbiBwYXR0ZXJuIGZvciBjb25zaXN0ZW50IGNhY2hlIHN0YXRlXG4gKiAtIFVUQy1iYXNlZCBtaWRuaWdodCBpbnZhbGlkYXRpb24gXG4gKiAtIExSVSBldmljdGlvbiBmb3IgbWVtb3J5IG1hbmFnZW1lbnRcbiAqIC0gSW5wdXQgaGFzaCB2YWxpZGF0aW9uIGZvciBjYWNoZSBpbnZhbGlkYXRpb25cbiAqIC0gUGVyZm9ybWFuY2UgbW9uaXRvcmluZyBhbmQgd2FybmluZ3NcbiAqIC0gR3JhY2VmdWwgZXJyb3IgaGFuZGxpbmcgd2l0aCBmYWxsYmFja1xuICovXG5leHBvcnQgY2xhc3MgRHVlQ2FyZHNDYWNoZVNlcnZpY2Uge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogRHVlQ2FyZHNDYWNoZVNlcnZpY2UgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjbGVhbnVwVGltZW91dElkOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBQcml2YXRlIGNvbnN0cnVjdG9yIGZvciBzaW5nbGV0b24gcGF0dGVyblxuICAgKi9cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNjaGVkdWxlQ2xlYW51cCgpO1xuICAgIGxvZ2dlci5kZWJ1ZygnRHVlQ2FyZHNDYWNoZVNlcnZpY2UgaW5pdGlhbGl6ZWQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgc2luZ2xldG9uIGluc3RhbmNlXG4gICAqIFxuICAgKiBAcmV0dXJucyBEdWVDYXJkc0NhY2hlU2VydmljZSBpbnN0YW5jZVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBEdWVDYXJkc0NhY2hlU2VydmljZSB7XG4gICAgaWYgKCFEdWVDYXJkc0NhY2hlU2VydmljZS5pbnN0YW5jZSkge1xuICAgICAgRHVlQ2FyZHNDYWNoZVNlcnZpY2UuaW5zdGFuY2UgPSBuZXcgRHVlQ2FyZHNDYWNoZVNlcnZpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIER1ZUNhcmRzQ2FjaGVTZXJ2aWNlLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjYWNoZWQgZHVlIGNhcmRzIGZvciBhIHVzZXJcbiAgICogXG4gICAqIEBwYXJhbSB1c2VySWQgLSBVc2VyIGlkZW50aWZpZXJcbiAgICogQHBhcmFtIGlucHV0SGFzaCAtIEhhc2ggb2YgaW5wdXQgZGF0YSBmb3IgdmFsaWRhdGlvblxuICAgKiBAcmV0dXJucyBDYWNoZWQgcmVzdWx0IG9yIG51bGwgaWYgY2FjaGUgbWlzcy9leHBpcmVkXG4gICAqL1xuICBwdWJsaWMgZ2V0RHVlQ2FyZHModXNlcklkOiBzdHJpbmcsIGlucHV0SGFzaDogc3RyaW5nKTogRHVlQ2FjaGVFbnRyeSB8IG51bGwge1xuICAgIGlmICghdGhpcy5pc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmdldENhY2hlS2V5KHVzZXJJZCk7XG4gICAgICBjb25zdCBjYWNoZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSk7XG4gICAgICBcbiAgICAgIGlmICghY2FjaGVkKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQ2FjaGUgbWlzcyBmb3IgdXNlcicsIHsgdXNlcklkIH0pO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZW50cnk6IER1ZUNhY2hlRW50cnkgPSBKU09OLnBhcnNlKGNhY2hlZCk7XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIGNhY2hlIGVudHJ5IHN0cnVjdHVyZVxuICAgICAgaWYgKCF0aGlzLmlzVmFsaWRDYWNoZUVudHJ5KGVudHJ5KSkge1xuICAgICAgICBsb2dnZXIud2FybignSW52YWxpZCBjYWNoZSBlbnRyeSBzdHJ1Y3R1cmUsIHJlbW92aW5nJywgeyB1c2VySWQgfSk7XG4gICAgICAgIHRoaXMuY2xlYXJVc2VyQ2FjaGUodXNlcklkKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIFRUTCBleHBpcmF0aW9uXG4gICAgICBpZiAodGhpcy5pc0V4cGlyZWQoZW50cnkpKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQ2FjaGUgZXhwaXJlZCBmb3IgdXNlcicsIHsgXG4gICAgICAgICAgdXNlcklkLCBcbiAgICAgICAgICBhZ2U6IERhdGUubm93KCkgLSBlbnRyeS5jcmVhdGVkQXQgXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNsZWFyVXNlckNhY2hlKHVzZXJJZCk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBtaWRuaWdodCBpbnZhbGlkYXRpb24gKFVUQylcbiAgICAgIGlmICh0aGlzLmlzQWZ0ZXJNaWRuaWdodChlbnRyeS5jcmVhdGVkQXQpKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQ2FjaGUgaW52YWxpZCBkdWUgdG8gbWlkbmlnaHQgcm9sbG92ZXInLCB7IHVzZXJJZCB9KTtcbiAgICAgICAgdGhpcy5jbGVhclVzZXJDYWNoZSh1c2VySWQpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgaW5wdXQgaGFzaCBmb3IgY2FjaGUgaW52YWxpZGF0aW9uXG4gICAgICBpZiAoZW50cnkuaW5wdXRIYXNoICE9PSBpbnB1dEhhc2gpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdDYWNoZSBpbnZhbGlkIGR1ZSB0byBpbnB1dCBjaGFuZ2UnLCB7IHVzZXJJZCB9KTtcbiAgICAgICAgdGhpcy5jbGVhclVzZXJDYWNoZSh1c2VySWQpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIGxhc3QgYWNjZXNzZWQgdGltZXN0YW1wIGZvciBMUlVcbiAgICAgIGNvbnN0IHVwZGF0ZWRFbnRyeSA9IHtcbiAgICAgICAgLi4uZW50cnksXG4gICAgICAgIGxhc3RBY2Nlc3NlZEF0OiBEYXRlLm5vdygpXG4gICAgICB9O1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRFbnRyeSkpO1xuXG4gICAgICBsb2dnZXIuZGVidWcoJ0NhY2hlIGhpdCBmb3IgdXNlcicsIHsgXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgZHVlQ291bnQ6IGVudHJ5LmR1ZUNhcmRzLmxlbmd0aCxcbiAgICAgICAgYWdlOiBEYXRlLm5vdygpIC0gZW50cnkuY3JlYXRlZEF0XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVwZGF0ZWRFbnRyeTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHJlYWRpbmcgZnJvbSBjYWNoZScsIHsgXG4gICAgICAgIHVzZXJJZCwgXG4gICAgICAgIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgXG4gICAgICB9KTtcbiAgICAgIHRoaXMuY2xlYXJVc2VyQ2FjaGUodXNlcklkKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWNoZSBkdWUgY2FyZHMgY2FsY3VsYXRpb24gcmVzdWx0XG4gICAqIFxuICAgKiBAcGFyYW0gdXNlcklkIC0gVXNlciBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSBkdWVDYXJkcyAtIENhbGN1bGF0ZWQgZHVlIGNhcmRzXG4gICAqIEBwYXJhbSBzdGF0cyAtIENhbGN1bGF0aW9uIHN0YXRpc3RpY3NcbiAgICogQHBhcmFtIGlucHV0SGFzaCAtIEhhc2ggb2YgaW5wdXQgZGF0YVxuICAgKi9cbiAgcHVibGljIHNldER1ZUNhcmRzKFxuICAgIHVzZXJJZDogc3RyaW5nLCBcbiAgICBkdWVDYXJkczogRHVlQ2FyZFtdLCBcbiAgICBzdGF0czogRHVlQ2FyZHNTdGF0cyxcbiAgICBpbnB1dEhhc2g6IHN0cmluZ1xuICApOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBQZXJmb3JtYW5jZSB3YXJuaW5nIGZvciBsYXJnZSBjb2xsZWN0aW9uc1xuICAgICAgaWYgKGR1ZUNhcmRzLmxlbmd0aCA+IENBQ0hFX0NPTkZJRy5MQVJHRV9DT0xMRUNUSU9OX1RIUkVTSE9MRCkge1xuICAgICAgICBsb2dnZXIud2FybignQ2FjaGluZyBsYXJnZSBjb2xsZWN0aW9uJywgeyBcbiAgICAgICAgICB1c2VySWQsIFxuICAgICAgICAgIGNvdW50OiBkdWVDYXJkcy5sZW5ndGggXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgZW50cnk6IER1ZUNhY2hlRW50cnkgPSB7XG4gICAgICAgIGR1ZUNhcmRzLFxuICAgICAgICBjYWxjdWxhdGVkQXQ6IG5vdyxcbiAgICAgICAgc3RhdHMsXG4gICAgICAgIGlucHV0SGFzaCxcbiAgICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICAgIGxhc3RBY2Nlc3NlZEF0OiBub3dcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5nZXRDYWNoZUtleSh1c2VySWQpO1xuICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KGVudHJ5KTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBtYWtlIHNwYWNlXG4gICAgICB0aGlzLmVuc3VyZVNwYWNlQXZhaWxhYmxlKHNlcmlhbGl6ZWQubGVuZ3RoKTtcbiAgICAgIFxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY2FjaGVLZXksIHNlcmlhbGl6ZWQpO1xuICAgICAgdGhpcy51cGRhdGVNZXRhZGF0YSgxLCBzZXJpYWxpemVkLmxlbmd0aCk7XG5cbiAgICAgIGxvZ2dlci5kZWJ1ZygnQ2FjaGVkIGR1ZSBjYXJkcyBmb3IgdXNlcicsIHsgXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgZHVlQ291bnQ6IGR1ZUNhcmRzLmxlbmd0aCxcbiAgICAgICAgc2l6ZTogc2VyaWFsaXplZC5sZW5ndGhcbiAgICAgIH0pO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igd3JpdGluZyB0byBjYWNoZScsIHsgXG4gICAgICAgIHVzZXJJZCwgXG4gICAgICAgIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgY2FjaGUgZm9yIHNwZWNpZmljIHVzZXJcbiAgICogXG4gICAqIEBwYXJhbSB1c2VySWQgLSBVc2VyIGlkZW50aWZpZXJcbiAgICovXG4gIHB1YmxpYyBjbGVhclVzZXJDYWNoZSh1c2VySWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNhY2hlS2V5ID0gdGhpcy5nZXRDYWNoZUtleSh1c2VySWQpO1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjYWNoZUtleSk7XG4gICAgICBcbiAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShjYWNoZUtleSk7XG4gICAgICAgIHRoaXMudXBkYXRlTWV0YWRhdGEoLTEsIC1leGlzdGluZy5sZW5ndGgpO1xuICAgICAgICBsb2dnZXIuZGVidWcoJ0NsZWFyZWQgY2FjaGUgZm9yIHVzZXInLCB7IHVzZXJJZCB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjbGVhcmluZyB1c2VyIGNhY2hlJywgeyBcbiAgICAgICAgdXNlcklkLCBcbiAgICAgICAgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgY2FjaGUgZW50cmllc1xuICAgKi9cbiAgcHVibGljIGNsZWFyQWxsQ2FjaGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3Qga2V5c1RvUmVtb3ZlOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgXG4gICAgICAvLyBGaW5kIGFsbCBjYWNoZSBrZXlzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsU3RvcmFnZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpO1xuICAgICAgICBpZiAoa2V5Py5zdGFydHNXaXRoKENBQ0hFX0NPTkZJRy5LRVlfUFJFRklYKSkge1xuICAgICAgICAgIGtleXNUb1JlbW92ZS5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGFsbCBjYWNoZSBlbnRyaWVzXG4gICAgICBrZXlzVG9SZW1vdmUuZm9yRWFjaChrZXkgPT4gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KSk7XG4gICAgICBcbiAgICAgIC8vIFJlc2V0IG1ldGFkYXRhXG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShDQUNIRV9DT05GSUcuTUVUQURBVEFfS0VZKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oJ0NsZWFyZWQgYWxsIGNhY2hlIGVudHJpZXMnLCB7IFxuICAgICAgICByZW1vdmVkS2V5czoga2V5c1RvUmVtb3ZlLmxlbmd0aCBcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGNsZWFyaW5nIGFsbCBjYWNoZScsIHsgXG4gICAgICAgIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNhY2hlIHN0YXRpc3RpY3NcbiAgICogXG4gICAqIEByZXR1cm5zIENhY2hlIHN0YXRpc3RpY3NcbiAgICovXG4gIHB1YmxpYyBnZXRDYWNoZVN0YXRzKCkge1xuICAgIGlmICghdGhpcy5pc0xvY2FsU3RvcmFnZUF2YWlsYWJsZSgpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhdmFpbGFibGU6IGZhbHNlLFxuICAgICAgICB0b3RhbEVudHJpZXM6IDAsXG4gICAgICAgIGVzdGltYXRlZFNpemU6IDAsXG4gICAgICAgIGxhc3RDbGVhbnVwOiBudWxsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5nZXRNZXRhZGF0YSgpO1xuICAgIHJldHVybiB7XG4gICAgICBhdmFpbGFibGU6IHRydWUsXG4gICAgICB0b3RhbEVudHJpZXM6IG1ldGFkYXRhLnRvdGFsRW50cmllcyxcbiAgICAgIGVzdGltYXRlZFNpemU6IG1ldGFkYXRhLmVzdGltYXRlZFNpemUsXG4gICAgICBsYXN0Q2xlYW51cDogbWV0YWRhdGEubGFzdENsZWFudXAgPyBuZXcgRGF0ZShtZXRhZGF0YS5sYXN0Q2xlYW51cCkgOiBudWxsLFxuICAgICAgbWF4RW50cmllczogQ0FDSEVfQ09ORklHLk1BWF9FTlRSSUVTLFxuICAgICAgbWF4U2l6ZTogQ0FDSEVfQ09ORklHLk1BWF9TSVpFX0JZVEVTXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JjZSBjbGVhbnVwIG9mIGV4cGlyZWQgYW5kIGxlYXN0IHJlY2VudGx5IHVzZWQgZW50cmllc1xuICAgKi9cbiAgcHVibGljIGZvcmNlQ2xlYW51cCgpOiB2b2lkIHtcbiAgICB0aGlzLnBlcmZvcm1DbGVhbnVwKCk7XG4gIH1cblxuICAvKipcbiAgICogRGVzdHJveSBzZXJ2aWNlIGFuZCBjbGVhbnVwIHJlc291cmNlc1xuICAgKi9cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY2xlYW51cFRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xlYW51cFRpbWVvdXRJZCk7XG4gICAgICB0aGlzLmNsZWFudXBUaW1lb3V0SWQgPSBudWxsO1xuICAgIH1cbiAgICBEdWVDYXJkc0NhY2hlU2VydmljZS5pbnN0YW5jZSA9IG51bGw7XG4gICAgbG9nZ2VyLmRlYnVnKCdEdWVDYXJkc0NhY2hlU2VydmljZSBkZXN0cm95ZWQnKTtcbiAgfVxuXG4gIC8vIFByaXZhdGUgaGVscGVyIG1ldGhvZHNcblxuICAvKipcbiAgICogR2VuZXJhdGUgY2FjaGUga2V5IGZvciB1c2VyXG4gICAqL1xuICBwcml2YXRlIGdldENhY2hlS2V5KHVzZXJJZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7Q0FDSEVfQ09ORklHLktFWV9QUkVGSVh9JHt1c2VySWR9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBsb2NhbFN0b3JhZ2UgaXMgYXZhaWxhYmxlXG4gICAqL1xuICBwcml2YXRlIGlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0ZXN0S2V5ID0gJ19fbG9jYWxTdG9yYWdlX3Rlc3RfXyc7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0S2V5LCAndGVzdCcpO1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdEtleSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgY2FjaGUgZW50cnkgc3RydWN0dXJlXG4gICAqL1xuICBwcml2YXRlIGlzVmFsaWRDYWNoZUVudHJ5KGVudHJ5OiBhbnkpOiBlbnRyeSBpcyBEdWVDYWNoZUVudHJ5IHtcbiAgICByZXR1cm4gKFxuICAgICAgdHlwZW9mIGVudHJ5ID09PSAnb2JqZWN0JyAmJlxuICAgICAgZW50cnkgIT09IG51bGwgJiZcbiAgICAgIEFycmF5LmlzQXJyYXkoZW50cnkuZHVlQ2FyZHMpICYmXG4gICAgICB0eXBlb2YgZW50cnkuY2FsY3VsYXRlZEF0ID09PSAnbnVtYmVyJyAmJlxuICAgICAgdHlwZW9mIGVudHJ5LnN0YXRzID09PSAnb2JqZWN0JyAmJlxuICAgICAgdHlwZW9mIGVudHJ5LmlucHV0SGFzaCA9PT0gJ3N0cmluZycgJiZcbiAgICAgIHR5cGVvZiBlbnRyeS5jcmVhdGVkQXQgPT09ICdudW1iZXInICYmXG4gICAgICB0eXBlb2YgZW50cnkubGFzdEFjY2Vzc2VkQXQgPT09ICdudW1iZXInXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjYWNoZSBlbnRyeSBpcyBleHBpcmVkXG4gICAqL1xuICBwcml2YXRlIGlzRXhwaXJlZChlbnRyeTogRHVlQ2FjaGVFbnRyeSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBEYXRlLm5vdygpIC0gZW50cnkuY3JlYXRlZEF0ID4gQ0FDSEVfQ09ORklHLlRUTF9NUztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBlbnRyeSB3YXMgY3JlYXRlZCBiZWZvcmUgbGFzdCBtaWRuaWdodCAoVVRDKVxuICAgKi9cbiAgcHJpdmF0ZSBpc0FmdGVyTWlkbmlnaHQoY3JlYXRlZEF0OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IG5vd0RhdGUgPSBuZXcgRGF0ZShub3cpO1xuICAgIGNvbnN0IHRvZGF5TWlkbmlnaHRVVEMgPSBuZXcgRGF0ZShcbiAgICAgIERhdGUuVVRDKFxuICAgICAgICBub3dEYXRlLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICAgIG5vd0RhdGUuZ2V0VVRDTW9udGgoKSxcbiAgICAgICAgbm93RGF0ZS5nZXRVVENEYXRlKCksXG4gICAgICAgIDAsIDAsIDAsIDBcbiAgICAgIClcbiAgICApLmdldFRpbWUoKTtcbiAgICBcbiAgICByZXR1cm4gY3JlYXRlZEF0IDwgdG9kYXlNaWRuaWdodFVUQztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2FjaGUgbWV0YWRhdGFcbiAgICovXG4gIHByaXZhdGUgZ2V0TWV0YWRhdGEoKTogQ2FjaGVNZXRhZGF0YSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKENBQ0hFX0NPTkZJRy5NRVRBREFUQV9LRVkpO1xuICAgICAgaWYgKHN0b3JlZCkge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IEpTT04ucGFyc2Uoc3RvcmVkKSBhcyBDYWNoZU1ldGFkYXRhO1xuICAgICAgICBpZiAobWV0YWRhdGEudmVyc2lvbiA9PT0gQ0FDSEVfQ09ORklHLlZFUlNJT04pIHtcbiAgICAgICAgICByZXR1cm4gbWV0YWRhdGE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIEZhbGwgdGhyb3VnaCB0byBkZWZhdWx0XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsRW50cmllczogMCxcbiAgICAgIGVzdGltYXRlZFNpemU6IDAsXG4gICAgICBsYXN0Q2xlYW51cDogMCxcbiAgICAgIHZlcnNpb246IENBQ0hFX0NPTkZJRy5WRVJTSU9OXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgY2FjaGUgbWV0YWRhdGFcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlTWV0YWRhdGEoZW50cmllc0RlbHRhOiBudW1iZXIsIHNpemVEZWx0YTogbnVtYmVyKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5nZXRNZXRhZGF0YSgpO1xuICAgICAgbWV0YWRhdGEudG90YWxFbnRyaWVzID0gTWF0aC5tYXgoMCwgbWV0YWRhdGEudG90YWxFbnRyaWVzICsgZW50cmllc0RlbHRhKTtcbiAgICAgIG1ldGFkYXRhLmVzdGltYXRlZFNpemUgPSBNYXRoLm1heCgwLCBtZXRhZGF0YS5lc3RpbWF0ZWRTaXplICsgc2l6ZURlbHRhKTtcbiAgICAgIFxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgIENBQ0hFX0NPTkZJRy5NRVRBREFUQV9LRVksIFxuICAgICAgICBKU09OLnN0cmluZ2lmeShtZXRhZGF0YSlcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdGYWlsZWQgdG8gdXBkYXRlIGNhY2hlIG1ldGFkYXRhJywgeyBcbiAgICAgICAgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgc3BhY2UgaXMgYXZhaWxhYmxlIGZvciBuZXcgZW50cnlcbiAgICovXG4gIHByaXZhdGUgZW5zdXJlU3BhY2VBdmFpbGFibGUobmV3RW50cnlTaXplOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuZ2V0TWV0YWRhdGEoKTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBjbGVhbnVwIGlzIG5lZWRlZFxuICAgIGNvbnN0IG5lZWRzQ2xlYW51cCA9IChcbiAgICAgIG1ldGFkYXRhLnRvdGFsRW50cmllcyA+PSBDQUNIRV9DT05GSUcuTUFYX0VOVFJJRVMgfHxcbiAgICAgIG1ldGFkYXRhLmVzdGltYXRlZFNpemUgKyBuZXdFbnRyeVNpemUgPiBDQUNIRV9DT05GSUcuTUFYX1NJWkVfQllURVNcbiAgICApO1xuXG4gICAgaWYgKG5lZWRzQ2xlYW51cCkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdDYWNoZSBzcGFjZSBjbGVhbnVwIG5lZWRlZCcsIHtcbiAgICAgICAgdG90YWxFbnRyaWVzOiBtZXRhZGF0YS50b3RhbEVudHJpZXMsXG4gICAgICAgIGVzdGltYXRlZFNpemU6IG1ldGFkYXRhLmVzdGltYXRlZFNpemUsXG4gICAgICAgIG5ld0VudHJ5U2l6ZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHRoaXMucGVyZm9ybUNsZWFudXAoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybSBjYWNoZSBjbGVhbnVwIChleHBpcmVkIGVudHJpZXMgYW5kIExSVSBldmljdGlvbilcbiAgICovXG4gIHByaXZhdGUgcGVyZm9ybUNsZWFudXAoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlzTG9jYWxTdG9yYWdlQXZhaWxhYmxlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZW50cmllczogQXJyYXk8eyBrZXk6IHN0cmluZzsgZW50cnk6IER1ZUNhY2hlRW50cnkgfT4gPSBbXTtcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIC8vIENvbGxlY3QgYWxsIGNhY2hlIGVudHJpZXNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxTdG9yYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGxvY2FsU3RvcmFnZS5rZXkoaSk7XG4gICAgICAgIGlmIChrZXk/LnN0YXJ0c1dpdGgoQ0FDSEVfQ09ORklHLktFWV9QUkVGSVgpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgICAgICBpZiAoc3RvcmVkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gSlNPTi5wYXJzZShzdG9yZWQpIGFzIER1ZUNhY2hlRW50cnk7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmlzVmFsaWRDYWNoZUVudHJ5KGVudHJ5KSkge1xuICAgICAgICAgICAgICAgIGVudHJpZXMucHVzaCh7IGtleSwgZW50cnkgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGludmFsaWQgZW50cnlcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgY29ycnVwdGVkIGVudHJ5XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgcmVtb3ZlZENvdW50ID0gMDtcbiAgICAgIGxldCByZW1vdmVkU2l6ZSA9IDA7XG5cbiAgICAgIC8vIFJlbW92ZSBleHBpcmVkIGVudHJpZXNcbiAgICAgIGVudHJpZXMuZm9yRWFjaCgoeyBrZXksIGVudHJ5IH0pID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNFeHBpcmVkKGVudHJ5KSB8fCB0aGlzLmlzQWZ0ZXJNaWRuaWdodChlbnRyeS5jcmVhdGVkQXQpKSB7XG4gICAgICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KGVudHJ5KTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICAgIHJlbW92ZWRDb3VudCsrO1xuICAgICAgICAgIHJlbW92ZWRTaXplICs9IHNlcmlhbGl6ZWQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gUmVtb3ZlIExSVSBlbnRyaWVzIGlmIHN0aWxsIG92ZXIgbGltaXRcbiAgICAgIGNvbnN0IHJlbWFpbmluZyA9IGVudHJpZXMuZmlsdGVyKCh7IGtleSB9KSA9PiB7XG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpICE9PSBudWxsO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZW1haW5pbmcubGVuZ3RoID4gQ0FDSEVfQ09ORklHLk1BWF9FTlRSSUVTKSB7XG4gICAgICAgIC8vIFNvcnQgYnkgbGFzdCBhY2Nlc3NlZCAoTFJVIGZpcnN0KVxuICAgICAgICByZW1haW5pbmcuc29ydCgoYSwgYikgPT4gYS5lbnRyeS5sYXN0QWNjZXNzZWRBdCAtIGIuZW50cnkubGFzdEFjY2Vzc2VkQXQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdG9SZW1vdmUgPSByZW1haW5pbmcubGVuZ3RoIC0gQ0FDSEVfQ09ORklHLk1BWF9FTlRSSUVTO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvUmVtb3ZlOyBpKyspIHtcbiAgICAgICAgICBjb25zdCB7IGtleSwgZW50cnkgfSA9IHJlbWFpbmluZ1tpXTtcbiAgICAgICAgICBjb25zdCBzZXJpYWxpemVkID0gSlNPTi5zdHJpbmdpZnkoZW50cnkpO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgcmVtb3ZlZENvdW50Kys7XG4gICAgICAgICAgcmVtb3ZlZFNpemUgKz0gc2VyaWFsaXplZC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIG1ldGFkYXRhXG4gICAgICBpZiAocmVtb3ZlZENvdW50ID4gMCkge1xuICAgICAgICB0aGlzLnVwZGF0ZU1ldGFkYXRhKC1yZW1vdmVkQ291bnQsIC1yZW1vdmVkU2l6ZSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgbWV0YWRhdGEubGFzdENsZWFudXAgPSBub3c7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICAgIENBQ0hFX0NPTkZJRy5NRVRBREFUQV9LRVksIFxuICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG1ldGFkYXRhKVxuICAgICAgICApO1xuXG4gICAgICAgIGxvZ2dlci5pbmZvKCdDYWNoZSBjbGVhbnVwIGNvbXBsZXRlZCcsIHtcbiAgICAgICAgICByZW1vdmVkRW50cmllczogcmVtb3ZlZENvdW50LFxuICAgICAgICAgIHJlbW92ZWRTaXplLFxuICAgICAgICAgIHJlbWFpbmluZ0VudHJpZXM6IG1ldGFkYXRhLnRvdGFsRW50cmllc1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0NhY2hlIGNsZWFudXAgZmFpbGVkJywgeyBcbiAgICAgICAgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSBcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTY2hlZHVsZSBwZXJpb2RpYyBjbGVhbnVwXG4gICAqL1xuICBwcml2YXRlIHNjaGVkdWxlQ2xlYW51cCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jbGVhbnVwVGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGVhbnVwVGltZW91dElkKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsZWFudXBUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMucGVyZm9ybUNsZWFudXAoKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVDbGVhbnVwKCk7IC8vIFJlc2NoZWR1bGVcbiAgICB9LCBDQUNIRV9DT05GSUcuQ0xFQU5VUF9JTlRFUlZBTF9NUyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgc2ltcGxlIGhhc2ggZm9yIGlucHV0IHZhbGlkYXRpb25cbiAqIFxuICogQHBhcmFtIGlucHV0IC0gSW5wdXQgdG8gaGFzaFxuICogQHJldHVybnMgU2ltcGxlIGhhc2ggc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbnB1dEhhc2goaW5wdXQ6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHN0ciA9IHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgPyBpbnB1dCA6IEpTT04uc3RyaW5naWZ5KGlucHV0KTtcbiAgbGV0IGhhc2ggPSAwO1xuICBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjaGFyID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2gpICsgY2hhcjtcbiAgICBoYXNoID0gaGFzaCAmIGhhc2g7IC8vIENvbnZlcnQgdG8gMzItYml0IGludGVnZXJcbiAgfVxuICBcbiAgcmV0dXJuIE1hdGguYWJzKGhhc2gpLnRvU3RyaW5nKDM2KTtcbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZSBmb3IgY29udmVuaWVuY2VcbmV4cG9ydCBjb25zdCBkdWVDYXJkc0NhY2hlU2VydmljZSA9IER1ZUNhcmRzQ2FjaGVTZXJ2aWNlLmdldEluc3RhbmNlKCk7Il0sIm5hbWVzIjpbIkR1ZUNhcmRzQ2FjaGVTZXJ2aWNlIiwiY3JlYXRlSW5wdXRIYXNoIiwiZHVlQ2FyZHNDYWNoZVNlcnZpY2UiLCJsb2dnZXIiLCJnZXRMb2dnZXIiLCJzZXRDb250ZXh0IiwiQ0FDSEVfQ09ORklHIiwiS0VZX1BSRUZJWCIsIk1FVEFEQVRBX0tFWSIsIlZFUlNJT04iLCJUVExfTVMiLCJNQVhfRU5UUklFUyIsIk1BWF9TSVpFX0JZVEVTIiwiQ0xFQU5VUF9JTlRFUlZBTF9NUyIsIkxBUkdFX0NPTExFQ1RJT05fVEhSRVNIT0xEIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImdldER1ZUNhcmRzIiwidXNlcklkIiwiaW5wdXRIYXNoIiwiaXNMb2NhbFN0b3JhZ2VBdmFpbGFibGUiLCJjYWNoZUtleSIsImdldENhY2hlS2V5IiwiY2FjaGVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImRlYnVnIiwiZW50cnkiLCJKU09OIiwicGFyc2UiLCJpc1ZhbGlkQ2FjaGVFbnRyeSIsIndhcm4iLCJjbGVhclVzZXJDYWNoZSIsImlzRXhwaXJlZCIsImFnZSIsIkRhdGUiLCJub3ciLCJjcmVhdGVkQXQiLCJpc0FmdGVyTWlkbmlnaHQiLCJ1cGRhdGVkRW50cnkiLCJsYXN0QWNjZXNzZWRBdCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJkdWVDb3VudCIsImR1ZUNhcmRzIiwibGVuZ3RoIiwiZXJyb3IiLCJtZXNzYWdlIiwic2V0RHVlQ2FyZHMiLCJzdGF0cyIsImNvdW50IiwiY2FsY3VsYXRlZEF0Iiwic2VyaWFsaXplZCIsImVuc3VyZVNwYWNlQXZhaWxhYmxlIiwidXBkYXRlTWV0YWRhdGEiLCJzaXplIiwiZXhpc3RpbmciLCJyZW1vdmVJdGVtIiwiY2xlYXJBbGxDYWNoZSIsImtleXNUb1JlbW92ZSIsImkiLCJrZXkiLCJzdGFydHNXaXRoIiwicHVzaCIsImZvckVhY2giLCJpbmZvIiwicmVtb3ZlZEtleXMiLCJnZXRDYWNoZVN0YXRzIiwiYXZhaWxhYmxlIiwidG90YWxFbnRyaWVzIiwiZXN0aW1hdGVkU2l6ZSIsImxhc3RDbGVhbnVwIiwibWV0YWRhdGEiLCJnZXRNZXRhZGF0YSIsIm1heEVudHJpZXMiLCJtYXhTaXplIiwiZm9yY2VDbGVhbnVwIiwicGVyZm9ybUNsZWFudXAiLCJkZXN0cm95IiwiY2xlYW51cFRpbWVvdXRJZCIsImNsZWFyVGltZW91dCIsInRlc3RLZXkiLCJBcnJheSIsImlzQXJyYXkiLCJub3dEYXRlIiwidG9kYXlNaWRuaWdodFVUQyIsIlVUQyIsImdldFVUQ0Z1bGxZZWFyIiwiZ2V0VVRDTW9udGgiLCJnZXRVVENEYXRlIiwiZ2V0VGltZSIsInN0b3JlZCIsInZlcnNpb24iLCJlbnRyaWVzRGVsdGEiLCJzaXplRGVsdGEiLCJNYXRoIiwibWF4IiwibmV3RW50cnlTaXplIiwibmVlZHNDbGVhbnVwIiwiZW50cmllcyIsInJlbW92ZWRDb3VudCIsInJlbW92ZWRTaXplIiwicmVtYWluaW5nIiwiZmlsdGVyIiwic29ydCIsImEiLCJiIiwidG9SZW1vdmUiLCJyZW1vdmVkRW50cmllcyIsInJlbWFpbmluZ0VudHJpZXMiLCJzY2hlZHVsZUNsZWFudXAiLCJzZXRUaW1lb3V0IiwiaW5wdXQiLCJzdHIiLCJoYXNoIiwiY2hhciIsImNoYXJDb2RlQXQiLCJhYnMiLCJ0b1N0cmluZyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBdUJDOzs7Ozs7Ozs7OztRQXVGWUE7ZUFBQUE7O1FBaWdCR0M7ZUFBQUE7O1FBY0hDO2VBQUFBOzs7d0JBbm1CYTs7Ozs7Ozs7Ozs7Ozs7QUFFMUIsTUFBTUMsU0FBU0MsSUFBQUEsaUJBQVMsSUFBR0MsVUFBVSxDQUFDO0FBMEN0Qzs7Q0FFQyxHQUNELE1BQU1DLGVBQWU7SUFDbkIscUNBQXFDLEdBQ3JDQyxZQUFZO0lBRVosaUNBQWlDLEdBQ2pDQyxjQUFjO0lBRWQsMEJBQTBCLEdBQzFCQyxTQUFTO0lBRVQsbUNBQW1DLEdBQ25DQyxRQUFRLEtBQUssS0FBSyxLQUFLO0lBRXZCLHVDQUF1QyxHQUN2Q0MsYUFBYTtJQUViLDBDQUEwQyxHQUMxQ0MsZ0JBQWdCLElBQUksT0FBTztJQUUzQiw4Q0FBOEMsR0FDOUNDLHFCQUFxQixLQUFLLEtBQUs7SUFFL0Isd0RBQXdELEdBQ3hEQyw0QkFBNEI7QUFDOUI7QUFhTyxNQUFNZDtJQVlYOzs7O0dBSUMsR0FDRCxPQUFjZSxjQUFvQztRQUNoRCxJQUFJLENBQUNmLHFCQUFxQmdCLFFBQVEsRUFBRTtZQUNsQ2hCLHFCQUFxQmdCLFFBQVEsR0FBRyxJQUFJaEI7UUFDdEM7UUFDQSxPQUFPQSxxQkFBcUJnQixRQUFRO0lBQ3RDO0lBRUE7Ozs7OztHQU1DLEdBQ0QsQUFBT0MsWUFBWUMsTUFBYyxFQUFFQyxTQUFpQixFQUF3QjtRQUMxRSxJQUFJLENBQUMsSUFBSSxDQUFDQyx1QkFBdUIsSUFBSTtZQUNuQyxPQUFPO1FBQ1Q7UUFFQSxJQUFJO1lBQ0YsTUFBTUMsV0FBVyxJQUFJLENBQUNDLFdBQVcsQ0FBQ0o7WUFD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