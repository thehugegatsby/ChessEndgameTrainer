8cd7f35f166e707c5c840eb49b0c4199
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "EndgameTrainingPage", {
    enumerable: true,
    get: function() {
        return EndgameTrainingPage;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _navigation = require("next/navigation");
const _training = require("../components/training");
const _TablebaseAnalysisPanel = require("../components/training/TablebaseAnalysisPanel");
const _AdvancedEndgameMenu = require("../components/navigation/AdvancedEndgameMenu");
const _useToast = require("../hooks/useToast");
const _Toast = require("../components/ui/Toast");
const _gameStatus = require("../utils/chess/gameStatus");
const _hooks = require("../store/hooks");
const _titleFormatter = require("../utils/titleFormatter");
const _constants = require("../constants");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// CRITICAL DEBUG: Test if client-side JavaScript is running
console.log("🚀 CLIENT-SIDE: EndgameTrainingPage module is loading!", new Date().toISOString());
const EndgameTrainingPage = /*#__PURE__*/ _react.default.memo(()=>{
    var _gameState_moveHistory, _gameState_moveHistory_;
    // Next.js router
    const router = (0, _navigation.useRouter)();
    // Zustand store hooks - consolidated
    const [gameState, gameActions] = (0, _hooks.useGameStore)();
    const [trainingState, trainingActions] = (0, _hooks.useTrainingStore)();
    const [uiState, uiActions] = (0, _hooks.useUIStore)();
    // Toast hook - keep for showSuccess/showError, but we'll use store toasts for display
    const { showSuccess, showError } = (0, _useToast.useToast)();
    // Local UI state
    const [resetKey, setResetKey] = (0, _react.useState)(0);
    // The position now comes directly from the hydrated store
    const position = trainingState.currentPosition;
    // Debug: Log component state
    console.debug("🏠 EndgameTrainingPage rendered", {
        hasPosition: !!position,
        positionId: position === null || position === void 0 ? void 0 : position.id,
        positionFen: position === null || position === void 0 ? void 0 : position.fen,
        currentFen: gameState.currentFen,
        timestamp: new Date().toISOString()
    });
    // Extract actions to avoid dependency issues
    const { completeTraining } = trainingActions;
    // Early return if position is not available (shouldn't happen with SSR hydration)
    if (!position) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
            className: "flex items-center justify-center min-h-screen",
            children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "text-lg text-gray-600",
                children: "Position wird geladen..."
            })
        });
    }
    // Game status - MUST be before any conditional returns (React Hook Rules)
    const gameStatus = (0, _react.useMemo)(()=>(0, _gameStatus.getGameStatus)(gameState.currentFen || position.fen, position.goal), [
        gameState.currentFen,
        position.fen,
        position.goal
    ]);
    // Navigation data from store
    const prevPosition = trainingState.previousPosition;
    const nextPosition = trainingState.nextPosition;
    const isLoadingNavigation = trainingState.isLoadingNavigation;
    const handleComplete = (0, _react.useCallback)((isSuccess)=>{
        if (isSuccess) {
            showSuccess("Geschafft! Position erfolgreich gelöst!", _constants.ANIMATION.SUCCESS_TOAST_DURATION);
        } else {
            showError("Versuch es erneut", _constants.ANIMATION.ERROR_TOAST_DURATION);
        }
        completeTraining(isSuccess);
    }, [
        completeTraining,
        showSuccess,
        showError
    ]);
    const handleResetPosition = (0, _react.useCallback)(()=>{
        gameActions.resetGame();
        setResetKey((prev)=>prev + 1);
    }, [
        gameActions
    ]);
    const handleMoveClick = (0, _react.useCallback)((moveIndex)=>{
        // Navigate to the clicked move
        gameActions.goToMove(moveIndex);
    }, [
        gameActions
    ]);
    const handleToggleAnalysis = (0, _react.useCallback)(()=>{
        uiActions.updateAnalysisPanel({
            isOpen: !uiState.analysisPanel.isOpen
        });
    }, [
        uiActions,
        uiState
    ]);
    const getLichessUrl = (0, _react.useCallback)(()=>{
        const currentFen = gameState.currentFen || position.fen;
        // Use PGN if we have moves in the history
        // PGN includes the starting FEN and all moves, providing full context
        if (gameState.currentPgn && gameState.moveHistory.length > 0) {
            // Lichess accepts PGN in the URL for complete game analysis
            return `https://lichess.org/analysis/pgn/${encodeURIComponent(gameState.currentPgn)}`;
        }
        // Fallback to FEN-only URL for positions without move history
        return `https://lichess.org/analysis/${currentFen.replace(/ /g, "_")}`;
    }, [
        gameState.currentPgn,
        gameState.moveHistory.length,
        gameState.currentFen,
        position.fen
    ]);
    // No longer needed - SSR hydration ensures position is available on first render
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "trainer-container h-screen flex bg-slate-800 text-white",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Toast.ToastContainer, {
                toasts: uiState.toasts,
                onRemoveToast: (id)=>uiActions.removeToast(id)
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_AdvancedEndgameMenu.AdvancedEndgameMenu, {
                isOpen: true,
                onClose: ()=>{},
                currentPositionId: position.id
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "main-content flex-1 flex h-full mr-80",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "chessboard-wrapper flex-[5] h-full relative",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "absolute top-24 left-0 right-0 text-center pointer-events-none",
                                "data-testid": "position-title",
                                style: {
                                    zIndex: 5
                                },
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                    className: "text-3xl font-bold",
                                    children: (0, _titleFormatter.getTrainingDisplayTitle)(position, ((_gameState_moveHistory = gameState.moveHistory) === null || _gameState_moveHistory === void 0 ? void 0 : _gameState_moveHistory.length) || 0)
                                })
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "w-full h-full flex items-center justify-center",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_training.TrainingBoard, {
                                    position: position,
                                    onComplete: ()=>handleComplete(true)
                                }, `${position.id}-${resetKey}`)
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "sidebar fixed right-0 top-0 bottom-0 w-80 bg-gray-900 border-l border-gray-700 flex flex-col z-20 overflow-y-auto",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "nav-section p-4 border-b border-gray-700",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                        className: "text-sm font-semibold text-gray-400 mb-2 text-center",
                                        children: "Stellungsnavigation"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "flex items-center justify-center gap-4",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                                onClick: ()=>prevPosition && router.push(`/train/${prevPosition.id}`),
                                                disabled: !prevPosition || isLoadingNavigation,
                                                className: "p-2 hover:bg-gray-800 rounded disabled:opacity-30 transition-colors",
                                                title: "Vorherige Stellung",
                                                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                    className: "text-lg",
                                                    children: [
                                                        isLoadingNavigation ? "⏳" : "←",
                                                        " Vorherige Stellung"
                                                    ]
                                                })
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                                onClick: handleResetPosition,
                                                className: "p-2 hover:bg-gray-800 rounded transition-colors",
                                                title: "Position zurücksetzen",
                                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                    className: "text-lg",
                                                    children: "↻"
                                                })
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                                                onClick: ()=>nextPosition && router.push(`/train/${nextPosition.id}`),
                                                disabled: !nextPosition || isLoadingNavigation,
                                                className: "p-2 hover:bg-gray-800 rounded disabled:opacity-30 transition-colors",
                                                title: "Nächste Stellung",
                                                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                    className: "text-lg",
                                                    children: [
                                                        "Nächste Stellung ",
                                                        isLoadingNavigation ? "⏳" : "→"
                                                    ]
                                                })
                                            })
                                        ]
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "game-status p-4 border-b border-gray-700",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                        className: "text-sm font-medium flex items-center gap-2",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                                className: "text-base",
                                                children: "♔"
                                            }),
                                            gameStatus.sideToMoveDisplay
                                        ]
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "text-xs text-gray-300 mt-1",
                                        children: gameStatus.objectiveDisplay
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "instructions p-4 border-b border-gray-700",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                        className: "font-bold mb-2",
                                        children: (0, _titleFormatter.formatPositionTitle)(position)
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                        className: "text-sm text-gray-400",
                                        children: position.description
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "toggles p-4 border-b border-gray-700",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("button", {
                                        onClick: handleToggleAnalysis,
                                        "data-testid": "toggle-analysis",
                                        className: `w-full p-2 rounded mb-2 transition-colors ${uiState.analysisPanel.isOpen ? "bg-blue-600 hover:bg-blue-700" : "bg-gray-700 hover:bg-gray-600"}`,
                                        children: [
                                            "Analyse ",
                                            uiState.analysisPanel.isOpen ? "AUS" : "AN"
                                        ]
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_TablebaseAnalysisPanel.TablebaseAnalysisPanel, {
                                        fen: gameState.currentFen || position.fen,
                                        isVisible: uiState.analysisPanel.isOpen,
                                        previousFen: gameState.moveHistory && gameState.moveHistory.length > 0 ? (_gameState_moveHistory_ = gameState.moveHistory[gameState.moveHistory.length - 1]) === null || _gameState_moveHistory_ === void 0 ? void 0 : _gameState_moveHistory_.fenBefore : undefined
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "move-history flex-1 p-4 border-b border-gray-700 overflow-y-auto",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_training.MovePanelZustand, {
                                        showEvaluations: uiState.analysisPanel.isOpen,
                                        onMoveClick: handleMoveClick,
                                        currentMoveIndex: gameState.currentMoveIndex
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                        className: "mt-2",
                                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_training.NavigationControls, {})
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "external-links p-4",
                                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("a", {
                                    href: getLichessUrl(),
                                    target: "_blank",
                                    rel: "noopener noreferrer",
                                    className: "block text-center p-2 bg-gray-700 hover:bg-gray-600 rounded transition-colors",
                                    children: "Auf Lichess analysieren →"
                                })
                            })
                        ]
                    })
                ]
            })
        ]
    });
});
EndgameTrainingPage.displayName = "EndgameTrainingPage";

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RoZWh1L2Nvb2xQcm9qZWN0cy9FbmRnYW1lVHJhaW5lci10cmFpbmluZy1ib2FyZC1jb21wbGV0ZS9zcmMvc2hhcmVkL3BhZ2VzL0VuZGdhbWVUcmFpbmluZ1BhZ2UudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG4vLyBDUklUSUNBTCBERUJVRzogVGVzdCBpZiBjbGllbnQtc2lkZSBKYXZhU2NyaXB0IGlzIHJ1bm5pbmdcbmNvbnNvbGUubG9nKFxuICBcIvCfmoAgQ0xJRU5ULVNJREU6IEVuZGdhbWVUcmFpbmluZ1BhZ2UgbW9kdWxlIGlzIGxvYWRpbmchXCIsXG4gIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbik7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L25hdmlnYXRpb25cIjtcbmltcG9ydCB7XG4gIFRyYWluaW5nQm9hcmQsXG4gIE1vdmVQYW5lbFp1c3RhbmQsXG4gIE5hdmlnYXRpb25Db250cm9scyxcbn0gZnJvbSBcIkBzaGFyZWQvY29tcG9uZW50cy90cmFpbmluZ1wiO1xuaW1wb3J0IHsgVGFibGViYXNlQW5hbHlzaXNQYW5lbCB9IGZyb20gXCJAc2hhcmVkL2NvbXBvbmVudHMvdHJhaW5pbmcvVGFibGViYXNlQW5hbHlzaXNQYW5lbFwiO1xuaW1wb3J0IHsgQWR2YW5jZWRFbmRnYW1lTWVudSB9IGZyb20gXCJAc2hhcmVkL2NvbXBvbmVudHMvbmF2aWdhdGlvbi9BZHZhbmNlZEVuZGdhbWVNZW51XCI7XG4vLyBFbmRnYW1lUG9zaXRpb24gaW1wb3J0IG5vIGxvbmdlciBuZWVkZWQgLSBwb3NpdGlvbiBjb21lcyBmcm9tIHN0b3JlXG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gXCJAc2hhcmVkL2hvb2tzL3VzZVRvYXN0XCI7XG5pbXBvcnQgeyBUb2FzdENvbnRhaW5lciB9IGZyb20gXCJAc2hhcmVkL2NvbXBvbmVudHMvdWkvVG9hc3RcIjtcbmltcG9ydCB7IGdldEdhbWVTdGF0dXMgfSBmcm9tIFwiQHNoYXJlZC91dGlscy9jaGVzcy9nYW1lU3RhdHVzXCI7XG5pbXBvcnQge1xuICB1c2VHYW1lU3RvcmUsXG4gIHVzZVRyYWluaW5nU3RvcmUsXG4gIHVzZVVJU3RvcmUsXG59IGZyb20gXCJAc2hhcmVkL3N0b3JlL2hvb2tzXCI7XG4vLyB1c2VJbml0aWFsaXplUG9zaXRpb24gbm8gbG9uZ2VyIG5lZWRlZCAtIFNTUiBoeWRyYXRpb24gaGFuZGxlcyBpbml0aWFsaXphdGlvblxuaW1wb3J0IHtcbiAgZ2V0VHJhaW5pbmdEaXNwbGF5VGl0bGUsXG4gIGZvcm1hdFBvc2l0aW9uVGl0bGUsXG59IGZyb20gXCJAc2hhcmVkL3V0aWxzL3RpdGxlRm9ybWF0dGVyXCI7XG5pbXBvcnQgeyBBTklNQVRJT04gfSBmcm9tIFwiQHNoYXJlZC9jb25zdGFudHNcIjtcblxuLy8gTm8gcHJvcHMgbmVlZGVkIGFueW1vcmUgLSBhbGwgZGF0YSBjb21lcyBmcm9tIGh5ZHJhdGVkIHN0b3JlXG5cbi8qKlxuICogRW5kZ2FtZSB0cmFpbmluZyBwYWdlIGNvbXBvbmVudCB1c2luZyBadXN0YW5kIHN0b3JlXG4gKiBQcm92aWRlcyB0aGUgbWFpbiB0cmFpbmluZyBpbnRlcmZhY2UgZm9yIGVuZGdhbWUgcG9zaXRpb25zXG4gKiBBbGwgcG9zaXRpb24gZGF0YSBjb21lcyBmcm9tIHRoZSBwcmUtaHlkcmF0ZWQgc3RvcmUgc3RhdGVcbiAqL1xuZXhwb3J0IGNvbnN0IEVuZGdhbWVUcmFpbmluZ1BhZ2U6IFJlYWN0LkZDID0gUmVhY3QubWVtbygoKSA9PiB7XG4gIC8vIE5leHQuanMgcm91dGVyXG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIC8vIFp1c3RhbmQgc3RvcmUgaG9va3MgLSBjb25zb2xpZGF0ZWRcbiAgY29uc3QgW2dhbWVTdGF0ZSwgZ2FtZUFjdGlvbnNdID0gdXNlR2FtZVN0b3JlKCk7XG4gIGNvbnN0IFt0cmFpbmluZ1N0YXRlLCB0cmFpbmluZ0FjdGlvbnNdID0gdXNlVHJhaW5pbmdTdG9yZSgpO1xuICBjb25zdCBbdWlTdGF0ZSwgdWlBY3Rpb25zXSA9IHVzZVVJU3RvcmUoKTtcblxuICAvLyBUb2FzdCBob29rIC0ga2VlcCBmb3Igc2hvd1N1Y2Nlc3Mvc2hvd0Vycm9yLCBidXQgd2UnbGwgdXNlIHN0b3JlIHRvYXN0cyBmb3IgZGlzcGxheVxuICBjb25zdCB7IHNob3dTdWNjZXNzLCBzaG93RXJyb3IgfSA9IHVzZVRvYXN0KCk7XG5cbiAgLy8gTG9jYWwgVUkgc3RhdGVcbiAgY29uc3QgW3Jlc2V0S2V5LCBzZXRSZXNldEtleV0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuXG4gIC8vIFRoZSBwb3NpdGlvbiBub3cgY29tZXMgZGlyZWN0bHkgZnJvbSB0aGUgaHlkcmF0ZWQgc3RvcmVcbiAgY29uc3QgcG9zaXRpb24gPSB0cmFpbmluZ1N0YXRlLmN1cnJlbnRQb3NpdGlvbjtcblxuICAvLyBEZWJ1ZzogTG9nIGNvbXBvbmVudCBzdGF0ZVxuICBjb25zb2xlLmRlYnVnKFwi8J+PoCBFbmRnYW1lVHJhaW5pbmdQYWdlIHJlbmRlcmVkXCIsIHtcbiAgICBoYXNQb3NpdGlvbjogISFwb3NpdGlvbixcbiAgICBwb3NpdGlvbklkOiBwb3NpdGlvbj8uaWQsXG4gICAgcG9zaXRpb25GZW46IHBvc2l0aW9uPy5mZW4sXG4gICAgY3VycmVudEZlbjogZ2FtZVN0YXRlLmN1cnJlbnRGZW4sXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH0pO1xuXG4gIC8vIEV4dHJhY3QgYWN0aW9ucyB0byBhdm9pZCBkZXBlbmRlbmN5IGlzc3Vlc1xuICBjb25zdCB7IGNvbXBsZXRlVHJhaW5pbmcgfSA9IHRyYWluaW5nQWN0aW9ucztcblxuICAvLyBFYXJseSByZXR1cm4gaWYgcG9zaXRpb24gaXMgbm90IGF2YWlsYWJsZSAoc2hvdWxkbid0IGhhcHBlbiB3aXRoIFNTUiBoeWRyYXRpb24pXG4gIGlmICghcG9zaXRpb24pIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBtaW4taC1zY3JlZW5cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWxnIHRleHQtZ3JheS02MDBcIj5Qb3NpdGlvbiB3aXJkIGdlbGFkZW4uLi48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICAvLyBHYW1lIHN0YXR1cyAtIE1VU1QgYmUgYmVmb3JlIGFueSBjb25kaXRpb25hbCByZXR1cm5zIChSZWFjdCBIb29rIFJ1bGVzKVxuICBjb25zdCBnYW1lU3RhdHVzID0gdXNlTWVtbyhcbiAgICAoKSA9PiBnZXRHYW1lU3RhdHVzKGdhbWVTdGF0ZS5jdXJyZW50RmVuIHx8IHBvc2l0aW9uLmZlbiwgcG9zaXRpb24uZ29hbCksXG4gICAgW2dhbWVTdGF0ZS5jdXJyZW50RmVuLCBwb3NpdGlvbi5mZW4sIHBvc2l0aW9uLmdvYWxdLFxuICApO1xuXG4gIC8vIE5hdmlnYXRpb24gZGF0YSBmcm9tIHN0b3JlXG4gIGNvbnN0IHByZXZQb3NpdGlvbiA9IHRyYWluaW5nU3RhdGUucHJldmlvdXNQb3NpdGlvbjtcbiAgY29uc3QgbmV4dFBvc2l0aW9uID0gdHJhaW5pbmdTdGF0ZS5uZXh0UG9zaXRpb247XG4gIGNvbnN0IGlzTG9hZGluZ05hdmlnYXRpb24gPSB0cmFpbmluZ1N0YXRlLmlzTG9hZGluZ05hdmlnYXRpb247XG5cbiAgY29uc3QgaGFuZGxlQ29tcGxldGUgPSB1c2VDYWxsYmFjayhcbiAgICAoaXNTdWNjZXNzOiBib29sZWFuKSA9PiB7XG4gICAgICBpZiAoaXNTdWNjZXNzKSB7XG4gICAgICAgIHNob3dTdWNjZXNzKFxuICAgICAgICAgIFwiR2VzY2hhZmZ0ISBQb3NpdGlvbiBlcmZvbGdyZWljaCBnZWzDtnN0IVwiLFxuICAgICAgICAgIEFOSU1BVElPTi5TVUNDRVNTX1RPQVNUX0RVUkFUSU9OLFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2hvd0Vycm9yKFwiVmVyc3VjaCBlcyBlcm5ldXRcIiwgQU5JTUFUSU9OLkVSUk9SX1RPQVNUX0RVUkFUSU9OKTtcbiAgICAgIH1cbiAgICAgIGNvbXBsZXRlVHJhaW5pbmcoaXNTdWNjZXNzKTtcbiAgICB9LFxuICAgIFtjb21wbGV0ZVRyYWluaW5nLCBzaG93U3VjY2Vzcywgc2hvd0Vycm9yXSxcbiAgKTtcblxuICBjb25zdCBoYW5kbGVSZXNldFBvc2l0aW9uID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGdhbWVBY3Rpb25zLnJlc2V0R2FtZSgpO1xuICAgIHNldFJlc2V0S2V5KChwcmV2KSA9PiBwcmV2ICsgMSk7XG4gIH0sIFtnYW1lQWN0aW9uc10pO1xuXG4gIGNvbnN0IGhhbmRsZU1vdmVDbGljayA9IHVzZUNhbGxiYWNrKFxuICAgIChtb3ZlSW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgLy8gTmF2aWdhdGUgdG8gdGhlIGNsaWNrZWQgbW92ZVxuICAgICAgZ2FtZUFjdGlvbnMuZ29Ub01vdmUobW92ZUluZGV4KTtcbiAgICB9LFxuICAgIFtnYW1lQWN0aW9uc10sXG4gICk7XG5cbiAgY29uc3QgaGFuZGxlVG9nZ2xlQW5hbHlzaXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgdWlBY3Rpb25zLnVwZGF0ZUFuYWx5c2lzUGFuZWwoeyBpc09wZW46ICF1aVN0YXRlLmFuYWx5c2lzUGFuZWwuaXNPcGVuIH0pO1xuICB9LCBbdWlBY3Rpb25zLCB1aVN0YXRlXSk7XG5cbiAgY29uc3QgZ2V0TGljaGVzc1VybCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBjb25zdCBjdXJyZW50RmVuID0gZ2FtZVN0YXRlLmN1cnJlbnRGZW4gfHwgcG9zaXRpb24uZmVuO1xuXG4gICAgLy8gVXNlIFBHTiBpZiB3ZSBoYXZlIG1vdmVzIGluIHRoZSBoaXN0b3J5XG4gICAgLy8gUEdOIGluY2x1ZGVzIHRoZSBzdGFydGluZyBGRU4gYW5kIGFsbCBtb3ZlcywgcHJvdmlkaW5nIGZ1bGwgY29udGV4dFxuICAgIGlmIChnYW1lU3RhdGUuY3VycmVudFBnbiAmJiBnYW1lU3RhdGUubW92ZUhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgLy8gTGljaGVzcyBhY2NlcHRzIFBHTiBpbiB0aGUgVVJMIGZvciBjb21wbGV0ZSBnYW1lIGFuYWx5c2lzXG4gICAgICByZXR1cm4gYGh0dHBzOi8vbGljaGVzcy5vcmcvYW5hbHlzaXMvcGduLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGdhbWVTdGF0ZS5jdXJyZW50UGduKX1gO1xuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIHRvIEZFTi1vbmx5IFVSTCBmb3IgcG9zaXRpb25zIHdpdGhvdXQgbW92ZSBoaXN0b3J5XG4gICAgcmV0dXJuIGBodHRwczovL2xpY2hlc3Mub3JnL2FuYWx5c2lzLyR7Y3VycmVudEZlbi5yZXBsYWNlKC8gL2csIFwiX1wiKX1gO1xuICB9LCBbXG4gICAgZ2FtZVN0YXRlLmN1cnJlbnRQZ24sXG4gICAgZ2FtZVN0YXRlLm1vdmVIaXN0b3J5Lmxlbmd0aCxcbiAgICBnYW1lU3RhdGUuY3VycmVudEZlbixcbiAgICBwb3NpdGlvbi5mZW4sXG4gIF0pO1xuXG4gIC8vIE5vIGxvbmdlciBuZWVkZWQgLSBTU1IgaHlkcmF0aW9uIGVuc3VyZXMgcG9zaXRpb24gaXMgYXZhaWxhYmxlIG9uIGZpcnN0IHJlbmRlclxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJ0cmFpbmVyLWNvbnRhaW5lciBoLXNjcmVlbiBmbGV4IGJnLXNsYXRlLTgwMCB0ZXh0LXdoaXRlXCI+XG4gICAgICA8VG9hc3RDb250YWluZXJcbiAgICAgICAgdG9hc3RzPXt1aVN0YXRlLnRvYXN0c31cbiAgICAgICAgb25SZW1vdmVUb2FzdD17KGlkKSA9PiB1aUFjdGlvbnMucmVtb3ZlVG9hc3QoaWQpfVxuICAgICAgLz5cblxuICAgICAgey8qIExlZnQgTWVudSAqL31cbiAgICAgIDxBZHZhbmNlZEVuZGdhbWVNZW51XG4gICAgICAgIGlzT3Blbj17dHJ1ZX1cbiAgICAgICAgb25DbG9zZT17KCkgPT4ge319XG4gICAgICAgIGN1cnJlbnRQb3NpdGlvbklkPXtwb3NpdGlvbi5pZH1cbiAgICAgIC8+XG5cbiAgICAgIHsvKiBNYWluIENvbnRlbnQgLSBIb3Jpem9udGFsIExheW91dCBsaWtlIExpY2hlc3MgLSBGdWxsIFNjcmVlbiAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWFpbi1jb250ZW50IGZsZXgtMSBmbGV4IGgtZnVsbCBtci04MFwiPlxuICAgICAgICB7LyogQ2hlc3Nib2FyZCBBcmVhICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoZXNzYm9hcmQtd3JhcHBlciBmbGV4LVs1XSBoLWZ1bGwgcmVsYXRpdmVcIj5cbiAgICAgICAgICB7LyogUHJvZ3Jlc3MgSGVhZGVyIGNlbnRlcmVkIGFib3ZlIGJvYXJkIC0gYWx3YXlzIHNob3cgZm9yIEUyRSB0ZXN0IHZpc2liaWxpdHkgKi99XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWJzb2x1dGUgdG9wLTI0IGxlZnQtMCByaWdodC0wIHRleHQtY2VudGVyIHBvaW50ZXItZXZlbnRzLW5vbmVcIlxuICAgICAgICAgICAgZGF0YS10ZXN0aWQ9XCJwb3NpdGlvbi10aXRsZVwiXG4gICAgICAgICAgICBzdHlsZT17eyB6SW5kZXg6IDUgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkXCI+XG4gICAgICAgICAgICAgIHtnZXRUcmFpbmluZ0Rpc3BsYXlUaXRsZShcbiAgICAgICAgICAgICAgICBwb3NpdGlvbixcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUubW92ZUhpc3Rvcnk/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9oMj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgICAgPFRyYWluaW5nQm9hcmRcbiAgICAgICAgICAgICAga2V5PXtgJHtwb3NpdGlvbi5pZH0tJHtyZXNldEtleX1gfVxuICAgICAgICAgICAgICBwb3NpdGlvbj17cG9zaXRpb259XG4gICAgICAgICAgICAgIG9uQ29tcGxldGU9eygpID0+IGhhbmRsZUNvbXBsZXRlKHRydWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIEZsb2F0aW5nIFNpZGViYXIgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2lkZWJhciBmaXhlZCByaWdodC0wIHRvcC0wIGJvdHRvbS0wIHctODAgYmctZ3JheS05MDAgYm9yZGVyLWwgYm9yZGVyLWdyYXktNzAwIGZsZXggZmxleC1jb2wgei0yMCBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgICB7LyogTmF2aWdhdGlvbiBiZXR3ZWVuIHBvc2l0aW9ucyAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm5hdi1zZWN0aW9uIHAtNCBib3JkZXItYiBib3JkZXItZ3JheS03MDBcIj5cbiAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTQwMCBtYi0yIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgIFN0ZWxsdW5nc25hdmlnYXRpb25cbiAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC00XCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgICAgICAgcHJldlBvc2l0aW9uICYmIHJvdXRlci5wdXNoKGAvdHJhaW4vJHtwcmV2UG9zaXRpb24uaWR9YClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFwcmV2UG9zaXRpb24gfHwgaXNMb2FkaW5nTmF2aWdhdGlvbn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgaG92ZXI6YmctZ3JheS04MDAgcm91bmRlZCBkaXNhYmxlZDpvcGFjaXR5LTMwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIlZvcmhlcmlnZSBTdGVsbHVuZ1wiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWxnXCI+XG4gICAgICAgICAgICAgICAgICB7aXNMb2FkaW5nTmF2aWdhdGlvbiA/IFwi4o+zXCIgOiBcIuKGkFwifSBWb3JoZXJpZ2UgU3RlbGx1bmdcbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmVzZXRQb3NpdGlvbn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgaG92ZXI6YmctZ3JheS04MDAgcm91bmRlZCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJQb3NpdGlvbiB6dXLDvGNrc2V0emVuXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtbGdcIj7ihrs8L3NwYW4+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT5cbiAgICAgICAgICAgICAgICAgIG5leHRQb3NpdGlvbiAmJiByb3V0ZXIucHVzaChgL3RyYWluLyR7bmV4dFBvc2l0aW9uLmlkfWApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXshbmV4dFBvc2l0aW9uIHx8IGlzTG9hZGluZ05hdmlnYXRpb259XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0yIGhvdmVyOmJnLWdyYXktODAwIHJvdW5kZWQgZGlzYWJsZWQ6b3BhY2l0eS0zMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgdGl0bGU9XCJOw6RjaHN0ZSBTdGVsbHVuZ1wiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWxnXCI+XG4gICAgICAgICAgICAgICAgICBOw6RjaHN0ZSBTdGVsbHVuZyB7aXNMb2FkaW5nTmF2aWdhdGlvbiA/IFwi4o+zXCIgOiBcIuKGklwifVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBHYW1lIFN0YXR1cyAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdhbWUtc3RhdHVzIHAtNCBib3JkZXItYiBib3JkZXItZ3JheS03MDBcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWJhc2VcIj7imZQ8L3NwYW4+XG4gICAgICAgICAgICAgIHtnYW1lU3RhdHVzLnNpZGVUb01vdmVEaXNwbGF5fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTMwMCBtdC0xXCI+XG4gICAgICAgICAgICAgIHtnYW1lU3RhdHVzLm9iamVjdGl2ZURpc3BsYXl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIHsvKiBJbnN0cnVjdGlvbnMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnN0cnVjdGlvbnMgcC00IGJvcmRlci1iIGJvcmRlci1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtYm9sZCBtYi0yXCI+e2Zvcm1hdFBvc2l0aW9uVGl0bGUocG9zaXRpb24pfTwvaDM+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS00MDBcIj57cG9zaXRpb24uZGVzY3JpcHRpb259PC9wPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIFRvZ2dsZXMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b2dnbGVzIHAtNCBib3JkZXItYiBib3JkZXItZ3JheS03MDBcIj5cbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlVG9nZ2xlQW5hbHlzaXN9XG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwidG9nZ2xlLWFuYWx5c2lzXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHAtMiByb3VuZGVkIG1iLTIgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgICAgICAgICAgICAgICB1aVN0YXRlLmFuYWx5c2lzUGFuZWwuaXNPcGVuXG4gICAgICAgICAgICAgICAgICA/IFwiYmctYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS03MDBcIlxuICAgICAgICAgICAgICAgICAgOiBcImJnLWdyYXktNzAwIGhvdmVyOmJnLWdyYXktNjAwXCJcbiAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIEFuYWx5c2Uge3VpU3RhdGUuYW5hbHlzaXNQYW5lbC5pc09wZW4gPyBcIkFVU1wiIDogXCJBTlwifVxuICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgIDxUYWJsZWJhc2VBbmFseXNpc1BhbmVsXG4gICAgICAgICAgICAgIGZlbj17Z2FtZVN0YXRlLmN1cnJlbnRGZW4gfHwgcG9zaXRpb24uZmVufVxuICAgICAgICAgICAgICBpc1Zpc2libGU9e3VpU3RhdGUuYW5hbHlzaXNQYW5lbC5pc09wZW59XG4gICAgICAgICAgICAgIHByZXZpb3VzRmVuPXtcbiAgICAgICAgICAgICAgICBnYW1lU3RhdGUubW92ZUhpc3RvcnkgJiYgZ2FtZVN0YXRlLm1vdmVIaXN0b3J5Lmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgID8gZ2FtZVN0YXRlLm1vdmVIaXN0b3J5W2dhbWVTdGF0ZS5tb3ZlSGlzdG9yeS5sZW5ndGggLSAxXVxuICAgICAgICAgICAgICAgICAgICAgID8uZmVuQmVmb3JlXG4gICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIE1vdmUgSGlzdG9yeSAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vdmUtaGlzdG9yeSBmbGV4LTEgcC00IGJvcmRlci1iIGJvcmRlci1ncmF5LTcwMCBvdmVyZmxvdy15LWF1dG9cIj5cbiAgICAgICAgICAgIDxNb3ZlUGFuZWxadXN0YW5kXG4gICAgICAgICAgICAgIHNob3dFdmFsdWF0aW9ucz17dWlTdGF0ZS5hbmFseXNpc1BhbmVsLmlzT3Blbn1cbiAgICAgICAgICAgICAgb25Nb3ZlQ2xpY2s9e2hhbmRsZU1vdmVDbGlja31cbiAgICAgICAgICAgICAgY3VycmVudE1vdmVJbmRleD17Z2FtZVN0YXRlLmN1cnJlbnRNb3ZlSW5kZXh9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yXCI+XG4gICAgICAgICAgICAgIDxOYXZpZ2F0aW9uQ29udHJvbHMgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIEV4dGVybmFsIExpbmtzICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZXh0ZXJuYWwtbGlua3MgcC00XCI+XG4gICAgICAgICAgICA8YVxuICAgICAgICAgICAgICBocmVmPXtnZXRMaWNoZXNzVXJsKCl9XG4gICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJibG9jayB0ZXh0LWNlbnRlciBwLTIgYmctZ3JheS03MDAgaG92ZXI6YmctZ3JheS02MDAgcm91bmRlZCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIEF1ZiBMaWNoZXNzIGFuYWx5c2llcmVuIOKGklxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufSk7XG5cbkVuZGdhbWVUcmFpbmluZ1BhZ2UuZGlzcGxheU5hbWUgPSBcIkVuZGdhbWVUcmFpbmluZ1BhZ2VcIjtcbiJdLCJuYW1lcyI6WyJFbmRnYW1lVHJhaW5pbmdQYWdlIiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIlJlYWN0IiwibWVtbyIsImdhbWVTdGF0ZSIsInJvdXRlciIsInVzZVJvdXRlciIsImdhbWVBY3Rpb25zIiwidXNlR2FtZVN0b3JlIiwidHJhaW5pbmdTdGF0ZSIsInRyYWluaW5nQWN0aW9ucyIsInVzZVRyYWluaW5nU3RvcmUiLCJ1aVN0YXRlIiwidWlBY3Rpb25zIiwidXNlVUlTdG9yZSIsInNob3dTdWNjZXNzIiwic2hvd0Vycm9yIiwidXNlVG9hc3QiLCJyZXNldEtleSIsInNldFJlc2V0S2V5IiwidXNlU3RhdGUiLCJwb3NpdGlvbiIsImN1cnJlbnRQb3NpdGlvbiIsImRlYnVnIiwiaGFzUG9zaXRpb24iLCJwb3NpdGlvbklkIiwiaWQiLCJwb3NpdGlvbkZlbiIsImZlbiIsImN1cnJlbnRGZW4iLCJ0aW1lc3RhbXAiLCJjb21wbGV0ZVRyYWluaW5nIiwiZGl2IiwiY2xhc3NOYW1lIiwiZ2FtZVN0YXR1cyIsInVzZU1lbW8iLCJnZXRHYW1lU3RhdHVzIiwiZ29hbCIsInByZXZQb3NpdGlvbiIsInByZXZpb3VzUG9zaXRpb24iLCJuZXh0UG9zaXRpb24iLCJpc0xvYWRpbmdOYXZpZ2F0aW9uIiwiaGFuZGxlQ29tcGxldGUiLCJ1c2VDYWxsYmFjayIsImlzU3VjY2VzcyIsIkFOSU1BVElPTiIsIlNVQ0NFU1NfVE9BU1RfRFVSQVRJT04iLCJFUlJPUl9UT0FTVF9EVVJBVElPTiIsImhhbmRsZVJlc2V0UG9zaXRpb24iLCJyZXNldEdhbWUiLCJwcmV2IiwiaGFuZGxlTW92ZUNsaWNrIiwibW92ZUluZGV4IiwiZ29Ub01vdmUiLCJoYW5kbGVUb2dnbGVBbmFseXNpcyIsInVwZGF0ZUFuYWx5c2lzUGFuZWwiLCJpc09wZW4iLCJhbmFseXNpc1BhbmVsIiwiZ2V0TGljaGVzc1VybCIsImN1cnJlbnRQZ24iLCJtb3ZlSGlzdG9yeSIsImxlbmd0aCIsImVuY29kZVVSSUNvbXBvbmVudCIsInJlcGxhY2UiLCJUb2FzdENvbnRhaW5lciIsInRvYXN0cyIsIm9uUmVtb3ZlVG9hc3QiLCJyZW1vdmVUb2FzdCIsIkFkdmFuY2VkRW5kZ2FtZU1lbnUiLCJvbkNsb3NlIiwiY3VycmVudFBvc2l0aW9uSWQiLCJkYXRhLXRlc3RpZCIsInN0eWxlIiwiekluZGV4IiwiaDIiLCJnZXRUcmFpbmluZ0Rpc3BsYXlUaXRsZSIsIlRyYWluaW5nQm9hcmQiLCJvbkNvbXBsZXRlIiwiaDMiLCJidXR0b24iLCJvbkNsaWNrIiwicHVzaCIsImRpc2FibGVkIiwidGl0bGUiLCJzcGFuIiwic2lkZVRvTW92ZURpc3BsYXkiLCJvYmplY3RpdmVEaXNwbGF5IiwiZm9ybWF0UG9zaXRpb25UaXRsZSIsInAiLCJkZXNjcmlwdGlvbiIsIlRhYmxlYmFzZUFuYWx5c2lzUGFuZWwiLCJpc1Zpc2libGUiLCJwcmV2aW91c0ZlbiIsImZlbkJlZm9yZSIsInVuZGVmaW5lZCIsIk1vdmVQYW5lbFp1c3RhbmQiLCJzaG93RXZhbHVhdGlvbnMiLCJvbk1vdmVDbGljayIsImN1cnJlbnRNb3ZlSW5kZXgiLCJOYXZpZ2F0aW9uQ29udHJvbHMiLCJhIiwiaHJlZiIsInRhcmdldCIsInJlbCIsImRpc3BsYXlOYW1lIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBd0NhQTs7O2VBQUFBOzs7OytEQWhDeUM7NEJBQzVCOzBCQUtuQjt3Q0FDZ0M7cUNBQ0g7MEJBRVg7dUJBQ007NEJBQ0Q7dUJBS3ZCO2dDQUtBOzJCQUNtQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBN0IxQiw0REFBNEQ7QUFDNURDLFFBQVFDLEdBQUcsQ0FDVCwwREFDQSxJQUFJQyxPQUFPQyxXQUFXO0FBbUNqQixNQUFNSixvQ0FBZ0NLLGNBQUssQ0FBQ0MsSUFBSSxDQUFDO1FBa0l4Q0Msd0JBNEZJQTtJQTdObEIsaUJBQWlCO0lBQ2pCLE1BQU1DLFNBQVNDLElBQUFBLHFCQUFTO0lBRXhCLHFDQUFxQztJQUNyQyxNQUFNLENBQUNGLFdBQVdHLFlBQVksR0FBR0MsSUFBQUEsbUJBQVk7SUFDN0MsTUFBTSxDQUFDQyxlQUFlQyxnQkFBZ0IsR0FBR0MsSUFBQUEsdUJBQWdCO0lBQ3pELE1BQU0sQ0FBQ0MsU0FBU0MsVUFBVSxHQUFHQyxJQUFBQSxpQkFBVTtJQUV2QyxzRkFBc0Y7SUFDdEYsTUFBTSxFQUFFQyxXQUFXLEVBQUVDLFNBQVMsRUFBRSxHQUFHQyxJQUFBQSxrQkFBUTtJQUUzQyxpQkFBaUI7SUFDakIsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdDLElBQUFBLGVBQVEsRUFBUztJQUVqRCwwREFBMEQ7SUFDMUQsTUFBTUMsV0FBV1osY0FBY2EsZUFBZTtJQUU5Qyw2QkFBNkI7SUFDN0J4QixRQUFReUIsS0FBSyxDQUFDLG1DQUFtQztRQUMvQ0MsYUFBYSxDQUFDLENBQUNIO1FBQ2ZJLFVBQVUsRUFBRUoscUJBQUFBLCtCQUFBQSxT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