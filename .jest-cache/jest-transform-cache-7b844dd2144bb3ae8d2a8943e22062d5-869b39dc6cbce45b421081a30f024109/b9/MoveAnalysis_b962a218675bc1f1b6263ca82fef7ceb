cebbb8fddf3e296008d5072863a3137b
/**
 * @file Move analysis list component for game analysis panel
 * @module components/training/AnalysisPanel/MoveAnalysis
 * 
 * @description
 * Move analysis list component displaying an interactive list of chess moves
 * with quality classifications, evaluations, and selection functionality.
 * Provides a comprehensive overview of game analysis with visual indicators.
 * 
 * @remarks
 * Key features:
 * - Interactive move list with click selection
 * - Color-coded move quality classifications (excellent to blunder)
 * - Chess notation symbols for move quality (!!, !, ?!, ?, ??)
 * - Move numbering with proper chess format display
 * - Evaluation display with positive/negative formatting
 * - Responsive design with proper spacing and hover effects
 * - Dark mode support with appropriate color schemes
 * - Scrollable container for long games
 * 
 * The component integrates with the AnalysisDetails component to provide
 * a complete analysis experience where users can select moves from the
 * list to view detailed information.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "MoveAnalysis", {
    enumerable: true,
    get: function() {
        return MoveAnalysis;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
/**
 * Get CSS classes for move classification color coding
 * 
 * @param {MoveAnalysisData["classification"]} [classification] - Move quality classification
 * @returns {string} CSS classes for text and background colors
 * 
 * @example
 * ```typescript
 * getClassificationColor('excellent') // "text-green-600 bg-green-50 dark:text-green-400 dark:bg-green-900/30"
 * getClassificationColor('blunder')   // "text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/30"
 * ```
 */ const getClassificationColor = (classification)=>{
    switch(classification){
        case "excellent":
            return "text-green-600 bg-green-50 dark:text-green-400 dark:bg-green-900/30";
        case "good":
            return "text-blue-600 bg-blue-50 dark:text-blue-400 dark:bg-blue-900/30";
        case "inaccuracy":
            return "text-yellow-600 bg-yellow-50 dark:text-yellow-400 dark:bg-yellow-900/30";
        case "mistake":
            return "text-orange-600 bg-orange-50 dark:text-orange-400 dark:bg-orange-900/30";
        case "blunder":
            return "text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/30";
        default:
            return "text-gray-600 bg-gray-50 dark:text-gray-400 dark:bg-gray-800";
    }
};
/**
 * Get chess notation symbol for move classification
 * 
 * @param {MoveAnalysisData["classification"]} [classification] - Move quality classification
 * @returns {string} Chess notation symbol for the move quality
 * 
 * @remarks
 * Chess notation symbols:
 * - !! (Excellent): Brilliant or best move
 * - ! (Good): Good move  
 * - ?! (Inaccuracy): Dubious or questionable move
 * - ? (Mistake): Mistake or bad move
 * - ?? (Blunder): Blunder or very bad move
 * 
 * @example
 * ```typescript
 * getClassificationSymbol('excellent')  // "!!"
 * getClassificationSymbol('blunder')    // "??"
 * getClassificationSymbol(undefined)    // ""
 * ```
 */ const getClassificationSymbol = (classification)=>{
    switch(classification){
        case "excellent":
            return "!!";
        case "good":
            return "!";
        case "inaccuracy":
            return "?!";
        case "mistake":
            return "?";
        case "blunder":
            return "??";
        default:
            return "";
    }
};
const MoveAnalysis = /*#__PURE__*/ _react.default.memo(({ analysisData, selectedMoveIndex, onMoveSelect })=>{
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: "w-2/5 border-r border-gray-200 dark:border-gray-700 flex flex-col",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "p-2 border-b border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-800",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("h4", {
                    className: "text-sm font-medium text-gray-700 dark:text-gray-300",
                    children: "Zugfolge"
                })
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "flex-1 overflow-y-auto p-2",
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                    className: "space-y-1",
                    children: analysisData.map((analysis, index)=>{
                        const moveNumber = Math.floor(index / 2) + 1;
                        const isWhiteMove = index % 2 === 0;
                        return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: `flex items-center gap-2 p-1.5 rounded cursor-pointer transition-colors text-sm ${selectedMoveIndex === index ? "bg-blue-100 border border-blue-200 dark:bg-blue-900/30 dark:border-blue-700" : "hover:bg-gray-50 dark:hover:bg-gray-800"}`,
                            onClick: ()=>onMoveSelect(index),
                            children: [
                                isWhiteMove && /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                    className: "text-xs text-gray-500 dark:text-gray-400 w-6",
                                    children: [
                                        moveNumber,
                                        "."
                                    ]
                                }),
                                !isWhiteMove && /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                    className: "w-6"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                    className: "font-mono font-medium text-gray-800 dark:text-gray-200 min-w-[45px]",
                                    children: analysis.move.san
                                }),
                                analysis.classification && /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                    className: `text-xs px-1.5 py-0.5 rounded-full font-medium ${getClassificationColor(analysis.classification)}`,
                                    children: getClassificationSymbol(analysis.classification)
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                    className: "text-xs font-mono text-gray-600 dark:text-gray-400 ml-auto",
                                    children: analysis.evaluation !== undefined ? analysis.evaluation > 0 ? `+${analysis.evaluation.toFixed(2)}` : analysis.evaluation.toFixed(2) : "0.00"
                                })
                            ]
                        }, index);
                    })
                })
            })
        ]
    });
});
MoveAnalysis.displayName = "MoveAnalysis";

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RoZWh1L2Nvb2xQcm9qZWN0cy9FbmRnYW1lVHJhaW5lci10cmFpbmluZy1ib2FyZC1jb21wbGV0ZS9zcmMvc2hhcmVkL2NvbXBvbmVudHMvdHJhaW5pbmcvQW5hbHlzaXNQYW5lbC9Nb3ZlQW5hbHlzaXMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgTW92ZSBhbmFseXNpcyBsaXN0IGNvbXBvbmVudCBmb3IgZ2FtZSBhbmFseXNpcyBwYW5lbFxuICogQG1vZHVsZSBjb21wb25lbnRzL3RyYWluaW5nL0FuYWx5c2lzUGFuZWwvTW92ZUFuYWx5c2lzXG4gKiBcbiAqIEBkZXNjcmlwdGlvblxuICogTW92ZSBhbmFseXNpcyBsaXN0IGNvbXBvbmVudCBkaXNwbGF5aW5nIGFuIGludGVyYWN0aXZlIGxpc3Qgb2YgY2hlc3MgbW92ZXNcbiAqIHdpdGggcXVhbGl0eSBjbGFzc2lmaWNhdGlvbnMsIGV2YWx1YXRpb25zLCBhbmQgc2VsZWN0aW9uIGZ1bmN0aW9uYWxpdHkuXG4gKiBQcm92aWRlcyBhIGNvbXByZWhlbnNpdmUgb3ZlcnZpZXcgb2YgZ2FtZSBhbmFseXNpcyB3aXRoIHZpc3VhbCBpbmRpY2F0b3JzLlxuICogXG4gKiBAcmVtYXJrc1xuICogS2V5IGZlYXR1cmVzOlxuICogLSBJbnRlcmFjdGl2ZSBtb3ZlIGxpc3Qgd2l0aCBjbGljayBzZWxlY3Rpb25cbiAqIC0gQ29sb3ItY29kZWQgbW92ZSBxdWFsaXR5IGNsYXNzaWZpY2F0aW9ucyAoZXhjZWxsZW50IHRvIGJsdW5kZXIpXG4gKiAtIENoZXNzIG5vdGF0aW9uIHN5bWJvbHMgZm9yIG1vdmUgcXVhbGl0eSAoISEsICEsID8hLCA/LCA/PylcbiAqIC0gTW92ZSBudW1iZXJpbmcgd2l0aCBwcm9wZXIgY2hlc3MgZm9ybWF0IGRpc3BsYXlcbiAqIC0gRXZhbHVhdGlvbiBkaXNwbGF5IHdpdGggcG9zaXRpdmUvbmVnYXRpdmUgZm9ybWF0dGluZ1xuICogLSBSZXNwb25zaXZlIGRlc2lnbiB3aXRoIHByb3BlciBzcGFjaW5nIGFuZCBob3ZlciBlZmZlY3RzXG4gKiAtIERhcmsgbW9kZSBzdXBwb3J0IHdpdGggYXBwcm9wcmlhdGUgY29sb3Igc2NoZW1lc1xuICogLSBTY3JvbGxhYmxlIGNvbnRhaW5lciBmb3IgbG9uZyBnYW1lc1xuICogXG4gKiBUaGUgY29tcG9uZW50IGludGVncmF0ZXMgd2l0aCB0aGUgQW5hbHlzaXNEZXRhaWxzIGNvbXBvbmVudCB0byBwcm92aWRlXG4gKiBhIGNvbXBsZXRlIGFuYWx5c2lzIGV4cGVyaWVuY2Ugd2hlcmUgdXNlcnMgY2FuIHNlbGVjdCBtb3ZlcyBmcm9tIHRoZVxuICogbGlzdCB0byB2aWV3IGRldGFpbGVkIGluZm9ybWF0aW9uLlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IE1vdmUgfSBmcm9tIFwiY2hlc3MuanNcIjtcblxuLyoqXG4gKiBNb3ZlIGFuYWx5c2lzIGRhdGEgc3RydWN0dXJlIGZvciBtb3ZlIGxpc3QgZGlzcGxheVxuICogXG4gKiBAaW50ZXJmYWNlIE1vdmVBbmFseXNpc0RhdGFcbiAqIFxuICogQHByb3BlcnR5IHtNb3ZlfSBtb3ZlIC0gQ2hlc3MgbW92ZSBvYmplY3QgZnJvbSBjaGVzcy5qc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtldmFsdWF0aW9uXSAtIFBvc2l0aW9uIGV2YWx1YXRpb24gYWZ0ZXIgdGhlIG1vdmVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYmVzdE1vdmVdIC0gQmVzdCBtb3ZlIGFjY29yZGluZyB0byBhbmFseXNpcyAobm90IGRpc3BsYXllZCBpbiBsaXN0KVxuICogQHByb3BlcnR5IHsnZXhjZWxsZW50JyB8ICdnb29kJyB8ICdpbmFjY3VyYWN5JyB8ICdtaXN0YWtlJyB8ICdibHVuZGVyJ30gW2NsYXNzaWZpY2F0aW9uXSAtIE1vdmUgcXVhbGl0eSBjbGFzc2lmaWNhdGlvblxuICovXG5pbnRlcmZhY2UgTW92ZUFuYWx5c2lzRGF0YSB7XG4gIG1vdmU6IE1vdmU7XG4gIGV2YWx1YXRpb24/OiBudW1iZXI7XG4gIGJlc3RNb3ZlPzogc3RyaW5nO1xuICBjbGFzc2lmaWNhdGlvbj86IFwiZXhjZWxsZW50XCIgfCBcImdvb2RcIiB8IFwiaW5hY2N1cmFjeVwiIHwgXCJtaXN0YWtlXCIgfCBcImJsdW5kZXJcIjtcbn1cblxuLyoqXG4gKiBQcm9wcyBmb3IgdGhlIE1vdmVBbmFseXNpcyBjb21wb25lbnRcbiAqIFxuICogQGludGVyZmFjZSBNb3ZlQW5hbHlzaXNQcm9wc1xuICogXG4gKiBAcHJvcGVydHkge01vdmVBbmFseXNpc0RhdGFbXX0gYW5hbHlzaXNEYXRhIC0gQXJyYXkgb2YgbW92ZSBhbmFseXNpcyBkYXRhIGZvciBhbGwgbW92ZXNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyIHwgbnVsbH0gc2VsZWN0ZWRNb3ZlSW5kZXggLSBJbmRleCBvZiBjdXJyZW50bHkgc2VsZWN0ZWQgbW92ZSwgbnVsbCBpZiBub25lIHNlbGVjdGVkXG4gKiBAcHJvcGVydHkgeyhpbmRleDogbnVtYmVyKSA9PiB2b2lkfSBvbk1vdmVTZWxlY3QgLSBDYWxsYmFjayBmdW5jdGlvbiB3aGVuIGEgbW92ZSBpcyBzZWxlY3RlZCBmcm9tIHRoZSBsaXN0XG4gKi9cbmludGVyZmFjZSBNb3ZlQW5hbHlzaXNQcm9wcyB7XG4gIGFuYWx5c2lzRGF0YTogTW92ZUFuYWx5c2lzRGF0YVtdO1xuICBzZWxlY3RlZE1vdmVJbmRleDogbnVtYmVyIHwgbnVsbDtcbiAgb25Nb3ZlU2VsZWN0OiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZDtcbn1cblxuLyoqXG4gKiBHZXQgQ1NTIGNsYXNzZXMgZm9yIG1vdmUgY2xhc3NpZmljYXRpb24gY29sb3IgY29kaW5nXG4gKiBcbiAqIEBwYXJhbSB7TW92ZUFuYWx5c2lzRGF0YVtcImNsYXNzaWZpY2F0aW9uXCJdfSBbY2xhc3NpZmljYXRpb25dIC0gTW92ZSBxdWFsaXR5IGNsYXNzaWZpY2F0aW9uXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBDU1MgY2xhc3NlcyBmb3IgdGV4dCBhbmQgYmFja2dyb3VuZCBjb2xvcnNcbiAqIFxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGdldENsYXNzaWZpY2F0aW9uQ29sb3IoJ2V4Y2VsbGVudCcpIC8vIFwidGV4dC1ncmVlbi02MDAgYmctZ3JlZW4tNTAgZGFyazp0ZXh0LWdyZWVuLTQwMCBkYXJrOmJnLWdyZWVuLTkwMC8zMFwiXG4gKiBnZXRDbGFzc2lmaWNhdGlvbkNvbG9yKCdibHVuZGVyJykgICAvLyBcInRleHQtcmVkLTYwMCBiZy1yZWQtNTAgZGFyazp0ZXh0LXJlZC00MDAgZGFyazpiZy1yZWQtOTAwLzMwXCJcbiAqIGBgYFxuICovXG5jb25zdCBnZXRDbGFzc2lmaWNhdGlvbkNvbG9yID0gKFxuICBjbGFzc2lmaWNhdGlvbj86IE1vdmVBbmFseXNpc0RhdGFbXCJjbGFzc2lmaWNhdGlvblwiXSxcbikgPT4ge1xuICBzd2l0Y2ggKGNsYXNzaWZpY2F0aW9uKSB7XG4gICAgY2FzZSBcImV4Y2VsbGVudFwiOlxuICAgICAgcmV0dXJuIFwidGV4dC1ncmVlbi02MDAgYmctZ3JlZW4tNTAgZGFyazp0ZXh0LWdyZWVuLTQwMCBkYXJrOmJnLWdyZWVuLTkwMC8zMFwiO1xuICAgIGNhc2UgXCJnb29kXCI6XG4gICAgICByZXR1cm4gXCJ0ZXh0LWJsdWUtNjAwIGJnLWJsdWUtNTAgZGFyazp0ZXh0LWJsdWUtNDAwIGRhcms6YmctYmx1ZS05MDAvMzBcIjtcbiAgICBjYXNlIFwiaW5hY2N1cmFjeVwiOlxuICAgICAgcmV0dXJuIFwidGV4dC15ZWxsb3ctNjAwIGJnLXllbGxvdy01MCBkYXJrOnRleHQteWVsbG93LTQwMCBkYXJrOmJnLXllbGxvdy05MDAvMzBcIjtcbiAgICBjYXNlIFwibWlzdGFrZVwiOlxuICAgICAgcmV0dXJuIFwidGV4dC1vcmFuZ2UtNjAwIGJnLW9yYW5nZS01MCBkYXJrOnRleHQtb3JhbmdlLTQwMCBkYXJrOmJnLW9yYW5nZS05MDAvMzBcIjtcbiAgICBjYXNlIFwiYmx1bmRlclwiOlxuICAgICAgcmV0dXJuIFwidGV4dC1yZWQtNjAwIGJnLXJlZC01MCBkYXJrOnRleHQtcmVkLTQwMCBkYXJrOmJnLXJlZC05MDAvMzBcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwidGV4dC1ncmF5LTYwMCBiZy1ncmF5LTUwIGRhcms6dGV4dC1ncmF5LTQwMCBkYXJrOmJnLWdyYXktODAwXCI7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGNoZXNzIG5vdGF0aW9uIHN5bWJvbCBmb3IgbW92ZSBjbGFzc2lmaWNhdGlvblxuICogXG4gKiBAcGFyYW0ge01vdmVBbmFseXNpc0RhdGFbXCJjbGFzc2lmaWNhdGlvblwiXX0gW2NsYXNzaWZpY2F0aW9uXSAtIE1vdmUgcXVhbGl0eSBjbGFzc2lmaWNhdGlvblxuICogQHJldHVybnMge3N0cmluZ30gQ2hlc3Mgbm90YXRpb24gc3ltYm9sIGZvciB0aGUgbW92ZSBxdWFsaXR5XG4gKiBcbiAqIEByZW1hcmtzXG4gKiBDaGVzcyBub3RhdGlvbiBzeW1ib2xzOlxuICogLSAhISAoRXhjZWxsZW50KTogQnJpbGxpYW50IG9yIGJlc3QgbW92ZVxuICogLSAhIChHb29kKTogR29vZCBtb3ZlICBcbiAqIC0gPyEgKEluYWNjdXJhY3kpOiBEdWJpb3VzIG9yIHF1ZXN0aW9uYWJsZSBtb3ZlXG4gKiAtID8gKE1pc3Rha2UpOiBNaXN0YWtlIG9yIGJhZCBtb3ZlXG4gKiAtID8/IChCbHVuZGVyKTogQmx1bmRlciBvciB2ZXJ5IGJhZCBtb3ZlXG4gKiBcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBnZXRDbGFzc2lmaWNhdGlvblN5bWJvbCgnZXhjZWxsZW50JykgIC8vIFwiISFcIlxuICogZ2V0Q2xhc3NpZmljYXRpb25TeW1ib2woJ2JsdW5kZXInKSAgICAvLyBcIj8/XCJcbiAqIGdldENsYXNzaWZpY2F0aW9uU3ltYm9sKHVuZGVmaW5lZCkgICAgLy8gXCJcIlxuICogYGBgXG4gKi9cbmNvbnN0IGdldENsYXNzaWZpY2F0aW9uU3ltYm9sID0gKFxuICBjbGFzc2lmaWNhdGlvbj86IE1vdmVBbmFseXNpc0RhdGFbXCJjbGFzc2lmaWNhdGlvblwiXSxcbikgPT4ge1xuICBzd2l0Y2ggKGNsYXNzaWZpY2F0aW9uKSB7XG4gICAgY2FzZSBcImV4Y2VsbGVudFwiOlxuICAgICAgcmV0dXJuIFwiISFcIjtcbiAgICBjYXNlIFwiZ29vZFwiOlxuICAgICAgcmV0dXJuIFwiIVwiO1xuICAgIGNhc2UgXCJpbmFjY3VyYWN5XCI6XG4gICAgICByZXR1cm4gXCI/IVwiO1xuICAgIGNhc2UgXCJtaXN0YWtlXCI6XG4gICAgICByZXR1cm4gXCI/XCI7XG4gICAgY2FzZSBcImJsdW5kZXJcIjpcbiAgICAgIHJldHVybiBcIj8/XCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBcIlwiO1xuICB9XG59O1xuXG4vKipcbiAqIE1vdmUgYW5hbHlzaXMgbGlzdCBjb21wb25lbnQgZm9yIGludGVyYWN0aXZlIGdhbWUgYW5hbHlzaXNcbiAqIFxuICogQGNvbXBvbmVudFxuICogQGRlc2NyaXB0aW9uXG4gKiBEaXNwbGF5cyBhbiBpbnRlcmFjdGl2ZSBsaXN0IG9mIGNoZXNzIG1vdmVzIHdpdGggcXVhbGl0eSBjbGFzc2lmaWNhdGlvbnMsXG4gKiBldmFsdWF0aW9ucywgYW5kIHNlbGVjdGlvbiBmdW5jdGlvbmFsaXR5LiBFYWNoIG1vdmUgc2hvd3MgaXRzIGFsZ2VicmFpY1xuICogbm90YXRpb24sIHF1YWxpdHkgc3ltYm9sLCBhbmQgZXZhbHVhdGlvbiBpbiBhIGNvbXBhY3QsIHNjYW5uYWJsZSBmb3JtYXQuXG4gKiBcbiAqIEByZW1hcmtzXG4gKiBMaXN0IGZlYXR1cmVzOlxuICogLSBDaGVzcyBtb3ZlIG51bWJlcmluZyAoMS4gZTQsIDEuLi5lNSwgMi4gTmYzLCBldGMuKVxuICogLSBDb2xvci1jb2RlZCBxdWFsaXR5IGluZGljYXRvcnMgd2l0aCBzdGFuZGFyZCBjaGVzcyBzeW1ib2xzXG4gKiAtIEV2YWx1YXRpb24gZGlzcGxheSB3aXRoIHByb3BlciArLy0gZm9ybWF0dGluZ1xuICogLSBDbGljayBzZWxlY3Rpb24gd2l0aCB2aXN1YWwgZmVlZGJhY2tcbiAqIC0gSG92ZXIgZWZmZWN0cyBmb3IgaW50ZXJhY3RpdmUgZWxlbWVudHNcbiAqIC0gU2Nyb2xsYWJsZSBjb250YWluZXIgZm9yIGxvbmcgZ2FtZXNcbiAqIC0gRGFyayBtb2RlIHN1cHBvcnQgdGhyb3VnaG91dFxuICogXG4gKiBWaXN1YWwgZGVzaWduOlxuICogLSBDb21wYWN0IGxheW91dCBvcHRpbWl6ZWQgZm9yIGFuYWx5c2lzIHdvcmtmbG93XG4gKiAtIENsZWFyIHR5cG9ncmFwaHkgd2l0aCBtb25vc3BhY2UgZm9udCBmb3IgbW92ZXNcbiAqIC0gQ29uc2lzdGVudCBzcGFjaW5nIGFuZCBhbGlnbm1lbnRcbiAqIC0gU2VsZWN0ZWQgbW92ZSBoaWdobGlnaHRpbmcgd2l0aCBibHVlIGJhY2tncm91bmRcbiAqIC0gUXVhbGl0eSBiYWRnZXMgd2l0aCBhcHByb3ByaWF0ZSBjb2xvciBjb2RpbmdcbiAqIFxuICogVGhlIGNvbXBvbmVudCBpcyBtZW1vaXplZCBmb3IgcGVyZm9ybWFuY2UgYW5kIGludGVncmF0ZXMgd2l0aFxuICogQW5hbHlzaXNEZXRhaWxzIHRvIHByb3ZpZGUgY29tcHJlaGVuc2l2ZSBtb3ZlIGFuYWx5c2lzIHdvcmtmbG93LlxuICogXG4gKiBAZXhhbXBsZVxuICogYGBgdHN4XG4gKiAvLyBCYXNpYyB1c2FnZSBpbiBhbmFseXNpcyBwYW5lbFxuICogPE1vdmVBbmFseXNpc1xuICogICBhbmFseXNpc0RhdGE9e2dhbWVBbmFseXNpc31cbiAqICAgc2VsZWN0ZWRNb3ZlSW5kZXg9e2N1cnJlbnRNb3ZlfVxuICogICBvbk1vdmVTZWxlY3Q9eyhpbmRleCkgPT4gc2V0Q3VycmVudE1vdmUoaW5kZXgpfVxuICogLz5cbiAqIFxuICogLy8gSW4gc3BsaXQtcGFuZWwgbGF5b3V0XG4gKiA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAqICAgPE1vdmVBbmFseXNpc1xuICogICAgIGFuYWx5c2lzRGF0YT17bW92ZXN9XG4gKiAgICAgc2VsZWN0ZWRNb3ZlSW5kZXg9e3NlbGVjdGVkfVxuICogICAgIG9uTW92ZVNlbGVjdD17aGFuZGxlU2VsZWN0fVxuICogICAvPlxuICogICA8QW5hbHlzaXNEZXRhaWxzXG4gKiAgICAgc2VsZWN0ZWRNb3ZlSW5kZXg9e3NlbGVjdGVkfVxuICogICAgIGFuYWx5c2lzRGF0YT17bW92ZXN9XG4gKiAgIC8+XG4gKiA8L2Rpdj5cbiAqIGBgYFxuICogXG4gKiBAcGFyYW0ge01vdmVBbmFseXNpc1Byb3BzfSBwcm9wcyAtIENvbXBvbmVudCBjb25maWd1cmF0aW9uXG4gKiBAcmV0dXJucyB7SlNYLkVsZW1lbnR9IEludGVyYWN0aXZlIG1vdmUgbGlzdCB3aXRoIGFuYWx5c2lzIGluZGljYXRvcnNcbiAqL1xuZXhwb3J0IGNvbnN0IE1vdmVBbmFseXNpczogUmVhY3QuRkM8TW92ZUFuYWx5c2lzUHJvcHM+ID0gUmVhY3QubWVtbyhcbiAgKHsgYW5hbHlzaXNEYXRhLCBzZWxlY3RlZE1vdmVJbmRleCwgb25Nb3ZlU2VsZWN0IH0pID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTIvNSBib3JkZXItciBib3JkZXItZ3JheS0yMDAgZGFyazpib3JkZXItZ3JheS03MDAgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMiBib3JkZXItYiBib3JkZXItZ3JheS0xMDAgZGFyazpib3JkZXItZ3JheS04MDAgYmctZ3JheS01MCBkYXJrOmJnLWdyYXktODAwXCI+XG4gICAgICAgICAgPGg0IGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBkYXJrOnRleHQtZ3JheS0zMDBcIj5cbiAgICAgICAgICAgIFp1Z2ZvbGdlXG4gICAgICAgICAgPC9oND5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtMlwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0xXCI+XG4gICAgICAgICAgICB7YW5hbHlzaXNEYXRhLm1hcCgoYW5hbHlzaXMsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IG1vdmVOdW1iZXIgPSBNYXRoLmZsb29yKGluZGV4IC8gMikgKyAxO1xuICAgICAgICAgICAgICBjb25zdCBpc1doaXRlTW92ZSA9IGluZGV4ICUgMiA9PT0gMDtcblxuICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBwLTEuNSByb3VuZGVkIGN1cnNvci1wb2ludGVyIHRyYW5zaXRpb24tY29sb3JzIHRleHQtc20gJHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRNb3ZlSW5kZXggPT09IGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgPyBcImJnLWJsdWUtMTAwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgZGFyazpiZy1ibHVlLTkwMC8zMCBkYXJrOmJvcmRlci1ibHVlLTcwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgOiBcImhvdmVyOmJnLWdyYXktNTAgZGFyazpob3ZlcjpiZy1ncmF5LTgwMFwiXG4gICAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uTW92ZVNlbGVjdChpbmRleCl9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgey8qIE1vdmUgTnVtYmVyICovfVxuICAgICAgICAgICAgICAgICAge2lzV2hpdGVNb3ZlICYmIChcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIGRhcms6dGV4dC1ncmF5LTQwMCB3LTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7bW92ZU51bWJlcn0uXG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICB7IWlzV2hpdGVNb3ZlICYmIDxzcGFuIGNsYXNzTmFtZT1cInctNlwiPjwvc3Bhbj59XG5cbiAgICAgICAgICAgICAgICAgIHsvKiBNb3ZlICovfVxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tb25vIGZvbnQtbWVkaXVtIHRleHQtZ3JheS04MDAgZGFyazp0ZXh0LWdyYXktMjAwIG1pbi13LVs0NXB4XVwiPlxuICAgICAgICAgICAgICAgICAgICB7YW5hbHlzaXMubW92ZS5zYW59XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiBDbGFzc2lmaWNhdGlvbiAqL31cbiAgICAgICAgICAgICAgICAgIHthbmFseXNpcy5jbGFzc2lmaWNhdGlvbiAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdGV4dC14cyBweC0xLjUgcHktMC41IHJvdW5kZWQtZnVsbCBmb250LW1lZGl1bSAke2dldENsYXNzaWZpY2F0aW9uQ29sb3IoYW5hbHlzaXMuY2xhc3NpZmljYXRpb24pfWB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICB7Z2V0Q2xhc3NpZmljYXRpb25TeW1ib2woYW5hbHlzaXMuY2xhc3NpZmljYXRpb24pfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAgICB7LyogRXZhbHVhdGlvbiAqL31cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1tb25vIHRleHQtZ3JheS02MDAgZGFyazp0ZXh0LWdyYXktNDAwIG1sLWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAge2FuYWx5c2lzLmV2YWx1YXRpb24gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgID8gYW5hbHlzaXMuZXZhbHVhdGlvbiA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYCske2FuYWx5c2lzLmV2YWx1YXRpb24udG9GaXhlZCgyKX1gXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGFuYWx5c2lzLmV2YWx1YXRpb24udG9GaXhlZCgyKVxuICAgICAgICAgICAgICAgICAgICAgIDogXCIwLjAwXCJ9XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9LFxuKTtcblxuTW92ZUFuYWx5c2lzLmRpc3BsYXlOYW1lID0gXCJNb3ZlQW5hbHlzaXNcIjtcbiJdLCJuYW1lcyI6WyJNb3ZlQW5hbHlzaXMiLCJnZXRDbGFzc2lmaWNhdGlvbkNvbG9yIiwiY2xhc3NpZmljYXRpb24iLCJnZXRDbGFzc2lmaWNhdGlvblN5bWJvbCIsIlJlYWN0IiwibWVtbyIsImFuYWx5c2lzRGF0YSIsInNlbGVjdGVkTW92ZUluZGV4Iiwib25Nb3ZlU2VsZWN0IiwiZGl2IiwiY2xhc3NOYW1lIiwiaDQiLCJtYXAiLCJhbmFseXNpcyIsImluZGV4IiwibW92ZU51bWJlciIsIk1hdGgiLCJmbG9vciIsImlzV2hpdGVNb3ZlIiwib25DbGljayIsInNwYW4iLCJtb3ZlIiwic2FuIiwiZXZhbHVhdGlvbiIsInVuZGVmaW5lZCIsInRvRml4ZWQiLCJkaXNwbGF5TmFtZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBdUJDOzs7OytCQW1LWUE7OztlQUFBQTs7Ozs4REFqS0s7Ozs7OztBQW1DbEI7Ozs7Ozs7Ozs7O0NBV0MsR0FDRCxNQUFNQyx5QkFBeUIsQ0FDN0JDO0lBRUEsT0FBUUE7UUFDTixLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO1FBQ1Q7WUFDRSxPQUFPO0lBQ1g7QUFDRjtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW9CQyxHQUNELE1BQU1DLDBCQUEwQixDQUM5QkQ7SUFFQSxPQUFRQTtRQUNOLEtBQUs7WUFDSCxPQUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVDtZQUNFLE9BQU87SUFDWDtBQUNGO0FBeURPLE1BQU1GLDZCQUE0Q0ksY0FBSyxDQUFDQyxJQUFJLENBQ2pFLENBQUMsRUFBRUMsWUFBWSxFQUFFQyxpQkFBaUIsRUFBRUMsWUFBWSxFQUFFO0lBQ2hELHFCQUNFLHNCQUFDQztRQUFJQyxXQUFVOzswQkFDYixxQkFBQ0Q7Z0JBQUlDLFdBQVU7MEJBQ2IsY0FBQSxxQkFBQ0M7b0JBQUdELFdBQVU7OEJBQXVEOzs7MEJBS3ZFLHFCQUFDRDtnQkFBSUMsV0FBVTswQkFDYixjQUFBLHFCQUFDRDtvQkFBSUMsV0FBVTs4QkFDWkosYUFBYU0sR0FBRyxDQUFDLENBQUNDLFVBQVVDO3dCQUMzQixNQUFNQyxhQUFhQyxLQUFLQyxLQUFLLENBQUNILFFBQVEsS0FBSzt3QkFDM0MsTUFBTUksY0FBY0osUUFBUSxNQUFNO3dCQUVsQyxxQkFDRSxzQkFBQ0w7NEJBRUNDLFdBQVcsQ0FBQywrRUFBK0UsRUFDekZILHNCQUFzQk8sUUFDbEIsZ0ZBQ0EsMkNBQ0o7NEJBQ0ZLLFNBQVMsSUFBTVgsYUFBYU07O2dDQUczQkksNkJBQ0Msc0JBQUNFO29DQUFLVixXQUFVOzt3Q0FDYks7d0NBQVc7OztnQ0FHZixDQUFDRyw2QkFBZSxxQkFBQ0U7b0NBQUtWLFdBQVU7OzhDQUdqQyxxQkFBQ1U7b0NBQUtWLFdBQVU7OENBQ2JHLFNBQVNRLElBQUksQ0FBQ0MsR0FBRzs7Z0NBSW5CVCxTQUFTWCxjQUFjLGtCQUN0QixxQkFBQ2tCO29DQUNDVixXQUFXLENBQUMsK0NBQStDLEVBQUVULHVCQUF1QlksU0FBU1gsY0FBYyxHQUFHOzhDQUU3R0Msd0JBQXdCVSxTQUFTWCxjQUFjOzs4Q0FLcEQscUJBQUNrQjtvQ0FBS1YsV0FBVTs4Q0FDYkcsU0FBU1UsVUFBVSxLQUFLQyxZQUNyQlgsU0FBU1UsVUFBVSxHQUFHLElBQ3BCLENBQUMsQ0FBQyxFQUFFVixTQUFTVSxVQUFVLENBQUNFLE9BQU8sQ0FBQyxJQUFJLEdBQ3BDWixTQUFTVSxVQUFVLENBQUNFLE9BQU8sQ0FBQyxLQUM5Qjs7OzJCQXBDRFg7b0JBd0NYOzs7OztBQUtWO0FBR0ZkLGFBQWEwQixXQUFXLEdBQUcifQ==