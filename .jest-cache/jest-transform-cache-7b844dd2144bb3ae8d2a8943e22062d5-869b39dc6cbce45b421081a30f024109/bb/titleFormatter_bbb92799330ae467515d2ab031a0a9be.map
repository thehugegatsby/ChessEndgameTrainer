{"version":3,"sources":["/home/thehu/coolProjects/EndgameTrainer-training-board-complete/src/shared/utils/titleFormatter.ts"],"sourcesContent":["/**\n * @file Title formatting utilities for chess positions\n * @module utils/titleFormatter\n *\n * @description\n * Provides specialized formatting for chess endgame position titles,\n * with custom handling for specific position types like Brückenbau\n * (bridge-building) positions and progress indicators.\n *\n * @remarks\n * Key features:\n * - Special formatting for Brückenbau positions (X/Y numbering)\n * - Title truncation for navigation elements\n * - Progress indicators for training sessions\n * - Category-based formatting rules\n *\n * The module ensures consistent title display across the application\n * while handling edge cases and special position types.\n */\n\nimport { EndgamePosition } from \"@shared/types\";\n\n/**\n * Formats position titles according to UI requirements\n *\n * @param {EndgamePosition} position - The endgame position to format\n * @param {number} [totalPositions] - Total positions in the category (for numbering)\n * @returns {string} Formatted position title\n *\n * @description\n * Applies special formatting rules based on position type:\n * - Brückenbau positions: \"Brückenbau X/Y\" format\n * - Other positions: Use original title unchanged\n *\n * @example\n * ```typescript\n * // Brückenbau position\n * formatPositionTitle({ title: 'Brückenbau', id: 3 }, 10);\n * // Returns: \"Brückenbau 3/10\"\n *\n * // Regular position\n * formatPositionTitle({ title: 'Rook vs Pawn', id: 1 });\n * // Returns: \"Rook vs Pawn\"\n * ```\n *\n * @remarks\n * Brückenbau (bridge-building) is a specific rook endgame technique\n * that requires sequential learning, hence the special numbering.\n */\nexport function formatPositionTitle(\n  position: EndgamePosition,\n  totalPositions?: number,\n): string {\n  const { title, id, category } = position;\n\n  // Handle Brückenbau positions with special formatting\n  if (title === \"Brückenbau\" || title.toLowerCase().includes(\"brückenbau\")) {\n    if (totalPositions) {\n      return `Brückenbau ${id}/${totalPositions}`;\n    }\n    // Fallback if no total is provided\n    return `Brückenbau ${id}`;\n  }\n\n  // Handle other position types that might need special formatting\n  if (category === \"rook-pawn\" && title === \"Brückenbau\") {\n    // Ensure rook-pawn Brückenbau positions get proper numbering\n    return totalPositions\n      ? `Brückenbau ${id}/${totalPositions}`\n      : `Brückenbau ${id}`;\n  }\n\n  // For all other positions, return the original title\n  return title;\n}\n\n/**\n * Gets a short version of the title for navigation elements\n *\n * @param {EndgamePosition} position - The endgame position\n * @returns {string} Shortened title suitable for navigation\n *\n * @description\n * Creates concise titles for UI elements with limited space.\n * Preserves full Brückenbau titles due to their importance,\n * but truncates other long titles to fit navigation constraints.\n *\n * @example\n * ```typescript\n * getShortTitle({ title: 'Brückenbau', id: 5 });\n * // Returns: \"Brückenbau 5\" (kept full)\n *\n * getShortTitle({ title: 'King and Pawn vs King Endgame Fundamentals' });\n * // Returns: \"King and Pawn vs King End...\" (truncated)\n * ```\n *\n * @remarks\n * Maximum length is 30 characters before truncation.\n * Ellipsis (...) is added to indicate truncation.\n */\nexport function getShortTitle(position: EndgamePosition): string {\n  const formatted = formatPositionTitle(position);\n\n  // For Brückenbau, keep the full formatted title as it's already concise\n  if (formatted.includes(\"Brückenbau\")) {\n    return formatted;\n  }\n\n  // For other long titles, truncate if needed\n  if (formatted.length > 30) {\n    return formatted.substring(0, 27) + \"...\";\n  }\n\n  return formatted;\n}\n\n/**\n * Gets the display title for the current training session\n *\n * @param {EndgamePosition} position - The current training position\n * @param {number} [moveCount] - Number of moves played (kept for compatibility, not used)\n * @param {number} [totalPositions] - Total positions in the category\n * @returns {string} Training session title\n *\n * @description\n * Creates titles for active training sessions showing position\n * information and progress through multiple positions.\n *\n * @example\n * ```typescript\n * // Single position\n * getTrainingDisplayTitle(position);\n * // Returns: \"Brückenbau\"\n *\n * // Multiple positions\n * getTrainingDisplayTitle(position, 8, 10);\n * // Returns: \"Brückenbau 3/10\"\n * ```\n *\n * @remarks\n * The moveCount parameter is kept for backwards compatibility but\n * is no longer used. Previously showed move progress indicators.\n */\nexport function getTrainingDisplayTitle(\n  position: EndgamePosition,\n  _moveCount?: number,\n  totalPositions?: number,\n): string {\n  const baseTitle = formatPositionTitle(position, totalPositions);\n\n  // Simply return the base title without move indicators\n  return baseTitle;\n}\n"],"names":["formatPositionTitle","getShortTitle","getTrainingDisplayTitle","position","totalPositions","title","id","category","toLowerCase","includes","formatted","length","substring","_moveCount","baseTitle"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;CAkBC;;;;;;;;;;;QA+BeA;eAAAA;;QAmDAC;eAAAA;;QA2CAC;eAAAA;;;AA9FT,SAASF,oBACdG,QAAyB,EACzBC,cAAuB;IAEvB,MAAM,EAAEC,KAAK,EAAEC,EAAE,EAAEC,QAAQ,EAAE,GAAGJ;IAEhC,sDAAsD;IACtD,IAAIE,UAAU,gBAAgBA,MAAMG,WAAW,GAAGC,QAAQ,CAAC,eAAe;QACxE,IAAIL,gBAAgB;YAClB,OAAO,CAAC,WAAW,EAAEE,GAAG,CAAC,EAAEF,gBAAgB;QAC7C;QACA,mCAAmC;QACnC,OAAO,CAAC,WAAW,EAAEE,IAAI;IAC3B;IAEA,iEAAiE;IACjE,IAAIC,aAAa,eAAeF,UAAU,cAAc;QACtD,6DAA6D;QAC7D,OAAOD,iBACH,CAAC,WAAW,EAAEE,GAAG,CAAC,EAAEF,gBAAgB,GACpC,CAAC,WAAW,EAAEE,IAAI;IACxB;IAEA,qDAAqD;IACrD,OAAOD;AACT;AA0BO,SAASJ,cAAcE,QAAyB;IACrD,MAAMO,YAAYV,oBAAoBG;IAEtC,wEAAwE;IACxE,IAAIO,UAAUD,QAAQ,CAAC,eAAe;QACpC,OAAOC;IACT;IAEA,4CAA4C;IAC5C,IAAIA,UAAUC,MAAM,GAAG,IAAI;QACzB,OAAOD,UAAUE,SAAS,CAAC,GAAG,MAAM;IACtC;IAEA,OAAOF;AACT;AA6BO,SAASR,wBACdC,QAAyB,EACzBU,UAAmB,EACnBT,cAAuB;IAEvB,MAAMU,YAAYd,oBAAoBG,UAAUC;IAEhD,uDAAuD;IACvD,OAAOU;AACT"}