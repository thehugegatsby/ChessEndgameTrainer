7ff7f87fd6f2c86fcb6ec0120d3a48a1
/**
 * @file Progress store hooks
 * @module store/hooks/useProgressStore
 * 
 * @description
 * Performance-optimized hooks for accessing progress state and actions.
 * Implements the three-hook pattern for optimal re-render prevention.
 * 
 * @example
 * ```typescript
 * // Use only state (component re-renders when state changes)
 * const { userStats, syncStatus } = useProgressState();
 * 
 * // Use only actions (component NEVER re-renders)
 * const actions = useProgressActions();
 * actions.updateSessionProgress({ positionsCompleted: 1 });
 * 
 * // Use both state and actions
 * const [state, actions] = useProgressStore();
 * ```
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get useDerivedProgress () {
        return useDerivedProgress;
    },
    get useDueCardsCache () {
        return useDueCardsCache;
    },
    get useProgressActions () {
        return useProgressActions;
    },
    get useProgressState () {
        return useProgressState;
    },
    get useProgressStore () {
        return useProgressStore;
    }
});
const _rootStore = require("../rootStore");
const _shallow = require("zustand/react/shallow");
const _SpacedRepetitionService = require("../../services/SpacedRepetitionService");
const _react = require("react");
const _DueCardsCacheService = require("../../services/DueCardsCacheService");
const _progress = require("../../types/progress");
const _Logger = require("../../services/logging/Logger");
const useProgressState = ()=>{
    return (0, _rootStore.useStore)((0, _shallow.useShallow)((state)=>({
            userStats: state.progress.userStats,
            sessionProgress: state.progress.sessionProgress,
            cardProgress: state.progress.cardProgress,
            loading: state.progress.loading,
            syncStatus: state.progress.syncStatus,
            lastSync: state.progress.lastSync,
            syncError: state.progress.syncError
        })));
};
const useProgressActions = ()=>{
    return (0, _rootStore.useStore)((0, _shallow.useShallow)((state)=>({
            // Synchronous actions
            setUserStats: state.progress.setUserStats,
            updateSessionProgress: state.progress.updateSessionProgress,
            setLoading: state.progress.setLoading,
            setSyncStatus: state.progress.setSyncStatus,
            setLastSync: state.progress.setLastSync,
            setSyncError: state.progress.setSyncError,
            initializeCards: state.progress.initializeCards,
            recordAttempt: state.progress.recordAttempt,
            resetCardProgress: state.progress.resetCardProgress,
            setCardProgress: state.progress.setCardProgress,
            batchUpdateProgress: state.progress.batchUpdateProgress,
            resetProgress: state.progress.resetProgress,
            // Async Firebase actions
            loadUserProgress: state.progress.loadUserProgress,
            saveUserStats: state.progress.saveUserStats,
            saveCardProgress: state.progress.saveCardProgress,
            saveSessionComplete: state.progress.saveSessionComplete,
            getDueCards: state.progress.getDueCards,
            syncAllProgress: state.progress.syncAllProgress
        })));
};
const useProgressStore = ()=>{
    const state = useProgressState();
    const actions = useProgressActions();
    return [
        state,
        actions
    ];
};
const useDerivedProgress = (userId = null)=>{
    const logger = (0, _react.useMemo)(()=>(0, _Logger.getLogger)().setContext('useDerivedProgress'), []);
    // Get stable state values
    const cardProgress = (0, _rootStore.useStore)((0, _shallow.useShallow)((state)=>state.progress.cardProgress));
    const sessionProgress = (0, _rootStore.useStore)((0, _shallow.useShallow)((state)=>state.progress.sessionProgress));
    return (0, _react.useMemo)(()=>{
        const now = Date.now();
        const allCards = Object.values(cardProgress);
        // Calculate session success rate (always computed fresh)
        const { positionsCorrect, positionsAttempted } = sessionProgress;
        const successRate = positionsAttempted > 0 ? positionsCorrect / positionsAttempted * 100 : 0;
        // If no userId provided, fall back to direct computation
        if (!userId) {
            logger.debug('No userId provided, using direct computation');
            const dueCards = (0, _SpacedRepetitionService.getDueCardsFromMap)(cardProgress, now);
            return {
                dueCardCount: dueCards.length,
                dueCards,
                successRate,
                totalCards: allCards.length,
                isFromCache: false,
                cacheStats: {
                    available: false,
                    totalEntries: 0,
                    estimatedSize: 0,
                    lastCleanup: null
                }
            };
        }
        // Create input hash for cache validation
        const inputHash = (0, _DueCardsCacheService.createInputHash)({
            userId,
            cardCount: allCards.length,
            cardIds: allCards.map((c)=>c.id).sort(),
            timestamp: Math.floor(now / (5 * 60 * 1000)) * (5 * 60 * 1000 // 5-minute buckets
            )
        });
        // Try to get cached result
        const cachedResult = _DueCardsCacheService.dueCardsCacheService.getDueCards(userId, inputHash);
        if (cachedResult) {
            logger.debug('Cache hit for due cards calculation', {
                userId,
                dueCount: cachedResult.dueCards.length,
                cacheAge: now - cachedResult.calculatedAt
            });
            return {
                dueCardCount: cachedResult.dueCards.length,
                dueCards: cachedResult.dueCards,
                successRate,
                totalCards: allCards.length,
                isFromCache: true,
                cacheStats: _DueCardsCacheService.dueCardsCacheService.getCacheStats(),
                stats: cachedResult.stats
            };
        }
        // Cache miss: compute fresh and cache result
        logger.debug('Cache miss, computing fresh due cards', {
            userId,
            cardCount: allCards.length
        });
        const dueCards = (0, _progress.filterDueCards)(allCards, now);
        const stats = (0, _progress.calculateDueCardsStats)(allCards, dueCards, now);
        // Cache the result for future use
        try {
            _DueCardsCacheService.dueCardsCacheService.setDueCards(userId, dueCards, stats, inputHash);
            logger.debug('Cached due cards calculation result', {
                userId,
                dueCount: dueCards.length
            });
        } catch (error) {
            logger.warn('Failed to cache due cards result', {
                userId,
                error: error.message
            });
        }
        return {
            dueCardCount: dueCards.length,
            dueCards,
            successRate,
            totalCards: allCards.length,
            isFromCache: false,
            cacheStats: _DueCardsCacheService.dueCardsCacheService.getCacheStats(),
            stats
        };
    }, [
        cardProgress,
        sessionProgress,
        userId,
        logger
    ]);
};
const useDueCardsCache = ()=>{
    return (0, _react.useMemo)(()=>({
            clearUserCache: (userId)=>_DueCardsCacheService.dueCardsCacheService.clearUserCache(userId),
            clearAllCache: ()=>_DueCardsCacheService.dueCardsCacheService.clearAllCache(),
            getCacheStats: ()=>_DueCardsCacheService.dueCardsCacheService.getCacheStats(),
            forceCleanup: ()=>_DueCardsCacheService.dueCardsCacheService.forceCleanup()
        }), []);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RoZWh1L2Nvb2xQcm9qZWN0cy9FbmRnYW1lVHJhaW5lci10cmFpbmluZy1ib2FyZC1jb21wbGV0ZS9zcmMvc2hhcmVkL3N0b3JlL2hvb2tzL3VzZVByb2dyZXNzU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBQcm9ncmVzcyBzdG9yZSBob29rc1xuICogQG1vZHVsZSBzdG9yZS9ob29rcy91c2VQcm9ncmVzc1N0b3JlXG4gKiBcbiAqIEBkZXNjcmlwdGlvblxuICogUGVyZm9ybWFuY2Utb3B0aW1pemVkIGhvb2tzIGZvciBhY2Nlc3NpbmcgcHJvZ3Jlc3Mgc3RhdGUgYW5kIGFjdGlvbnMuXG4gKiBJbXBsZW1lbnRzIHRoZSB0aHJlZS1ob29rIHBhdHRlcm4gZm9yIG9wdGltYWwgcmUtcmVuZGVyIHByZXZlbnRpb24uXG4gKiBcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBVc2Ugb25seSBzdGF0ZSAoY29tcG9uZW50IHJlLXJlbmRlcnMgd2hlbiBzdGF0ZSBjaGFuZ2VzKVxuICogY29uc3QgeyB1c2VyU3RhdHMsIHN5bmNTdGF0dXMgfSA9IHVzZVByb2dyZXNzU3RhdGUoKTtcbiAqIFxuICogLy8gVXNlIG9ubHkgYWN0aW9ucyAoY29tcG9uZW50IE5FVkVSIHJlLXJlbmRlcnMpXG4gKiBjb25zdCBhY3Rpb25zID0gdXNlUHJvZ3Jlc3NBY3Rpb25zKCk7XG4gKiBhY3Rpb25zLnVwZGF0ZVNlc3Npb25Qcm9ncmVzcyh7IHBvc2l0aW9uc0NvbXBsZXRlZDogMSB9KTtcbiAqIFxuICogLy8gVXNlIGJvdGggc3RhdGUgYW5kIGFjdGlvbnNcbiAqIGNvbnN0IFtzdGF0ZSwgYWN0aW9uc10gPSB1c2VQcm9ncmVzc1N0b3JlKCk7XG4gKiBgYGBcbiAqL1xuXG5pbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJy4uL3Jvb3RTdG9yZSc7XG5pbXBvcnQgeyB1c2VTaGFsbG93IH0gZnJvbSAnenVzdGFuZC9yZWFjdC9zaGFsbG93JztcbmltcG9ydCB0eXBlIHsgUHJvZ3Jlc3NTdGF0ZSwgUHJvZ3Jlc3NBY3Rpb25zIH0gZnJvbSAnLi4vc2xpY2VzL3R5cGVzJztcbmltcG9ydCB7IGdldER1ZUNhcmRzRnJvbU1hcCB9IGZyb20gJ0BzaGFyZWQvc2VydmljZXMvU3BhY2VkUmVwZXRpdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGR1ZUNhcmRzQ2FjaGVTZXJ2aWNlLCBjcmVhdGVJbnB1dEhhc2ggfSBmcm9tICdAc2hhcmVkL3NlcnZpY2VzL0R1ZUNhcmRzQ2FjaGVTZXJ2aWNlJztcbmltcG9ydCB7IGZpbHRlckR1ZUNhcmRzLCBjYWxjdWxhdGVEdWVDYXJkc1N0YXRzIH0gZnJvbSAnQHNoYXJlZC90eXBlcy9wcm9ncmVzcyc7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAc2hhcmVkL3NlcnZpY2VzL2xvZ2dpbmcvTG9nZ2VyJztcblxuLyoqXG4gKiBIb29rIGZvciBhY2Nlc3NpbmcgcHJvZ3Jlc3Mgc3RhdGUgd2l0aCBzaGFsbG93IGVxdWFsaXR5IGNoZWNrc1xuICogQ29tcG9uZW50cyB1c2luZyB0aGlzIGhvb2sgd2lsbCByZS1yZW5kZXIgd2hlbiBzZWxlY3RlZCBzdGF0ZSBjaGFuZ2VzXG4gKiBcbiAqIEByZXR1cm5zIHtQcm9ncmVzc1N0YXRlfSBDdXJyZW50IHByb2dyZXNzIHN0YXRlXG4gKiBcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBmdW5jdGlvbiBQcm9ncmVzc1BhbmVsKCkge1xuICogICBjb25zdCB7IHVzZXJTdGF0cywgZHVlQ2FyZENvdW50LCBzeW5jU3RhdHVzIH0gPSB1c2VQcm9ncmVzc1N0YXRlKCk7XG4gKiAgIFxuICogICByZXR1cm4gKFxuICogICAgIDxkaXY+XG4gKiAgICAgICA8cD5EdWUgY2FyZHM6IHtkdWVDYXJkQ291bnR9PC9wPlxuICogICAgICAgPHA+U3luYyBzdGF0dXM6IHtzeW5jU3RhdHVzfTwvcD5cbiAqICAgICA8L2Rpdj5cbiAqICAgKTtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgdXNlUHJvZ3Jlc3NTdGF0ZSA9ICgpOiBQcm9ncmVzc1N0YXRlID0+IHtcbiAgcmV0dXJuIHVzZVN0b3JlKFxuICAgIHVzZVNoYWxsb3coKHN0YXRlKSA9PiAoe1xuICAgICAgdXNlclN0YXRzOiBzdGF0ZS5wcm9ncmVzcy51c2VyU3RhdHMsXG4gICAgICBzZXNzaW9uUHJvZ3Jlc3M6IHN0YXRlLnByb2dyZXNzLnNlc3Npb25Qcm9ncmVzcyxcbiAgICAgIGNhcmRQcm9ncmVzczogc3RhdGUucHJvZ3Jlc3MuY2FyZFByb2dyZXNzLFxuICAgICAgbG9hZGluZzogc3RhdGUucHJvZ3Jlc3MubG9hZGluZyxcbiAgICAgIHN5bmNTdGF0dXM6IHN0YXRlLnByb2dyZXNzLnN5bmNTdGF0dXMsXG4gICAgICBsYXN0U3luYzogc3RhdGUucHJvZ3Jlc3MubGFzdFN5bmMsXG4gICAgICBzeW5jRXJyb3I6IHN0YXRlLnByb2dyZXNzLnN5bmNFcnJvcixcbiAgICB9KSlcbiAgKTtcbn07XG5cbi8qKlxuICogSG9vayBmb3IgYWNjZXNzaW5nIHByb2dyZXNzIGFjdGlvbnMgd2l0aG91dCBjYXVzaW5nIHJlLXJlbmRlcnNcbiAqIENvbXBvbmVudHMgdXNpbmcgdGhpcyBob29rIHdpbGwgTkVWRVIgcmUtcmVuZGVyXG4gKiBcbiAqIEByZXR1cm5zIHtQcm9ncmVzc0FjdGlvbnN9IFByb2dyZXNzIGFjdGlvbiBmdW5jdGlvbnNcbiAqIFxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGZ1bmN0aW9uIFNhdmVCdXR0b24oKSB7XG4gKiAgIGNvbnN0IGFjdGlvbnMgPSB1c2VQcm9ncmVzc0FjdGlvbnMoKTtcbiAqICAgXG4gKiAgIGNvbnN0IGhhbmRsZVNhdmUgPSAoKSA9PiB7XG4gKiAgICAgYWN0aW9ucy5zZXRTeW5jU3RhdHVzKCdzeW5jaW5nJyk7XG4gKiAgICAgLy8gLi4uIHBlcmZvcm0gc2F2ZVxuICogICAgIGFjdGlvbnMuc2V0U3luY1N0YXR1cygnaWRsZScpO1xuICogICB9O1xuICogICBcbiAqICAgcmV0dXJuIDxidXR0b24gb25DbGljaz17aGFuZGxlU2F2ZX0+U2F2ZSBQcm9ncmVzczwvYnV0dG9uPjtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgdXNlUHJvZ3Jlc3NBY3Rpb25zID0gKCk6IFByb2dyZXNzQWN0aW9ucyA9PiB7XG4gIHJldHVybiB1c2VTdG9yZShcbiAgICB1c2VTaGFsbG93KChzdGF0ZSkgPT4gKHtcbiAgICAgIC8vIFN5bmNocm9ub3VzIGFjdGlvbnNcbiAgICAgIHNldFVzZXJTdGF0czogc3RhdGUucHJvZ3Jlc3Muc2V0VXNlclN0YXRzLFxuICAgICAgdXBkYXRlU2Vzc2lvblByb2dyZXNzOiBzdGF0ZS5wcm9ncmVzcy51cGRhdGVTZXNzaW9uUHJvZ3Jlc3MsXG4gICAgICBzZXRMb2FkaW5nOiBzdGF0ZS5wcm9ncmVzcy5zZXRMb2FkaW5nLFxuICAgICAgc2V0U3luY1N0YXR1czogc3RhdGUucHJvZ3Jlc3Muc2V0U3luY1N0YXR1cyxcbiAgICAgIHNldExhc3RTeW5jOiBzdGF0ZS5wcm9ncmVzcy5zZXRMYXN0U3luYyxcbiAgICAgIHNldFN5bmNFcnJvcjogc3RhdGUucHJvZ3Jlc3Muc2V0U3luY0Vycm9yLFxuICAgICAgaW5pdGlhbGl6ZUNhcmRzOiBzdGF0ZS5wcm9ncmVzcy5pbml0aWFsaXplQ2FyZHMsXG4gICAgICByZWNvcmRBdHRlbXB0OiBzdGF0ZS5wcm9ncmVzcy5yZWNvcmRBdHRlbXB0LFxuICAgICAgcmVzZXRDYXJkUHJvZ3Jlc3M6IHN0YXRlLnByb2dyZXNzLnJlc2V0Q2FyZFByb2dyZXNzLFxuICAgICAgc2V0Q2FyZFByb2dyZXNzOiBzdGF0ZS5wcm9ncmVzcy5zZXRDYXJkUHJvZ3Jlc3MsXG4gICAgICBiYXRjaFVwZGF0ZVByb2dyZXNzOiBzdGF0ZS5wcm9ncmVzcy5iYXRjaFVwZGF0ZVByb2dyZXNzLFxuICAgICAgcmVzZXRQcm9ncmVzczogc3RhdGUucHJvZ3Jlc3MucmVzZXRQcm9ncmVzcyxcbiAgICAgIFxuICAgICAgLy8gQXN5bmMgRmlyZWJhc2UgYWN0aW9uc1xuICAgICAgbG9hZFVzZXJQcm9ncmVzczogc3RhdGUucHJvZ3Jlc3MubG9hZFVzZXJQcm9ncmVzcyxcbiAgICAgIHNhdmVVc2VyU3RhdHM6IHN0YXRlLnByb2dyZXNzLnNhdmVVc2VyU3RhdHMsXG4gICAgICBzYXZlQ2FyZFByb2dyZXNzOiBzdGF0ZS5wcm9ncmVzcy5zYXZlQ2FyZFByb2dyZXNzLFxuICAgICAgc2F2ZVNlc3Npb25Db21wbGV0ZTogc3RhdGUucHJvZ3Jlc3Muc2F2ZVNlc3Npb25Db21wbGV0ZSxcbiAgICAgIGdldER1ZUNhcmRzOiBzdGF0ZS5wcm9ncmVzcy5nZXREdWVDYXJkcyxcbiAgICAgIHN5bmNBbGxQcm9ncmVzczogc3RhdGUucHJvZ3Jlc3Muc3luY0FsbFByb2dyZXNzLFxuICAgIH0pKVxuICApO1xufTtcblxuLyoqXG4gKiBDb21iaW5lZCBob29rIGZvciBhY2Nlc3NpbmcgYm90aCBwcm9ncmVzcyBzdGF0ZSBhbmQgYWN0aW9uc1xuICogQ29udmVuaWVudCBmb3IgY29tcG9uZW50cyB0aGF0IG5lZWQgYm90aFxuICogXG4gKiBAcmV0dXJucyB7W1Byb2dyZXNzU3RhdGUsIFByb2dyZXNzQWN0aW9uc119IFR1cGxlIG9mIHN0YXRlIGFuZCBhY3Rpb25zXG4gKiBcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBmdW5jdGlvbiBQcm9ncmVzc01hbmFnZXIoKSB7XG4gKiAgIGNvbnN0IFtzdGF0ZSwgYWN0aW9uc10gPSB1c2VQcm9ncmVzc1N0b3JlKCk7XG4gKiAgIFxuICogICB1c2VFZmZlY3QoKCkgPT4ge1xuICogICAgIGlmIChzdGF0ZS5zeW5jU3RhdHVzID09PSAnZXJyb3InKSB7XG4gKiAgICAgICBhY3Rpb25zLnNldFN5bmNTdGF0dXMoJ2lkbGUnKTtcbiAqICAgICAgIC8vIFJldHJ5IGxvZ2ljLi4uXG4gKiAgICAgfVxuICogICB9LCBbc3RhdGUuc3luY1N0YXR1c10pO1xuICogICBcbiAqICAgcmV0dXJuIChcbiAqICAgICA8ZGl2PlxuICogICAgICAgPHA+VG90YWwgcG9zaXRpb25zOiB7c3RhdGUudXNlclN0YXRzPy50b3RhbFBvc2l0aW9ucyA/PyAwfTwvcD5cbiAqICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gYWN0aW9ucy5yZXNldFByb2dyZXNzKCl9PlxuICogICAgICAgICBSZXNldCBQcm9ncmVzc1xuICogICAgICAgPC9idXR0b24+XG4gKiAgICAgPC9kaXY+XG4gKiAgICk7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZVByb2dyZXNzU3RvcmUgPSAoKTogW1Byb2dyZXNzU3RhdGUsIFByb2dyZXNzQWN0aW9uc10gPT4ge1xuICBjb25zdCBzdGF0ZSA9IHVzZVByb2dyZXNzU3RhdGUoKTtcbiAgY29uc3QgYWN0aW9ucyA9IHVzZVByb2dyZXNzQWN0aW9ucygpO1xuICByZXR1cm4gW3N0YXRlLCBhY3Rpb25zXTtcbn07XG5cbi8qKlxuICogRW5oYW5jZWQgaG9vayBmb3IgYWNjZXNzaW5nIGRlcml2ZWQgcHJvZ3Jlc3MgdmFsdWVzIHdpdGggY2FjaGUtZmlyc3Qgc3RyYXRlZ3lcbiAqIFxuICogRmVhdHVyZXM6XG4gKiAtIENhY2hlLWZpcnN0IGR1ZSBjYXJkcyBjYWxjdWxhdGlvbiB3aXRoIGxvY2FsU3RvcmFnZSBwZXJzaXN0ZW5jZVxuICogLSAyNGggVFRMIHdpdGggVVRDIG1pZG5pZ2h0IGludmFsaWRhdGlvblxuICogLSBQZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24gZm9yIGxhcmdlIGNhcmQgY29sbGVjdGlvbnMgKD41MDAgY2FyZHMpXG4gKiAtIEdyYWNlZnVsIGZhbGxiYWNrIHRvIGRpcmVjdCBjb21wdXRhdGlvbiBvbiBjYWNoZSBtaXNzXG4gKiAtIENhY2hlIHN0YXRpc3RpY3MgZm9yIG1vbml0b3JpbmdcbiAqIFxuICogQHBhcmFtIHVzZXJJZCAtIFVzZXIgaWRlbnRpZmllciBmb3IgY2FjaGUgaXNvbGF0aW9uIChyZXF1aXJlZClcbiAqIEByZXR1cm5zIERlcml2ZWQgcHJvZ3Jlc3MgdmFsdWVzIHdpdGggY2FjaGUgaW5mb3JtYXRpb25cbiAqIFxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGZ1bmN0aW9uIER1ZUNhcmRzUGFuZWwoeyB1c2VySWQgfTogeyB1c2VySWQ6IHN0cmluZyB9KSB7XG4gKiAgIGNvbnN0IHsgXG4gKiAgICAgZHVlQ2FyZENvdW50LCBcbiAqICAgICBkdWVDYXJkcywgXG4gKiAgICAgc3VjY2Vzc1JhdGUsIFxuICogICAgIGNhY2hlU3RhdHMsXG4gKiAgICAgaXNGcm9tQ2FjaGUgXG4gKiAgIH0gPSB1c2VEZXJpdmVkUHJvZ3Jlc3ModXNlcklkKTtcbiAqICAgXG4gKiAgIHJldHVybiAoXG4gKiAgICAgPGRpdj5cbiAqICAgICAgIDxoMj5EdWUgZm9yIHJldmlldzoge2R1ZUNhcmRDb3VudH08L2gyPlxuICogICAgICAgPHA+U3VjY2VzcyByYXRlOiB7c3VjY2Vzc1JhdGUudG9GaXhlZCgxKX0lPC9wPlxuICogICAgICAge2lzRnJvbUNhY2hlICYmIDxzbWFsbD7wn5OLIENhY2hlZCByZXN1bHQ8L3NtYWxsPn1cbiAqICAgICA8L2Rpdj5cbiAqICAgKTtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgdXNlRGVyaXZlZFByb2dyZXNzID0gKHVzZXJJZDogc3RyaW5nIHwgbnVsbCA9IG51bGwpID0+IHtcbiAgY29uc3QgbG9nZ2VyID0gdXNlTWVtbygoKSA9PiBnZXRMb2dnZXIoKS5zZXRDb250ZXh0KCd1c2VEZXJpdmVkUHJvZ3Jlc3MnKSwgW10pO1xuXG4gIC8vIEdldCBzdGFibGUgc3RhdGUgdmFsdWVzXG4gIGNvbnN0IGNhcmRQcm9ncmVzcyA9IHVzZVN0b3JlKHVzZVNoYWxsb3coKHN0YXRlKSA9PiBzdGF0ZS5wcm9ncmVzcy5jYXJkUHJvZ3Jlc3MpKTtcbiAgY29uc3Qgc2Vzc2lvblByb2dyZXNzID0gdXNlU3RvcmUodXNlU2hhbGxvdygoc3RhdGUpID0+IHN0YXRlLnByb2dyZXNzLnNlc3Npb25Qcm9ncmVzcykpO1xuXG4gIHJldHVybiB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGFsbENhcmRzID0gT2JqZWN0LnZhbHVlcyhjYXJkUHJvZ3Jlc3MpO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBzZXNzaW9uIHN1Y2Nlc3MgcmF0ZSAoYWx3YXlzIGNvbXB1dGVkIGZyZXNoKVxuICAgIGNvbnN0IHsgcG9zaXRpb25zQ29ycmVjdCwgcG9zaXRpb25zQXR0ZW1wdGVkIH0gPSBzZXNzaW9uUHJvZ3Jlc3M7XG4gICAgY29uc3Qgc3VjY2Vzc1JhdGUgPSBwb3NpdGlvbnNBdHRlbXB0ZWQgPiAwIFxuICAgICAgPyAocG9zaXRpb25zQ29ycmVjdCAvIHBvc2l0aW9uc0F0dGVtcHRlZCkgKiAxMDAgXG4gICAgICA6IDA7XG5cbiAgICAvLyBJZiBubyB1c2VySWQgcHJvdmlkZWQsIGZhbGwgYmFjayB0byBkaXJlY3QgY29tcHV0YXRpb25cbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdObyB1c2VySWQgcHJvdmlkZWQsIHVzaW5nIGRpcmVjdCBjb21wdXRhdGlvbicpO1xuICAgICAgY29uc3QgZHVlQ2FyZHMgPSBnZXREdWVDYXJkc0Zyb21NYXAoY2FyZFByb2dyZXNzLCBub3cpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkdWVDYXJkQ291bnQ6IGR1ZUNhcmRzLmxlbmd0aCxcbiAgICAgICAgZHVlQ2FyZHMsXG4gICAgICAgIHN1Y2Nlc3NSYXRlLFxuICAgICAgICB0b3RhbENhcmRzOiBhbGxDYXJkcy5sZW5ndGgsXG4gICAgICAgIGlzRnJvbUNhY2hlOiBmYWxzZSxcbiAgICAgICAgY2FjaGVTdGF0czogeyBhdmFpbGFibGU6IGZhbHNlLCB0b3RhbEVudHJpZXM6IDAsIGVzdGltYXRlZFNpemU6IDAsIGxhc3RDbGVhbnVwOiBudWxsIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGlucHV0IGhhc2ggZm9yIGNhY2hlIHZhbGlkYXRpb25cbiAgICBjb25zdCBpbnB1dEhhc2ggPSBjcmVhdGVJbnB1dEhhc2goe1xuICAgICAgdXNlcklkLFxuICAgICAgY2FyZENvdW50OiBhbGxDYXJkcy5sZW5ndGgsXG4gICAgICBjYXJkSWRzOiBhbGxDYXJkcy5tYXAoYyA9PiBjLmlkKS5zb3J0KCksIC8vIFNvcnRlZCBmb3IgY29uc2lzdGVuY3lcbiAgICAgIHRpbWVzdGFtcDogTWF0aC5mbG9vcihub3cgLyAoNSAqIDYwICogMTAwMCkpICogKDUgKiA2MCAqIDEwMDApIC8vIDUtbWludXRlIGJ1Y2tldHNcbiAgICB9KTtcblxuICAgIC8vIFRyeSB0byBnZXQgY2FjaGVkIHJlc3VsdFxuICAgIGNvbnN0IGNhY2hlZFJlc3VsdCA9IGR1ZUNhcmRzQ2FjaGVTZXJ2aWNlLmdldER1ZUNhcmRzKHVzZXJJZCwgaW5wdXRIYXNoKTtcbiAgICBcbiAgICBpZiAoY2FjaGVkUmVzdWx0KSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ0NhY2hlIGhpdCBmb3IgZHVlIGNhcmRzIGNhbGN1bGF0aW9uJywgeyBcbiAgICAgICAgdXNlcklkLCBcbiAgICAgICAgZHVlQ291bnQ6IGNhY2hlZFJlc3VsdC5kdWVDYXJkcy5sZW5ndGgsXG4gICAgICAgIGNhY2hlQWdlOiBub3cgLSBjYWNoZWRSZXN1bHQuY2FsY3VsYXRlZEF0XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZHVlQ2FyZENvdW50OiBjYWNoZWRSZXN1bHQuZHVlQ2FyZHMubGVuZ3RoLFxuICAgICAgICBkdWVDYXJkczogY2FjaGVkUmVzdWx0LmR1ZUNhcmRzLFxuICAgICAgICBzdWNjZXNzUmF0ZSxcbiAgICAgICAgdG90YWxDYXJkczogYWxsQ2FyZHMubGVuZ3RoLFxuICAgICAgICBpc0Zyb21DYWNoZTogdHJ1ZSxcbiAgICAgICAgY2FjaGVTdGF0czogZHVlQ2FyZHNDYWNoZVNlcnZpY2UuZ2V0Q2FjaGVTdGF0cygpLFxuICAgICAgICBzdGF0czogY2FjaGVkUmVzdWx0LnN0YXRzXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIENhY2hlIG1pc3M6IGNvbXB1dGUgZnJlc2ggYW5kIGNhY2hlIHJlc3VsdFxuICAgIGxvZ2dlci5kZWJ1ZygnQ2FjaGUgbWlzcywgY29tcHV0aW5nIGZyZXNoIGR1ZSBjYXJkcycsIHsgdXNlcklkLCBjYXJkQ291bnQ6IGFsbENhcmRzLmxlbmd0aCB9KTtcbiAgICBcbiAgICBjb25zdCBkdWVDYXJkcyA9IGZpbHRlckR1ZUNhcmRzKGFsbENhcmRzLCBub3cpO1xuICAgIGNvbnN0IHN0YXRzID0gY2FsY3VsYXRlRHVlQ2FyZHNTdGF0cyhhbGxDYXJkcywgZHVlQ2FyZHMsIG5vdyk7XG4gICAgXG4gICAgLy8gQ2FjaGUgdGhlIHJlc3VsdCBmb3IgZnV0dXJlIHVzZVxuICAgIHRyeSB7XG4gICAgICBkdWVDYXJkc0NhY2hlU2VydmljZS5zZXREdWVDYXJkcyh1c2VySWQsIGR1ZUNhcmRzLCBzdGF0cywgaW5wdXRIYXNoKTtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnQ2FjaGVkIGR1ZSBjYXJkcyBjYWxjdWxhdGlvbiByZXN1bHQnLCB7IFxuICAgICAgICB1c2VySWQsIFxuICAgICAgICBkdWVDb3VudDogZHVlQ2FyZHMubGVuZ3RoIFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdGYWlsZWQgdG8gY2FjaGUgZHVlIGNhcmRzIHJlc3VsdCcsIHsgXG4gICAgICAgIHVzZXJJZCwgXG4gICAgICAgIGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZHVlQ2FyZENvdW50OiBkdWVDYXJkcy5sZW5ndGgsXG4gICAgICBkdWVDYXJkcyxcbiAgICAgIHN1Y2Nlc3NSYXRlLFxuICAgICAgdG90YWxDYXJkczogYWxsQ2FyZHMubGVuZ3RoLFxuICAgICAgaXNGcm9tQ2FjaGU6IGZhbHNlLFxuICAgICAgY2FjaGVTdGF0czogZHVlQ2FyZHNDYWNoZVNlcnZpY2UuZ2V0Q2FjaGVTdGF0cygpLFxuICAgICAgc3RhdHNcbiAgICB9O1xuICB9LCBbY2FyZFByb2dyZXNzLCBzZXNzaW9uUHJvZ3Jlc3MsIHVzZXJJZCwgbG9nZ2VyXSk7XG59O1xuXG4vKipcbiAqIENhY2hlIG1hbmFnZW1lbnQgaG9vayBmb3IgZHVlIGNhcmRzIGNhY2hlXG4gKiBQcm92aWRlcyBjYWNoZSBjb250cm9sIGZ1bmN0aW9ucyBmb3IgYWR2YW5jZWQgdXNhZ2VcbiAqIFxuICogQHJldHVybnMgQ2FjaGUgbWFuYWdlbWVudCBmdW5jdGlvbnNcbiAqIFxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGZ1bmN0aW9uIENhY2hlTWFuYWdlcigpIHtcbiAqICAgY29uc3QgeyBjbGVhclVzZXJDYWNoZSwgY2xlYXJBbGxDYWNoZSwgZ2V0Q2FjaGVTdGF0cywgZm9yY2VDbGVhbnVwIH0gPSB1c2VEdWVDYXJkc0NhY2hlKCk7XG4gKiAgIGNvbnN0IHN0YXRzID0gZ2V0Q2FjaGVTdGF0cygpO1xuICogICBcbiAqICAgcmV0dXJuIChcbiAqICAgICA8ZGl2PlxuICogICAgICAgPHA+Q2FjaGUgZW50cmllczoge3N0YXRzLnRvdGFsRW50cmllc308L3A+XG4gKiAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IGNsZWFyQWxsQ2FjaGUoKX0+Q2xlYXIgQWxsIENhY2hlPC9idXR0b24+XG4gKiAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IGZvcmNlQ2xlYW51cCgpfT5Gb3JjZSBDbGVhbnVwPC9idXR0b24+XG4gKiAgICAgPC9kaXY+XG4gKiAgICk7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IHVzZUR1ZUNhcmRzQ2FjaGUgPSAoKSA9PiB7XG4gIHJldHVybiB1c2VNZW1vKCgpID0+ICh7XG4gICAgY2xlYXJVc2VyQ2FjaGU6ICh1c2VySWQ6IHN0cmluZykgPT4gZHVlQ2FyZHNDYWNoZVNlcnZpY2UuY2xlYXJVc2VyQ2FjaGUodXNlcklkKSxcbiAgICBjbGVhckFsbENhY2hlOiAoKSA9PiBkdWVDYXJkc0NhY2hlU2VydmljZS5jbGVhckFsbENhY2hlKCksXG4gICAgZ2V0Q2FjaGVTdGF0czogKCkgPT4gZHVlQ2FyZHNDYWNoZVNlcnZpY2UuZ2V0Q2FjaGVTdGF0cygpLFxuICAgIGZvcmNlQ2xlYW51cDogKCkgPT4gZHVlQ2FyZHNDYWNoZVNlcnZpY2UuZm9yY2VDbGVhbnVwKCksXG4gIH0pLCBbXSk7XG59OyJdLCJuYW1lcyI6WyJ1c2VEZXJpdmVkUHJvZ3Jlc3MiLCJ1c2VEdWVDYXJkc0NhY2hlIiwidXNlUHJvZ3Jlc3NBY3Rpb25zIiwidXNlUHJvZ3Jlc3NTdGF0ZSIsInVzZVByb2dyZXNzU3RvcmUiLCJ1c2VTdG9yZSIsInVzZVNoYWxsb3ciLCJzdGF0ZSIsInVzZXJTdGF0cyIsInByb2dyZXNzIiwic2Vzc2lvblByb2dyZXNzIiwiY2FyZFByb2dyZXNzIiwibG9hZGluZyIsInN5bmNTdGF0dXMiLCJsYXN0U3luYyIsInN5bmNFcnJvciIsInNldFVzZXJTdGF0cyIsInVwZGF0ZVNlc3Npb25Qcm9ncmVzcyIsInNldExvYWRpbmciLCJzZXRTeW5jU3RhdHVzIiwic2V0TGFzdFN5bmMiLCJzZXRTeW5jRXJyb3IiLCJpbml0aWFsaXplQ2FyZHMiLCJyZWNvcmRBdHRlbXB0IiwicmVzZXRDYXJkUHJvZ3Jlc3MiLCJzZXRDYXJkUHJvZ3Jlc3MiLCJiYXRjaFVwZGF0ZVByb2dyZXNzIiwicmVzZXRQcm9ncmVzcyIsImxvYWRVc2VyUHJvZ3Jlc3MiLCJzYXZlVXNlclN0YXRzIiwic2F2ZUNhcmRQcm9ncmVzcyIsInNhdmVTZXNzaW9uQ29tcGxldGUiLCJnZXREdWVDYXJkcyIsInN5bmNBbGxQcm9ncmVzcyIsImFjdGlvbnMiLCJ1c2VySWQiLCJsb2dnZXIiLCJ1c2VNZW1vIiwiZ2V0TG9nZ2VyIiwic2V0Q29udGV4dCIsIm5vdyIsIkRhdGUiLCJhbGxDYXJkcyIsIk9iamVjdCIsInZhbHVlcyIsInBvc2l0aW9uc0NvcnJlY3QiLCJwb3NpdGlvbnNBdHRlbXB0ZWQiLCJzdWNjZXNzUmF0ZSIsImRlYnVnIiwiZHVlQ2FyZHMiLCJnZXREdWVDYXJkc0Zyb21NYXAiLCJkdWVDYXJkQ291bnQiLCJsZW5ndGgiLCJ0b3RhbENhcmRzIiwiaXNGcm9tQ2FjaGUiLCJjYWNoZVN0YXRzIiwiYXZhaWxhYmxlIiwidG90YWxFbnRyaWVzIiwiZXN0aW1hdGVkU2l6ZSIsImxhc3RDbGVhbnVwIiwiaW5wdXRIYXNoIiwiY3JlYXRlSW5wdXRIYXNoIiwiY2FyZENvdW50IiwiY2FyZElkcyIsIm1hcCIsImMiLCJpZCIsInNvcnQiLCJ0aW1lc3RhbXAiLCJNYXRoIiwiZmxvb3IiLCJjYWNoZWRSZXN1bHQiLCJkdWVDYXJkc0NhY2hlU2VydmljZSIsImR1ZUNvdW50IiwiY2FjaGVBZ2UiLCJjYWxjdWxhdGVkQXQiLCJnZXRDYWNoZVN0YXRzIiwic3RhdHMiLCJmaWx0ZXJEdWVDYXJkcyIsImNhbGN1bGF0ZUR1ZUNhcmRzU3RhdHMiLCJzZXREdWVDYXJkcyIsImVycm9yIiwid2FybiIsIm1lc3NhZ2UiLCJjbGVhclVzZXJDYWNoZSIsImNsZWFyQWxsQ2FjaGUiLCJmb3JjZUNsZWFudXAiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW9CQzs7Ozs7Ozs7Ozs7UUFtS1lBO2VBQUFBOztRQW1IQUM7ZUFBQUE7O1FBcE5BQztlQUFBQTs7UUFuQ0FDO2VBQUFBOztRQTRGQUM7ZUFBQUE7OzsyQkF6SFk7eUJBQ0U7eUNBRVE7dUJBQ1g7c0NBQzhCOzBCQUNDO3dCQUM3QjtBQXNCbkIsTUFBTUQsbUJBQW1CO0lBQzlCLE9BQU9FLElBQUFBLG1CQUFRLEVBQ2JDLElBQUFBLG1CQUFVLEVBQUMsQ0FBQ0MsUUFBVyxDQUFBO1lBQ3JCQyxXQUFXRCxNQUFNRSxRQUFRLENBQUNELFNBQVM7WUFDbkNFLGlCQUFpQkgsTUFBTUUsUUFB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