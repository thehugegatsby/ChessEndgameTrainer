{"version":3,"sources":["/home/thehu/coolProjects/EndgameTrainer-training-board-complete/src/shared/components/common/ErrorBoundary.tsx"],"sourcesContent":["/**\n * Generic Error Boundary Component\n *\n * @remarks\n * A reusable error boundary that catches JavaScript errors anywhere in the\n * component tree, logs them, and displays a fallback UI.\n */\n\nimport React, { Component, ErrorInfo, ReactNode } from \"react\";\nimport { getLogger } from \"@shared/services/logging\";\n\nconst logger = getLogger().setContext(\"ErrorBoundary\");\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\n}\n\ninterface State {\n  hasError: boolean;\n  error?: Error;\n}\n\nexport class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    // Update state so the next render will show the fallback UI\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // Log the error to error reporting service\n    logger.error(\"Component error caught by boundary\", error, {\n      componentStack: errorInfo.componentStack,\n    });\n\n    // Call custom error handler if provided\n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        this.props.fallback || (\n          <div className=\"error-boundary-fallback p-4 bg-red-50 dark:bg-red-900/20 rounded-lg\">\n            <h3 className=\"text-sm font-medium text-red-800 dark:text-red-200 mb-2\">\n              Etwas ist schiefgelaufen\n            </h3>\n            <p className=\"text-sm text-red-600 dark:text-red-400\">\n              Ein unerwarteter Fehler ist aufgetreten. Bitte laden Sie die Seite\n              neu.\n            </p>\n            {process.env.NODE_ENV === \"development\" && this.state.error && (\n              <details className=\"mt-2\">\n                <summary className=\"text-xs text-red-500 cursor-pointer\">\n                  Fehlerdetails (nur in Entwicklung)\n                </summary>\n                <pre className=\"mt-1 text-xs text-red-500 overflow-auto\">\n                  {this.state.error.toString()}\n                </pre>\n              </details>\n            )}\n          </div>\n        )\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n/**\n * Hook to reset error boundary from child components\n */\nexport function useErrorBoundary() {\n  const [resetKey, setResetKey] = React.useState(0);\n\n  const resetErrorBoundary = React.useCallback(() => {\n    setResetKey((prev) => prev + 1);\n  }, []);\n\n  return { resetKey, resetErrorBoundary };\n}\n"],"names":["ErrorBoundary","useErrorBoundary","logger","getLogger","setContext","Component","getDerivedStateFromError","error","hasError","componentDidCatch","errorInfo","componentStack","props","onError","render","state","fallback","div","className","h3","p","process","env","NODE_ENV","details","summary","pre","toString","children","resetKey","setResetKey","React","useState","resetErrorBoundary","useCallback","prev"],"mappings":"AAAA;;;;;;CAMC;;;;;;;;;;;QAkBYA;eAAAA;;QA0DGC;eAAAA;;;;+DA1EuC;yBAC7B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE1B,MAAMC,SAASC,IAAAA,kBAAS,IAAGC,UAAU,CAAC;AAa/B,MAAMJ,sBAAsBK,gBAAS;IAM1C,OAAOC,yBAAyBC,KAAY,EAAS;QACnD,4DAA4D;QAC5D,OAAO;YAAEC,UAAU;YAAMD;QAAM;IACjC;IAEAE,kBAAkBF,KAAY,EAAEG,SAAoB,EAAE;QACpD,2CAA2C;QAC3CR,OAAOK,KAAK,CAAC,sCAAsCA,OAAO;YACxDI,gBAAgBD,UAAUC,cAAc;QAC1C;QAEA,wCAAwC;QACxC,IAAI,IAAI,CAACC,KAAK,CAACC,OAAO,EAAE;YACtB,IAAI,CAACD,KAAK,CAACC,OAAO,CAACN,OAAOG;QAC5B;IACF;IAEAI,SAAS;QACP,IAAI,IAAI,CAACC,KAAK,CAACP,QAAQ,EAAE;YACvB,wCAAwC;YACxC,OACE,IAAI,CAACI,KAAK,CAACI,QAAQ,kBACjB,sBAACC;gBAAIC,WAAU;;kCACb,qBAACC;wBAAGD,WAAU;kCAA0D;;kCAGxE,qBAACE;wBAAEF,WAAU;kCAAyC;;oBAIrDG,QAAQC,GAAG,CAACC,QAAQ,KAAK,iBAAiB,IAAI,CAACR,KAAK,CAACR,KAAK,kBACzD,sBAACiB;wBAAQN,WAAU;;0CACjB,qBAACO;gCAAQP,WAAU;0CAAsC;;0CAGzD,qBAACQ;gCAAIR,WAAU;0CACZ,IAAI,CAACH,KAAK,CAACR,KAAK,CAACoB,QAAQ;;;;;;QAOxC;QAEA,OAAO,IAAI,CAACf,KAAK,CAACgB,QAAQ;IAC5B;IAnDA,YAAYhB,KAAY,CAAE;QACxB,KAAK,CAACA;QACN,IAAI,CAACG,KAAK,GAAG;YAAEP,UAAU;QAAM;IACjC;AAiDF;AAKO,SAASP;IACd,MAAM,CAAC4B,UAAUC,YAAY,GAAGC,cAAK,CAACC,QAAQ,CAAC;IAE/C,MAAMC,qBAAqBF,cAAK,CAACG,WAAW,CAAC;QAC3CJ,YAAY,CAACK,OAASA,OAAO;IAC/B,GAAG,EAAE;IAEL,OAAO;QAAEN;QAAUI;IAAmB;AACxC"}