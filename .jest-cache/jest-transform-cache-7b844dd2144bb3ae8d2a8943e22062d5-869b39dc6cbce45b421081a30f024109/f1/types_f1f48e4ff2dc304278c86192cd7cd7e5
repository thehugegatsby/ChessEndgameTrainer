b925f92e0b9113fa35483ee887d42cff
/**
 * @file Service container type definitions
 * @module services/container/types
 *
 * @description
 * Type definitions for the dependency injection container system.
 * Provides type-safe service registration and resolution with support
 * for both predefined platform services and custom services.
 *
 * @remarks
 * The service container supports:
 * - Type-safe service registry with compile-time checks
 * - Singleton and factory patterns
 * - Circular dependency detection
 * - Testing overrides and mocks
 * - Browser API abstractions
 * - Platform service abstractions
 *
 * @example
 * ```typescript
 * // Define a service in the registry
 * interface ServiceRegistry {
 *   'my.service': IMyService;
 * }
 *
 * // Register and resolve services
 * container.register('my.service', () => new MyService());
 * const service = container.resolve('my.service');
 * ```
 */"use strict";

/* istanbul ignore next */
function cov_1bu9rw4ye4() {
  var path = "/home/thehu/coolProjects/EndgameTrainer-training-board-complete/src/shared/services/container/types.ts";
  var hash = "c758e598eb48c0705462f8d26023db284011a34e";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/thehu/coolProjects/EndgameTrainer-training-board-complete/src/shared/services/container/types.ts",
    statementMap: {
      "0": {
        start: {
          line: 31,
          column: 0
        },
        end: {
          line: 33,
          column: 3
        }
      },
      "1": {
        start: {
          line: 35,
          column: 4
        },
        end: {
          line: 38,
          column: 7
        }
      },
      "2": {
        start: {
          line: 35,
          column: 24
        },
        end: {
          line: 38,
          column: 7
        }
      },
      "3": {
        start: {
          line: 40,
          column: 0
        },
        end: {
          line: 50,
          column: 3
        }
      },
      "4": {
        start: {
          line: 42,
          column: 8
        },
        end: {
          line: 42,
          column: 39
        }
      },
      "5": {
        start: {
          line: 45,
          column: 8
        },
        end: {
          line: 45,
          column: 45
        }
      },
      "6": {
        start: {
          line: 48,
          column: 8
        },
        end: {
          line: 48,
          column: 36
        }
      },
      "7": {
        start: {
          line: 53,
          column: 8
        },
        end: {
          line: 53,
          column: 51
        }
      },
      "8": {
        start: {
          line: 54,
          column: 8
        },
        end: {
          line: 54,
          column: 43
        }
      },
      "9": {
        start: {
          line: 59,
          column: 8
        },
        end: {
          line: 59,
          column: 60
        }
      },
      "10": {
        start: {
          line: 60,
          column: 8
        },
        end: {
          line: 60,
          column: 52
        }
      },
      "11": {
        start: {
          line: 65,
          column: 8
        },
        end: {
          line: 65,
          column: 69
        }
      },
      "12": {
        start: {
          line: 66,
          column: 8
        },
        end: {
          line: 66,
          column: 46
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 34,
            column: 9
          },
          end: {
            line: 34,
            column: 16
          }
        },
        loc: {
          start: {
            line: 34,
            column: 30
          },
          end: {
            line: 39,
            column: 1
          }
        },
        line: 34
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 41,
            column: 5
          }
        },
        loc: {
          start: {
            line: 41,
            column: 35
          },
          end: {
            line: 43,
            column: 5
          }
        },
        line: 41
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 44,
            column: 4
          },
          end: {
            line: 44,
            column: 5
          }
        },
        loc: {
          start: {
            line: 44,
            column: 41
          },
          end: {
            line: 46,
            column: 5
          }
        },
        line: 44
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 47,
            column: 4
          },
          end: {
            line: 47,
            column: 5
          }
        },
        loc: {
          start: {
            line: 47,
            column: 32
          },
          end: {
            line: 49,
            column: 5
          }
        },
        line: 47
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 52,
            column: 4
          },
          end: {
            line: 52,
            column: 5
          }
        },
        loc: {
          start: {
            line: 52,
            column: 20
          },
          end: {
            line: 55,
            column: 5
          }
        },
        line: 52
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 58,
            column: 4
          },
          end: {
            line: 58,
            column: 5
          }
        },
        loc: {
          start: {
            line: 58,
            column: 20
          },
          end: {
            line: 61,
            column: 5
          }
        },
        line: 58
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 64,
            column: 4
          },
          end: {
            line: 64,
            column: 5
          }
        },
        loc: {
          start: {
            line: 64,
            column: 22
          },
          end: {
            line: 67,
            column: 5
          }
        },
        line: 64
      }
    },
    branchMap: {},
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {},
    inputSourceMap: {
      version: 3,
      sources: ["/home/thehu/coolProjects/EndgameTrainer-training-board-complete/src/shared/services/container/types.ts"],
      sourcesContent: ["/**\n * @file Service container type definitions\n * @module services/container/types\n *\n * @description\n * Type definitions for the dependency injection container system.\n * Provides type-safe service registration and resolution with support\n * for both predefined platform services and custom services.\n *\n * @remarks\n * The service container supports:\n * - Type-safe service registry with compile-time checks\n * - Singleton and factory patterns\n * - Circular dependency detection\n * - Testing overrides and mocks\n * - Browser API abstractions\n * - Platform service abstractions\n *\n * @example\n * ```typescript\n * // Define a service in the registry\n * interface ServiceRegistry {\n *   'my.service': IMyService;\n * }\n *\n * // Register and resolve services\n * container.register('my.service', () => new MyService());\n * const service = container.resolve('my.service');\n * ```\n */\n\nimport {\n  IPlatformStorage,\n  IPlatformNotification,\n  IPlatformDevice,\n  IPlatformPerformance,\n  IPlatformClipboard,\n  IPlatformShare,\n  IPlatformAnalytics,\n  IPlatformDetection,\n} from \"../platform/types\";\n\n/**\n * Browser API abstractions for dependency injection\n *\n * @interface IBrowserAPIs\n *\n * @description\n * Provides abstracted interfaces for browser APIs to enable\n * testing and platform-specific implementations.\n *\n * @property {Storage} localStorage - Browser localStorage API\n * @property {Storage} sessionStorage - Browser sessionStorage API\n * @property {Navigator} navigator - Browser navigator API\n * @property {Window} window - Browser window object\n * @property {Document} document - Browser document object\n * @property {Performance} performance - Browser performance API\n *\n * @example\n * ```typescript\n * const apis: IBrowserAPIs = {\n *   localStorage: window.localStorage,\n *   sessionStorage: window.sessionStorage,\n *   navigator: window.navigator,\n *   window: window,\n *   document: window.document,\n *   performance: window.performance\n * };\n * ```\n */\nexport interface IBrowserAPIs {\n  localStorage: Storage;\n  sessionStorage: Storage;\n  navigator: Navigator;\n  window: Window;\n  document: Document;\n  performance: Performance;\n}\n\n/**\n * Service identifier type\n *\n * @typedef {string} ServiceKey\n *\n * @description\n * String literal type for service identifiers. Used as keys\n * in the service registry for type-safe service resolution.\n */\nexport type ServiceKey = string;\n\n/**\n * Service factory function type\n *\n * @typedef {Function} ServiceFactory\n * @template T - The service type being created\n * @param {IServiceContainer} container - Container for resolving dependencies\n * @returns {T} The service instance\n *\n * @description\n * Factory function that creates service instances. Receives the\n * container to enable dependency resolution during construction.\n *\n * @example\n * ```typescript\n * const storageFactory: ServiceFactory<IStorage> = (container) => {\n *   const platform = container.resolve('platform.detection');\n *   return new StorageService(platform);\n * };\n * ```\n */\nexport type ServiceFactory<T> = (container: IServiceContainer) => T;\n\n/**\n * Service registry interface\n *\n * @interface ServiceRegistry\n *\n * @description\n * Central type registry mapping service keys to their corresponding types.\n * This enables compile-time type safety when registering and resolving services.\n * Extend this interface to add custom services to the type system.\n *\n * @remarks\n * The registry is organized into logical groups:\n * - platform.*: Cross-platform service abstractions\n * - browser.*: Browser-specific API abstractions\n *\n * @example\n * ```typescript\n * // Extend the registry in your application\n * declare module '@shared/services/container/types' {\n *   interface ServiceRegistry {\n *     'app.theme': IThemeService;\n *     'app.auth': IAuthService;\n *   }\n * }\n * ```\n */\nexport interface ServiceRegistry {\n  // Platform services\n  \"platform.storage\": IPlatformStorage;\n  \"platform.notifications\": IPlatformNotification;\n  \"platform.device\": IPlatformDevice;\n  \"platform.performance\": IPlatformPerformance;\n  \"platform.clipboard\": IPlatformClipboard;\n  \"platform.share\": IPlatformShare;\n  \"platform.analytics\": IPlatformAnalytics;\n  \"platform.detection\": IPlatformDetection;\n\n  // Browser API abstractions\n  \"browser.apis\": IBrowserAPIs;\n  \"browser.localStorage\": Storage;\n  \"browser.navigator\": Navigator;\n  \"browser.window\": Window;\n  \"browser.document\": Document;\n  \"browser.performance\": Performance;\n}\n\n/**\n * Service container interface\n *\n * @interface IServiceContainer\n *\n * @description\n * Main interface for the dependency injection container.\n * Provides methods for registering, resolving, and managing services\n * with support for both type-safe predefined services and dynamic\n * custom services.\n *\n * @remarks\n * The container supports:\n * - Lazy service instantiation\n * - Singleton caching (configurable)\n * - Circular dependency detection\n * - Type-safe service resolution\n * - Testing utilities\n *\n * @example\n * ```typescript\n * const container: IServiceContainer = new ServiceContainer();\n *\n * // Register services\n * container.register('platform.storage', () => new WebStorage());\n *\n * // Resolve services\n * const storage = container.resolve('platform.storage');\n * ```\n */\nexport interface IServiceContainer {\n  /**\n   * Register a service with the container\n   * @param key - Service identifier\n   * @param factory - Factory function to create the service\n   */\n  register<K extends keyof ServiceRegistry>(\n    key: K,\n    factory: ServiceFactory<ServiceRegistry[K]>,\n  ): void;\n\n  /**\n   * Register a service with a custom key (for flexibility)\n   * @param key - Custom service identifier\n   * @param factory - Factory function to create the service\n   */\n  registerCustom<T>(key: string, factory: ServiceFactory<T>): void;\n\n  /**\n   * Resolve a service from the container\n   * @param key - Service identifier\n   * @returns The service instance\n   */\n  resolve<K extends keyof ServiceRegistry>(key: K): ServiceRegistry[K];\n\n  /**\n   * Resolve a custom service from the container\n   * @param key - Custom service identifier\n   * @returns The service instance\n   */\n  resolveCustom<T>(key: string): T;\n\n  /**\n   * Check if a service is registered\n   * @param key - Service identifier\n   * @returns True if service is registered\n   */\n  has<K extends keyof ServiceRegistry>(key: K): boolean;\n\n  /**\n   * Check if a custom service is registered\n   * @param key - Custom service identifier\n   * @returns True if service is registered\n   */\n  hasCustom(key: string): boolean;\n\n  /**\n   * Clear all resolved instances (useful for testing)\n   */\n  clearInstances(): void;\n\n  /**\n   * Get all registered service keys\n   * @returns Array of registered service keys\n   */\n  getRegisteredKeys(): string[];\n}\n\n/**\n * Service overrides for testing\n *\n * @typedef {Object} ServiceOverrides\n *\n * @description\n * Partial type allowing override of any registered service.\n * Used in tests to provide mock implementations.\n *\n * @example\n * ```typescript\n * const overrides: ServiceOverrides = {\n *   'platform.storage': mockStorage,\n *   'platform.notifications': mockNotifications\n * };\n * ```\n */\nexport type ServiceOverrides = Partial<{\n  [K in keyof ServiceRegistry]: ServiceRegistry[K];\n}>;\n\n/**\n * Custom service overrides for testing\n *\n * @typedef {Object} CustomServiceOverrides\n *\n * @description\n * Dynamic overrides for custom services not in the registry.\n * Provides flexibility for test-specific services.\n */\nexport type CustomServiceOverrides = Record<string, any>;\n\n/**\n * Combined overrides for test containers\n *\n * @interface TestContainerOverrides\n *\n * @description\n * Configuration object for creating test containers with\n * both registered and custom service overrides.\n *\n * @property {ServiceOverrides} [services] - Registry service overrides\n * @property {CustomServiceOverrides} [custom] - Custom service overrides\n *\n * @example\n * ```typescript\n * const testOverrides: TestContainerOverrides = {\n *   services: {\n *     'platform.storage': mockStorage\n *   },\n *   custom: {\n *     'test.helper': testHelper\n *   }\n * };\n * ```\n */\nexport interface TestContainerOverrides {\n  services?: ServiceOverrides;\n  custom?: CustomServiceOverrides;\n}\n\n/**\n * Service container configuration\n *\n * @interface ServiceContainerConfig\n *\n * @description\n * Configuration options for the service container behavior.\n * Controls caching, validation, and debugging features.\n *\n * @property {boolean} [useSingletons=true] - Cache service instances (singleton pattern)\n * @property {boolean} [validateKeys=true] - Validate keys to prevent duplicate registration\n * @property {Function} [logger] - Optional logger for debugging service resolution\n *\n * @example\n * ```typescript\n * const config: ServiceContainerConfig = {\n *   useSingletons: true,\n *   validateKeys: true,\n *   logger: (msg) => console.log(`[Container] ${msg}`)\n * };\n *\n * const container = new ServiceContainer(config);\n * ```\n */\nexport interface ServiceContainerConfig {\n  // Whether to use singleton pattern (one instance per key)\n  useSingletons?: boolean;\n\n  // Whether to validate service keys\n  validateKeys?: boolean;\n\n  // Logger function for debugging\n  logger?: (message: string) => void;\n}\n\n/**\n * Error thrown when a requested service is not found\n *\n * @class ServiceNotFoundError\n * @extends {Error}\n *\n * @description\n * Thrown when attempting to resolve a service that hasn't been registered.\n * Includes the requested key in the error message for debugging.\n *\n * @example\n * ```typescript\n * try {\n *   container.resolve('unknown.service');\n * } catch (error) {\n *   if (error instanceof ServiceNotFoundError) {\n *     console.error('Service not registered:', error.message);\n *   }\n * }\n * ```\n */\nexport class ServiceNotFoundError extends Error {\n  constructor(key: string) {\n    super(`Service not found for key: ${key}`);\n    this.name = \"ServiceNotFoundError\";\n  }\n}\n\n/**\n * Error thrown when attempting to register a duplicate service\n *\n * @class ServiceAlreadyRegisteredError\n * @extends {Error}\n *\n * @description\n * Thrown when trying to register a service with a key that's already\n * in use. Only thrown when validateKeys is enabled in configuration.\n *\n * @example\n * ```typescript\n * container.register('my.service', factory1);\n * try {\n *   container.register('my.service', factory2); // Throws\n * } catch (error) {\n *   console.error('Duplicate registration:', error.message);\n * }\n * ```\n */\nexport class ServiceAlreadyRegisteredError extends Error {\n  constructor(key: string) {\n    super(`Service already registered for key: ${key}`);\n    this.name = \"ServiceAlreadyRegisteredError\";\n  }\n}\n\n/**\n * Error thrown when circular dependencies are detected\n *\n * @class CircularDependencyError\n * @extends {Error}\n *\n * @description\n * Thrown when service resolution encounters a circular dependency chain.\n * The error message includes the complete dependency chain for debugging.\n *\n * @example\n * ```typescript\n * // Service A depends on B, B depends on A\n * container.register('a', (c) => new A(c.resolve('b')));\n * container.register('b', (c) => new B(c.resolve('a')));\n *\n * try {\n *   container.resolve('a'); // Throws CircularDependencyError\n * } catch (error) {\n *   console.error('Circular dependency:', error.message);\n *   // \"Circular dependency detected: a -> b -> a\"\n * }\n * ```\n */\nexport class CircularDependencyError extends Error {\n  constructor(chain: string[]) {\n    super(`Circular dependency detected: ${chain.join(\" -> \")}`);\n    this.name = \"CircularDependencyError\";\n  }\n}\n"],
      names: ["CircularDependencyError", "ServiceAlreadyRegisteredError", "ServiceNotFoundError", "Error", "key", "name", "chain", "join"],
      mappings: "AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA6BC;;;;;;;;;;;QAwYYA;eAAAA;;QA/BAC;eAAAA;;QA3BAC;eAAAA;;;AAAN,MAAMA,6BAA6BC;IACxC,YAAYC,GAAW,CAAE;QACvB,KAAK,CAAC,CAAC,2BAA2B,EAAEA,KAAK;QACzC,IAAI,CAACC,IAAI,GAAG;IACd;AACF;AAsBO,MAAMJ,sCAAsCE;IACjD,YAAYC,GAAW,CAAE;QACvB,KAAK,CAAC,CAAC,oCAAoC,EAAEA,KAAK;QAClD,IAAI,CAACC,IAAI,GAAG;IACd;AACF;AA0BO,MAAML,gCAAgCG;IAC3C,YAAYG,KAAe,CAAE;QAC3B,KAAK,CAAC,CAAC,8BAA8B,EAAEA,MAAMC,IAAI,CAAC,SAAS;QAC3D,IAAI,CAACF,IAAI,GAAG;IACd;AACF"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "c758e598eb48c0705462f8d26023db284011a34e"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1bu9rw4ye4 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1bu9rw4ye4();
cov_1bu9rw4ye4().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_1bu9rw4ye4().f[0]++;
  cov_1bu9rw4ye4().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_1bu9rw4ye4().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_1bu9rw4ye4().s[3]++;
_export(exports, {
  get CircularDependencyError() {
    /* istanbul ignore next */
    cov_1bu9rw4ye4().f[1]++;
    cov_1bu9rw4ye4().s[4]++;
    return CircularDependencyError;
  },
  get ServiceAlreadyRegisteredError() {
    /* istanbul ignore next */
    cov_1bu9rw4ye4().f[2]++;
    cov_1bu9rw4ye4().s[5]++;
    return ServiceAlreadyRegisteredError;
  },
  get ServiceNotFoundError() {
    /* istanbul ignore next */
    cov_1bu9rw4ye4().f[3]++;
    cov_1bu9rw4ye4().s[6]++;
    return ServiceNotFoundError;
  }
});
class ServiceNotFoundError extends Error {
  constructor(key) {
    /* istanbul ignore next */
    cov_1bu9rw4ye4().f[4]++;
    cov_1bu9rw4ye4().s[7]++;
    super(`Service not found for key: ${key}`);
    /* istanbul ignore next */
    cov_1bu9rw4ye4().s[8]++;
    this.name = "ServiceNotFoundError";
  }
}
class ServiceAlreadyRegisteredError extends Error {
  constructor(key) {
    /* istanbul ignore next */
    cov_1bu9rw4ye4().f[5]++;
    cov_1bu9rw4ye4().s[9]++;
    super(`Service already registered for key: ${key}`);
    /* istanbul ignore next */
    cov_1bu9rw4ye4().s[10]++;
    this.name = "ServiceAlreadyRegisteredError";
  }
}
class CircularDependencyError extends Error {
  constructor(chain) {
    /* istanbul ignore next */
    cov_1bu9rw4ye4().f[6]++;
    cov_1bu9rw4ye4().s[11]++;
    super(`Circular dependency detected: ${chain.join(" -> ")}`);
    /* istanbul ignore next */
    cov_1bu9rw4ye4().s[12]++;
    this.name = "CircularDependencyError";
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWJ1OXJ3NHllNCIsInBhdGgiLCJoYXNoIiwiZ2xvYmFsIiwiRnVuY3Rpb24iLCJnY3YiLCJjb3ZlcmFnZURhdGEiLCJzdGF0ZW1lbnRNYXAiLCJzdGFydCIsImxpbmUiLCJjb2x1bW4iLCJlbmQiLCJmbk1hcCIsIm5hbWUiLCJkZWNsIiwibG9jIiwiYnJhbmNoTWFwIiwicyIsImYiLCJiIiwiaW5wdXRTb3VyY2VNYXAiLCJ2ZXJzaW9uIiwic291cmNlcyIsInNvdXJjZXNDb250ZW50IiwibmFtZXMiLCJtYXBwaW5ncyIsIl9jb3ZlcmFnZVNjaGVtYSIsImNvdmVyYWdlIiwiYWN0dWFsQ292ZXJhZ2UiLCJDaXJjdWxhckRlcGVuZGVuY3lFcnJvciIsIlNlcnZpY2VBbHJlYWR5UmVnaXN0ZXJlZEVycm9yIiwiU2VydmljZU5vdEZvdW5kRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwia2V5IiwiY2hhaW4iLCJqb2luIl0sInNvdXJjZXMiOlsiL2hvbWUvdGhlaHUvY29vbFByb2plY3RzL0VuZGdhbWVUcmFpbmVyLXRyYWluaW5nLWJvYXJkLWNvbXBsZXRlL3NyYy9zaGFyZWQvc2VydmljZXMvY29udGFpbmVyL3R5cGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgU2VydmljZSBjb250YWluZXIgdHlwZSBkZWZpbml0aW9uc1xuICogQG1vZHVsZSBzZXJ2aWNlcy9jb250YWluZXIvdHlwZXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFR5cGUgZGVmaW5pdGlvbnMgZm9yIHRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIgc3lzdGVtLlxuICogUHJvdmlkZXMgdHlwZS1zYWZlIHNlcnZpY2UgcmVnaXN0cmF0aW9uIGFuZCByZXNvbHV0aW9uIHdpdGggc3VwcG9ydFxuICogZm9yIGJvdGggcHJlZGVmaW5lZCBwbGF0Zm9ybSBzZXJ2aWNlcyBhbmQgY3VzdG9tIHNlcnZpY2VzLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGUgc2VydmljZSBjb250YWluZXIgc3VwcG9ydHM6XG4gKiAtIFR5cGUtc2FmZSBzZXJ2aWNlIHJlZ2lzdHJ5IHdpdGggY29tcGlsZS10aW1lIGNoZWNrc1xuICogLSBTaW5nbGV0b24gYW5kIGZhY3RvcnkgcGF0dGVybnNcbiAqIC0gQ2lyY3VsYXIgZGVwZW5kZW5jeSBkZXRlY3Rpb25cbiAqIC0gVGVzdGluZyBvdmVycmlkZXMgYW5kIG1vY2tzXG4gKiAtIEJyb3dzZXIgQVBJIGFic3RyYWN0aW9uc1xuICogLSBQbGF0Zm9ybSBzZXJ2aWNlIGFic3RyYWN0aW9uc1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBEZWZpbmUgYSBzZXJ2aWNlIGluIHRoZSByZWdpc3RyeVxuICogaW50ZXJmYWNlIFNlcnZpY2VSZWdpc3RyeSB7XG4gKiAgICdteS5zZXJ2aWNlJzogSU15U2VydmljZTtcbiAqIH1cbiAqXG4gKiAvLyBSZWdpc3RlciBhbmQgcmVzb2x2ZSBzZXJ2aWNlc1xuICogY29udGFpbmVyLnJlZ2lzdGVyKCdteS5zZXJ2aWNlJywgKCkgPT4gbmV3IE15U2VydmljZSgpKTtcbiAqIGNvbnN0IHNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZSgnbXkuc2VydmljZScpO1xuICogYGBgXG4gKi9cblxuaW1wb3J0IHtcbiAgSVBsYXRmb3JtU3RvcmFnZSxcbiAgSVBsYXRmb3JtTm90aWZpY2F0aW9uLFxuICBJUGxhdGZvcm1EZXZpY2UsXG4gIElQbGF0Zm9ybVBlcmZvcm1hbmNlLFxuICBJUGxhdGZvcm1DbGlwYm9hcmQsXG4gIElQbGF0Zm9ybVNoYXJlLFxuICBJUGxhdGZvcm1BbmFseXRpY3MsXG4gIElQbGF0Zm9ybURldGVjdGlvbixcbn0gZnJvbSBcIi4uL3BsYXRmb3JtL3R5cGVzXCI7XG5cbi8qKlxuICogQnJvd3NlciBBUEkgYWJzdHJhY3Rpb25zIGZvciBkZXBlbmRlbmN5IGluamVjdGlvblxuICpcbiAqIEBpbnRlcmZhY2UgSUJyb3dzZXJBUElzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBQcm92aWRlcyBhYnN0cmFjdGVkIGludGVyZmFjZXMgZm9yIGJyb3dzZXIgQVBJcyB0byBlbmFibGVcbiAqIHRlc3RpbmcgYW5kIHBsYXRmb3JtLXNwZWNpZmljIGltcGxlbWVudGF0aW9ucy5cbiAqXG4gKiBAcHJvcGVydHkge1N0b3JhZ2V9IGxvY2FsU3RvcmFnZSAtIEJyb3dzZXIgbG9jYWxTdG9yYWdlIEFQSVxuICogQHByb3BlcnR5IHtTdG9yYWdlfSBzZXNzaW9uU3RvcmFnZSAtIEJyb3dzZXIgc2Vzc2lvblN0b3JhZ2UgQVBJXG4gKiBAcHJvcGVydHkge05hdmlnYXRvcn0gbmF2aWdhdG9yIC0gQnJvd3NlciBuYXZpZ2F0b3IgQVBJXG4gKiBAcHJvcGVydHkge1dpbmRvd30gd2luZG93IC0gQnJvd3NlciB3aW5kb3cgb2JqZWN0XG4gKiBAcHJvcGVydHkge0RvY3VtZW50fSBkb2N1bWVudCAtIEJyb3dzZXIgZG9jdW1lbnQgb2JqZWN0XG4gKiBAcHJvcGVydHkge1BlcmZvcm1hbmNlfSBwZXJmb3JtYW5jZSAtIEJyb3dzZXIgcGVyZm9ybWFuY2UgQVBJXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGFwaXM6IElCcm93c2VyQVBJcyA9IHtcbiAqICAgbG9jYWxTdG9yYWdlOiB3aW5kb3cubG9jYWxTdG9yYWdlLFxuICogICBzZXNzaW9uU3RvcmFnZTogd2luZG93LnNlc3Npb25TdG9yYWdlLFxuICogICBuYXZpZ2F0b3I6IHdpbmRvdy5uYXZpZ2F0b3IsXG4gKiAgIHdpbmRvdzogd2luZG93LFxuICogICBkb2N1bWVudDogd2luZG93LmRvY3VtZW50LFxuICogICBwZXJmb3JtYW5jZTogd2luZG93LnBlcmZvcm1hbmNlXG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUJyb3dzZXJBUElzIHtcbiAgbG9jYWxTdG9yYWdlOiBTdG9yYWdlO1xuICBzZXNzaW9uU3RvcmFnZTogU3RvcmFnZTtcbiAgbmF2aWdhdG9yOiBOYXZpZ2F0b3I7XG4gIHdpbmRvdzogV2luZG93O1xuICBkb2N1bWVudDogRG9jdW1lbnQ7XG4gIHBlcmZvcm1hbmNlOiBQZXJmb3JtYW5jZTtcbn1cblxuLyoqXG4gKiBTZXJ2aWNlIGlkZW50aWZpZXIgdHlwZVxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmd9IFNlcnZpY2VLZXlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFN0cmluZyBsaXRlcmFsIHR5cGUgZm9yIHNlcnZpY2UgaWRlbnRpZmllcnMuIFVzZWQgYXMga2V5c1xuICogaW4gdGhlIHNlcnZpY2UgcmVnaXN0cnkgZm9yIHR5cGUtc2FmZSBzZXJ2aWNlIHJlc29sdXRpb24uXG4gKi9cbmV4cG9ydCB0eXBlIFNlcnZpY2VLZXkgPSBzdHJpbmc7XG5cbi8qKlxuICogU2VydmljZSBmYWN0b3J5IGZ1bmN0aW9uIHR5cGVcbiAqXG4gKiBAdHlwZWRlZiB7RnVuY3Rpb259IFNlcnZpY2VGYWN0b3J5XG4gKiBAdGVtcGxhdGUgVCAtIFRoZSBzZXJ2aWNlIHR5cGUgYmVpbmcgY3JlYXRlZFxuICogQHBhcmFtIHtJU2VydmljZUNvbnRhaW5lcn0gY29udGFpbmVyIC0gQ29udGFpbmVyIGZvciByZXNvbHZpbmcgZGVwZW5kZW5jaWVzXG4gKiBAcmV0dXJucyB7VH0gVGhlIHNlcnZpY2UgaW5zdGFuY2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZhY3RvcnkgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIHNlcnZpY2UgaW5zdGFuY2VzLiBSZWNlaXZlcyB0aGVcbiAqIGNvbnRhaW5lciB0byBlbmFibGUgZGVwZW5kZW5jeSByZXNvbHV0aW9uIGR1cmluZyBjb25zdHJ1Y3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHN0b3JhZ2VGYWN0b3J5OiBTZXJ2aWNlRmFjdG9yeTxJU3RvcmFnZT4gPSAoY29udGFpbmVyKSA9PiB7XG4gKiAgIGNvbnN0IHBsYXRmb3JtID0gY29udGFpbmVyLnJlc29sdmUoJ3BsYXRmb3JtLmRldGVjdGlvbicpO1xuICogICByZXR1cm4gbmV3IFN0b3JhZ2VTZXJ2aWNlKHBsYXRmb3JtKTtcbiAqIH07XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHR5cGUgU2VydmljZUZhY3Rvcnk8VD4gPSAoY29udGFpbmVyOiBJU2VydmljZUNvbnRhaW5lcikgPT4gVDtcblxuLyoqXG4gKiBTZXJ2aWNlIHJlZ2lzdHJ5IGludGVyZmFjZVxuICpcbiAqIEBpbnRlcmZhY2UgU2VydmljZVJlZ2lzdHJ5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDZW50cmFsIHR5cGUgcmVnaXN0cnkgbWFwcGluZyBzZXJ2aWNlIGtleXMgdG8gdGhlaXIgY29ycmVzcG9uZGluZyB0eXBlcy5cbiAqIFRoaXMgZW5hYmxlcyBjb21waWxlLXRpbWUgdHlwZSBzYWZldHkgd2hlbiByZWdpc3RlcmluZyBhbmQgcmVzb2x2aW5nIHNlcnZpY2VzLlxuICogRXh0ZW5kIHRoaXMgaW50ZXJmYWNlIHRvIGFkZCBjdXN0b20gc2VydmljZXMgdG8gdGhlIHR5cGUgc3lzdGVtLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGUgcmVnaXN0cnkgaXMgb3JnYW5pemVkIGludG8gbG9naWNhbCBncm91cHM6XG4gKiAtIHBsYXRmb3JtLio6IENyb3NzLXBsYXRmb3JtIHNlcnZpY2UgYWJzdHJhY3Rpb25zXG4gKiAtIGJyb3dzZXIuKjogQnJvd3Nlci1zcGVjaWZpYyBBUEkgYWJzdHJhY3Rpb25zXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIC8vIEV4dGVuZCB0aGUgcmVnaXN0cnkgaW4geW91ciBhcHBsaWNhdGlvblxuICogZGVjbGFyZSBtb2R1bGUgJ0BzaGFyZWQvc2VydmljZXMvY29udGFpbmVyL3R5cGVzJyB7XG4gKiAgIGludGVyZmFjZSBTZXJ2aWNlUmVnaXN0cnkge1xuICogICAgICdhcHAudGhlbWUnOiBJVGhlbWVTZXJ2aWNlO1xuICogICAgICdhcHAuYXV0aCc6IElBdXRoU2VydmljZTtcbiAqICAgfVxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VydmljZVJlZ2lzdHJ5IHtcbiAgLy8gUGxhdGZvcm0gc2VydmljZXNcbiAgXCJwbGF0Zm9ybS5zdG9yYWdlXCI6IElQbGF0Zm9ybVN0b3JhZ2U7XG4gIFwicGxhdGZvcm0ubm90aWZpY2F0aW9uc1wiOiBJUGxhdGZvcm1Ob3RpZmljYXRpb247XG4gIFwicGxhdGZvcm0uZGV2aWNlXCI6IElQbGF0Zm9ybURldmljZTtcbiAgXCJwbGF0Zm9ybS5wZXJmb3JtYW5jZVwiOiBJUGxhdGZvcm1QZXJmb3JtYW5jZTtcbiAgXCJwbGF0Zm9ybS5jbGlwYm9hcmRcIjogSVBsYXRmb3JtQ2xpcGJvYXJkO1xuICBcInBsYXRmb3JtLnNoYXJlXCI6IElQbGF0Zm9ybVNoYXJlO1xuICBcInBsYXRmb3JtLmFuYWx5dGljc1wiOiBJUGxhdGZvcm1BbmFseXRpY3M7XG4gIFwicGxhdGZvcm0uZGV0ZWN0aW9uXCI6IElQbGF0Zm9ybURldGVjdGlvbjtcblxuICAvLyBCcm93c2VyIEFQSSBhYnN0cmFjdGlvbnNcbiAgXCJicm93c2VyLmFwaXNcIjogSUJyb3dzZXJBUElzO1xuICBcImJyb3dzZXIubG9jYWxTdG9yYWdlXCI6IFN0b3JhZ2U7XG4gIFwiYnJvd3Nlci5uYXZpZ2F0b3JcIjogTmF2aWdhdG9yO1xuICBcImJyb3dzZXIud2luZG93XCI6IFdpbmRvdztcbiAgXCJicm93c2VyLmRvY3VtZW50XCI6IERvY3VtZW50O1xuICBcImJyb3dzZXIucGVyZm9ybWFuY2VcIjogUGVyZm9ybWFuY2U7XG59XG5cbi8qKlxuICogU2VydmljZSBjb250YWluZXIgaW50ZXJmYWNlXG4gKlxuICogQGludGVyZmFjZSBJU2VydmljZUNvbnRhaW5lclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTWFpbiBpbnRlcmZhY2UgZm9yIHRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIuXG4gKiBQcm92aWRlcyBtZXRob2RzIGZvciByZWdpc3RlcmluZywgcmVzb2x2aW5nLCBhbmQgbWFuYWdpbmcgc2VydmljZXNcbiAqIHdpdGggc3VwcG9ydCBmb3IgYm90aCB0eXBlLXNhZmUgcHJlZGVmaW5lZCBzZXJ2aWNlcyBhbmQgZHluYW1pY1xuICogY3VzdG9tIHNlcnZpY2VzLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGUgY29udGFpbmVyIHN1cHBvcnRzOlxuICogLSBMYXp5IHNlcnZpY2UgaW5zdGFudGlhdGlvblxuICogLSBTaW5nbGV0b24gY2FjaGluZyAoY29uZmlndXJhYmxlKVxuICogLSBDaXJjdWxhciBkZXBlbmRlbmN5IGRldGVjdGlvblxuICogLSBUeXBlLXNhZmUgc2VydmljZSByZXNvbHV0aW9uXG4gKiAtIFRlc3RpbmcgdXRpbGl0aWVzXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGNvbnRhaW5lcjogSVNlcnZpY2VDb250YWluZXIgPSBuZXcgU2VydmljZUNvbnRhaW5lcigpO1xuICpcbiAqIC8vIFJlZ2lzdGVyIHNlcnZpY2VzXG4gKiBjb250YWluZXIucmVnaXN0ZXIoJ3BsYXRmb3JtLnN0b3JhZ2UnLCAoKSA9PiBuZXcgV2ViU3RvcmFnZSgpKTtcbiAqXG4gKiAvLyBSZXNvbHZlIHNlcnZpY2VzXG4gKiBjb25zdCBzdG9yYWdlID0gY29udGFpbmVyLnJlc29sdmUoJ3BsYXRmb3JtLnN0b3JhZ2UnKTtcbiAqIGBgYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElTZXJ2aWNlQ29udGFpbmVyIHtcbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgc2VydmljZSB3aXRoIHRoZSBjb250YWluZXJcbiAgICogQHBhcmFtIGtleSAtIFNlcnZpY2UgaWRlbnRpZmllclxuICAgKiBAcGFyYW0gZmFjdG9yeSAtIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBzZXJ2aWNlXG4gICAqL1xuICByZWdpc3RlcjxLIGV4dGVuZHMga2V5b2YgU2VydmljZVJlZ2lzdHJ5PihcbiAgICBrZXk6IEssXG4gICAgZmFjdG9yeTogU2VydmljZUZhY3Rvcnk8U2VydmljZVJlZ2lzdHJ5W0tdPixcbiAgKTogdm9pZDtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBzZXJ2aWNlIHdpdGggYSBjdXN0b20ga2V5IChmb3IgZmxleGliaWxpdHkpXG4gICAqIEBwYXJhbSBrZXkgLSBDdXN0b20gc2VydmljZSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSBmYWN0b3J5IC0gRmFjdG9yeSBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIHNlcnZpY2VcbiAgICovXG4gIHJlZ2lzdGVyQ3VzdG9tPFQ+KGtleTogc3RyaW5nLCBmYWN0b3J5OiBTZXJ2aWNlRmFjdG9yeTxUPik6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYSBzZXJ2aWNlIGZyb20gdGhlIGNvbnRhaW5lclxuICAgKiBAcGFyYW0ga2V5IC0gU2VydmljZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm5zIFRoZSBzZXJ2aWNlIGluc3RhbmNlXG4gICAqL1xuICByZXNvbHZlPEsgZXh0ZW5kcyBrZXlvZiBTZXJ2aWNlUmVnaXN0cnk+KGtleTogSyk6IFNlcnZpY2VSZWdpc3RyeVtLXTtcblxuICAvKipcbiAgICogUmVzb2x2ZSBhIGN1c3RvbSBzZXJ2aWNlIGZyb20gdGhlIGNvbnRhaW5lclxuICAgKiBAcGFyYW0ga2V5IC0gQ3VzdG9tIHNlcnZpY2UgaWRlbnRpZmllclxuICAgKiBAcmV0dXJucyBUaGUgc2VydmljZSBpbnN0YW5jZVxuICAgKi9cbiAgcmVzb2x2ZUN1c3RvbTxUPihrZXk6IHN0cmluZyk6IFQ7XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgc2VydmljZSBpcyByZWdpc3RlcmVkXG4gICAqIEBwYXJhbSBrZXkgLSBTZXJ2aWNlIGlkZW50aWZpZXJcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBzZXJ2aWNlIGlzIHJlZ2lzdGVyZWRcbiAgICovXG4gIGhhczxLIGV4dGVuZHMga2V5b2YgU2VydmljZVJlZ2lzdHJ5PihrZXk6IEspOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGN1c3RvbSBzZXJ2aWNlIGlzIHJlZ2lzdGVyZWRcbiAgICogQHBhcmFtIGtleSAtIEN1c3RvbSBzZXJ2aWNlIGlkZW50aWZpZXJcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBzZXJ2aWNlIGlzIHJlZ2lzdGVyZWRcbiAgICovXG4gIGhhc0N1c3RvbShrZXk6IHN0cmluZyk6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCByZXNvbHZlZCBpbnN0YW5jZXMgKHVzZWZ1bCBmb3IgdGVzdGluZylcbiAgICovXG4gIGNsZWFySW5zdGFuY2VzKCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgcmVnaXN0ZXJlZCBzZXJ2aWNlIGtleXNcbiAgICogQHJldHVybnMgQXJyYXkgb2YgcmVnaXN0ZXJlZCBzZXJ2aWNlIGtleXNcbiAgICovXG4gIGdldFJlZ2lzdGVyZWRLZXlzKCk6IHN0cmluZ1tdO1xufVxuXG4vKipcbiAqIFNlcnZpY2Ugb3ZlcnJpZGVzIGZvciB0ZXN0aW5nXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gU2VydmljZU92ZXJyaWRlc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUGFydGlhbCB0eXBlIGFsbG93aW5nIG92ZXJyaWRlIG9mIGFueSByZWdpc3RlcmVkIHNlcnZpY2UuXG4gKiBVc2VkIGluIHRlc3RzIHRvIHByb3ZpZGUgbW9jayBpbXBsZW1lbnRhdGlvbnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IG92ZXJyaWRlczogU2VydmljZU92ZXJyaWRlcyA9IHtcbiAqICAgJ3BsYXRmb3JtLnN0b3JhZ2UnOiBtb2NrU3RvcmFnZSxcbiAqICAgJ3BsYXRmb3JtLm5vdGlmaWNhdGlvbnMnOiBtb2NrTm90aWZpY2F0aW9uc1xuICogfTtcbiAqIGBgYFxuICovXG5leHBvcnQgdHlwZSBTZXJ2aWNlT3ZlcnJpZGVzID0gUGFydGlhbDx7XG4gIFtLIGluIGtleW9mIFNlcnZpY2VSZWdpc3RyeV06IFNlcnZpY2VSZWdpc3RyeVtLXTtcbn0+O1xuXG4vKipcbiAqIEN1c3RvbSBzZXJ2aWNlIG92ZXJyaWRlcyBmb3IgdGVzdGluZ1xuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEN1c3RvbVNlcnZpY2VPdmVycmlkZXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIER5bmFtaWMgb3ZlcnJpZGVzIGZvciBjdXN0b20gc2VydmljZXMgbm90IGluIHRoZSByZWdpc3RyeS5cbiAqIFByb3ZpZGVzIGZsZXhpYmlsaXR5IGZvciB0ZXN0LXNwZWNpZmljIHNlcnZpY2VzLlxuICovXG5leHBvcnQgdHlwZSBDdXN0b21TZXJ2aWNlT3ZlcnJpZGVzID0gUmVjb3JkPHN0cmluZywgYW55PjtcblxuLyoqXG4gKiBDb21iaW5lZCBvdmVycmlkZXMgZm9yIHRlc3QgY29udGFpbmVyc1xuICpcbiAqIEBpbnRlcmZhY2UgVGVzdENvbnRhaW5lck92ZXJyaWRlc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29uZmlndXJhdGlvbiBvYmplY3QgZm9yIGNyZWF0aW5nIHRlc3QgY29udGFpbmVycyB3aXRoXG4gKiBib3RoIHJlZ2lzdGVyZWQgYW5kIGN1c3RvbSBzZXJ2aWNlIG92ZXJyaWRlcy5cbiAqXG4gKiBAcHJvcGVydHkge1NlcnZpY2VPdmVycmlkZXN9IFtzZXJ2aWNlc10gLSBSZWdpc3RyeSBzZXJ2aWNlIG92ZXJyaWRlc1xuICogQHByb3BlcnR5IHtDdXN0b21TZXJ2aWNlT3ZlcnJpZGVzfSBbY3VzdG9tXSAtIEN1c3RvbSBzZXJ2aWNlIG92ZXJyaWRlc1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCB0ZXN0T3ZlcnJpZGVzOiBUZXN0Q29udGFpbmVyT3ZlcnJpZGVzID0ge1xuICogICBzZXJ2aWNlczoge1xuICogICAgICdwbGF0Zm9ybS5zdG9yYWdlJzogbW9ja1N0b3JhZ2VcbiAqICAgfSxcbiAqICAgY3VzdG9tOiB7XG4gKiAgICAgJ3Rlc3QuaGVscGVyJzogdGVzdEhlbHBlclxuICogICB9XG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGVzdENvbnRhaW5lck92ZXJyaWRlcyB7XG4gIHNlcnZpY2VzPzogU2VydmljZU92ZXJyaWRlcztcbiAgY3VzdG9tPzogQ3VzdG9tU2VydmljZU92ZXJyaWRlcztcbn1cblxuLyoqXG4gKiBTZXJ2aWNlIGNvbnRhaW5lciBjb25maWd1cmF0aW9uXG4gKlxuICogQGludGVyZmFjZSBTZXJ2aWNlQ29udGFpbmVyQ29uZmlnXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBzZXJ2aWNlIGNvbnRhaW5lciBiZWhhdmlvci5cbiAqIENvbnRyb2xzIGNhY2hpbmcsIHZhbGlkYXRpb24sIGFuZCBkZWJ1Z2dpbmcgZmVhdHVyZXMuXG4gKlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlU2luZ2xldG9ucz10cnVlXSAtIENhY2hlIHNlcnZpY2UgaW5zdGFuY2VzIChzaW5nbGV0b24gcGF0dGVybilcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3ZhbGlkYXRlS2V5cz10cnVlXSAtIFZhbGlkYXRlIGtleXMgdG8gcHJldmVudCBkdXBsaWNhdGUgcmVnaXN0cmF0aW9uXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBbbG9nZ2VyXSAtIE9wdGlvbmFsIGxvZ2dlciBmb3IgZGVidWdnaW5nIHNlcnZpY2UgcmVzb2x1dGlvblxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBjb25maWc6IFNlcnZpY2VDb250YWluZXJDb25maWcgPSB7XG4gKiAgIHVzZVNpbmdsZXRvbnM6IHRydWUsXG4gKiAgIHZhbGlkYXRlS2V5czogdHJ1ZSxcbiAqICAgbG9nZ2VyOiAobXNnKSA9PiBjb25zb2xlLmxvZyhgW0NvbnRhaW5lcl0gJHttc2d9YClcbiAqIH07XG4gKlxuICogY29uc3QgY29udGFpbmVyID0gbmV3IFNlcnZpY2VDb250YWluZXIoY29uZmlnKTtcbiAqIGBgYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlcnZpY2VDb250YWluZXJDb25maWcge1xuICAvLyBXaGV0aGVyIHRvIHVzZSBzaW5nbGV0b24gcGF0dGVybiAob25lIGluc3RhbmNlIHBlciBrZXkpXG4gIHVzZVNpbmdsZXRvbnM/OiBib29sZWFuO1xuXG4gIC8vIFdoZXRoZXIgdG8gdmFsaWRhdGUgc2VydmljZSBrZXlzXG4gIHZhbGlkYXRlS2V5cz86IGJvb2xlYW47XG5cbiAgLy8gTG9nZ2VyIGZ1bmN0aW9uIGZvciBkZWJ1Z2dpbmdcbiAgbG9nZ2VyPzogKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhIHJlcXVlc3RlZCBzZXJ2aWNlIGlzIG5vdCBmb3VuZFxuICpcbiAqIEBjbGFzcyBTZXJ2aWNlTm90Rm91bmRFcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhyb3duIHdoZW4gYXR0ZW1wdGluZyB0byByZXNvbHZlIGEgc2VydmljZSB0aGF0IGhhc24ndCBiZWVuIHJlZ2lzdGVyZWQuXG4gKiBJbmNsdWRlcyB0aGUgcmVxdWVzdGVkIGtleSBpbiB0aGUgZXJyb3IgbWVzc2FnZSBmb3IgZGVidWdnaW5nLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiB0cnkge1xuICogICBjb250YWluZXIucmVzb2x2ZSgndW5rbm93bi5zZXJ2aWNlJyk7XG4gKiB9IGNhdGNoIChlcnJvcikge1xuICogICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBTZXJ2aWNlTm90Rm91bmRFcnJvcikge1xuICogICAgIGNvbnNvbGUuZXJyb3IoJ1NlcnZpY2Ugbm90IHJlZ2lzdGVyZWQ6JywgZXJyb3IubWVzc2FnZSk7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgU2VydmljZU5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKGtleTogc3RyaW5nKSB7XG4gICAgc3VwZXIoYFNlcnZpY2Ugbm90IGZvdW5kIGZvciBrZXk6ICR7a2V5fWApO1xuICAgIHRoaXMubmFtZSA9IFwiU2VydmljZU5vdEZvdW5kRXJyb3JcIjtcbiAgfVxufVxuXG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGF0dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYSBkdXBsaWNhdGUgc2VydmljZVxuICpcbiAqIEBjbGFzcyBTZXJ2aWNlQWxyZWFkeVJlZ2lzdGVyZWRFcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhyb3duIHdoZW4gdHJ5aW5nIHRvIHJlZ2lzdGVyIGEgc2VydmljZSB3aXRoIGEga2V5IHRoYXQncyBhbHJlYWR5XG4gKiBpbiB1c2UuIE9ubHkgdGhyb3duIHdoZW4gdmFsaWRhdGVLZXlzIGlzIGVuYWJsZWQgaW4gY29uZmlndXJhdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29udGFpbmVyLnJlZ2lzdGVyKCdteS5zZXJ2aWNlJywgZmFjdG9yeTEpO1xuICogdHJ5IHtcbiAqICAgY29udGFpbmVyLnJlZ2lzdGVyKCdteS5zZXJ2aWNlJywgZmFjdG9yeTIpOyAvLyBUaHJvd3NcbiAqIH0gY2F0Y2ggKGVycm9yKSB7XG4gKiAgIGNvbnNvbGUuZXJyb3IoJ0R1cGxpY2F0ZSByZWdpc3RyYXRpb246JywgZXJyb3IubWVzc2FnZSk7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFNlcnZpY2VBbHJlYWR5UmVnaXN0ZXJlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihrZXk6IHN0cmluZykge1xuICAgIHN1cGVyKGBTZXJ2aWNlIGFscmVhZHkgcmVnaXN0ZXJlZCBmb3Iga2V5OiAke2tleX1gKTtcbiAgICB0aGlzLm5hbWUgPSBcIlNlcnZpY2VBbHJlYWR5UmVnaXN0ZXJlZEVycm9yXCI7XG4gIH1cbn1cblxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYXJlIGRldGVjdGVkXG4gKlxuICogQGNsYXNzIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yXG4gKiBAZXh0ZW5kcyB7RXJyb3J9XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaHJvd24gd2hlbiBzZXJ2aWNlIHJlc29sdXRpb24gZW5jb3VudGVycyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgY2hhaW4uXG4gKiBUaGUgZXJyb3IgbWVzc2FnZSBpbmNsdWRlcyB0aGUgY29tcGxldGUgZGVwZW5kZW5jeSBjaGFpbiBmb3IgZGVidWdnaW5nLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBTZXJ2aWNlIEEgZGVwZW5kcyBvbiBCLCBCIGRlcGVuZHMgb24gQVxuICogY29udGFpbmVyLnJlZ2lzdGVyKCdhJywgKGMpID0+IG5ldyBBKGMucmVzb2x2ZSgnYicpKSk7XG4gKiBjb250YWluZXIucmVnaXN0ZXIoJ2InLCAoYykgPT4gbmV3IEIoYy5yZXNvbHZlKCdhJykpKTtcbiAqXG4gKiB0cnkge1xuICogICBjb250YWluZXIucmVzb2x2ZSgnYScpOyAvLyBUaHJvd3MgQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3JcbiAqIH0gY2F0Y2ggKGVycm9yKSB7XG4gKiAgIGNvbnNvbGUuZXJyb3IoJ0NpcmN1bGFyIGRlcGVuZGVuY3k6JywgZXJyb3IubWVzc2FnZSk7XG4gKiAgIC8vIFwiQ2lyY3VsYXIgZGVwZW5kZW5jeSBkZXRlY3RlZDogYSAtPiBiIC0+IGFcIlxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDaXJjdWxhckRlcGVuZGVuY3lFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoY2hhaW46IHN0cmluZ1tdKSB7XG4gICAgc3VwZXIoYENpcmN1bGFyIGRlcGVuZGVuY3kgZGV0ZWN0ZWQ6ICR7Y2hhaW4uam9pbihcIiAtPiBcIil9YCk7XG4gICAgdGhpcy5uYW1lID0gXCJDaXJjdWxhckRlcGVuZGVuY3lFcnJvclwiO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTZCQzs7QUFBQTtBQUFBLFNBQUFBLGVBQUE7RUFBQSxJQUFBQyxJQUFBO0VBQUEsSUFBQUMsSUFBQTtFQUFBLElBQUFDLE1BQUEsT0FBQUMsUUFBQTtFQUFBLElBQUFDLEdBQUE7RUFBQSxJQUFBQyxZQUFBO0lBQUFMLElBQUE7SUFBQU0sWUFBQTtNQUFBO1FBQUFDLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO01BQUE7UUFBQUYsS0FBQTtVQUFBQyxJQUFBO1VBQUFDLE1BQUE7UUFBQTtRQUFBQyxHQUFBO1VBQUFGLElBQUE7VUFBQUMsTUFBQTtRQUFBO01BQUE7TUFBQTtRQUFBRixLQUFBO1VBQUFDLElBQUE7VUFBQUMsTUFBQTtRQUFBO1FBQUFDLEdBQUE7VUFBQUYsSUFBQTtVQUFBQyxNQUFBO1FBQUE7TUFBQTtNQUFBO1FBQUFGLEtBQUE7VUFBQUMsSUFBQTtVQUFBQyxNQUFBO1FBQUE7UUFBQUMsR0FBQTtVQUFBRixJQUFBO1VBQUFDLE1BQUE7UUFBQTtNQUFBO0lBQUE7SUFBQUUsS0FBQTtNQUFBO1FBQUFDLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7WUFBQUYsSUFBQTtZQUFBQyxNQUFBO1VBQUE7UUFBQTtRQUFBSyxHQUFBO1VBQUFQLEtBQUE7WUFBQUMsSUFBQTtZQUFBQyxNQUFBO1VBQUE7VUFBQUMsR0FBQTtZQUFBRixJQUFBO1lBQUFDLE1BQUE7VUFBQTtRQUFBO1FBQUFELElBQUE7TUFBQTtNQUFBO1FBQUFJLElBQUE7UUFBQUMsSUFBQTtVQUFBTixLQUFBO1lBQUFDLElBQUE7WUFBQUMsTUFBQTtVQUFBO1VBQUFDLEdBQUE7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