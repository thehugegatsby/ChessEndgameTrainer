59c00488ebe5d815d19e7fe7bbc12da1
/**
 * @file Tests for useMoveValidation hook
 * @module tests/unit/hooks/useMoveValidation
 * 
 * @description
 * Comprehensive tests for the useMoveValidation hook that handles
 * move validation and quality assessment logic.
 * 
 * Tests cover:
 * - Move quality evaluation
 * - Tablebase result processing
 * - Analysis status updates
 * - Error handling and edge cases
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _useMoveValidation = require("../../../shared/hooks/useMoveValidation");
// Mock dependencies
const mockTablebaseActions = {
    setAnalysisStatus: jest.fn(),
    setAnalysisResult: jest.fn()
};
const mockTablebaseState = {
    analysisStatus: 'idle',
    analysisResult: null,
    cache: new Map()
};
describe('useMoveValidation', ()=>{
    const defaultProps = {
        lastEvaluation: null,
        currentFen: '8/8/8/8/8/8/8/8 w - - 0 1',
        evaluations: [],
        isEvaluating: false,
        tablebaseState: mockTablebaseState,
        tablebaseActions: mockTablebaseActions
    };
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    describe('Hook Initialization', ()=>{
        it('initializes with correct default values', ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(defaultProps));
            expect(result.current).toBeDefined();
        // Hook returns move validation utilities
        });
        it('handles missing dependencies gracefully', ()=>{
            const propsWithMissingDeps = {
                ...defaultProps,
                lastEvaluation: undefined,
                evaluations: undefined
            };
            expect(()=>{
                (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(propsWithMissingDeps));
            }).not.toThrow();
        });
    });
    describe('Move Quality Assessment', ()=>{
        it('processes tablebase results correctly', ()=>{
            const mockEvaluation = {
                fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                evaluation: 100,
                moves: [
                    {
                        move: 'Kh1',
                        wdl: 1,
                        dtm: 5
                    },
                    {
                        move: 'Kg1',
                        wdl: 0,
                        dtm: 0
                    }
                ],
                isAvailable: true
            };
            const props = {
                ...defaultProps,
                lastEvaluation: mockEvaluation,
                isEvaluating: false
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            // Hook should process the evaluation
            expect(result.current).toBeDefined();
        });
        it('handles unavailable tablebase results', ()=>{
            const mockEvaluation = {
                fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                evaluation: 0,
                moves: [],
                isAvailable: false,
                error: 'Position not in tablebase'
            };
            const props = {
                ...defaultProps,
                lastEvaluation: mockEvaluation
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            expect(result.current).toBeDefined();
        });
    });
    describe('Analysis Status Management', ()=>{
        it('updates analysis status when evaluation starts', ()=>{
            const { rerender } = (0, _react.renderHook)((props)=>(0, _useMoveValidation.useMoveValidation)(props), {
                initialProps: {
                    ...defaultProps,
                    isEvaluating: false
                }
            });
            // Start evaluating
            rerender({
                ...defaultProps,
                isEvaluating: true
            });
            // Status should be updated in some way (hook manages internal state)
            expect(mockTablebaseActions.setAnalysisStatus).toHaveBeenCalled();
        });
        it('clears analysis status when evaluation completes', ()=>{
            const { rerender } = (0, _react.renderHook)((props)=>(0, _useMoveValidation.useMoveValidation)(props), {
                initialProps: {
                    ...defaultProps,
                    isEvaluating: true
                }
            });
            // Complete evaluation
            const mockResult = {
                fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                evaluation: 100,
                moves: [
                    {
                        move: 'Kh1',
                        wdl: 1
                    }
                ],
                isAvailable: true
            };
            rerender({
                ...defaultProps,
                isEvaluating: false,
                lastEvaluation: mockResult
            });
            expect(mockTablebaseActions.setAnalysisStatus).toHaveBeenCalled();
        });
    });
    describe('Error Handling', ()=>{
        it('handles evaluation errors gracefully', ()=>{
            const mockEvaluation = {
                fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                evaluation: 0,
                moves: [],
                isAvailable: false,
                error: 'Network error'
            };
            const props = {
                ...defaultProps,
                lastEvaluation: mockEvaluation
            };
            expect(()=>{
                (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            }).not.toThrow();
        });
        it('handles malformed evaluation data', ()=>{
            const malformedEvaluation = {
                // Missing required fields
                moves: null,
                isAvailable: true
            };
            const props = {
                ...defaultProps,
                lastEvaluation: malformedEvaluation
            };
            expect(()=>{
                (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            }).not.toThrow();
        });
    });
    describe('FEN Position Changes', ()=>{
        it('reacts to FEN changes', ()=>{
            const { rerender } = (0, _react.renderHook)((props)=>(0, _useMoveValidation.useMoveValidation)(props), {
                initialProps: defaultProps
            });
            const newFen = '4k3/8/4K3/4P3/8/8/8/8 w - - 0 1';
            rerender({
                ...defaultProps,
                currentFen: newFen
            });
            // Hook should handle FEN changes - this is a passive hook that processes data
            // It may not directly call setAnalysisStatus, depending on implementation
            expect(mockTablebaseActions.setAnalysisStatus).toHaveBeenCalledTimes(0);
        });
        it('validates FEN format correctly', ()=>{
            const invalidFen = 'invalid-fen-string';
            const props = {
                ...defaultProps,
                currentFen: invalidFen
            };
            expect(()=>{
                (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            }).not.toThrow();
        });
    });
    describe('Evaluation History', ()=>{
        it('processes evaluation history correctly', ()=>{
            const evaluationHistory = [
                {
                    fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                    evaluation: 100
                },
                {
                    fen: '4k3/8/4K3/4P3/8/8/8/8 b - - 1 1',
                    evaluation: -50
                }
            ];
            const props = {
                ...defaultProps,
                evaluations: evaluationHistory
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            expect(result.current).toBeDefined();
        });
        it('handles empty evaluation history', ()=>{
            const props = {
                ...defaultProps,
                evaluations: []
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            expect(result.current).toBeDefined();
        });
    });
    describe('Tablebase State Integration', ()=>{
        it('reads from tablebase state correctly', ()=>{
            const tablebaseStateWithResults = {
                ...mockTablebaseState,
                analysisStatus: 'success',
                analysisResult: {
                    moves: [
                        {
                            move: 'Kh1',
                            wdl: 1,
                            dtm: 3
                        }
                    ]
                }
            };
            const props = {
                ...defaultProps,
                tablebaseState: tablebaseStateWithResults
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            expect(result.current).toBeDefined();
        });
        it('handles tablebase loading states', ()=>{
            const loadingTablebaseState = {
                ...mockTablebaseState,
                analysisStatus: 'loading',
                analysisResult: null
            };
            const props = {
                ...defaultProps,
                tablebaseState: loadingTablebaseState
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            expect(result.current).toBeDefined();
        });
        it('handles tablebase error states', ()=>{
            const errorTablebaseState = {
                ...mockTablebaseState,
                analysisStatus: 'error',
                analysisResult: null
            };
            const props = {
                ...defaultProps,
                tablebaseState: errorTablebaseState
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            expect(result.current).toBeDefined();
        });
    });
    describe('Performance and Memory', ()=>{
        it('maintains stable references between renders', ()=>{
            const { result, rerender } = (0, _react.renderHook)((props)=>(0, _useMoveValidation.useMoveValidation)(props), {
                initialProps: defaultProps
            });
            const initialResult = result.current;
            // Re-render with same props
            rerender(defaultProps);
            // Should maintain reference stability where appropriate
            expect(result.current).toBeDefined();
        });
        it('properly cleans up on unmount', ()=>{
            const { unmount } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(defaultProps));
            // Should not throw on unmount
            expect(()=>{
                unmount();
            }).not.toThrow();
        });
    });
    describe('Complex Scenarios', ()=>{
        it('handles rapid FEN changes', ()=>{
            const { rerender } = (0, _react.renderHook)((props)=>(0, _useMoveValidation.useMoveValidation)(props), {
                initialProps: defaultProps
            });
            // Rapidly change FENs
            const fens = [
                '8/8/8/8/8/8/8/8 w - - 0 1',
                '4k3/8/4K3/4P3/8/8/8/8 w - - 0 1',
                '4k3/8/4K3/8/4P3/8/8/8 b - - 1 1'
            ];
            fens.forEach((fen)=>{
                rerender({
                    ...defaultProps,
                    currentFen: fen
                });
            });
            // Should handle rapid changes gracefully - useMoveValidation is a passive processor
            expect(mockTablebaseActions.setAnalysisStatus).toHaveBeenCalledTimes(0);
        });
        it('handles concurrent evaluation states', ()=>{
            const props = {
                ...defaultProps,
                isEvaluating: true,
                lastEvaluation: {
                    fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                    evaluation: 100,
                    moves: [
                        {
                            move: 'Kh1',
                            wdl: 1
                        }
                    ],
                    isAvailable: true
                }
            };
            expect(()=>{
                (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            }).not.toThrow();
        });
    });
    describe('Edge Cases and Safeguards', ()=>{
        it('handles missing setEvaluations action gracefully', ()=>{
            const actionsWithoutSetEvaluations = {
                ...mockTablebaseActions,
                setEvaluations: undefined
            };
            const mockEvaluation = {
                fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                evaluation: 100,
                moves: [
                    {
                        move: 'Kh1',
                        wdl: 1,
                        dtm: 5
                    }
                ],
                isAvailable: true
            };
            const props = {
                ...defaultProps,
                lastEvaluation: mockEvaluation,
                tablebaseActions: actionsWithoutSetEvaluations
            };
            // Should not throw when setEvaluations is missing
            expect(()=>{
                (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            }).not.toThrow();
        });
        it('handles missing setAnalysisStatus action gracefully', ()=>{
            const actionsWithoutSetAnalysisStatus = {
                ...mockTablebaseActions,
                setAnalysisStatus: undefined
            };
            const props = {
                ...defaultProps,
                isEvaluating: true,
                tablebaseActions: actionsWithoutSetAnalysisStatus
            };
            // Should not throw when setAnalysisStatus is missing
            expect(()=>{
                (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            }).not.toThrow();
        });
        it('skips already processed evaluations', ()=>{
            const mockEvaluation = {
                fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                evaluation: 100,
                mateInMoves: 5,
                moves: [
                    {
                        move: 'Kh1',
                        wdl: 1,
                        dtm: 5
                    }
                ],
                isAvailable: true
            };
            const props = {
                ...defaultProps,
                lastEvaluation: mockEvaluation
            };
            const { result, rerender } = (0, _react.renderHook)((props)=>(0, _useMoveValidation.useMoveValidation)(props), {
                initialProps: props
            });
            // First render should process the evaluation
            expect(mockTablebaseActions.setAnalysisResult).toHaveBeenCalledTimes(0);
            // Second render with same evaluation should be skipped
            rerender(props);
            // Should not process the same evaluation twice
            expect(result.current).toBeDefined();
        });
        it('processes different evaluations separately', ()=>{
            const firstEvaluation = {
                fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                evaluation: 100,
                moves: [
                    {
                        move: 'Kh1',
                        wdl: 1,
                        dtm: 5
                    }
                ],
                isAvailable: true
            };
            const secondEvaluation = {
                fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                evaluation: 200,
                moves: [
                    {
                        move: 'Kh2',
                        wdl: 1,
                        dtm: 3
                    }
                ],
                isAvailable: true
            };
            const { result, rerender } = (0, _react.renderHook)((props)=>(0, _useMoveValidation.useMoveValidation)(props), {
                initialProps: {
                    ...defaultProps,
                    lastEvaluation: firstEvaluation
                }
            });
            // Process second evaluation with different score
            rerender({
                ...defaultProps,
                lastEvaluation: secondEvaluation
            });
            // Both evaluations should be processed
            expect(result.current).toBeDefined();
        });
    });
    describe('Integration with Other Hooks', ()=>{
        it('works with evaluation data from usePositionAnalysis', ()=>{
            const mockPositionAnalysisData = {
                fen: '8/8/8/8/8/8/8/8 w - - 0 1',
                evaluation: 100,
                moves: [
                    {
                        move: 'Kh1',
                        wdl: 1,
                        dtm: 5,
                        evaluation: 100
                    },
                    {
                        move: 'Kg1',
                        wdl: 0,
                        dtm: 0,
                        evaluation: 0
                    }
                ],
                isAvailable: true,
                bestMove: 'Kh1'
            };
            const props = {
                ...defaultProps,
                lastEvaluation: mockPositionAnalysisData,
                evaluations: [
                    mockPositionAnalysisData
                ]
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            expect(result.current).toBeDefined();
        });
        it('integrates with tablebase store state', ()=>{
            const richTablebaseState = {
                analysisStatus: 'success',
                analysisResult: {
                    position: '8/8/8/8/8/8/8/8 w - - 0 1',
                    moves: [
                        {
                            move: 'Kh1',
                            wdl: 1,
                            dtm: 3
                        },
                        {
                            move: 'Kg1',
                            wdl: -1,
                            dtm: 15
                        }
                    ],
                    bestMove: 'Kh1'
                },
                cache: new Map([
                    [
                        '8/8/8/8/8/8/8/8 w - - 0 1',
                        {
                            wdl: 1,
                            moves: [
                                'Kh1'
                            ]
                        }
                    ]
                ])
            };
            const props = {
                ...defaultProps,
                tablebaseState: richTablebaseState
            };
            const { result } = (0, _react.renderHook)(()=>(0, _useMoveValidation.useMoveValidation)(props));
            expect(result.current).toBeDefined();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RoZWh1L2Nvb2xQcm9qZWN0cy9FbmRnYW1lVHJhaW5lci10cmFpbmluZy1ib2FyZC1jb21wbGV0ZS9zcmMvdGVzdHMvdW5pdC9ob29rcy91c2VNb3ZlVmFsaWRhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgVGVzdHMgZm9yIHVzZU1vdmVWYWxpZGF0aW9uIGhvb2tcbiAqIEBtb2R1bGUgdGVzdHMvdW5pdC9ob29rcy91c2VNb3ZlVmFsaWRhdGlvblxuICogXG4gKiBAZGVzY3JpcHRpb25cbiAqIENvbXByZWhlbnNpdmUgdGVzdHMgZm9yIHRoZSB1c2VNb3ZlVmFsaWRhdGlvbiBob29rIHRoYXQgaGFuZGxlc1xuICogbW92ZSB2YWxpZGF0aW9uIGFuZCBxdWFsaXR5IGFzc2Vzc21lbnQgbG9naWMuXG4gKiBcbiAqIFRlc3RzIGNvdmVyOlxuICogLSBNb3ZlIHF1YWxpdHkgZXZhbHVhdGlvblxuICogLSBUYWJsZWJhc2UgcmVzdWx0IHByb2Nlc3NpbmdcbiAqIC0gQW5hbHlzaXMgc3RhdHVzIHVwZGF0ZXNcbiAqIC0gRXJyb3IgaGFuZGxpbmcgYW5kIGVkZ2UgY2FzZXNcbiAqL1xuXG5pbXBvcnQgeyByZW5kZXJIb29rLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IHVzZU1vdmVWYWxpZGF0aW9uIH0gZnJvbSAnQHNoYXJlZC9ob29rcy91c2VNb3ZlVmFsaWRhdGlvbic7XG5cbi8vIE1vY2sgZGVwZW5kZW5jaWVzXG5jb25zdCBtb2NrVGFibGViYXNlQWN0aW9ucyA9IHtcbiAgc2V0QW5hbHlzaXNTdGF0dXM6IGplc3QuZm4oKSxcbiAgc2V0QW5hbHlzaXNSZXN1bHQ6IGplc3QuZm4oKSxcbn07XG5cbmNvbnN0IG1vY2tUYWJsZWJhc2VTdGF0ZSA9IHtcbiAgYW5hbHlzaXNTdGF0dXM6ICdpZGxlJyBhcyBjb25zdCxcbiAgYW5hbHlzaXNSZXN1bHQ6IG51bGwsXG4gIGNhY2hlOiBuZXcgTWFwKCksXG59O1xuXG5kZXNjcmliZSgndXNlTW92ZVZhbGlkYXRpb24nLCAoKSA9PiB7XG4gIGNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcbiAgICBsYXN0RXZhbHVhdGlvbjogbnVsbCxcbiAgICBjdXJyZW50RmVuOiAnOC84LzgvOC84LzgvOC84IHcgLSAtIDAgMScsXG4gICAgZXZhbHVhdGlvbnM6IFtdLFxuICAgIGlzRXZhbHVhdGluZzogZmFsc2UsXG4gICAgdGFibGViYXNlU3RhdGU6IG1vY2tUYWJsZWJhc2VTdGF0ZSxcbiAgICB0YWJsZWJhc2VBY3Rpb25zOiBtb2NrVGFibGViYXNlQWN0aW9ucyxcbiAgfTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0hvb2sgSW5pdGlhbGl6YXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ2luaXRpYWxpemVzIHdpdGggY29ycmVjdCBkZWZhdWx0IHZhbHVlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKGRlZmF1bHRQcm9wcykpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAvLyBIb29rIHJldHVybnMgbW92ZSB2YWxpZGF0aW9uIHV0aWxpdGllc1xuICAgIH0pO1xuXG4gICAgaXQoJ2hhbmRsZXMgbWlzc2luZyBkZXBlbmRlbmNpZXMgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BzV2l0aE1pc3NpbmdEZXBzID0ge1xuICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGxhc3RFdmFsdWF0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgIGV2YWx1YXRpb25zOiB1bmRlZmluZWQsXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzV2l0aE1pc3NpbmdEZXBzIGFzIGFueSkpO1xuICAgICAgfSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01vdmUgUXVhbGl0eSBBc3Nlc3NtZW50JywgKCkgPT4ge1xuICAgIGl0KCdwcm9jZXNzZXMgdGFibGViYXNlIHJlc3VsdHMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0V2YWx1YXRpb24gPSB7XG4gICAgICAgIGZlbjogJzgvOC84LzgvOC84LzgvOCB3IC0gLSAwIDEnLFxuICAgICAgICBldmFsdWF0aW9uOiAxMDAsXG4gICAgICAgIG1vdmVzOiBbXG4gICAgICAgICAgeyBtb3ZlOiAnS2gxJywgd2RsOiAxLCBkdG06IDUgfSxcbiAgICAgICAgICB7IG1vdmU6ICdLZzEnLCB3ZGw6IDAsIGR0bTogMCB9LFxuICAgICAgICBdLFxuICAgICAgICBpc0F2YWlsYWJsZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGxhc3RFdmFsdWF0aW9uOiBtb2NrRXZhbHVhdGlvbixcbiAgICAgICAgaXNFdmFsdWF0aW5nOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSk7XG5cbiAgICAgIC8vIEhvb2sgc2hvdWxkIHByb2Nlc3MgdGhlIGV2YWx1YXRpb25cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYW5kbGVzIHVuYXZhaWxhYmxlIHRhYmxlYmFzZSByZXN1bHRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0V2YWx1YXRpb24gPSB7XG4gICAgICAgIGZlbjogJzgvOC84LzgvOC84LzgvOCB3IC0gLSAwIDEnLFxuICAgICAgICBldmFsdWF0aW9uOiAwLFxuICAgICAgICBtb3ZlczogW10sXG4gICAgICAgIGlzQXZhaWxhYmxlOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdQb3NpdGlvbiBub3QgaW4gdGFibGViYXNlJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGxhc3RFdmFsdWF0aW9uOiBtb2NrRXZhbHVhdGlvbixcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FuYWx5c2lzIFN0YXR1cyBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCd1cGRhdGVzIGFuYWx5c2lzIHN0YXR1cyB3aGVuIGV2YWx1YXRpb24gc3RhcnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXJlbmRlciB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKHByb3BzKSA9PiB1c2VNb3ZlVmFsaWRhdGlvbihwcm9wcyksXG4gICAgICAgIHsgXG4gICAgICAgICAgaW5pdGlhbFByb3BzOiB7IC4uLmRlZmF1bHRQcm9wcywgaXNFdmFsdWF0aW5nOiBmYWxzZSB9XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIC8vIFN0YXJ0IGV2YWx1YXRpbmdcbiAgICAgIHJlcmVuZGVyKHsgLi4uZGVmYXVsdFByb3BzLCBpc0V2YWx1YXRpbmc6IHRydWUgfSk7XG5cbiAgICAgIC8vIFN0YXR1cyBzaG91bGQgYmUgdXBkYXRlZCBpbiBzb21lIHdheSAoaG9vayBtYW5hZ2VzIGludGVybmFsIHN0YXRlKVxuICAgICAgZXhwZWN0KG1vY2tUYWJsZWJhc2VBY3Rpb25zLnNldEFuYWx5c2lzU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnY2xlYXJzIGFuYWx5c2lzIHN0YXR1cyB3aGVuIGV2YWx1YXRpb24gY29tcGxldGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXJlbmRlciB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKHByb3BzKSA9PiB1c2VNb3ZlVmFsaWRhdGlvbihwcm9wcyksXG4gICAgICAgIHsgXG4gICAgICAgICAgaW5pdGlhbFByb3BzOiB7IC4uLmRlZmF1bHRQcm9wcywgaXNFdmFsdWF0aW5nOiB0cnVlIH1cbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgLy8gQ29tcGxldGUgZXZhbHVhdGlvblxuICAgICAgY29uc3QgbW9ja1Jlc3VsdCA9IHtcbiAgICAgICAgZmVuOiAnOC84LzgvOC84LzgvOC84IHcgLSAtIDAgMScsXG4gICAgICAgIGV2YWx1YXRpb246IDEwMCxcbiAgICAgICAgbW92ZXM6IFt7IG1vdmU6ICdLaDEnLCB3ZGw6IDEgfV0sXG4gICAgICAgIGlzQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgcmVyZW5kZXIoeyBcbiAgICAgICAgLi4uZGVmYXVsdFByb3BzLCBcbiAgICAgICAgaXNFdmFsdWF0aW5nOiBmYWxzZSxcbiAgICAgICAgbGFzdEV2YWx1YXRpb246IG1vY2tSZXN1bHQgYXMgYW55LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrVGFibGViYXNlQWN0aW9ucy5zZXRBbmFseXNpc1N0YXR1cykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ2hhbmRsZXMgZXZhbHVhdGlvbiBlcnJvcnMgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tFdmFsdWF0aW9uID0ge1xuICAgICAgICBmZW46ICc4LzgvOC84LzgvOC84LzggdyAtIC0gMCAxJyxcbiAgICAgICAgZXZhbHVhdGlvbjogMCxcbiAgICAgICAgbW92ZXM6IFtdLFxuICAgICAgICBpc0F2YWlsYWJsZTogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnTmV0d29yayBlcnJvcicsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgLi4uZGVmYXVsdFByb3BzLFxuICAgICAgICBsYXN0RXZhbHVhdGlvbjogbW9ja0V2YWx1YXRpb24sXG4gICAgICB9O1xuXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2hhbmRsZXMgbWFsZm9ybWVkIGV2YWx1YXRpb24gZGF0YScsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGZvcm1lZEV2YWx1YXRpb24gPSB7XG4gICAgICAgIC8vIE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXG4gICAgICAgIG1vdmVzOiBudWxsLFxuICAgICAgICBpc0F2YWlsYWJsZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGxhc3RFdmFsdWF0aW9uOiBtYWxmb3JtZWRFdmFsdWF0aW9uIGFzIGFueSxcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIHJlbmRlckhvb2soKCkgPT4gdXNlTW92ZVZhbGlkYXRpb24ocHJvcHMpKTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGRU4gUG9zaXRpb24gQ2hhbmdlcycsICgpID0+IHtcbiAgICBpdCgncmVhY3RzIHRvIEZFTiBjaGFuZ2VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXJlbmRlciB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKHByb3BzKSA9PiB1c2VNb3ZlVmFsaWRhdGlvbihwcm9wcyksXG4gICAgICAgIHsgXG4gICAgICAgICAgaW5pdGlhbFByb3BzOiBkZWZhdWx0UHJvcHNcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgY29uc3QgbmV3RmVuID0gJzRrMy84LzRLMy80UDMvOC84LzgvOCB3IC0gLSAwIDEnO1xuICAgICAgcmVyZW5kZXIoeyAuLi5kZWZhdWx0UHJvcHMsIGN1cnJlbnRGZW46IG5ld0ZlbiB9KTtcblxuICAgICAgLy8gSG9vayBzaG91bGQgaGFuZGxlIEZFTiBjaGFuZ2VzIC0gdGhpcyBpcyBhIHBhc3NpdmUgaG9vayB0aGF0IHByb2Nlc3NlcyBkYXRhXG4gICAgICAvLyBJdCBtYXkgbm90IGRpcmVjdGx5IGNhbGwgc2V0QW5hbHlzaXNTdGF0dXMsIGRlcGVuZGluZyBvbiBpbXBsZW1lbnRhdGlvblxuICAgICAgZXhwZWN0KG1vY2tUYWJsZWJhc2VBY3Rpb25zLnNldEFuYWx5c2lzU3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgndmFsaWRhdGVzIEZFTiBmb3JtYXQgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgaW52YWxpZEZlbiA9ICdpbnZhbGlkLWZlbi1zdHJpbmcnO1xuICAgICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICAgIC4uLmRlZmF1bHRQcm9wcyxcbiAgICAgICAgY3VycmVudEZlbjogaW52YWxpZEZlbixcbiAgICAgIH07XG5cbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIHJlbmRlckhvb2soKCkgPT4gdXNlTW92ZVZhbGlkYXRpb24ocHJvcHMpKTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFdmFsdWF0aW9uIEhpc3RvcnknLCAoKSA9PiB7XG4gICAgaXQoJ3Byb2Nlc3NlcyBldmFsdWF0aW9uIGhpc3RvcnkgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgZXZhbHVhdGlvbkhpc3RvcnkgPSBbXG4gICAgICAgIHsgZmVuOiAnOC84LzgvOC84LzgvOC84IHcgLSAtIDAgMScsIGV2YWx1YXRpb246IDEwMCB9LFxuICAgICAgICB7IGZlbjogJzRrMy84LzRLMy80UDMvOC84LzgvOCBiIC0gLSAxIDEnLCBldmFsdWF0aW9uOiAtNTAgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGV2YWx1YXRpb25zOiBldmFsdWF0aW9uSGlzdG9yeSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYW5kbGVzIGVtcHR5IGV2YWx1YXRpb24gaGlzdG9yeScsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGV2YWx1YXRpb25zOiBbXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1RhYmxlYmFzZSBTdGF0ZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgncmVhZHMgZnJvbSB0YWJsZWJhc2Ugc3RhdGUgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgdGFibGViYXNlU3RhdGVXaXRoUmVzdWx0cyA9IHtcbiAgICAgICAgLi4ubW9ja1RhYmxlYmFzZVN0YXRlLFxuICAgICAgICBhbmFseXNpc1N0YXR1czogJ3N1Y2Nlc3MnIGFzIGNvbnN0LFxuICAgICAgICBhbmFseXNpc1Jlc3VsdDoge1xuICAgICAgICAgIG1vdmVzOiBbeyBtb3ZlOiAnS2gxJywgd2RsOiAxLCBkdG06IDMgfV0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgLi4uZGVmYXVsdFByb3BzLFxuICAgICAgICB0YWJsZWJhc2VTdGF0ZTogdGFibGViYXNlU3RhdGVXaXRoUmVzdWx0cyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYW5kbGVzIHRhYmxlYmFzZSBsb2FkaW5nIHN0YXRlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGxvYWRpbmdUYWJsZWJhc2VTdGF0ZSA9IHtcbiAgICAgICAgLi4ubW9ja1RhYmxlYmFzZVN0YXRlLFxuICAgICAgICBhbmFseXNpc1N0YXR1czogJ2xvYWRpbmcnIGFzIGNvbnN0LFxuICAgICAgICBhbmFseXNpc1Jlc3VsdDogbnVsbCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgIHRhYmxlYmFzZVN0YXRlOiBsb2FkaW5nVGFibGViYXNlU3RhdGUsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VNb3ZlVmFsaWRhdGlvbihwcm9wcykpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnaGFuZGxlcyB0YWJsZWJhc2UgZXJyb3Igc3RhdGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXJyb3JUYWJsZWJhc2VTdGF0ZSA9IHtcbiAgICAgICAgLi4ubW9ja1RhYmxlYmFzZVN0YXRlLFxuICAgICAgICBhbmFseXNpc1N0YXR1czogJ2Vycm9yJyBhcyBjb25zdCxcbiAgICAgICAgYW5hbHlzaXNSZXN1bHQ6IG51bGwsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgLi4uZGVmYXVsdFByb3BzLFxuICAgICAgICB0YWJsZWJhc2VTdGF0ZTogZXJyb3JUYWJsZWJhc2VTdGF0ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIGFuZCBNZW1vcnknLCAoKSA9PiB7XG4gICAgaXQoJ21haW50YWlucyBzdGFibGUgcmVmZXJlbmNlcyBiZXR3ZWVuIHJlbmRlcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCwgcmVyZW5kZXIgfSA9IHJlbmRlckhvb2soXG4gICAgICAgIChwcm9wcykgPT4gdXNlTW92ZVZhbGlkYXRpb24ocHJvcHMpLFxuICAgICAgICB7IGluaXRpYWxQcm9wczogZGVmYXVsdFByb3BzIH1cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGluaXRpYWxSZXN1bHQgPSByZXN1bHQuY3VycmVudDtcblxuICAgICAgLy8gUmUtcmVuZGVyIHdpdGggc2FtZSBwcm9wc1xuICAgICAgcmVyZW5kZXIoZGVmYXVsdFByb3BzKTtcblxuICAgICAgLy8gU2hvdWxkIG1haW50YWluIHJlZmVyZW5jZSBzdGFiaWxpdHkgd2hlcmUgYXBwcm9wcmlhdGVcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdwcm9wZXJseSBjbGVhbnMgdXAgb24gdW5tb3VudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgdW5tb3VudCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VNb3ZlVmFsaWRhdGlvbihkZWZhdWx0UHJvcHMpKTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCB0aHJvdyBvbiB1bm1vdW50XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICB1bm1vdW50KCk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29tcGxleCBTY2VuYXJpb3MnLCAoKSA9PiB7XG4gICAgaXQoJ2hhbmRsZXMgcmFwaWQgRkVOIGNoYW5nZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSByZW5kZXJIb29rKFxuICAgICAgICAocHJvcHMpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSxcbiAgICAgICAgeyBpbml0aWFsUHJvcHM6IGRlZmF1bHRQcm9wcyB9XG4gICAgICApO1xuXG4gICAgICAvLyBSYXBpZGx5IGNoYW5nZSBGRU5zXG4gICAgICBjb25zdCBmZW5zID0gW1xuICAgICAgICAnOC84LzgvOC84LzgvOC84IHcgLSAtIDAgMScsXG4gICAgICAgICc0azMvOC80SzMvNFAzLzgvOC84LzggdyAtIC0gMCAxJyxcbiAgICAgICAgJzRrMy84LzRLMy84LzRQMy84LzgvOCBiIC0gLSAxIDEnLFxuICAgICAgXTtcblxuICAgICAgZmVucy5mb3JFYWNoKGZlbiA9PiB7XG4gICAgICAgIHJlcmVuZGVyKHsgLi4uZGVmYXVsdFByb3BzLCBjdXJyZW50RmVuOiBmZW4gfSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSByYXBpZCBjaGFuZ2VzIGdyYWNlZnVsbHkgLSB1c2VNb3ZlVmFsaWRhdGlvbiBpcyBhIHBhc3NpdmUgcHJvY2Vzc29yXG4gICAgICBleHBlY3QobW9ja1RhYmxlYmFzZUFjdGlvbnMuc2V0QW5hbHlzaXNTdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygwKTtcbiAgICB9KTtcblxuICAgIGl0KCdoYW5kbGVzIGNvbmN1cnJlbnQgZXZhbHVhdGlvbiBzdGF0ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgLi4uZGVmYXVsdFByb3BzLFxuICAgICAgICBpc0V2YWx1YXRpbmc6IHRydWUsXG4gICAgICAgIGxhc3RFdmFsdWF0aW9uOiB7XG4gICAgICAgICAgZmVuOiAnOC84LzgvOC84LzgvOC84IHcgLSAtIDAgMScsXG4gICAgICAgICAgZXZhbHVhdGlvbjogMTAwLFxuICAgICAgICAgIG1vdmVzOiBbeyBtb3ZlOiAnS2gxJywgd2RsOiAxIH1dLFxuICAgICAgICAgIGlzQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgcmVuZGVySG9vaygoKSA9PiB1c2VNb3ZlVmFsaWRhdGlvbihwcm9wcykpO1xuICAgICAgfSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMgYW5kIFNhZmVndWFyZHMnLCAoKSA9PiB7XG4gICAgaXQoJ2hhbmRsZXMgbWlzc2luZyBzZXRFdmFsdWF0aW9ucyBhY3Rpb24gZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGlvbnNXaXRob3V0U2V0RXZhbHVhdGlvbnMgPSB7XG4gICAgICAgIC4uLm1vY2tUYWJsZWJhc2VBY3Rpb25zLFxuICAgICAgICBzZXRFdmFsdWF0aW9uczogdW5kZWZpbmVkLCAvLyBNaXNzaW5nIGFjdGlvblxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0V2YWx1YXRpb24gPSB7XG4gICAgICAgIGZlbjogJzgvOC84LzgvOC84LzgvOCB3IC0gLSAwIDEnLFxuICAgICAgICBldmFsdWF0aW9uOiAxMDAsXG4gICAgICAgIG1vdmVzOiBbeyBtb3ZlOiAnS2gxJywgd2RsOiAxLCBkdG06IDUgfV0sXG4gICAgICAgIGlzQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICAgIC4uLmRlZmF1bHRQcm9wcyxcbiAgICAgICAgbGFzdEV2YWx1YXRpb246IG1vY2tFdmFsdWF0aW9uLFxuICAgICAgICB0YWJsZWJhc2VBY3Rpb25zOiBhY3Rpb25zV2l0aG91dFNldEV2YWx1YXRpb25zIGFzIGFueSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3cgd2hlbiBzZXRFdmFsdWF0aW9ucyBpcyBtaXNzaW5nXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2hhbmRsZXMgbWlzc2luZyBzZXRBbmFseXNpc1N0YXR1cyBhY3Rpb24gZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAgIGNvbnN0IGFjdGlvbnNXaXRob3V0U2V0QW5hbHlzaXNTdGF0dXMgPSB7XG4gICAgICAgIC4uLm1vY2tUYWJsZWJhc2VBY3Rpb25zLFxuICAgICAgICBzZXRBbmFseXNpc1N0YXR1czogdW5kZWZpbmVkLCAvLyBNaXNzaW5nIGFjdGlvblxuICAgICAgfTtcblxuICAgICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICAgIC4uLmRlZmF1bHRQcm9wcyxcbiAgICAgICAgaXNFdmFsdWF0aW5nOiB0cnVlLFxuICAgICAgICB0YWJsZWJhc2VBY3Rpb25zOiBhY3Rpb25zV2l0aG91dFNldEFuYWx5c2lzU3RhdHVzIGFzIGFueSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3cgd2hlbiBzZXRBbmFseXNpc1N0YXR1cyBpcyBtaXNzaW5nXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3NraXBzIGFscmVhZHkgcHJvY2Vzc2VkIGV2YWx1YXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0V2YWx1YXRpb24gPSB7XG4gICAgICAgIGZlbjogJzgvOC84LzgvOC84LzgvOCB3IC0gLSAwIDEnLFxuICAgICAgICBldmFsdWF0aW9uOiAxMDAsXG4gICAgICAgIG1hdGVJbk1vdmVzOiA1LFxuICAgICAgICBtb3ZlczogW3sgbW92ZTogJ0toMScsIHdkbDogMSwgZHRtOiA1IH1dLFxuICAgICAgICBpc0F2YWlsYWJsZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGxhc3RFdmFsdWF0aW9uOiBtb2NrRXZhbHVhdGlvbixcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0LCByZXJlbmRlciB9ID0gcmVuZGVySG9vayhcbiAgICAgICAgKHByb3BzKSA9PiB1c2VNb3ZlVmFsaWRhdGlvbihwcm9wcyksXG4gICAgICAgIHsgaW5pdGlhbFByb3BzOiBwcm9wcyB9XG4gICAgICApO1xuXG4gICAgICAvLyBGaXJzdCByZW5kZXIgc2hvdWxkIHByb2Nlc3MgdGhlIGV2YWx1YXRpb25cbiAgICAgIGV4cGVjdChtb2NrVGFibGViYXNlQWN0aW9ucy5zZXRBbmFseXNpc1Jlc3VsdCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDApO1xuXG4gICAgICAvLyBTZWNvbmQgcmVuZGVyIHdpdGggc2FtZSBldmFsdWF0aW9uIHNob3VsZCBiZSBza2lwcGVkXG4gICAgICByZXJlbmRlcihwcm9wcyk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBub3QgcHJvY2VzcyB0aGUgc2FtZSBldmFsdWF0aW9uIHR3aWNlXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgncHJvY2Vzc2VzIGRpZmZlcmVudCBldmFsdWF0aW9ucyBzZXBhcmF0ZWx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgZmlyc3RFdmFsdWF0aW9uID0ge1xuICAgICAgICBmZW46ICc4LzgvOC84LzgvOC84LzggdyAtIC0gMCAxJyxcbiAgICAgICAgZXZhbHVhdGlvbjogMTAwLFxuICAgICAgICBtb3ZlczogW3sgbW92ZTogJ0toMScsIHdkbDogMSwgZHRtOiA1IH1dLFxuICAgICAgICBpc0F2YWlsYWJsZTogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHNlY29uZEV2YWx1YXRpb24gPSB7XG4gICAgICAgIGZlbjogJzgvOC84LzgvOC84LzgvOCB3IC0gLSAwIDEnLFxuICAgICAgICBldmFsdWF0aW9uOiAyMDAsIC8vIERpZmZlcmVudCBldmFsdWF0aW9uIHNjb3JlXG4gICAgICAgIG1vdmVzOiBbeyBtb3ZlOiAnS2gyJywgd2RsOiAxLCBkdG06IDMgfV0sXG4gICAgICAgIGlzQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQsIHJlcmVuZGVyIH0gPSByZW5kZXJIb29rKFxuICAgICAgICAocHJvcHMpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSxcbiAgICAgICAgeyBpbml0aWFsUHJvcHM6IHsgLi4uZGVmYXVsdFByb3BzLCBsYXN0RXZhbHVhdGlvbjogZmlyc3RFdmFsdWF0aW9uIH0gfVxuICAgICAgKTtcblxuICAgICAgLy8gUHJvY2VzcyBzZWNvbmQgZXZhbHVhdGlvbiB3aXRoIGRpZmZlcmVudCBzY29yZVxuICAgICAgcmVyZW5kZXIoeyAuLi5kZWZhdWx0UHJvcHMsIGxhc3RFdmFsdWF0aW9uOiBzZWNvbmRFdmFsdWF0aW9uIH0pO1xuXG4gICAgICAvLyBCb3RoIGV2YWx1YXRpb25zIHNob3VsZCBiZSBwcm9jZXNzZWRcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHdpdGggT3RoZXIgSG9va3MnLCAoKSA9PiB7XG4gICAgaXQoJ3dvcmtzIHdpdGggZXZhbHVhdGlvbiBkYXRhIGZyb20gdXNlUG9zaXRpb25BbmFseXNpcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb3NpdGlvbkFuYWx5c2lzRGF0YSA9IHtcbiAgICAgICAgZmVuOiAnOC84LzgvOC84LzgvOC84IHcgLSAtIDAgMScsXG4gICAgICAgIGV2YWx1YXRpb246IDEwMCxcbiAgICAgICAgbW92ZXM6IFtcbiAgICAgICAgICB7IG1vdmU6ICdLaDEnLCB3ZGw6IDEsIGR0bTogNSwgZXZhbHVhdGlvbjogMTAwIH0sXG4gICAgICAgICAgeyBtb3ZlOiAnS2cxJywgd2RsOiAwLCBkdG06IDAsIGV2YWx1YXRpb246IDAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgaXNBdmFpbGFibGU6IHRydWUsXG4gICAgICAgIGJlc3RNb3ZlOiAnS2gxJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICAuLi5kZWZhdWx0UHJvcHMsXG4gICAgICAgIGxhc3RFdmFsdWF0aW9uOiBtb2NrUG9zaXRpb25BbmFseXNpc0RhdGEsXG4gICAgICAgIGV2YWx1YXRpb25zOiBbbW9ja1Bvc2l0aW9uQW5hbHlzaXNEYXRhXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZU1vdmVWYWxpZGF0aW9uKHByb3BzKSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdpbnRlZ3JhdGVzIHdpdGggdGFibGViYXNlIHN0b3JlIHN0YXRlJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmljaFRhYmxlYmFzZVN0YXRlID0ge1xuICAgICAgICBhbmFseXNpc1N0YXR1czogJ3N1Y2Nlc3MnIGFzIGNvbnN0LFxuICAgICAgICBhbmFseXNpc1Jlc3VsdDoge1xuICAgICAgICAgIHBvc2l0aW9uOiAnOC84LzgvOC84LzgvOC84IHcgLSAtIDAgMScsXG4gICAgICAgICAgbW92ZXM6IFtcbiAgICAgICAgICAgIHsgbW92ZTogJ0toMScsIHdkbDogMSwgZHRtOiAzIH0sXG4gICAgICAgICAgICB7IG1vdmU6ICdLZzEnLCB3ZGw6IC0xLCBkdG06IDE1IH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBiZXN0TW92ZTogJ0toMScsXG4gICAgICAgIH0sXG4gICAgICAgIGNhY2hlOiBuZXcgTWFwKFtcbiAgICAgICAgICBbJzgvOC84LzgvOC84LzgvOCB3IC0gLSAwIDEnLCB7IHdkbDogMSwgbW92ZXM6IFsnS2gxJ10gfV1cbiAgICAgICAgXSksXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgLi4uZGVmYXVsdFByb3BzLFxuICAgICAgICB0YWJsZWJhc2VTdGF0ZTogcmljaFRhYmxlYmFzZVN0YXRlLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlTW92ZVZhbGlkYXRpb24ocHJvcHMpKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJuYW1lcyI6WyJtb2NrVGFibGViYXNlQWN0aW9ucyIsInNldEFuYWx5c2lzU3RhdHVzIiwiamVzdCIsImZuIiwic2V0QW5hbHlzaXNSZXN1bHQiLCJtb2NrVGFibGViYXNlU3RhdGUiLCJhbmFseXNpc1N0YXR1cyIsImFuYWx5c2lzUmVzdWx0IiwiY2FjaGUiLCJNYXAiLCJkZXNjcmliZSIsImRlZmF1bHRQcm9wcyIsImxhc3RFdmFsdWF0aW9uIiwiY3VycmVudEZlbiIsImV2YWx1YXRpb25zIiwiaXNFdmFsdWF0aW5nIiwidGFibGViYXNlU3RhdGUiLCJ0YWJsZWJhc2VBY3Rpb25zIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInJlc3VsdCIsInJlbmRlckhvb2siLCJ1c2VNb3ZlVmFsaWRhdGlvbiIsImV4cGVjdCIsImN1cnJlbnQiLCJ0b0JlRGVmaW5lZCIsInByb3BzV2l0aE1pc3NpbmdEZXBzIiwidW5kZWZpbmVkIiwibm90IiwidG9UaHJvdyIsIm1vY2tFdmFsdWF0aW9uIiwiZmVuIiwiZXZhbHVhdGlvbiIsIm1vdmVzIiwibW92ZSIsIndkbCIsImR0bSIsImlzQXZhaWxhYmxlIiwicHJvcHMiLCJlcnJvciIsInJlcmVuZGVyIiwiaW5pdGlhbFByb3BzIiwidG9IYXZlQmVlbkNhbGxlZCIsIm1vY2tSZXN1bHQiLCJtYWxmb3JtZWRFdmFsdWF0aW9uIiwibmV3RmVuIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwiaW52YWxpZEZlbiIsImV2YWx1YXRpb25IaXN0b3J5IiwidGFibGViYXNlU3RhdGVXaXRoUmVzdWx0cyIsImxvYWRpbmdUYWJsZWJhc2VTdGF0ZSIsImVycm9yVGFibGViYXNlU3RhdGUiLCJpbml0aWFsUmVzdWx0IiwidW5tb3VudCIsImZlbnMiLCJmb3JFYWNoIiwiYWN0aW9uc1dpdGhvdXRTZXRFdmFsdWF0aW9ucyIsInNldEV2YWx1YXRpb25zIiwiYWN0aW9uc1dpdGhvdXRTZXRBbmFseXNpc1N0YXR1cyIsIm1hdGVJbk1vdmVzIiwiZmlyc3RFdmFsdWF0aW9uIiwic2Vjb25kRXZhbHVhdGlvbiIsIm1vY2tQb3NpdGlvbkFuYWx5c2lzRGF0YSIsImJlc3RNb3ZlIiwicmljaFRhYmxlYmFzZVN0YXRlIiwicG9zaXRpb24iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7O0NBYUM7Ozs7dUJBRStCO21DQUNFO0FBRWxDLG9CQUFvQjtBQUNwQixNQUFNQSx1QkFBdUI7SUFDM0JDLG1CQUFtQkMsS0FBS0MsRUFBRTtJQUMxQkMsbUJBQW1CRixLQUFLQyxFQUFFO0FBQzVCO0FBRUEsTUFBTUUscUJBQXFCO0lBQ3pCQyxnQkFBZ0I7SUFDaEJDLGdCQUFnQjtJQUNoQkMsT0FBTyxJQUFJQztBQUNiO0FBRUFDLFNBQVMscUJBQXFCO0lBQzVCLE1BQU1DLGVBQWU7UUFDbkJDLGdCQUFnQjtRQUNoQkMsWUFBWTtRQUNaQyxhQUFhLEVBQUU7UUFDZkMsY0FBYztRQUNkQyxnQkFBZ0JYO1FBQ2hCWSxrQkFB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