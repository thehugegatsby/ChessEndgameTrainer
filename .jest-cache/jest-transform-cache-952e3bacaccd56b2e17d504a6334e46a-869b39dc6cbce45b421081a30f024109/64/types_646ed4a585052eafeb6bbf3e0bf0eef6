bcbb9f69ec5cfa4e48f2fd59d7a3e4d4
/**
 * @file Service container type definitions
 * @module services/container/types
 *
 * @description
 * Type definitions for the dependency injection container system.
 * Provides type-safe service registration and resolution with support
 * for both predefined platform services and custom services.
 *
 * @remarks
 * The service container supports:
 * - Type-safe service registry with compile-time checks
 * - Singleton and factory patterns
 * - Circular dependency detection
 * - Testing overrides and mocks
 * - Browser API abstractions
 * - Platform service abstractions
 *
 * @example
 * ```typescript
 * // Define a service in the registry
 * interface ServiceRegistry {
 *   'my.service': IMyService;
 * }
 *
 * // Register and resolve services
 * container.register('my.service', () => new MyService());
 * const service = container.resolve('my.service');
 * ```
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get CircularDependencyError () {
        return CircularDependencyError;
    },
    get ServiceAlreadyRegisteredError () {
        return ServiceAlreadyRegisteredError;
    },
    get ServiceNotFoundError () {
        return ServiceNotFoundError;
    }
});
class ServiceNotFoundError extends Error {
    constructor(key){
        super(`Service not found for key: ${key}`);
        this.name = "ServiceNotFoundError";
    }
}
class ServiceAlreadyRegisteredError extends Error {
    constructor(key){
        super(`Service already registered for key: ${key}`);
        this.name = "ServiceAlreadyRegisteredError";
    }
}
class CircularDependencyError extends Error {
    constructor(chain){
        super(`Circular dependency detected: ${chain.join(" -> ")}`);
        this.name = "CircularDependencyError";
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RoZWh1L2Nvb2xQcm9qZWN0cy9FbmRnYW1lVHJhaW5lci1maXJlYmFzZS10ZXN0aW5nL3NyYy9zaGFyZWQvc2VydmljZXMvY29udGFpbmVyL3R5cGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgU2VydmljZSBjb250YWluZXIgdHlwZSBkZWZpbml0aW9uc1xuICogQG1vZHVsZSBzZXJ2aWNlcy9jb250YWluZXIvdHlwZXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFR5cGUgZGVmaW5pdGlvbnMgZm9yIHRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIgc3lzdGVtLlxuICogUHJvdmlkZXMgdHlwZS1zYWZlIHNlcnZpY2UgcmVnaXN0cmF0aW9uIGFuZCByZXNvbHV0aW9uIHdpdGggc3VwcG9ydFxuICogZm9yIGJvdGggcHJlZGVmaW5lZCBwbGF0Zm9ybSBzZXJ2aWNlcyBhbmQgY3VzdG9tIHNlcnZpY2VzLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGUgc2VydmljZSBjb250YWluZXIgc3VwcG9ydHM6XG4gKiAtIFR5cGUtc2FmZSBzZXJ2aWNlIHJlZ2lzdHJ5IHdpdGggY29tcGlsZS10aW1lIGNoZWNrc1xuICogLSBTaW5nbGV0b24gYW5kIGZhY3RvcnkgcGF0dGVybnNcbiAqIC0gQ2lyY3VsYXIgZGVwZW5kZW5jeSBkZXRlY3Rpb25cbiAqIC0gVGVzdGluZyBvdmVycmlkZXMgYW5kIG1vY2tzXG4gKiAtIEJyb3dzZXIgQVBJIGFic3RyYWN0aW9uc1xuICogLSBQbGF0Zm9ybSBzZXJ2aWNlIGFic3RyYWN0aW9uc1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBEZWZpbmUgYSBzZXJ2aWNlIGluIHRoZSByZWdpc3RyeVxuICogaW50ZXJmYWNlIFNlcnZpY2VSZWdpc3RyeSB7XG4gKiAgICdteS5zZXJ2aWNlJzogSU15U2VydmljZTtcbiAqIH1cbiAqXG4gKiAvLyBSZWdpc3RlciBhbmQgcmVzb2x2ZSBzZXJ2aWNlc1xuICogY29udGFpbmVyLnJlZ2lzdGVyKCdteS5zZXJ2aWNlJywgKCkgPT4gbmV3IE15U2VydmljZSgpKTtcbiAqIGNvbnN0IHNlcnZpY2UgPSBjb250YWluZXIucmVzb2x2ZSgnbXkuc2VydmljZScpO1xuICogYGBgXG4gKi9cblxuaW1wb3J0IHtcbiAgSVBsYXRmb3JtU3RvcmFnZSxcbiAgSVBsYXRmb3JtTm90aWZpY2F0aW9uLFxuICBJUGxhdGZvcm1EZXZpY2UsXG4gIElQbGF0Zm9ybVBlcmZvcm1hbmNlLFxuICBJUGxhdGZvcm1DbGlwYm9hcmQsXG4gIElQbGF0Zm9ybVNoYXJlLFxuICBJUGxhdGZvcm1BbmFseXRpY3MsXG4gIElQbGF0Zm9ybURldGVjdGlvbixcbn0gZnJvbSBcIi4uL3BsYXRmb3JtL3R5cGVzXCI7XG5cbi8qKlxuICogQnJvd3NlciBBUEkgYWJzdHJhY3Rpb25zIGZvciBkZXBlbmRlbmN5IGluamVjdGlvblxuICpcbiAqIEBpbnRlcmZhY2UgSUJyb3dzZXJBUElzXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBQcm92aWRlcyBhYnN0cmFjdGVkIGludGVyZmFjZXMgZm9yIGJyb3dzZXIgQVBJcyB0byBlbmFibGVcbiAqIHRlc3RpbmcgYW5kIHBsYXRmb3JtLXNwZWNpZmljIGltcGxlbWVudGF0aW9ucy5cbiAqXG4gKiBAcHJvcGVydHkge1N0b3JhZ2V9IGxvY2FsU3RvcmFnZSAtIEJyb3dzZXIgbG9jYWxTdG9yYWdlIEFQSVxuICogQHByb3BlcnR5IHtTdG9yYWdlfSBzZXNzaW9uU3RvcmFnZSAtIEJyb3dzZXIgc2Vzc2lvblN0b3JhZ2UgQVBJXG4gKiBAcHJvcGVydHkge05hdmlnYXRvcn0gbmF2aWdhdG9yIC0gQnJvd3NlciBuYXZpZ2F0b3IgQVBJXG4gKiBAcHJvcGVydHkge1dpbmRvd30gd2luZG93IC0gQnJvd3NlciB3aW5kb3cgb2JqZWN0XG4gKiBAcHJvcGVydHkge0RvY3VtZW50fSBkb2N1bWVudCAtIEJyb3dzZXIgZG9jdW1lbnQgb2JqZWN0XG4gKiBAcHJvcGVydHkge1BlcmZvcm1hbmNlfSBwZXJmb3JtYW5jZSAtIEJyb3dzZXIgcGVyZm9ybWFuY2UgQVBJXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGFwaXM6IElCcm93c2VyQVBJcyA9IHtcbiAqICAgbG9jYWxTdG9yYWdlOiB3aW5kb3cubG9jYWxTdG9yYWdlLFxuICogICBzZXNzaW9uU3RvcmFnZTogd2luZG93LnNlc3Npb25TdG9yYWdlLFxuICogICBuYXZpZ2F0b3I6IHdpbmRvdy5uYXZpZ2F0b3IsXG4gKiAgIHdpbmRvdzogd2luZG93LFxuICogICBkb2N1bWVudDogd2luZG93LmRvY3VtZW50LFxuICogICBwZXJmb3JtYW5jZTogd2luZG93LnBlcmZvcm1hbmNlXG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUJyb3dzZXJBUElzIHtcbiAgbG9jYWxTdG9yYWdlOiBTdG9yYWdlO1xuICBzZXNzaW9uU3RvcmFnZTogU3RvcmFnZTtcbiAgbmF2aWdhdG9yOiBOYXZpZ2F0b3I7XG4gIHdpbmRvdzogV2luZG93O1xuICBkb2N1bWVudDogRG9jdW1lbnQ7XG4gIHBlcmZvcm1hbmNlOiBQZXJmb3JtYW5jZTtcbn1cblxuLyoqXG4gKiBTZXJ2aWNlIGlkZW50aWZpZXIgdHlwZVxuICpcbiAqIEB0eXBlZGVmIHtzdHJpbmd9IFNlcnZpY2VLZXlcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFN0cmluZyBsaXRlcmFsIHR5cGUgZm9yIHNlcnZpY2UgaWRlbnRpZmllcnMuIFVzZWQgYXMga2V5c1xuICogaW4gdGhlIHNlcnZpY2UgcmVnaXN0cnkgZm9yIHR5cGUtc2FmZSBzZXJ2aWNlIHJlc29sdXRpb24uXG4gKi9cbmV4cG9ydCB0eXBlIFNlcnZpY2VLZXkgPSBzdHJpbmc7XG5cbi8qKlxuICogU2VydmljZSBmYWN0b3J5IGZ1bmN0aW9uIHR5cGVcbiAqXG4gKiBAdHlwZWRlZiB7RnVuY3Rpb259IFNlcnZpY2VGYWN0b3J5XG4gKiBAdGVtcGxhdGUgVCAtIFRoZSBzZXJ2aWNlIHR5cGUgYmVpbmcgY3JlYXRlZFxuICogQHBhcmFtIHtJU2VydmljZUNvbnRhaW5lcn0gY29udGFpbmVyIC0gQ29udGFpbmVyIGZvciByZXNvbHZpbmcgZGVwZW5kZW5jaWVzXG4gKiBAcmV0dXJucyB7VH0gVGhlIHNlcnZpY2UgaW5zdGFuY2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZhY3RvcnkgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIHNlcnZpY2UgaW5zdGFuY2VzLiBSZWNlaXZlcyB0aGVcbiAqIGNvbnRhaW5lciB0byBlbmFibGUgZGVwZW5kZW5jeSByZXNvbHV0aW9uIGR1cmluZyBjb25zdHJ1Y3Rpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHN0b3JhZ2VGYWN0b3J5OiBTZXJ2aWNlRmFjdG9yeTxJU3RvcmFnZT4gPSAoY29udGFpbmVyKSA9PiB7XG4gKiAgIGNvbnN0IHBsYXRmb3JtID0gY29udGFpbmVyLnJlc29sdmUoJ3BsYXRmb3JtLmRldGVjdGlvbicpO1xuICogICByZXR1cm4gbmV3IFN0b3JhZ2VTZXJ2aWNlKHBsYXRmb3JtKTtcbiAqIH07XG4gKiBgYGBcbiAqL1xuZXhwb3J0IHR5cGUgU2VydmljZUZhY3Rvcnk8VD4gPSAoY29udGFpbmVyOiBJU2VydmljZUNvbnRhaW5lcikgPT4gVDtcblxuLyoqXG4gKiBTZXJ2aWNlIHJlZ2lzdHJ5IGludGVyZmFjZVxuICpcbiAqIEBpbnRlcmZhY2UgU2VydmljZVJlZ2lzdHJ5XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDZW50cmFsIHR5cGUgcmVnaXN0cnkgbWFwcGluZyBzZXJ2aWNlIGtleXMgdG8gdGhlaXIgY29ycmVzcG9uZGluZyB0eXBlcy5cbiAqIFRoaXMgZW5hYmxlcyBjb21waWxlLXRpbWUgdHlwZSBzYWZldHkgd2hlbiByZWdpc3RlcmluZyBhbmQgcmVzb2x2aW5nIHNlcnZpY2VzLlxuICogRXh0ZW5kIHRoaXMgaW50ZXJmYWNlIHRvIGFkZCBjdXN0b20gc2VydmljZXMgdG8gdGhlIHR5cGUgc3lzdGVtLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGUgcmVnaXN0cnkgaXMgb3JnYW5pemVkIGludG8gbG9naWNhbCBncm91cHM6XG4gKiAtIHBsYXRmb3JtLio6IENyb3NzLXBsYXRmb3JtIHNlcnZpY2UgYWJzdHJhY3Rpb25zXG4gKiAtIGJyb3dzZXIuKjogQnJvd3Nlci1zcGVjaWZpYyBBUEkgYWJzdHJhY3Rpb25zXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIC8vIEV4dGVuZCB0aGUgcmVnaXN0cnkgaW4geW91ciBhcHBsaWNhdGlvblxuICogZGVjbGFyZSBtb2R1bGUgJ0BzaGFyZWQvc2VydmljZXMvY29udGFpbmVyL3R5cGVzJyB7XG4gKiAgIGludGVyZmFjZSBTZXJ2aWNlUmVnaXN0cnkge1xuICogICAgICdhcHAudGhlbWUnOiBJVGhlbWVTZXJ2aWNlO1xuICogICAgICdhcHAuYXV0aCc6IElBdXRoU2VydmljZTtcbiAqICAgfVxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VydmljZVJlZ2lzdHJ5IHtcbiAgLy8gUGxhdGZvcm0gc2VydmljZXNcbiAgXCJwbGF0Zm9ybS5zdG9yYWdlXCI6IElQbGF0Zm9ybVN0b3JhZ2U7XG4gIFwicGxhdGZvcm0ubm90aWZpY2F0aW9uc1wiOiBJUGxhdGZvcm1Ob3RpZmljYXRpb247XG4gIFwicGxhdGZvcm0uZGV2aWNlXCI6IElQbGF0Zm9ybURldmljZTtcbiAgXCJwbGF0Zm9ybS5wZXJmb3JtYW5jZVwiOiBJUGxhdGZvcm1QZXJmb3JtYW5jZTtcbiAgXCJwbGF0Zm9ybS5jbGlwYm9hcmRcIjogSVBsYXRmb3JtQ2xpcGJvYXJkO1xuICBcInBsYXRmb3JtLnNoYXJlXCI6IElQbGF0Zm9ybVNoYXJlO1xuICBcInBsYXRmb3JtLmFuYWx5dGljc1wiOiBJUGxhdGZvcm1BbmFseXRpY3M7XG4gIFwicGxhdGZvcm0uZGV0ZWN0aW9uXCI6IElQbGF0Zm9ybURldGVjdGlvbjtcblxuICAvLyBCcm93c2VyIEFQSSBhYnN0cmFjdGlvbnNcbiAgXCJicm93c2VyLmFwaXNcIjogSUJyb3dzZXJBUElzO1xuICBcImJyb3dzZXIubG9jYWxTdG9yYWdlXCI6IFN0b3JhZ2U7XG4gIFwiYnJvd3Nlci5uYXZpZ2F0b3JcIjogTmF2aWdhdG9yO1xuICBcImJyb3dzZXIud2luZG93XCI6IFdpbmRvdztcbiAgXCJicm93c2VyLmRvY3VtZW50XCI6IERvY3VtZW50O1xuICBcImJyb3dzZXIucGVyZm9ybWFuY2VcIjogUGVyZm9ybWFuY2U7XG59XG5cbi8qKlxuICogU2VydmljZSBjb250YWluZXIgaW50ZXJmYWNlXG4gKlxuICogQGludGVyZmFjZSBJU2VydmljZUNvbnRhaW5lclxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogTWFpbiBpbnRlcmZhY2UgZm9yIHRoZSBkZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIuXG4gKiBQcm92aWRlcyBtZXRob2RzIGZvciByZWdpc3RlcmluZywgcmVzb2x2aW5nLCBhbmQgbWFuYWdpbmcgc2VydmljZXNcbiAqIHdpdGggc3VwcG9ydCBmb3IgYm90aCB0eXBlLXNhZmUgcHJlZGVmaW5lZCBzZXJ2aWNlcyBhbmQgZHluYW1pY1xuICogY3VzdG9tIHNlcnZpY2VzLlxuICpcbiAqIEByZW1hcmtzXG4gKiBUaGUgY29udGFpbmVyIHN1cHBvcnRzOlxuICogLSBMYXp5IHNlcnZpY2UgaW5zdGFudGlhdGlvblxuICogLSBTaW5nbGV0b24gY2FjaGluZyAoY29uZmlndXJhYmxlKVxuICogLSBDaXJjdWxhciBkZXBlbmRlbmN5IGRldGVjdGlvblxuICogLSBUeXBlLXNhZmUgc2VydmljZSByZXNvbHV0aW9uXG4gKiAtIFRlc3RpbmcgdXRpbGl0aWVzXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGNvbnRhaW5lcjogSVNlcnZpY2VDb250YWluZXIgPSBuZXcgU2VydmljZUNvbnRhaW5lcigpO1xuICpcbiAqIC8vIFJlZ2lzdGVyIHNlcnZpY2VzXG4gKiBjb250YWluZXIucmVnaXN0ZXIoJ3BsYXRmb3JtLnN0b3JhZ2UnLCAoKSA9PiBuZXcgV2ViU3RvcmFnZSgpKTtcbiAqXG4gKiAvLyBSZXNvbHZlIHNlcnZpY2VzXG4gKiBjb25zdCBzdG9yYWdlID0gY29udGFpbmVyLnJlc29sdmUoJ3BsYXRmb3JtLnN0b3JhZ2UnKTtcbiAqIGBgYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElTZXJ2aWNlQ29udGFpbmVyIHtcbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgc2VydmljZSB3aXRoIHRoZSBjb250YWluZXJcbiAgICogQHBhcmFtIGtleSAtIFNlcnZpY2UgaWRlbnRpZmllclxuICAgKiBAcGFyYW0gZmFjdG9yeSAtIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBzZXJ2aWNlXG4gICAqL1xuICByZWdpc3RlcjxLIGV4dGVuZHMga2V5b2YgU2VydmljZVJlZ2lzdHJ5PihcbiAgICBrZXk6IEssXG4gICAgZmFjdG9yeTogU2VydmljZUZhY3Rvcnk8U2VydmljZVJlZ2lzdHJ5W0tdPixcbiAgKTogdm9pZDtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBzZXJ2aWNlIHdpdGggYSBjdXN0b20ga2V5IChmb3IgZmxleGliaWxpdHkpXG4gICAqIEBwYXJhbSBrZXkgLSBDdXN0b20gc2VydmljZSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSBmYWN0b3J5IC0gRmFjdG9yeSBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIHNlcnZpY2VcbiAgICovXG4gIHJlZ2lzdGVyQ3VzdG9tPFQ+KGtleTogc3RyaW5nLCBmYWN0b3J5OiBTZXJ2aWNlRmFjdG9yeTxUPik6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYSBzZXJ2aWNlIGZyb20gdGhlIGNvbnRhaW5lclxuICAgKiBAcGFyYW0ga2V5IC0gU2VydmljZSBpZGVudGlmaWVyXG4gICAqIEByZXR1cm5zIFRoZSBzZXJ2aWNlIGluc3RhbmNlXG4gICAqL1xuICByZXNvbHZlPEsgZXh0ZW5kcyBrZXlvZiBTZXJ2aWNlUmVnaXN0cnk+KGtleTogSyk6IFNlcnZpY2VSZWdpc3RyeVtLXTtcblxuICAvKipcbiAgICogUmVzb2x2ZSBhIGN1c3RvbSBzZXJ2aWNlIGZyb20gdGhlIGNvbnRhaW5lclxuICAgKiBAcGFyYW0ga2V5IC0gQ3VzdG9tIHNlcnZpY2UgaWRlbnRpZmllclxuICAgKiBAcmV0dXJucyBUaGUgc2VydmljZSBpbnN0YW5jZVxuICAgKi9cbiAgcmVzb2x2ZUN1c3RvbTxUPihrZXk6IHN0cmluZyk6IFQ7XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgc2VydmljZSBpcyByZWdpc3RlcmVkXG4gICAqIEBwYXJhbSBrZXkgLSBTZXJ2aWNlIGlkZW50aWZpZXJcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBzZXJ2aWNlIGlzIHJlZ2lzdGVyZWRcbiAgICovXG4gIGhhczxLIGV4dGVuZHMga2V5b2YgU2VydmljZVJlZ2lzdHJ5PihrZXk6IEspOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGN1c3RvbSBzZXJ2aWNlIGlzIHJlZ2lzdGVyZWRcbiAgICogQHBhcmFtIGtleSAtIEN1c3RvbSBzZXJ2aWNlIGlkZW50aWZpZXJcbiAgICogQHJldHVybnMgVHJ1ZSBpZiBzZXJ2aWNlIGlzIHJlZ2lzdGVyZWRcbiAgICovXG4gIGhhc0N1c3RvbShrZXk6IHN0cmluZyk6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCByZXNvbHZlZCBpbnN0YW5jZXMgKHVzZWZ1bCBmb3IgdGVzdGluZylcbiAgICovXG4gIGNsZWFySW5zdGFuY2VzKCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgcmVnaXN0ZXJlZCBzZXJ2aWNlIGtleXNcbiAgICogQHJldHVybnMgQXJyYXkgb2YgcmVnaXN0ZXJlZCBzZXJ2aWNlIGtleXNcbiAgICovXG4gIGdldFJlZ2lzdGVyZWRLZXlzKCk6IHN0cmluZ1tdO1xufVxuXG4vKipcbiAqIFNlcnZpY2Ugb3ZlcnJpZGVzIGZvciB0ZXN0aW5nXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gU2VydmljZU92ZXJyaWRlc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUGFydGlhbCB0eXBlIGFsbG93aW5nIG92ZXJyaWRlIG9mIGFueSByZWdpc3RlcmVkIHNlcnZpY2UuXG4gKiBVc2VkIGluIHRlc3RzIHRvIHByb3ZpZGUgbW9jayBpbXBsZW1lbnRhdGlvbnMuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IG92ZXJyaWRlczogU2VydmljZU92ZXJyaWRlcyA9IHtcbiAqICAgJ3BsYXRmb3JtLnN0b3JhZ2UnOiBtb2NrU3RvcmFnZSxcbiAqICAgJ3BsYXRmb3JtLm5vdGlmaWNhdGlvbnMnOiBtb2NrTm90aWZpY2F0aW9uc1xuICogfTtcbiAqIGBgYFxuICovXG5leHBvcnQgdHlwZSBTZXJ2aWNlT3ZlcnJpZGVzID0gUGFydGlhbDx7XG4gIFtLIGluIGtleW9mIFNlcnZpY2VSZWdpc3RyeV06IFNlcnZpY2VSZWdpc3RyeVtLXTtcbn0+O1xuXG4vKipcbiAqIEN1c3RvbSBzZXJ2aWNlIG92ZXJyaWRlcyBmb3IgdGVzdGluZ1xuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEN1c3RvbVNlcnZpY2VPdmVycmlkZXNcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIER5bmFtaWMgb3ZlcnJpZGVzIGZvciBjdXN0b20gc2VydmljZXMgbm90IGluIHRoZSByZWdpc3RyeS5cbiAqIFByb3ZpZGVzIGZsZXhpYmlsaXR5IGZvciB0ZXN0LXNwZWNpZmljIHNlcnZpY2VzLlxuICovXG5leHBvcnQgdHlwZSBDdXN0b21TZXJ2aWNlT3ZlcnJpZGVzID0gUmVjb3JkPHN0cmluZywgYW55PjtcblxuLyoqXG4gKiBDb21iaW5lZCBvdmVycmlkZXMgZm9yIHRlc3QgY29udGFpbmVyc1xuICpcbiAqIEBpbnRlcmZhY2UgVGVzdENvbnRhaW5lck92ZXJyaWRlc1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29uZmlndXJhdGlvbiBvYmplY3QgZm9yIGNyZWF0aW5nIHRlc3QgY29udGFpbmVycyB3aXRoXG4gKiBib3RoIHJlZ2lzdGVyZWQgYW5kIGN1c3RvbSBzZXJ2aWNlIG92ZXJyaWRlcy5cbiAqXG4gKiBAcHJvcGVydHkge1NlcnZpY2VPdmVycmlkZXN9IFtzZXJ2aWNlc10gLSBSZWdpc3RyeSBzZXJ2aWNlIG92ZXJyaWRlc1xuICogQHByb3BlcnR5IHtDdXN0b21TZXJ2aWNlT3ZlcnJpZGVzfSBbY3VzdG9tXSAtIEN1c3RvbSBzZXJ2aWNlIG92ZXJyaWRlc1xuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCB0ZXN0T3ZlcnJpZGVzOiBUZXN0Q29udGFpbmVyT3ZlcnJpZGVzID0ge1xuICogICBzZXJ2aWNlczoge1xuICogICAgICdwbGF0Zm9ybS5zdG9yYWdlJzogbW9ja1N0b3JhZ2VcbiAqICAgfSxcbiAqICAgY3VzdG9tOiB7XG4gKiAgICAgJ3Rlc3QuaGVscGVyJzogdGVzdEhlbHBlclxuICogICB9XG4gKiB9O1xuICogYGBgXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGVzdENvbnRhaW5lck92ZXJyaWRlcyB7XG4gIHNlcnZpY2VzPzogU2VydmljZU92ZXJyaWRlcztcbiAgY3VzdG9tPzogQ3VzdG9tU2VydmljZU92ZXJyaWRlcztcbn1cblxuLyoqXG4gKiBTZXJ2aWNlIGNvbnRhaW5lciBjb25maWd1cmF0aW9uXG4gKlxuICogQGludGVyZmFjZSBTZXJ2aWNlQ29udGFpbmVyQ29uZmlnXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBzZXJ2aWNlIGNvbnRhaW5lciBiZWhhdmlvci5cbiAqIENvbnRyb2xzIGNhY2hpbmcsIHZhbGlkYXRpb24sIGFuZCBkZWJ1Z2dpbmcgZmVhdHVyZXMuXG4gKlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlU2luZ2xldG9ucz10cnVlXSAtIENhY2hlIHNlcnZpY2UgaW5zdGFuY2VzIChzaW5nbGV0b24gcGF0dGVybilcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3ZhbGlkYXRlS2V5cz10cnVlXSAtIFZhbGlkYXRlIGtleXMgdG8gcHJldmVudCBkdXBsaWNhdGUgcmVnaXN0cmF0aW9uXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBbbG9nZ2VyXSAtIE9wdGlvbmFsIGxvZ2dlciBmb3IgZGVidWdnaW5nIHNlcnZpY2UgcmVzb2x1dGlvblxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBjb25maWc6IFNlcnZpY2VDb250YWluZXJDb25maWcgPSB7XG4gKiAgIHVzZVNpbmdsZXRvbnM6IHRydWUsXG4gKiAgIHZhbGlkYXRlS2V5czogdHJ1ZSxcbiAqICAgbG9nZ2VyOiAobXNnKSA9PiBjb25zb2xlLmxvZyhgW0NvbnRhaW5lcl0gJHttc2d9YClcbiAqIH07XG4gKlxuICogY29uc3QgY29udGFpbmVyID0gbmV3IFNlcnZpY2VDb250YWluZXIoY29uZmlnKTtcbiAqIGBgYFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlcnZpY2VDb250YWluZXJDb25maWcge1xuICAvLyBXaGV0aGVyIHRvIHVzZSBzaW5nbGV0b24gcGF0dGVybiAob25lIGluc3RhbmNlIHBlciBrZXkpXG4gIHVzZVNpbmdsZXRvbnM/OiBib29sZWFuO1xuXG4gIC8vIFdoZXRoZXIgdG8gdmFsaWRhdGUgc2VydmljZSBrZXlzXG4gIHZhbGlkYXRlS2V5cz86IGJvb2xlYW47XG5cbiAgLy8gTG9nZ2VyIGZ1bmN0aW9uIGZvciBkZWJ1Z2dpbmdcbiAgbG9nZ2VyPzogKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhIHJlcXVlc3RlZCBzZXJ2aWNlIGlzIG5vdCBmb3VuZFxuICpcbiAqIEBjbGFzcyBTZXJ2aWNlTm90Rm91bmRFcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhyb3duIHdoZW4gYXR0ZW1wdGluZyB0byByZXNvbHZlIGEgc2VydmljZSB0aGF0IGhhc24ndCBiZWVuIHJlZ2lzdGVyZWQuXG4gKiBJbmNsdWRlcyB0aGUgcmVxdWVzdGVkIGtleSBpbiB0aGUgZXJyb3IgbWVzc2FnZSBmb3IgZGVidWdnaW5nLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiB0cnkge1xuICogICBjb250YWluZXIucmVzb2x2ZSgndW5rbm93bi5zZXJ2aWNlJyk7XG4gKiB9IGNhdGNoIChlcnJvcikge1xuICogICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBTZXJ2aWNlTm90Rm91bmRFcnJvcikge1xuICogICAgIGNvbnNvbGUuZXJyb3IoJ1NlcnZpY2Ugbm90IHJlZ2lzdGVyZWQ6JywgZXJyb3IubWVzc2FnZSk7XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgU2VydmljZU5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKGtleTogc3RyaW5nKSB7XG4gICAgc3VwZXIoYFNlcnZpY2Ugbm90IGZvdW5kIGZvciBrZXk6ICR7a2V5fWApO1xuICAgIHRoaXMubmFtZSA9IFwiU2VydmljZU5vdEZvdW5kRXJyb3JcIjtcbiAgfVxufVxuXG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGF0dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYSBkdXBsaWNhdGUgc2VydmljZVxuICpcbiAqIEBjbGFzcyBTZXJ2aWNlQWxyZWFkeVJlZ2lzdGVyZWRFcnJvclxuICogQGV4dGVuZHMge0Vycm9yfVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogVGhyb3duIHdoZW4gdHJ5aW5nIHRvIHJlZ2lzdGVyIGEgc2VydmljZSB3aXRoIGEga2V5IHRoYXQncyBhbHJlYWR5XG4gKiBpbiB1c2UuIE9ubHkgdGhyb3duIHdoZW4gdmFsaWRhdGVLZXlzIGlzIGVuYWJsZWQgaW4gY29uZmlndXJhdGlvbi5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29udGFpbmVyLnJlZ2lzdGVyKCdteS5zZXJ2aWNlJywgZmFjdG9yeTEpO1xuICogdHJ5IHtcbiAqICAgY29udGFpbmVyLnJlZ2lzdGVyKCdteS5zZXJ2aWNlJywgZmFjdG9yeTIpOyAvLyBUaHJvd3NcbiAqIH0gY2F0Y2ggKGVycm9yKSB7XG4gKiAgIGNvbnNvbGUuZXJyb3IoJ0R1cGxpY2F0ZSByZWdpc3RyYXRpb246JywgZXJyb3IubWVzc2FnZSk7XG4gKiB9XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFNlcnZpY2VBbHJlYWR5UmVnaXN0ZXJlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihrZXk6IHN0cmluZykge1xuICAgIHN1cGVyKGBTZXJ2aWNlIGFscmVhZHkgcmVnaXN0ZXJlZCBmb3Iga2V5OiAke2tleX1gKTtcbiAgICB0aGlzLm5hbWUgPSBcIlNlcnZpY2VBbHJlYWR5UmVnaXN0ZXJlZEVycm9yXCI7XG4gIH1cbn1cblxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYXJlIGRldGVjdGVkXG4gKlxuICogQGNsYXNzIENpcmN1bGFyRGVwZW5kZW5jeUVycm9yXG4gKiBAZXh0ZW5kcyB7RXJyb3J9XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaHJvd24gd2hlbiBzZXJ2aWNlIHJlc29sdXRpb24gZW5jb3VudGVycyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgY2hhaW4uXG4gKiBUaGUgZXJyb3IgbWVzc2FnZSBpbmNsdWRlcyB0aGUgY29tcGxldGUgZGVwZW5kZW5jeSBjaGFpbiBmb3IgZGVidWdnaW5nLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBTZXJ2aWNlIEEgZGVwZW5kcyBvbiBCLCBCIGRlcGVuZHMgb24gQVxuICogY29udGFpbmVyLnJlZ2lzdGVyKCdhJywgKGMpID0+IG5ldyBBKGMucmVzb2x2ZSgnYicpKSk7XG4gKiBjb250YWluZXIucmVnaXN0ZXIoJ2InLCAoYykgPT4gbmV3IEIoYy5yZXNvbHZlKCdhJykpKTtcbiAqXG4gKiB0cnkge1xuICogICBjb250YWluZXIucmVzb2x2ZSgnYScpOyAvLyBUaHJvd3MgQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3JcbiAqIH0gY2F0Y2ggKGVycm9yKSB7XG4gKiAgIGNvbnNvbGUuZXJyb3IoJ0NpcmN1bGFyIGRlcGVuZGVuY3k6JywgZXJyb3IubWVzc2FnZSk7XG4gKiAgIC8vIFwiQ2lyY3VsYXIgZGVwZW5kZW5jeSBkZXRlY3RlZDogYSAtPiBiIC0+IGFcIlxuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDaXJjdWxhckRlcGVuZGVuY3lFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoY2hhaW46IHN0cmluZ1tdKSB7XG4gICAgc3VwZXIoYENpcmN1bGFyIGRlcGVuZGVuY3kgZGV0ZWN0ZWQ6ICR7Y2hhaW4uam9pbihcIiAtPiBcIil9YCk7XG4gICAgdGhpcy5uYW1lID0gXCJDaXJjdWxhckRlcGVuZGVuY3lFcnJvclwiO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2lyY3VsYXJEZXBlbmRlbmN5RXJyb3IiLCJTZXJ2aWNlQWxyZWFkeVJlZ2lzdGVyZWRFcnJvciIsIlNlcnZpY2VOb3RGb3VuZEVycm9yIiwiRXJyb3IiLCJrZXkiLCJuYW1lIiwiY2hhaW4iLCJqb2luIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E2QkM7Ozs7Ozs7Ozs7O1FBd1lZQTtlQUFBQTs7UUEvQkFDO2VBQUFBOztRQTNCQUM7ZUFBQUE7OztBQUFOLE1BQU1BLDZCQUE2QkM7SUFDeEMsWUFBWUMsR0FBVyxDQUFFO1FBQ3ZCLEtBQUssQ0FBQyxDQUFDLDJCQUEyQixFQUFFQSxLQUFLO1FBQ3pDLElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQXNCTyxNQUFNSixzQ0FBc0NFO0lBQ2pELFlBQVlDLEdBQVcsQ0FBRTtRQUN2QixLQUFLLENBQUMsQ0FBQyxvQ0FBb0MsRUFBRUEsS0FBSztRQUNsRCxJQUFJLENBQUNDLElBQUksR0FBRztJQUNkO0FBQ0Y7QUEwQk8sTUFBTUwsZ0NBQWdDRztJQUMzQyxZQUFZRyxLQUFlLENBQUU7UUFDM0IsS0FBSyxDQUFDLENBQUMsOEJBQThCLEVBQUVBLE1BQU1DLElBQUksQ0FBQyxTQUFTO1FBQzNELElBQUksQ0FBQ0YsSUFBSSxHQUFHO0lBQ2Q7QUFDRiJ9