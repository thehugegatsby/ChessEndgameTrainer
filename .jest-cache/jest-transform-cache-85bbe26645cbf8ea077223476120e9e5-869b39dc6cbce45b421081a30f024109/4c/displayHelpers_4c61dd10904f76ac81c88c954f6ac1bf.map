{"version":3,"sources":["/home/thehu/coolProjects/EndgameTrainer-training-board-complete/src/shared/utils/chess/evaluation/displayHelpers.ts"],"sourcesContent":["import type { EvaluationDisplay } from \"@shared/types\";\nimport { EVALUATION, UI } from \"@shared/constants\";\n\n/**\n * Get move quality evaluation (how good was this specific move)\n * This compares the played move with the best available alternative\n *\n * Works with tablebase-derived quality scores from smart evaluation\n * This function uses absolute values because a \"good move\" is good regardless of color.\n *\n * QUIRK: isPlayerMove parameter is unused - legacy from earlier version.\n * @param evaluation\n * @param mate\n * @param _isPlayerMove\n */\nexport /**\n *\n */\nconst getMoveQualityDisplay = (\n  evaluation: number,\n  mate?: number,\n  _isPlayerMove: boolean = true,\n): EvaluationDisplay => {\n  // For move quality, we want to show how good the move was\n  // regardless of who played it\n\n  // Matt-Bewertungen sind immer excellent wenn man Matt setzt\n  if (mate !== undefined) {\n    if (mate > 0) {\n      return {\n        text: `#${mate}`,\n        className: \"eval-excellent\",\n        color: UI.EVALUATION_COLORS.EXCELLENT.text,\n        bgColor: UI.EVALUATION_COLORS.EXCELLENT.background,\n      };\n    }\n    if (mate < 0) {\n      // Even when getting mated, if it's the best defense, show it neutrally\n      return {\n        text: `#${Math.abs(mate)}`,\n        className: \"eval-neutral\",\n        color: UI.EVALUATION_COLORS.NEUTRAL.text,\n        bgColor: UI.EVALUATION_COLORS.NEUTRAL.background,\n      };\n    }\n  }\n\n  // Für Zugqualität verwenden wir den absoluten Wert\n  // Ein starker Zug ist stark, egal für welche Seite\n  const absEval = Math.abs(evaluation);\n\n  // Sehr starke Züge (leading to winning positions)\n  if (absEval >= EVALUATION.COLOR_THRESHOLDS.DOMINATING) {\n    return {\n      text: \"⭐\",\n      className: \"eval-excellent\",\n      color: UI.EVALUATION_COLORS.EXCELLENT.text,\n      bgColor: UI.EVALUATION_COLORS.EXCELLENT.background,\n    };\n  }\n  if (absEval >= EVALUATION.COLOR_THRESHOLDS.EXCELLENT) {\n    return {\n      text: \"✨\",\n      className: \"eval-excellent\",\n      color: UI.EVALUATION_COLORS.EXCELLENT.text,\n      bgColor: UI.EVALUATION_COLORS.EXCELLENT.background,\n    };\n  }\n  if (absEval >= EVALUATION.COLOR_THRESHOLDS.GOOD) {\n    return {\n      text: \"👌\",\n      className: \"eval-good\",\n      color: UI.EVALUATION_COLORS.GOOD.text,\n      bgColor: UI.EVALUATION_COLORS.GOOD.background,\n    };\n  }\n  if (absEval >= Math.abs(EVALUATION.COLOR_THRESHOLDS.NEUTRAL_LOWER)) {\n    return {\n      text: \"⚪\",\n      className: \"eval-neutral\",\n      color: UI.EVALUATION_COLORS.NEUTRAL.text,\n      bgColor: UI.EVALUATION_COLORS.NEUTRAL.background,\n    };\n  }\n\n  // This shouldn't happen in move quality evaluation,\n  // but keeping for safety\n  return {\n    text: \"⚪\",\n    className: \"eval-neutral\",\n    color: UI.EVALUATION_COLORS.NEUTRAL.text,\n    bgColor: UI.EVALUATION_COLORS.NEUTRAL.background,\n  };\n};\n\n/**\n * Original position evaluation (who is better)\n * @param evaluation\n * @param mate\n */\nexport /**\n *\n */\nconst getEvaluationDisplay = (\n  evaluation: number,\n  mate?: number,\n): EvaluationDisplay => {\n  // Matt-Bewertungen mit Zuganzahl\n  if (mate !== undefined) {\n    if (mate > 0) {\n      return {\n        text: `#${mate}`,\n        className: \"eval-excellent\",\n        color: UI.EVALUATION_COLORS.EXCELLENT.text,\n        bgColor: UI.EVALUATION_COLORS.EXCELLENT.background,\n      };\n    }\n    if (mate < 0) {\n      return {\n        text: `#${Math.abs(mate)}`,\n        className: \"eval-blunder\",\n        color: UI.EVALUATION_COLORS.BLUNDER.text,\n        bgColor: UI.EVALUATION_COLORS.BLUNDER.background,\n      };\n    }\n  }\n\n  // Normale Bewertungen mit Symbolen\n  if (evaluation >= EVALUATION.COLOR_THRESHOLDS.DOMINATING) {\n    return {\n      text: \"⭐\",\n      className: \"eval-excellent\",\n      color: UI.EVALUATION_COLORS.EXCELLENT.text,\n      bgColor: UI.EVALUATION_COLORS.EXCELLENT.background,\n    };\n  }\n  if (evaluation >= EVALUATION.COLOR_THRESHOLDS.EXCELLENT) {\n    return {\n      text: \"✨\",\n      className: \"eval-excellent\",\n      color: UI.EVALUATION_COLORS.EXCELLENT.text,\n      bgColor: UI.EVALUATION_COLORS.EXCELLENT.background,\n    };\n  }\n  if (evaluation >= EVALUATION.COLOR_THRESHOLDS.GOOD) {\n    return {\n      text: \"👌\",\n      className: \"eval-good\",\n      color: UI.EVALUATION_COLORS.GOOD.text,\n      bgColor: UI.EVALUATION_COLORS.GOOD.background,\n    };\n  }\n  if (evaluation >= EVALUATION.COLOR_THRESHOLDS.NEUTRAL_LOWER) {\n    return {\n      text: \"⚪\",\n      className: \"eval-neutral\",\n      color: UI.EVALUATION_COLORS.NEUTRAL.text,\n      bgColor: UI.EVALUATION_COLORS.NEUTRAL.background,\n    };\n  }\n  if (evaluation >= EVALUATION.COLOR_THRESHOLDS.INACCURATE) {\n    return {\n      text: \"⚠️\",\n      className: \"eval-inaccurate\",\n      color: UI.EVALUATION_COLORS.INACCURATE.text,\n      bgColor: UI.EVALUATION_COLORS.INACCURATE.background,\n    };\n  }\n  if (evaluation >= EVALUATION.COLOR_THRESHOLDS.MISTAKE) {\n    return {\n      text: \"🔶\",\n      className: \"eval-mistake\",\n      color: UI.EVALUATION_COLORS.MISTAKE.text,\n      bgColor: UI.EVALUATION_COLORS.MISTAKE.background,\n    };\n  }\n\n  return {\n    text: \"🔴\",\n    className: \"eval-blunder\",\n    color: UI.EVALUATION_COLORS.BLUNDER.text,\n    bgColor: UI.EVALUATION_COLORS.BLUNDER.background,\n  };\n};\n"],"names":["getEvaluationDisplay","getMoveQualityDisplay","evaluation","mate","_isPlayerMove","undefined","text","className","color","UI","EVALUATION_COLORS","EXCELLENT","bgColor","background","Math","abs","NEUTRAL","absEval","EVALUATION","COLOR_THRESHOLDS","DOMINATING","GOOD","NEUTRAL_LOWER","BLUNDER","INACCURATE","MISTAKE"],"mappings":"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"}