{"version":3,"sources":["/home/thehu/coolProjects/EndgameTrainer-training-board-complete/src/tests/unit/chess/positionEvaluation.test.ts"],"sourcesContent":["/**\n * @fileoverview Unit tests for position evaluation display\n * @description Tests getEvaluationDisplay function for position assessment\n */\n\nimport { describe, test, expect } from \"@jest/globals\";\nimport { getEvaluationDisplay } from \"../../../shared/utils/chess/evaluation\";\n\ndescribe(\"Position Evaluation - getEvaluationDisplay\", () => {\n  describe(\"Mate Evaluations\", () => {\n    test(\"should_display_positive_mate_as_winning\", () => {\n      const result = getEvaluationDisplay(0, 3);\n\n      expect(result.text).toBe(\"#3\");\n      expect(result.className).toBe(\"eval-excellent\");\n      expect(result.color).toBe(\"#10b981\");\n      expect(result.bgColor).toBe(\"#065f46\");\n    });\n\n    test(\"should_display_negative_mate_as_losing\", () => {\n      const result = getEvaluationDisplay(0, -5);\n\n      expect(result.text).toBe(\"#5\");\n      expect(result.className).toBe(\"eval-blunder\");\n      expect(result.color).toBe(\"#ef4444\");\n      expect(result.bgColor).toBe(\"#991b1b\");\n    });\n  });\n\n  describe(\"Positional Evaluations - White Advantage\", () => {\n    test(\"should_display_dominating_white_position_with_star\", () => {\n      const result = getEvaluationDisplay(5.5);\n\n      expect(result.text).toBe(\"⭐\");\n      expect(result.className).toBe(\"eval-excellent\");\n    });\n\n    test(\"should_display_winning_white_position_with_sparkles\", () => {\n      const result = getEvaluationDisplay(3.0);\n\n      expect(result.text).toBe(\"✨\");\n      expect(result.className).toBe(\"eval-excellent\");\n    });\n\n    test(\"should_display_better_white_position_with_ok_hand\", () => {\n      const result = getEvaluationDisplay(1.0);\n\n      expect(result.text).toBe(\"👌\");\n      expect(result.className).toBe(\"eval-good\");\n      expect(result.color).toBe(\"#3b82f6\");\n      expect(result.bgColor).toBe(\"#1e40af\");\n    });\n\n    test(\"should_display_equal_position_with_circle\", () => {\n      const result = getEvaluationDisplay(0.0);\n\n      expect(result.text).toBe(\"⚪\");\n      expect(result.className).toBe(\"eval-neutral\");\n    });\n  });\n\n  describe(\"Positional Evaluations - Black Advantage\", () => {\n    test(\"should_display_slightly_worse_position_with_warning\", () => {\n      const result = getEvaluationDisplay(-1.0);\n\n      expect(result.text).toBe(\"⚠️\");\n      expect(result.className).toBe(\"eval-inaccurate\");\n      expect(result.color).toBe(\"#f59e0b\");\n      expect(result.bgColor).toBe(\"#92400e\");\n    });\n\n    test(\"should_display_clearly_worse_position_with_orange_diamond\", () => {\n      const result = getEvaluationDisplay(-3.0);\n\n      expect(result.text).toBe(\"🔶\");\n      expect(result.className).toBe(\"eval-mistake\");\n      expect(result.color).toBe(\"#fb923c\");\n      expect(result.bgColor).toBe(\"#c2410c\");\n    });\n\n    test(\"should_display_losing_position_with_red_circle\", () => {\n      const result = getEvaluationDisplay(-6.0);\n\n      expect(result.text).toBe(\"🔴\");\n      expect(result.className).toBe(\"eval-blunder\");\n      expect(result.color).toBe(\"#ef4444\");\n      expect(result.bgColor).toBe(\"#991b1b\");\n    });\n  });\n\n  describe(\"Threshold Tests\", () => {\n    test(\"should_handle_exact_thresholds\", () => {\n      expect(getEvaluationDisplay(5.0).text).toBe(\"⭐\");\n      expect(getEvaluationDisplay(2.0).text).toBe(\"✨\");\n      expect(getEvaluationDisplay(0.5).text).toBe(\"👌\");\n      expect(getEvaluationDisplay(-0.5).text).toBe(\"⚪\");\n      expect(getEvaluationDisplay(-2.0).text).toBe(\"⚠️\");\n      expect(getEvaluationDisplay(-5.0).text).toBe(\"🔶\");\n    });\n\n    test(\"should_handle_values_just_below_thresholds\", () => {\n      expect(getEvaluationDisplay(4.99).text).toBe(\"✨\");\n      expect(getEvaluationDisplay(1.99).text).toBe(\"👌\");\n      expect(getEvaluationDisplay(0.49).text).toBe(\"⚪\");\n      expect(getEvaluationDisplay(-0.51).text).toBe(\"⚠️\");\n      expect(getEvaluationDisplay(-2.01).text).toBe(\"🔶\");\n      expect(getEvaluationDisplay(-5.01).text).toBe(\"🔴\");\n    });\n  });\n\n  describe(\"Edge Cases\", () => {\n    test(\"should_handle_very_large_positive_values\", () => {\n      const result = getEvaluationDisplay(100.0);\n\n      expect(result.text).toBe(\"⭐\");\n      expect(result.className).toBe(\"eval-excellent\");\n    });\n\n    test(\"should_handle_very_large_negative_values\", () => {\n      const result = getEvaluationDisplay(-100.0);\n\n      expect(result.text).toBe(\"🔴\");\n      expect(result.className).toBe(\"eval-blunder\");\n    });\n\n    test(\"should_handle_NaN\", () => {\n      const result = getEvaluationDisplay(NaN);\n\n      // NaN comparisons are always false, so falls through to last case\n      expect(result.text).toBe(\"🔴\");\n      expect(result.className).toBe(\"eval-blunder\");\n    });\n\n    test(\"should_handle_Infinity\", () => {\n      const result = getEvaluationDisplay(Infinity);\n\n      expect(result.text).toBe(\"⭐\");\n      expect(result.className).toBe(\"eval-excellent\");\n    });\n\n    test(\"should_handle_negative_Infinity\", () => {\n      const result = getEvaluationDisplay(-Infinity);\n\n      expect(result.text).toBe(\"🔴\");\n      expect(result.className).toBe(\"eval-blunder\");\n    });\n  });\n\n  describe(\"Complete Display Object\", () => {\n    test(\"should_return_all_required_properties\", () => {\n      const result = getEvaluationDisplay(1.0);\n\n      expect(result).toHaveProperty(\"text\");\n      expect(result).toHaveProperty(\"className\");\n      expect(result).toHaveProperty(\"color\");\n      expect(result).toHaveProperty(\"bgColor\");\n\n      expect(typeof result.text).toBe(\"string\");\n      expect(typeof result.className).toBe(\"string\");\n      expect(typeof result.color).toBe(\"string\");\n      expect(typeof result.bgColor).toBe(\"string\");\n    });\n  });\n});\n"],"names":["describe","test","result","getEvaluationDisplay","expect","text","toBe","className","color","bgColor","NaN","Infinity","toHaveProperty"],"mappings":"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"}