d28d2990572c32246187319b9e08dd0a
/**
 * @file Tests for pawn promotion auto-win feature
 * @module tests/unit/store/orchestrators/handlePlayerMove.promotion
 */ "use strict";
// Mock services
jest.mock("@shared/services/ChessService", ()=>({
        chessService: {
            validateMove: jest.fn(),
            move: jest.fn(),
            getFen: jest.fn(),
            isGameOver: jest.fn(),
            turn: jest.fn()
        }
    }));
jest.mock("@shared/services/TablebaseService", ()=>({
        tablebaseService: {
            getEvaluation: jest.fn(),
            getTopMoves: jest.fn()
        }
    }));
jest.mock("@shared/store/orchestrators/handlePlayerMove/move.completion");
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _handlePlayerMove = require("../../../../shared/store/orchestrators/handlePlayerMove");
const _ChessService = require("../../../../shared/services/ChessService");
const _TablebaseService = require("../../../../shared/services/TablebaseService");
const _movecompletion = require("../../../../shared/store/orchestrators/handlePlayerMove/move.completion");
describe("Pawn Promotion Auto-Win Feature", ()=>{
    let mockApi;
    let mockState;
    beforeEach(()=>{
        // Create mock state
        mockState = {
            training: {
                isPlayerTurn: true,
                isOpponentThinking: false,
                currentPosition: {
                    colorToTrain: "white"
                }
            },
            ui: {
                loading: {
                    position: false
                },
                toasts: []
            }
        };
        // Create mock StoreApi
        mockApi = {
            getState: jest.fn(()=>mockState),
            setState: jest.fn((callback)=>{
                // Apply Immer-style updates to mockState
                callback(mockState);
            })
        };
        // Reset all mocks
        jest.clearAllMocks();
    });
    describe("Test Position: K+P endgame leading to promotion", ()=>{
        // Position from train/1: 4Q3/3K4/5k2/8/8/8/8/8 w - - 1 6
        // After moves: 1. Kd6 Kf7 2. Kd7 Kf8 3. e6 Kg8 4. e7 Kf7 5. e8=Q+
        it("should auto-complete training when white promotes pawn to queen with winning position", async ()=>{
            // Arrange - Position just before promotion: 4k3/4P3/8/8/8/8/8/4K3 w - - 0 1
            const moveBeforePromotion = {
                from: "e7",
                to: "e8",
                promotion: "q"
            };
            const fenAfterPromotion = "4Q3/8/8/8/8/8/8/4k3 b - - 0 1";
            // Mock chess service
            _ChessService.chessService.validateMove.mockReturnValue(true);
            _ChessService.chessService.move.mockReturnValue({
                san: "e8=Q+",
                color: "w",
                promotion: "q",
                from: "e7",
                to: "e8",
                flags: "p",
                piece: "p"
            });
            _ChessService.chessService.getFen.mockReturnValueOnce("4k3/4P3/8/8/8/8/8/4K3 w - - 0 1") // Before move
            .mockReturnValue(fenAfterPromotion); // After move
            _ChessService.chessService.isGameOver.mockReturnValue(false);
            _ChessService.chessService.turn.mockReturnValue("b"); // Black's turn after white moves
            // Mock tablebase evaluation - WDL from white's perspective after white promotes
            // Positive value means white wins
            _TablebaseService.tablebaseService.getEvaluation.mockResolvedValue({
                isAvailable: true,
                result: {
                    wdl: 2,
                    dtz: 5,
                    dtm: 5,
                    category: "mate",
                    precise: true,
                    evaluation: "White is winning"
                }
            });
            // Mock getTopMoves for the move quality evaluation
            _TablebaseService.tablebaseService.getTopMoves.mockResolvedValue({
                isAvailable: false,
                moves: []
            });
            // Act
            const result = await (0, _handlePlayerMove.handlePlayerMove)(mockApi, moveBeforePromotion);
            // Assert
            expect(result).toBe(true);
            expect(_ChessService.chessService.move).toHaveBeenCalledWith(moveBeforePromotion);
            expect(_TablebaseService.tablebaseService.getEvaluation).toHaveBeenCalledWith(fenAfterPromotion);
            expect(_movecompletion.handleTrainingCompletion).toHaveBeenCalledWith(mockApi, true);
            // Check that success dialog was set (not toast anymore)
            expect(mockApi.setState).toHaveBeenCalled();
            expect(mockState.training.moveSuccessDialog).toEqual({
                isOpen: true,
                promotionPiece: "Dame",
                moveDescription: "e8=Q+"
            });
        });
        it("should NOT auto-complete if promotion leads to draw position", async ()=>{
            // Arrange - Same position but tablebase returns draw
            const moveBeforePromotion = {
                from: "e7",
                to: "e8",
                promotion: "q"
            };
            const fenAfterPromotion = "4Q3/8/8/8/8/8/8/4k3 b - - 0 1";
            _ChessService.chessService.validateMove.mockReturnValue(true);
            _ChessService.chessService.move.mockReturnValue({
                san: "e8=Q",
                color: "w",
                promotion: "q"
            });
            _ChessService.chessService.getFen.mockReturnValueOnce("4k3/4P3/8/8/8/8/8/4K3 w - - 0 1").mockReturnValue(fenAfterPromotion);
            _ChessService.chessService.isGameOver.mockReturnValue(false);
            // Mock tablebase returns draw (WDL = 0)
            _TablebaseService.tablebaseService.getEvaluation.mockResolvedValue({
                isAvailable: true,
                result: {
                    wdl: 0,
                    dtz: null,
                    dtm: null,
                    category: "draw",
                    precise: true,
                    evaluation: "Drawn position"
                }
            });
            // Act
            await (0, _handlePlayerMove.handlePlayerMove)(mockApi, moveBeforePromotion);
            // Assert
            expect(_movecompletion.handleTrainingCompletion).not.toHaveBeenCalled();
        });
        it("should NOT auto-complete on rook promotion that leads to draw", async ()=>{
            // Arrange - Rook promotion that doesn't win
            const moveBeforePromotion = {
                from: "e7",
                to: "e8",
                promotion: "r"
            };
            _ChessService.chessService.validateMove.mockReturnValue(true);
            _ChessService.chessService.move.mockReturnValue({
                san: "e8=R",
                color: "w",
                promotion: "r"
            });
            _ChessService.chessService.getFen.mockReturnValueOnce("4k3/4P3/8/8/8/8/8/4K3 w - - 0 1").mockReturnValue("4R3/8/8/8/8/8/8/4k3 b - - 0 1");
            _ChessService.chessService.isGameOver.mockReturnValue(false);
            // Mock tablebase returns draw for rook promotion
            _TablebaseService.tablebaseService.getEvaluation.mockResolvedValue({
                isAvailable: true,
                result: {
                    wdl: 0,
                    dtz: null,
                    dtm: null,
                    category: "draw",
                    precise: true,
                    evaluation: "Drawn position"
                }
            });
            // Act
            await (0, _handlePlayerMove.handlePlayerMove)(mockApi, moveBeforePromotion);
            // Assert
            expect(_TablebaseService.tablebaseService.getEvaluation).toHaveBeenCalled();
            expect(_movecompletion.handleTrainingCompletion).not.toHaveBeenCalled();
        });
        it("should auto-complete on rook promotion that leads to win", async ()=>{
            // Arrange - Rook promotion that wins
            const moveBeforePromotion = {
                from: "e7",
                to: "e8",
                promotion: "r"
            };
            _ChessService.chessService.validateMove.mockReturnValue(true);
            _ChessService.chessService.move.mockReturnValue({
                san: "e8=R",
                color: "w",
                promotion: "r",
                from: "e7",
                to: "e8",
                flags: "p",
                piece: "p"
            });
            _ChessService.chessService.getFen.mockReturnValueOnce("4k3/4P3/8/8/8/8/8/4K3 w - - 0 1").mockReturnValue("4R3/8/8/8/8/8/8/4k3 b - - 0 1");
            _ChessService.chessService.isGameOver.mockReturnValue(false);
            // Mock tablebase returns win for rook promotion - WDL from white's perspective
            _TablebaseService.tablebaseService.getEvaluation.mockResolvedValue({
                isAvailable: true,
                result: {
                    wdl: 2,
                    dtz: 3,
                    dtm: 3,
                    category: "mate",
                    precise: true,
                    evaluation: "White is winning"
                }
            });
            // Mock getTopMoves for move quality evaluation
            _TablebaseService.tablebaseService.getTopMoves.mockResolvedValue({
                isAvailable: false,
                moves: []
            });
            // Act
            const result = await (0, _handlePlayerMove.handlePlayerMove)(mockApi, moveBeforePromotion);
            // Assert
            expect(result).toBe(true);
            expect(_ChessService.chessService.move).toHaveBeenCalledWith(moveBeforePromotion);
            expect(_movecompletion.handleTrainingCompletion).toHaveBeenCalledWith(mockApi, true);
            // Check that success dialog was set (not toast anymore)
            expect(mockApi.setState).toHaveBeenCalled();
            expect(mockState.training.moveSuccessDialog).toEqual({
                isOpen: true,
                promotionPiece: "Turm",
                moveDescription: "e8=R"
            });
        });
        it("should handle black pawn promotion correctly", async ()=>{
            // Arrange - Black promotes on e1
            mockState.training.currentPosition.colorToTrain = "black";
            const moveBeforePromotion = {
                from: "e2",
                to: "e1",
                promotion: "q"
            };
            const fenAfterPromotion = "8/8/8/8/8/8/8/4q3 w - - 0 1";
            _ChessService.chessService.validateMove.mockReturnValue(true);
            _ChessService.chessService.move.mockReturnValue({
                san: "e1=Q",
                color: "b",
                promotion: "q",
                from: "e2",
                to: "e1",
                flags: "p",
                piece: "p"
            });
            _ChessService.chessService.getFen.mockReturnValueOnce("8/8/8/8/8/8/4p3/8 b - - 0 1").mockReturnValue(fenAfterPromotion);
            _ChessService.chessService.isGameOver.mockReturnValue(false);
            // Mock tablebase - for black training, check WDL from white's perspective
            // WDL = -2 means white loses = black wins (training success)
            _TablebaseService.tablebaseService.getEvaluation.mockResolvedValue({
                isAvailable: true,
                result: {
                    wdl: -2,
                    dtz: 5,
                    dtm: 5,
                    category: "mate",
                    precise: true,
                    evaluation: "Black is winning"
                }
            });
            // Mock getTopMoves for move quality evaluation
            _TablebaseService.tablebaseService.getTopMoves.mockResolvedValue({
                isAvailable: false,
                moves: []
            });
            // Act
            const result = await (0, _handlePlayerMove.handlePlayerMove)(mockApi, moveBeforePromotion);
            // Assert
            expect(result).toBe(true);
            expect(_ChessService.chessService.move).toHaveBeenCalledWith(moveBeforePromotion);
            expect(_movecompletion.handleTrainingCompletion).toHaveBeenCalledWith(mockApi, true);
            // Check that success dialog was set (not toast anymore)
            expect(mockApi.setState).toHaveBeenCalled();
            expect(mockState.training.moveSuccessDialog).toEqual({
                isOpen: true,
                promotionPiece: "Dame",
                moveDescription: "e1=Q"
            });
        });
        it("should continue normal flow if tablebase is unavailable", async ()=>{
            // Arrange
            const moveBeforePromotion = {
                from: "e7",
                to: "e8",
                promotion: "q"
            };
            _ChessService.chessService.validateMove.mockReturnValue(true);
            _ChessService.chessService.move.mockReturnValue({
                san: "e8=Q",
                color: "w",
                promotion: "q"
            });
            _ChessService.chessService.getFen.mockReturnValue("4Q3/8/8/8/8/8/8/4k3 b - - 0 1");
            _ChessService.chessService.isGameOver.mockReturnValue(false);
            // Tablebase unavailable
            _TablebaseService.tablebaseService.getEvaluation.mockResolvedValue({
                isAvailable: false
            });
            // Act
            await (0, _handlePlayerMove.handlePlayerMove)(mockApi, moveBeforePromotion);
            // Assert
            expect(_movecompletion.handleTrainingCompletion).not.toHaveBeenCalled();
        // Should continue with normal flow
        });
        it("should handle tablebase errors gracefully", async ()=>{
            // Arrange
            const moveBeforePromotion = {
                from: "e7",
                to: "e8",
                promotion: "q"
            };
            _ChessService.chessService.validateMove.mockReturnValue(true);
            _ChessService.chessService.move.mockReturnValue({
                san: "e8=Q",
                color: "w",
                promotion: "q"
            });
            _ChessService.chessService.getFen.mockReturnValue("4Q3/8/8/8/8/8/8/4k3 b - - 0 1");
            _ChessService.chessService.isGameOver.mockReturnValue(false);
            // Tablebase throws error
            _TablebaseService.tablebaseService.getEvaluation.mockRejectedValue(new Error("Network error"));
            // Act - Should not throw
            const result = await (0, _handlePlayerMove.handlePlayerMove)(mockApi, moveBeforePromotion);
            // Assert
            expect(result).toBe(true); // Move succeeds despite tablebase error
            expect(_movecompletion.handleTrainingCompletion).not.toHaveBeenCalled();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3RoZWh1L2Nvb2xQcm9qZWN0cy9FbmRnYW1lVHJhaW5lci10cmFpbmluZy1ib2FyZC1jb21wbGV0ZS9zcmMvdGVzdHMvdW5pdC9zdG9yZS9vcmNoZXN0cmF0b3JzL2hhbmRsZVBsYXllck1vdmUucHJvbW90aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBUZXN0cyBmb3IgcGF3biBwcm9tb3Rpb24gYXV0by13aW4gZmVhdHVyZVxuICogQG1vZHVsZSB0ZXN0cy91bml0L3N0b3JlL29yY2hlc3RyYXRvcnMvaGFuZGxlUGxheWVyTW92ZS5wcm9tb3Rpb25cbiAqL1xuXG5pbXBvcnQgeyBoYW5kbGVQbGF5ZXJNb3ZlIH0gZnJvbSBcIkBzaGFyZWQvc3RvcmUvb3JjaGVzdHJhdG9ycy9oYW5kbGVQbGF5ZXJNb3ZlXCI7XG5pbXBvcnQgeyBjaGVzc1NlcnZpY2UgfSBmcm9tIFwiQHNoYXJlZC9zZXJ2aWNlcy9DaGVzc1NlcnZpY2VcIjtcbmltcG9ydCB7IHRhYmxlYmFzZVNlcnZpY2UgfSBmcm9tIFwiQHNoYXJlZC9zZXJ2aWNlcy9UYWJsZWJhc2VTZXJ2aWNlXCI7XG5pbXBvcnQgeyBoYW5kbGVUcmFpbmluZ0NvbXBsZXRpb24gfSBmcm9tIFwiQHNoYXJlZC9zdG9yZS9vcmNoZXN0cmF0b3JzL2hhbmRsZVBsYXllck1vdmUvbW92ZS5jb21wbGV0aW9uXCI7XG5pbXBvcnQgdHlwZSB7IFN0b3JlQXBpIH0gZnJvbSBcIkBzaGFyZWQvc3RvcmUvb3JjaGVzdHJhdG9ycy90eXBlc1wiO1xuXG4vLyBNb2NrIHNlcnZpY2VzXG5qZXN0Lm1vY2soXCJAc2hhcmVkL3NlcnZpY2VzL0NoZXNzU2VydmljZVwiLCAoKSA9PiAoe1xuICBjaGVzc1NlcnZpY2U6IHtcbiAgICB2YWxpZGF0ZU1vdmU6IGplc3QuZm4oKSxcbiAgICBtb3ZlOiBqZXN0LmZuKCksXG4gICAgZ2V0RmVuOiBqZXN0LmZuKCksXG4gICAgaXNHYW1lT3ZlcjogamVzdC5mbigpLFxuICAgIHR1cm46IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuamVzdC5tb2NrKFwiQHNoYXJlZC9zZXJ2aWNlcy9UYWJsZWJhc2VTZXJ2aWNlXCIsICgpID0+ICh7XG4gIHRhYmxlYmFzZVNlcnZpY2U6IHtcbiAgICBnZXRFdmFsdWF0aW9uOiBqZXN0LmZuKCksXG4gICAgZ2V0VG9wTW92ZXM6IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuamVzdC5tb2NrKFwiQHNoYXJlZC9zdG9yZS9vcmNoZXN0cmF0b3JzL2hhbmRsZVBsYXllck1vdmUvbW92ZS5jb21wbGV0aW9uXCIpO1xuXG5kZXNjcmliZShcIlBhd24gUHJvbW90aW9uIEF1dG8tV2luIEZlYXR1cmVcIiwgKCkgPT4ge1xuICBsZXQgbW9ja0FwaTogU3RvcmVBcGk7XG4gIGxldCBtb2NrU3RhdGU6IGFueTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBDcmVhdGUgbW9jayBzdGF0ZVxuICAgIG1vY2tTdGF0ZSA9IHtcbiAgICAgIHRyYWluaW5nOiB7XG4gICAgICAgIGlzUGxheWVyVHVybjogdHJ1ZSxcbiAgICAgICAgaXNPcHBvbmVudFRoaW5raW5nOiBmYWxzZSxcbiAgICAgICAgY3VycmVudFBvc2l0aW9uOiB7IGNvbG9yVG9UcmFpbjogXCJ3aGl0ZVwiIH0sXG4gICAgICB9LFxuICAgICAgdWk6IHtcbiAgICAgICAgbG9hZGluZzogeyBwb3NpdGlvbjogZmFsc2UgfSxcbiAgICAgICAgdG9hc3RzOiBbXSxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIC8vIENyZWF0ZSBtb2NrIFN0b3JlQXBpXG4gICAgbW9ja0FwaSA9IHtcbiAgICAgIGdldFN0YXRlOiBqZXN0LmZuKCgpID0+IG1vY2tTdGF0ZSksXG4gICAgICBzZXRTdGF0ZTogamVzdC5mbigoY2FsbGJhY2spID0+IHtcbiAgICAgICAgLy8gQXBwbHkgSW1tZXItc3R5bGUgdXBkYXRlcyB0byBtb2NrU3RhdGVcbiAgICAgICAgY2FsbGJhY2sobW9ja1N0YXRlKTtcbiAgICAgIH0pLFxuICAgIH07XG5cbiAgICAvLyBSZXNldCBhbGwgbW9ja3NcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJUZXN0IFBvc2l0aW9uOiBLK1AgZW5kZ2FtZSBsZWFkaW5nIHRvIHByb21vdGlvblwiLCAoKSA9PiB7XG4gICAgLy8gUG9zaXRpb24gZnJvbSB0cmFpbi8xOiA0UTMvM0s0LzVrMi84LzgvOC84LzggdyAtIC0gMSA2XG4gICAgLy8gQWZ0ZXIgbW92ZXM6IDEuIEtkNiBLZjcgMi4gS2Q3IEtmOCAzLiBlNiBLZzggNC4gZTcgS2Y3IDUuIGU4PVErXG5cbiAgICBpdChcInNob3VsZCBhdXRvLWNvbXBsZXRlIHRyYWluaW5nIHdoZW4gd2hpdGUgcHJvbW90ZXMgcGF3biB0byBxdWVlbiB3aXRoIHdpbm5pbmcgcG9zaXRpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZSAtIFBvc2l0aW9uIGp1c3QgYmVmb3JlIHByb21vdGlvbjogNGszLzRQMy84LzgvOC84LzgvNEszIHcgLSAtIDAgMVxuICAgICAgY29uc3QgbW92ZUJlZm9yZVByb21vdGlvbiA9IHsgZnJvbTogXCJlN1wiLCB0bzogXCJlOFwiLCBwcm9tb3Rpb246IFwicVwiIH07XG4gICAgICBjb25zdCBmZW5BZnRlclByb21vdGlvbiA9IFwiNFEzLzgvOC84LzgvOC84LzRrMyBiIC0gLSAwIDFcIjtcblxuICAgICAgLy8gTW9jayBjaGVzcyBzZXJ2aWNlXG4gICAgICAoY2hlc3NTZXJ2aWNlLnZhbGlkYXRlTW92ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAgIChjaGVzc1NlcnZpY2UubW92ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNhbjogXCJlOD1RK1wiLFxuICAgICAgICBjb2xvcjogXCJ3XCIsXG4gICAgICAgIHByb21vdGlvbjogXCJxXCIsXG4gICAgICAgIGZyb206IFwiZTdcIixcbiAgICAgICAgdG86IFwiZThcIixcbiAgICAgICAgZmxhZ3M6IFwicFwiLCAvLyBQcm9tb3Rpb24gZmxhZyByZXF1aXJlZCBieSBjaGVja1Byb21vdGlvbiBtZXRob2RcbiAgICAgICAgcGllY2U6IFwicFwiLCAvLyBQYXduIHBpZWNlXG4gICAgICB9KTtcbiAgICAgIChjaGVzc1NlcnZpY2UuZ2V0RmVuIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoXCI0azMvNFAzLzgvOC84LzgvOC80SzMgdyAtIC0gMCAxXCIpIC8vIEJlZm9yZSBtb3ZlXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWUoZmVuQWZ0ZXJQcm9tb3Rpb24pOyAvLyBBZnRlciBtb3ZlXG4gICAgICAoY2hlc3NTZXJ2aWNlLmlzR2FtZU92ZXIgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpO1xuICAgICAgKGNoZXNzU2VydmljZS50dXJuIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKFwiYlwiKTsgLy8gQmxhY2sncyB0dXJuIGFmdGVyIHdoaXRlIG1vdmVzXG5cbiAgICAgIC8vIE1vY2sgdGFibGViYXNlIGV2YWx1YXRpb24gLSBXREwgZnJvbSB3aGl0ZSdzIHBlcnNwZWN0aXZlIGFmdGVyIHdoaXRlIHByb21vdGVzXG4gICAgICAvLyBQb3NpdGl2ZSB2YWx1ZSBtZWFucyB3aGl0ZSB3aW5zXG4gICAgICAodGFibGViYXNlU2VydmljZS5nZXRFdmFsdWF0aW9uIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBpc0F2YWlsYWJsZTogdHJ1ZSxcbiAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgd2RsOiAyLCAvLyBXaGl0ZSB3aW5zIChmcm9tIHdoaXRlJ3MgcGVyc3BlY3RpdmUsIHBvc2l0aXZlID0gZ29vZCBmb3Igd2hpdGUpXG4gICAgICAgICAgZHR6OiA1LFxuICAgICAgICAgIGR0bTogNSxcbiAgICAgICAgICBjYXRlZ29yeTogXCJtYXRlXCIsXG4gICAgICAgICAgcHJlY2lzZTogdHJ1ZSxcbiAgICAgICAgICBldmFsdWF0aW9uOiBcIldoaXRlIGlzIHdpbm5pbmdcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIGdldFRvcE1vdmVzIGZvciB0aGUgbW92ZSBxdWFsaXR5IGV2YWx1YXRpb25cbiAgICAgICh0YWJsZWJhc2VTZXJ2aWNlLmdldFRvcE1vdmVzIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBpc0F2YWlsYWJsZTogZmFsc2UsXG4gICAgICAgIG1vdmVzOiBbXSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZVBsYXllck1vdmUobW9ja0FwaSwgbW92ZUJlZm9yZVByb21vdGlvbik7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjaGVzc1NlcnZpY2UubW92ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgobW92ZUJlZm9yZVByb21vdGlvbik7XG4gICAgICBleHBlY3QodGFibGViYXNlU2VydmljZS5nZXRFdmFsdWF0aW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZmVuQWZ0ZXJQcm9tb3Rpb24sXG4gICAgICApO1xuICAgICAgZXhwZWN0KGhhbmRsZVRyYWluaW5nQ29tcGxldGlvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja0FwaSwgdHJ1ZSk7XG5cbiAgICAgIC8vIENoZWNrIHRoYXQgc3VjY2VzcyBkaWFsb2cgd2FzIHNldCAobm90IHRvYXN0IGFueW1vcmUpXG4gICAgICBleHBlY3QobW9ja0FwaS5zZXRTdGF0ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tTdGF0ZS50cmFpbmluZy5tb3ZlU3VjY2Vzc0RpYWxvZykudG9FcXVhbCh7XG4gICAgICAgIGlzT3BlbjogdHJ1ZSxcbiAgICAgICAgcHJvbW90aW9uUGllY2U6IFwiRGFtZVwiLFxuICAgICAgICBtb3ZlRGVzY3JpcHRpb246IFwiZTg9UStcIixcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgTk9UIGF1dG8tY29tcGxldGUgaWYgcHJvbW90aW9uIGxlYWRzIHRvIGRyYXcgcG9zaXRpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZSAtIFNhbWUgcG9zaXRpb24gYnV0IHRhYmxlYmFzZSByZXR1cm5zIGRyYXdcbiAgICAgIGNvbnN0IG1vdmVCZWZvcmVQcm9tb3Rpb24gPSB7IGZyb206IFwiZTdcIiwgdG86IFwiZThcIiwgcHJvbW90aW9uOiBcInFcIiB9O1xuICAgICAgY29uc3QgZmVuQWZ0ZXJQcm9tb3Rpb24gPSBcIjRRMy84LzgvOC84LzgvOC80azMgYiAtIC0gMCAxXCI7XG5cbiAgICAgIChjaGVzc1NlcnZpY2UudmFsaWRhdGVNb3ZlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgICAgKGNoZXNzU2VydmljZS5tb3ZlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2FuOiBcImU4PVFcIixcbiAgICAgICAgY29sb3I6IFwid1wiLFxuICAgICAgICBwcm9tb3Rpb246IFwicVwiLFxuICAgICAgfSk7XG4gICAgICAoY2hlc3NTZXJ2aWNlLmdldEZlbiBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKFwiNGszLzRQMy84LzgvOC84LzgvNEszIHcgLSAtIDAgMVwiKVxuICAgICAgICAubW9ja1JldHVyblZhbHVlKGZlbkFmdGVyUHJvbW90aW9uKTtcbiAgICAgIChjaGVzc1NlcnZpY2UuaXNHYW1lT3ZlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG5cbiAgICAgIC8vIE1vY2sgdGFibGViYXNlIHJldHVybnMgZHJhdyAoV0RMID0gMClcbiAgICAgICh0YWJsZWJhc2VTZXJ2aWNlLmdldEV2YWx1YXRpb24gYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlzQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICB3ZGw6IDAsIC8vIERyYXdcbiAgICAgICAgICBkdHo6IG51bGwsXG4gICAgICAgICAgZHRtOiBudWxsLFxuICAgICAgICAgIGNhdGVnb3J5OiBcImRyYXdcIixcbiAgICAgICAgICBwcmVjaXNlOiB0cnVlLFxuICAgICAgICAgIGV2YWx1YXRpb246IFwiRHJhd24gcG9zaXRpb25cIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IGhhbmRsZVBsYXllck1vdmUobW9ja0FwaSwgbW92ZUJlZm9yZVByb21vdGlvbik7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGhhbmRsZVRyYWluaW5nQ29tcGxldGlvbikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIE5PVCBhdXRvLWNvbXBsZXRlIG9uIHJvb2sgcHJvbW90aW9uIHRoYXQgbGVhZHMgdG8gZHJhd1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlIC0gUm9vayBwcm9tb3Rpb24gdGhhdCBkb2Vzbid0IHdpblxuICAgICAgY29uc3QgbW92ZUJlZm9yZVByb21vdGlvbiA9IHsgZnJvbTogXCJlN1wiLCB0bzogXCJlOFwiLCBwcm9tb3Rpb246IFwiclwiIH07XG5cbiAgICAgIChjaGVzc1NlcnZpY2UudmFsaWRhdGVNb3ZlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgICAgKGNoZXNzU2VydmljZS5tb3ZlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2FuOiBcImU4PVJcIixcbiAgICAgICAgY29sb3I6IFwid1wiLFxuICAgICAgICBwcm9tb3Rpb246IFwiclwiLCAvLyBSb29rXG4gICAgICB9KTtcbiAgICAgIChjaGVzc1NlcnZpY2UuZ2V0RmVuIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2UoXCI0azMvNFAzLzgvOC84LzgvOC80SzMgdyAtIC0gMCAxXCIpXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWUoXCI0UjMvOC84LzgvOC84LzgvNGszIGIgLSAtIDAgMVwiKTtcbiAgICAgIChjaGVzc1NlcnZpY2UuaXNHYW1lT3ZlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG5cbiAgICAgIC8vIE1vY2sgdGFibGViYXNlIHJldHVybnMgZHJhdyBmb3Igcm9vayBwcm9tb3Rpb25cbiAgICAgICh0YWJsZWJhc2VTZXJ2aWNlLmdldEV2YWx1YXRpb24gYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlzQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICByZXN1bHQ6IHtcbiAgICAgICAgICB3ZGw6IDAsIC8vIERyYXdcbiAgICAgICAgICBkdHo6IG51bGwsXG4gICAgICAgICAgZHRtOiBudWxsLFxuICAgICAgICAgIGNhdGVnb3J5OiBcImRyYXdcIixcbiAgICAgICAgICBwcmVjaXNlOiB0cnVlLFxuICAgICAgICAgIGV2YWx1YXRpb246IFwiRHJhd24gcG9zaXRpb25cIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IGhhbmRsZVBsYXllck1vdmUobW9ja0FwaSwgbW92ZUJlZm9yZVByb21vdGlvbik7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHRhYmxlYmFzZVNlcnZpY2UuZ2V0RXZhbHVhdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KGhhbmRsZVRyYWluaW5nQ29tcGxldGlvbikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGF1dG8tY29tcGxldGUgb24gcm9vayBwcm9tb3Rpb24gdGhhdCBsZWFkcyB0byB3aW5cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZSAtIFJvb2sgcHJvbW90aW9uIHRoYXQgd2luc1xuICAgICAgY29uc3QgbW92ZUJlZm9yZVByb21vdGlvbiA9IHsgZnJvbTogXCJlN1wiLCB0bzogXCJlOFwiLCBwcm9tb3Rpb246IFwiclwiIH07XG5cbiAgICAgIChjaGVzc1NlcnZpY2UudmFsaWRhdGVNb3ZlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHRydWUpO1xuICAgICAgKGNoZXNzU2VydmljZS5tb3ZlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2FuOiBcImU4PVJcIixcbiAgICAgICAgY29sb3I6IFwid1wiLFxuICAgICAgICBwcm9tb3Rpb246IFwiclwiLFxuICAgICAgICBmcm9tOiBcImU3XCIsXG4gICAgICAgIHRvOiBcImU4XCIsXG4gICAgICAgIGZsYWdzOiBcInBcIiwgLy8gUHJvbW90aW9uIGZsYWcgcmVxdWlyZWQgYnkgY2hlY2tQcm9tb3Rpb24gbWV0aG9kXG4gICAgICAgIHBpZWNlOiBcInBcIiwgLy8gUGF3biBwaWVjZVxuICAgICAgfSk7XG4gICAgICAoY2hlc3NTZXJ2aWNlLmdldEZlbiBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKFwiNGszLzRQMy84LzgvOC84LzgvNEszIHcgLSAtIDAgMVwiKVxuICAgICAgICAubW9ja1JldHVyblZhbHVlKFwiNFIzLzgvOC84LzgvOC84LzRrMyBiIC0gLSAwIDFcIik7XG4gICAgICAoY2hlc3NTZXJ2aWNlLmlzR2FtZU92ZXIgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpO1xuXG4gICAgICAvLyBNb2NrIHRhYmxlYmFzZSByZXR1cm5zIHdpbiBmb3Igcm9vayBwcm9tb3Rpb24gLSBXREwgZnJvbSB3aGl0ZSdzIHBlcnNwZWN0aXZlXG4gICAgICAodGFibGViYXNlU2VydmljZS5nZXRFdmFsdWF0aW9uIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBpc0F2YWlsYWJsZTogdHJ1ZSxcbiAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgd2RsOiAyLCAvLyBXaGl0ZSB3aW5zIChwb3NpdGl2ZSA9IGdvb2QgZm9yIHdoaXRlKVxuICAgICAgICAgIGR0ejogMyxcbiAgICAgICAgICBkdG06IDMsXG4gICAgICAgICAgY2F0ZWdvcnk6IFwibWF0ZVwiLFxuICAgICAgICAgIHByZWNpc2U6IHRydWUsXG4gICAgICAgICAgZXZhbHVhdGlvbjogXCJXaGl0ZSBpcyB3aW5uaW5nXCIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gTW9jayBnZXRUb3BNb3ZlcyBmb3IgbW92ZSBxdWFsaXR5IGV2YWx1YXRpb25cbiAgICAgICh0YWJsZWJhc2VTZXJ2aWNlLmdldFRvcE1vdmVzIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBpc0F2YWlsYWJsZTogZmFsc2UsXG4gICAgICAgIG1vdmVzOiBbXSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZVBsYXllck1vdmUobW9ja0FwaSwgbW92ZUJlZm9yZVByb21vdGlvbik7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjaGVzc1NlcnZpY2UubW92ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgobW92ZUJlZm9yZVByb21vdGlvbik7XG4gICAgICBleHBlY3QoaGFuZGxlVHJhaW5pbmdDb21wbGV0aW9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrQXBpLCB0cnVlKTtcblxuICAgICAgLy8gQ2hlY2sgdGhhdCBzdWNjZXNzIGRpYWxvZyB3YXMgc2V0IChub3QgdG9hc3QgYW55bW9yZSlcbiAgICAgIGV4cGVjdChtb2NrQXBpLnNldFN0YXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1N0YXRlLnRyYWluaW5nLm1vdmVTdWNjZXNzRGlhbG9nKS50b0VxdWFsKHtcbiAgICAgICAgaXNPcGVuOiB0cnVlLFxuICAgICAgICBwcm9tb3Rpb25QaWVjZTogXCJUdXJtXCIsXG4gICAgICAgIG1vdmVEZXNjcmlwdGlvbjogXCJlOD1SXCIsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic2hvdWxkIGhhbmRsZSBibGFjayBwYXduIHByb21vdGlvbiBjb3JyZWN0bHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZSAtIEJsYWNrIHByb21vdGVzIG9uIGUxXG4gICAgICBtb2NrU3RhdGUudHJhaW5pbmcuY3VycmVudFBvc2l0aW9uLmNvbG9yVG9UcmFpbiA9IFwiYmxhY2tcIjtcbiAgICAgIGNvbnN0IG1vdmVCZWZvcmVQcm9tb3Rpb24gPSB7IGZyb206IFwiZTJcIiwgdG86IFwiZTFcIiwgcHJvbW90aW9uOiBcInFcIiB9O1xuICAgICAgY29uc3QgZmVuQWZ0ZXJQcm9tb3Rpb24gPSBcIjgvOC84LzgvOC84LzgvNHEzIHcgLSAtIDAgMVwiO1xuXG4gICAgICAoY2hlc3NTZXJ2aWNlLnZhbGlkYXRlTW92ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAgIChjaGVzc1NlcnZpY2UubW92ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNhbjogXCJlMT1RXCIsXG4gICAgICAgIGNvbG9yOiBcImJcIixcbiAgICAgICAgcHJvbW90aW9uOiBcInFcIixcbiAgICAgICAgZnJvbTogXCJlMlwiLFxuICAgICAgICB0bzogXCJlMVwiLFxuICAgICAgICBmbGFnczogXCJwXCIsIC8vIFByb21vdGlvbiBmbGFnIHJlcXVpcmVkIGJ5IGNoZWNrUHJvbW90aW9uIG1ldGhvZFxuICAgICAgICBwaWVjZTogXCJwXCIsIC8vIFBhd24gcGllY2VcbiAgICAgIH0pO1xuICAgICAgKGNoZXNzU2VydmljZS5nZXRGZW4gYXMgamVzdC5Nb2NrKVxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZShcIjgvOC84LzgvOC84LzRwMy84IGIgLSAtIDAgMVwiKVxuICAgICAgICAubW9ja1JldHVyblZhbHVlKGZlbkFmdGVyUHJvbW90aW9uKTtcbiAgICAgIChjaGVzc1NlcnZpY2UuaXNHYW1lT3ZlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XG5cbiAgICAgIC8vIE1vY2sgdGFibGViYXNlIC0gZm9yIGJsYWNrIHRyYWluaW5nLCBjaGVjayBXREwgZnJvbSB3aGl0ZSdzIHBlcnNwZWN0aXZlXG4gICAgICAvLyBXREwgPSAtMiBtZWFucyB3aGl0ZSBsb3NlcyA9IGJsYWNrIHdpbnMgKHRyYWluaW5nIHN1Y2Nlc3MpXG4gICAgICAodGFibGViYXNlU2VydmljZS5nZXRFdmFsdWF0aW9uIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBpc0F2YWlsYWJsZTogdHJ1ZSxcbiAgICAgICAgcmVzdWx0OiB7XG4gICAgICAgICAgd2RsOiAtMiwgLy8gV2hpdGUgbG9zZXMgPSBibGFjayB3aW5zXG4gICAgICAgICAgZHR6OiA1LFxuICAgICAgICAgIGR0bTogNSxcbiAgICAgICAgICBjYXRlZ29yeTogXCJtYXRlXCIsXG4gICAgICAgICAgcHJlY2lzZTogdHJ1ZSxcbiAgICAgICAgICBldmFsdWF0aW9uOiBcIkJsYWNrIGlzIHdpbm5pbmdcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIGdldFRvcE1vdmVzIGZvciBtb3ZlIHF1YWxpdHkgZXZhbHVhdGlvblxuICAgICAgKHRhYmxlYmFzZVNlcnZpY2UuZ2V0VG9wTW92ZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlzQXZhaWxhYmxlOiBmYWxzZSxcbiAgICAgICAgbW92ZXM6IFtdLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGFuZGxlUGxheWVyTW92ZShtb2NrQXBpLCBtb3ZlQmVmb3JlUHJvbW90aW9uKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNoZXNzU2VydmljZS5tb3ZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb3ZlQmVmb3JlUHJvbW90aW9uKTtcbiAgICAgIGV4cGVjdChoYW5kbGVUcmFpbmluZ0NvbXBsZXRpb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tBcGksIHRydWUpO1xuXG4gICAgICAvLyBDaGVjayB0aGF0IHN1Y2Nlc3MgZGlhbG9nIHdhcyBzZXQgKG5vdCB0b2FzdCBhbnltb3JlKVxuICAgICAgZXhwZWN0KG1vY2tBcGkuc2V0U3RhdGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrU3RhdGUudHJhaW5pbmcubW92ZVN1Y2Nlc3NEaWFsb2cpLnRvRXF1YWwoe1xuICAgICAgICBpc09wZW46IHRydWUsXG4gICAgICAgIHByb21vdGlvblBpZWNlOiBcIkRhbWVcIixcbiAgICAgICAgbW92ZURlc2NyaXB0aW9uOiBcImUxPVFcIixcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzaG91bGQgY29udGludWUgbm9ybWFsIGZsb3cgaWYgdGFibGViYXNlIGlzIHVuYXZhaWxhYmxlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vdmVCZWZvcmVQcm9tb3Rpb24gPSB7IGZyb206IFwiZTdcIiwgdG86IFwiZThcIiwgcHJvbW90aW9uOiBcInFcIiB9O1xuXG4gICAgICAoY2hlc3NTZXJ2aWNlLnZhbGlkYXRlTW92ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAgIChjaGVzc1NlcnZpY2UubW92ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNhbjogXCJlOD1RXCIsXG4gICAgICAgIGNvbG9yOiBcIndcIixcbiAgICAgICAgcHJvbW90aW9uOiBcInFcIixcbiAgICAgIH0pO1xuICAgICAgKGNoZXNzU2VydmljZS5nZXRGZW4gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoXG4gICAgICAgIFwiNFEzLzgvOC84LzgvOC84LzRrMyBiIC0gLSAwIDFcIixcbiAgICAgICk7XG4gICAgICAoY2hlc3NTZXJ2aWNlLmlzR2FtZU92ZXIgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpO1xuXG4gICAgICAvLyBUYWJsZWJhc2UgdW5hdmFpbGFibGVcbiAgICAgICh0YWJsZWJhc2VTZXJ2aWNlLmdldEV2YWx1YXRpb24gYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlzQXZhaWxhYmxlOiBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IGhhbmRsZVBsYXllck1vdmUobW9ja0FwaSwgbW92ZUJlZm9yZVByb21vdGlvbik7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KGhhbmRsZVRyYWluaW5nQ29tcGxldGlvbikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIC8vIFNob3VsZCBjb250aW51ZSB3aXRoIG5vcm1hbCBmbG93XG4gICAgfSk7XG5cbiAgICBpdChcInNob3VsZCBoYW5kbGUgdGFibGViYXNlIGVycm9ycyBncmFjZWZ1bGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vdmVCZWZvcmVQcm9tb3Rpb24gPSB7IGZyb206IFwiZTdcIiwgdG86IFwiZThcIiwgcHJvbW90aW9uOiBcInFcIiB9O1xuXG4gICAgICAoY2hlc3NTZXJ2aWNlLnZhbGlkYXRlTW92ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKTtcbiAgICAgIChjaGVzc1NlcnZpY2UubW92ZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNhbjogXCJlOD1RXCIsXG4gICAgICAgIGNvbG9yOiBcIndcIixcbiAgICAgICAgcHJvbW90aW9uOiBcInFcIixcbiAgICAgIH0pO1xuICAgICAgKGNoZXNzU2VydmljZS5nZXRGZW4gYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoXG4gICAgICAgIFwiNFEzLzgvOC84LzgvOC84LzRrMyBiIC0gLSAwIDFcIixcbiAgICAgICk7XG4gICAgICAoY2hlc3NTZXJ2aWNlLmlzR2FtZU92ZXIgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpO1xuXG4gICAgICAvLyBUYWJsZWJhc2UgdGhyb3dzIGVycm9yXG4gICAgICAodGFibGViYXNlU2VydmljZS5nZXRFdmFsdWF0aW9uIGFzIGplc3QuTW9jaykubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcihcIk5ldHdvcmsgZXJyb3JcIiksXG4gICAgICApO1xuXG4gICAgICAvLyBBY3QgLSBTaG91bGQgbm90IHRocm93XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGVQbGF5ZXJNb3ZlKG1vY2tBcGksIG1vdmVCZWZvcmVQcm9tb3Rpb24pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7IC8vIE1vdmUgc3VjY2VlZHMgZGVzcGl0ZSB0YWJsZWJhc2UgZXJyb3JcbiAgICAgIGV4cGVjdChoYW5kbGVUcmFpbmluZ0NvbXBsZXRpb24pLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJjaGVzc1NlcnZpY2UiLCJ2YWxpZGF0ZU1vdmUiLCJmbiIsIm1vdmUiLCJnZXRGZW4iLCJpc0dhbWVPdmVyIiwidHVybiIsInRhYmxlYmFzZVNlcnZpY2UiLCJnZXRFdmFsdWF0aW9uIiwiZ2V0VG9wTW92ZXMiLCJkZXNjcmliZSIsIm1vY2tBcGkiLCJtb2NrU3RhdGUiLCJiZWZvcmVFYWNoIiwidHJhaW5pbmciLCJpc1BsYXllclR1cm4iLCJpc09wcG9uZW50VGhpbmtpbmciLCJjdXJyZW50UG9zaXRpb24iLCJjb2xvclRvVHJhaW4iLCJ1aSIsImxvYWRpbmciLCJwb3NpdGlvbiIsInRvYXN0cyIsImdldFN0YXRlIiwic2V0U3RhdGUiLCJjYWxsYmFjayIsImNsZWFyQWxsTW9ja3MiLCJpdCIsIm1vdmVCZWZvcmVQcm9tb3Rpb24iLCJmcm9tIiwidG8iLCJwcm9tb3Rpb24iLCJmZW5BZnRlclByb21vdGlvbiIsIm1vY2tSZXR1cm5WYWx1ZSIsInNhbiIsImNvbG9yIiwiZmxhZ3MiLCJwaWVjZSIsIm1vY2tSZXR1cm5WYWx1ZU9uY2UiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImlzQXZhaWxhYmxlIiwicmVzdWx0Iiwid2RsIiwiZHR6IiwiZHRtIiwiY2F0ZWdvcnkiLCJwcmVjaXNlIiwiZXZhbHVhdGlvbiIsIm1vdmVzIiwiaGFuZGxlUGxheWVyTW92ZSIsImV4cGVjdCIsInRvQmUiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImhhbmRsZVRyYWluaW5nQ29tcGxldGlvbiIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtb3ZlU3VjY2Vzc0RpYWxvZyIsInRvRXF1YWwiLCJpc09wZW4iLCJwcm9tb3Rpb25QaWVjZSIsIm1vdmVEZXNjcmlwdGlvbiIsIm5vdCIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBOzs7Q0FHQztBQVFELGdCQUFnQjtBQUNoQkEsS0FBS0MsSUFBSSxDQUFDLGlDQUFpQyxJQUFPLENBQUE7UUFDaERDLGNBQWM7WUFDWkMsY0FBY0gsS0FBS0ksRUFBRTtZQUNyQkMsTUFBTUwsS0FBS0ksRUFBRTtZQUNiRSxRQUFRTixLQUFLSSxFQUFFO1lBQ2ZHLFlBQVlQLEtBQUtJLEVBQUU7WUFDbkJJLE1BQU1SLEtBQUtJLEVBQUU7UUFDZjtJQUNGLENBQUE7QUFFQUos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