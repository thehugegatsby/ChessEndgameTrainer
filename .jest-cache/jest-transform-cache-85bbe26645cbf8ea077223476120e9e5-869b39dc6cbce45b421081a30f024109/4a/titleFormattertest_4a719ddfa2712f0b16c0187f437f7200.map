{"version":3,"sources":["/home/thehu/coolProjects/EndgameTrainer-training-board-complete/src/tests/unit/utils/titleFormatter.test.ts"],"sourcesContent":["/**\n * Tests for title formatting utilities\n */\n\nimport {\n  formatPositionTitle,\n  getShortTitle,\n  getTrainingDisplayTitle,\n} from \"@shared/utils/titleFormatter\";\nimport { EndgamePosition } from \"@shared/types\";\n\ndescribe(\"titleFormatter\", () => {\n  const brückenbauPosition: EndgamePosition = {\n    id: 12,\n    title: \"Brückenbau\",\n    description: \"Build a bridge for your rook\",\n    fen: \"1K6/1P6/8/8/8/8/r7/1k6 b - - 0 1\",\n    category: \"rook-pawn\",\n    difficulty: \"advanced\",\n    targetMoves: 5,\n    hints: [\"Create a bridge with your rook\"],\n    solution: [\"Ra2-a8+\", \"Kb8-c7\", \"Ra8-a7\", \"Kb1-b2\", \"Ra7-b7\"],\n    sideToMove: \"black\",\n    goal: \"draw\",\n  };\n\n  const regularPosition: EndgamePosition = {\n    id: 1,\n    title: \"King and Pawn vs King\",\n    description: \"Basic endgame technique\",\n    fen: \"8/8/8/4k3/4P3/4K3/8/8 w - - 0 1\",\n    category: \"basic-checkmates\",\n    difficulty: \"beginner\",\n    targetMoves: 3,\n    hints: [\"Use opposition\"],\n    solution: [\"Ke4\", \"Kf6\", \"e5+\"],\n    sideToMove: \"white\",\n    goal: \"win\",\n  };\n\n  describe(\"formatPositionTitle\", () => {\n    it(\"formats Brückenbau titles with position number\", () => {\n      const result = formatPositionTitle(brückenbauPosition);\n      expect(result).toBe(\"Brückenbau 12\");\n    });\n\n    it(\"formats Brückenbau titles with total positions\", () => {\n      const result = formatPositionTitle(brückenbauPosition, 20);\n      expect(result).toBe(\"Brückenbau 12/20\");\n    });\n\n    it(\"returns original title for regular positions\", () => {\n      const result = formatPositionTitle(regularPosition);\n      expect(result).toBe(\"King and Pawn vs King\");\n    });\n\n    it(\"handles case-insensitive Brückenbau detection\", () => {\n      const position = { ...brückenbauPosition, title: \"brückenbau technique\" };\n      const result = formatPositionTitle(position);\n      expect(result).toBe(\"Brückenbau 12\");\n    });\n\n    it(\"handles rook-pawn category with Brückenbau title\", () => {\n      const position = {\n        ...brückenbauPosition,\n        category: \"rook-pawn\" as const,\n      };\n      const result = formatPositionTitle(position, 15);\n      expect(result).toBe(\"Brückenbau 12/15\");\n    });\n  });\n\n  describe(\"getShortTitle\", () => {\n    it(\"keeps Brückenbau titles as-is since they are already short\", () => {\n      const result = getShortTitle(brückenbauPosition);\n      expect(result).toBe(\"Brückenbau 12\");\n    });\n\n    it(\"returns regular titles as-is if short enough\", () => {\n      const result = getShortTitle(regularPosition);\n      expect(result).toBe(\"King and Pawn vs King\");\n    });\n\n    it(\"truncates very long titles\", () => {\n      const longTitlePosition = {\n        ...regularPosition,\n        title:\n          \"This is a very long title that should be truncated for display purposes\",\n      };\n      const result = getShortTitle(longTitlePosition);\n      expect(result).toBe(\"This is a very long title t...\");\n      expect(result.length).toBeLessThanOrEqual(30);\n    });\n  });\n\n  describe(\"getTrainingDisplayTitle\", () => {\n    it(\"returns basic title for new sessions\", () => {\n      const result = getTrainingDisplayTitle(brückenbauPosition);\n      expect(result).toBe(\"Brückenbau 12\");\n    });\n\n    it(\"does not add move progress indicator anymore\", () => {\n      const result = getTrainingDisplayTitle(brückenbauPosition, 8);\n      expect(result).toBe(\"Brückenbau 12\");\n    });\n\n    it(\"does not add progress indicator for short sessions\", () => {\n      const result = getTrainingDisplayTitle(brückenbauPosition, 3);\n      expect(result).toBe(\"Brückenbau 12\");\n    });\n\n    it(\"includes total positions when provided\", () => {\n      const result = getTrainingDisplayTitle(brückenbauPosition, 2, 20);\n      expect(result).toBe(\"Brückenbau 12/20\");\n    });\n\n    it(\"shows only position info without move indicator\", () => {\n      const result = getTrainingDisplayTitle(brückenbauPosition, 10, 20);\n      expect(result).toBe(\"Brückenbau 12/20\");\n    });\n  });\n});\n"],"names":["describe","brückenbauPosition","id","title","description","fen","category","difficulty","targetMoves","hints","solution","sideToMove","goal","regularPosition","it","result","formatPositionTitle","expect","toBe","position","getShortTitle","longTitlePosition","length","toBeLessThanOrEqual","getTrainingDisplayTitle"],"mappings":"AAAA;;CAEC;;;;gCAMM;AAGPA,SAAS,kBAAkB;IACzB,MAAMC,qBAAsC;QAC1CC,IAAI;QACJC,OAAO;QACPC,aAAa;QACbC,KAAK;QACLC,UAAU;QACVC,YAAY;QACZC,aAAa;QACbC,OAAO;YAAC;SAAiC;QACzCC,UAAU;YAAC;YAAW;YAAU;YAAU;YAAU;SAAS;QAC7DC,YAAY;QACZC,MAAM;IACR;IAEA,MAAMC,kBAAmC;QACvCX,IAAI;QACJC,OAAO;QACPC,aAAa;QACbC,KAAK;QACLC,UAAU;QACVC,YAAY;QACZC,aAAa;QACbC,OAAO;YAAC;SAAiB;QACzBC,UAAU;YAAC;YAAO;YAAO;SAAM;QAC/BC,YAAY;QACZC,MAAM;IACR;IAEAZ,SAAS,uBAAuB;QAC9Bc,GAAG,kDAAkD;YACnD,MAAMC,SAASC,IAAAA,mCAAmB,EAACf;YACnCgB,OAAOF,QAAQG,IAAI,CAAC;QACtB;QAEAJ,GAAG,kDAAkD;YACnD,MAAMC,SAASC,IAAAA,mCAAmB,EAACf,oBAAoB;YACvDgB,OAAOF,QAAQG,IAAI,CAAC;QACtB;QAEAJ,GAAG,gDAAgD;YACjD,MAAMC,SAASC,IAAAA,mCAAmB,EAACH;YACnCI,OAAOF,QAAQG,IAAI,CAAC;QACtB;QAEAJ,GAAG,iDAAiD;YAClD,MAAMK,WAAW;gBAAE,GAAGlB,kBAAkB;gBAAEE,OAAO;YAAuB;YACxE,MAAMY,SAASC,IAAAA,mCAAmB,EAACG;YACnCF,OAAOF,QAAQG,IAAI,CAAC;QACtB;QAEAJ,GAAG,oDAAoD;YACrD,MAAMK,WAAW;gBACf,GAAGlB,kBAAkB;gBACrBK,UAAU;YACZ;YACA,MAAMS,SAASC,IAAAA,mCAAmB,EAACG,UAAU;YAC7CF,OAAOF,QAAQG,IAAI,CAAC;QACtB;IACF;IAEAlB,SAAS,iBAAiB;QACxBc,GAAG,8DAA8D;YAC/D,MAAMC,SAASK,IAAAA,6BAAa,EAACnB;YAC7BgB,OAAOF,QAAQG,IAAI,CAAC;QACtB;QAEAJ,GAAG,gDAAgD;YACjD,MAAMC,SAASK,IAAAA,6BAAa,EAACP;YAC7BI,OAAOF,QAAQG,IAAI,CAAC;QACtB;QAEAJ,GAAG,8BAA8B;YAC/B,MAAMO,oBAAoB;gBACxB,GAAGR,eAAe;gBAClBV,OACE;YACJ;YACA,MAAMY,SAASK,IAAAA,6BAAa,EAACC;YAC7BJ,OAAOF,QAAQG,IAAI,CAAC;YACpBD,OAAOF,OAAOO,MAAM,EAAEC,mBAAmB,CAAC;QAC5C;IACF;IAEAvB,SAAS,2BAA2B;QAClCc,GAAG,wCAAwC;YACzC,MAAMC,SAASS,IAAAA,uCAAuB,EAACvB;YACvCgB,OAAOF,QAAQG,IAAI,CAAC;QACtB;QAEAJ,GAAG,gDAAgD;YACjD,MAAMC,SAASS,IAAAA,uCAAuB,EAACvB,oBAAoB;YAC3DgB,OAAOF,QAAQG,IAAI,CAAC;QACtB;QAEAJ,GAAG,sDAAsD;YACvD,MAAMC,SAASS,IAAAA,uCAAuB,EAACvB,oBAAoB;YAC3DgB,OAAOF,QAAQG,IAAI,CAAC;QACtB;QAEAJ,GAAG,0CAA0C;YAC3C,MAAMC,SAASS,IAAAA,uCAAuB,EAACvB,oBAAoB,GAAG;YAC9DgB,OAAOF,QAAQG,IAAI,CAAC;QACtB;QAEAJ,GAAG,mDAAmD;YACpD,MAAMC,SAASS,IAAAA,uCAAuB,EAACvB,oBAAoB,IAAI;YAC/DgB,OAAOF,QAAQG,IAAI,CAAC;QACtB;IACF;AACF"}