echo "ğŸš€ Running pre-commit hooks..."

# Run lint-staged on staged files
echo "ğŸ“ Running lint-staged (format, lint, test related)..."
npx lint-staged
LINT_STAGED_EXIT_CODE=$?

if [ $LINT_STAGED_EXIT_CODE -ne 0 ]; then
  echo "âŒ lint-staged failed. Aborting commit."
  exit 1
fi

# Run type check on the whole project
echo "ğŸ” Running TypeScript type check..."
npm run type-check
TSC_EXIT_CODE=$?

if [ $TSC_EXIT_CODE -ne 0 ]; then
  echo "âŒ TypeScript check failed. Aborting commit."
  exit 1
fi

echo "âœ… Pre-commit hooks passed!"
exit 0